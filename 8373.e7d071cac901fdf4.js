"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8373],{85838:(ae,Q,a)=>{a.d(Q,{A:()=>n});const n=(0,a(47423).fo)("Device",{web:()=>a.e(5356).then(a.bind(a,15356)).then(x=>new x.DeviceWeb)})},98373:(ae,Q,a)=>{a.d(Q,{L:()=>J});var u=a(70655),n=a(98274),x=a(36895),c=a(24006),v=a(48058),re=a(77604),ce=a(9764),K=a(51740),z=a(10805);function le(l,e){if(1&l){const t=n.EpF();n.TgZ(0,"span",5),n.NdJ("click",function(i){n.CHM(t);const s=n.oxw(2);return n.KtG(s.clear(i))})("keydown.enter",function(i){n.CHM(t);const s=n.oxw(2);return n.KtG(s.clear(i))}),n.qZA()}if(2&l){const t=n.oxw(2);n.Q6J("ngClass",t.iconCancelClass)("ngStyle",t.iconCancelStyle),n.uIk("tabindex",t.disabled||t.readonly?null:"0")}}function de(l,e){if(1&l){const t=n.EpF();n.TgZ(0,"span",6),n.NdJ("click",function(i){const r=n.CHM(t).index,d=n.oxw(2);return n.KtG(d.rate(i,r))})("keydown.enter",function(i){const r=n.CHM(t).index,d=n.oxw(2);return n.KtG(d.rate(i,r))}),n.qZA()}if(2&l){const t=e.index,o=n.oxw(2);n.Q6J("ngClass",!o.value||t>=o.value?o.iconOffClass:o.iconOnClass)("ngStyle",!o.value||t>=o.value?o.iconOffStyle:o.iconOnStyle),n.uIk("tabindex",o.disabled||o.readonly?null:"0")}}function pe(l,e){if(1&l&&(n.ynx(0),n.YNc(1,le,1,3,"span",3),n.YNc(2,de,1,3,"span",4),n.BQk()),2&l){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",t.cancel),n.xp6(1),n.Q6J("ngForOf",t.starsArray)}}function ue(l,e){1&l&&n.GkF(0)}function me(l,e){if(1&l){const t=n.EpF();n.TgZ(0,"span",9),n.NdJ("click",function(i){n.CHM(t);const s=n.oxw(2);return n.KtG(s.clear(i))})("keydown.enter",function(i){n.CHM(t);const s=n.oxw(2);return n.KtG(s.clear(i))}),n.YNc(1,ue,1,0,"ng-container",10),n.qZA()}if(2&l){const t=n.oxw(2);n.Q6J("ngStyle",t.iconCancelStyle),n.uIk("tabindex",t.disabled||t.readonly?null:"0"),n.xp6(1),n.Q6J("ngTemplateOutlet",t.cancelIconTemplate)}}function fe(l,e){1&l&&n.GkF(0)}function ve(l,e){if(1&l){const t=n.EpF();n.TgZ(0,"span",11),n.NdJ("click",function(i){const r=n.CHM(t).index,d=n.oxw(2);return n.KtG(d.rate(i,r))})("keydown.enter",function(i){const r=n.CHM(t).index,d=n.oxw(2);return n.KtG(d.rate(i,r))}),n.YNc(1,fe,1,0,"ng-container",10),n.qZA()}if(2&l){const t=e.index,o=n.oxw(2);n.uIk("tabindex",o.disabled||o.readonly?null:"0"),n.xp6(1),n.Q6J("ngTemplateOutlet",o.getIconTemplate(t))}}function ge(l,e){if(1&l&&(n.YNc(0,me,2,3,"span",7),n.YNc(1,ve,2,2,"span",8)),2&l){const t=n.oxw();n.Q6J("ngIf",t.cancel),n.xp6(1),n.Q6J("ngForOf",t.starsArray)}}const he=function(l,e){return{"p-readonly":l,"p-disabled":e}},be={provide:c.JU,useExisting:(0,n.Gpc)(()=>S),multi:!0};class S{constructor(e){this.cd=e,this.isCustomCancelIcon=!0,this.stars=5,this.cancel=!0,this.iconOnClass="pi pi-star-fill",this.iconOffClass="pi pi-star",this.iconCancelClass="pi pi-ban",this.onRate=new n.vpe,this.onCancel=new n.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.starsArray=[];for(let e=0;e<this.stars;e++)this.starsArray[e]=e}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"onicon":this.onIconTemplate=e.template;break;case"officon":this.offIconTemplate=e.template;break;case"cancel":this.cancelIconTemplate=e.template}})}getIconTemplate(e){return!this.value||e>=this.value?this.offIconTemplate:this.onIconTemplate}rate(e,t){!this.readonly&&!this.disabled&&(this.value=t+1,this.onModelChange(this.value),this.onModelTouched(),this.onRate.emit({originalEvent:e,value:t+1})),e.preventDefault()}clear(e){!this.readonly&&!this.disabled&&(this.value=null,this.onModelChange(this.value),this.onModelTouched(),this.onCancel.emit(e)),e.preventDefault()}writeValue(e){this.value=e,this.cd.detectChanges()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get isCustomIcon(){return this.templates&&this.templates.length>0}}S.\u0275fac=function(e){return new(e||S)(n.Y36(n.sBO))},S.\u0275cmp=n.Xpm({type:S,selectors:[["p-rating"]],contentQueries:function(e,t,o){if(1&e&&n.Suo(o,z.jx,4),2&e){let i;n.iGM(i=n.CRH())&&(t.templates=i)}},hostAttrs:[1,"p-element"],inputs:{isCustomCancelIcon:"isCustomCancelIcon",index:"index",disabled:"disabled",readonly:"readonly",stars:"stars",cancel:"cancel",iconOnClass:"iconOnClass",iconOnStyle:"iconOnStyle",iconOffClass:"iconOffClass",iconOffStyle:"iconOffStyle",iconCancelClass:"iconCancelClass",iconCancelStyle:"iconCancelStyle"},outputs:{onRate:"onRate",onCancel:"onCancel"},features:[n._Bn([be])],decls:4,vars:6,consts:[[1,"p-rating",3,"ngClass"],[4,"ngIf","ngIfElse"],["customTemplate",""],["class","p-rating-icon p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter",4,"ngIf"],["class","p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter",4,"ngFor","ngForOf"],[1,"p-rating-icon","p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter"],[1,"p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter"],["class","p-rating-icon p-rating-cancel",3,"ngStyle","click","keydown.enter",4,"ngIf"],["class","p-rating-icon",3,"click","keydown.enter",4,"ngFor","ngForOf"],[1,"p-rating-icon","p-rating-cancel",3,"ngStyle","click","keydown.enter"],[4,"ngTemplateOutlet"],[1,"p-rating-icon",3,"click","keydown.enter"]],template:function(e,t){if(1&e&&(n.TgZ(0,"div",0),n.YNc(1,pe,3,2,"ng-container",1),n.YNc(2,ge,2,2,"ng-template",null,2,n.W1O),n.qZA()),2&e){const o=n.MAs(3);n.Q6J("ngClass",n.WLB(3,he,t.readonly,t.disabled)),n.xp6(1),n.Q6J("ngIf",!t.isCustomIcon)("ngIfElse",o)}},dependencies:[x.mk,x.sg,x.O5,x.tP,x.PC],styles:[".p-rating-icon{cursor:pointer;display:inline-flex}.p-rating.p-rating-readonly .p-rating-icon{cursor:default}\n"],encapsulation:2,changeDetection:0});class k{}k.\u0275fac=function(e){return new(e||k)},k.\u0275mod=n.oAB({type:k,declarations:[S],imports:[x.ez],exports:[S,z.m8]}),k.\u0275inj=n.cJS({imports:[x.ez,z.m8]});var xe=a(35593),ye=a(82210),Ce=a(58783),Ie=a(63054),_e=a(92665),Se=a(17456),we=a(1236),Ne=a(73425),je=a(1997),Be=a(23520),Oe=a(17913),ke=a(38433),Te=a(50613),De=a(61989),Le=a(21493),X=a(25047),Ae=a(32137),Re=a(3631),Ee=a(79512),Fe=a(24382),Me=a(91795),Pe=a(99983),qe=a(45132),$e=a(15108),ze=a(68271),Ve=a(28396),Qe=a(21327),Ue=a(2635),h=a(15861);var U=a(85838),b=a(50727),Y=a(80529),C=a(99038),W=a(40199),ee=a(55583);let T=class{constructor(e){this.http=e}list(e,t=new W.k){let o=ee.t.getPageOptionsParams(t);return e&&e.searchedPatrimonio&&(o=o.append("searchedPatrimonio",e.searchedPatrimonio)),e&&e.descricao&&(o=o.append("descricao",e.descricao)),e&&e.nome&&(o=o.append("nome",e.nome)),e&&e.loja_id&&(o=o.append("loja_id",e.loja_id)),e&&e.status_patrimonio&&(o=o.append("status_patrimonio",e.status_patrimonio)),e&&e.valor_patrimonio&&(o=o.append("valor_patrimonio",e.valor_patrimonio)),this.http.get(`${C.Hz.baseURL}/patrimonios`,{params:o})}create(e){return this.http.post(`${C.Hz.baseURL}/patrimonios`,e,{responseType:"json"})}update(e,t){return this.http.put(`${C.Hz.baseURL}/patrimonios/${e}`,t,{responseType:"json"})}associate(e,t){return this.http.patch(`${C.Hz.baseURL}/patrimonios/sync/associar/${e}`,{id_fisico:t},{responseType:"json"})}desassociar(e){return this.http.patch(`${C.Hz.baseURL}/patrimonios/sync/desassociar/${e}`,{responseType:"json"})}};T.ctorParameters=()=>[{type:Y.eN}],T=(0,u.gn)([(0,n.GSi)({providedIn:"root"})],T);var H=a(57118),m=a(59136);let D=class{constructor(e,t,o,i){this.formBuilder=e,this.patrimonioService=t,this.lojaService=o,this.modal=i,this.currentLojasPage=1,this.searchedLoja="",this.subscriptions=new b.w0,this.form=this.formBuilder.group({nome:[,[c.kI.required]],descricao:[,[c.kI.required]],valor_patrimonio:[,[c.kI.required]],loja_id:[,[c.kI.required]],id_fisico:[]})}ngOnInit(){this.loadLojas()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadLojas(e=1,t){const o=this.lojaService.list({searchedLoja:this.searchedLoja},{order:m.L.ASC,page:e,take:10}).subscribe(i=>{this.lojas=i,t&&t.show()});this.subscriptions.add(o)}searchLoja(e){this.loadLojas(1,e)}paginarLojas(e,t){const{first:o,rows:i}=e,s=Number(Number(o)/Number(i)+1);s!=this.currentLojasPage&&(this.currentLojasPage=s,this.loadLojas(s,t))}create(){var e=this;return(0,h.Z)(function*(){const t=e.form.get("nome").value,o=e.form.get("descricao").value,i=e.form.get("valor_patrimonio").value,s=e.form.get("id_fisico").value,r=e.form.get("loja_id").value;let d;s&&(d=(yield U.A.getId()).identifier);const f=e.patrimonioService.create({nome:t,descricao:o,valor_patrimonio:i,id_fisico:d,loja_id:r}).subscribe(g=>{e.fechar(!0,{loja_id:r})});e.subscriptions.add(f)})()}fechar(e=!1,t){this.modal.dismiss(e,t)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}};D.ctorParameters=()=>[{type:c.QS},{type:T},{type:H.W},{type:v.IN}],D=(0,u.gn)([(0,n.wA2)({selector:"app-patrimonio-cadastro",template:'<ion-content appScrollTheme>\n  <form *ngIf="lojas" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n    <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n      <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n      <div class="surface-card p-4 shadow-2 border-round p-fluid">\n        <div class="grid formgrid p-fluid">\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="nome" class="font-medium text-900">Nome</label>\n            <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="valor_patrimonio">Valor do patrim\xf4nio</label>\n            <p-inputNumber inputId="valor_patrimonio" formControlName="valor_patrimonio" mode="decimal"\n              [minFractionDigits]="2" [maxFractionDigits]="2">\n            </p-inputNumber>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'valor_patrimonio\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12">\n            <label for="descricao">Descri\xe7\xe3o</label>\n            <textarea id="descricao" class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n              formControlName="descricao"></textarea>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <div class="flex align-items-center">\n              <p-checkbox  id="id_fisico" formControlName="id_fisico" [binary]="true"></p-checkbox>\n              <label class="ml-2" for="id_fisico">Associar a este dispositivo?</label>\n          </div>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'id_fisico\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n          <div class="field mb-4 col-12 justify-content-start">\n            <label for="loja_id">Loja</label>\n            <span class="p-input-icon-right mb-2 mt-2 w-3">\n              <i class="pi pi-search cursor-pointer text-primary" (click)="searchLoja()"></i>\n              <input type="search" pInputText [(ngModel)]="searchedLoja" [ngModelOptions]="{standalone: true}"\n                placeholder="Nome ou descri\xe7\xe3o" (keyup.enter)="searchLoja(dropdown_loja)">\n            </span>\n            <p-dropdown #dropdown_loja [options]="lojas.data" placeholder="Qual loja ele est\xe1 associado?"\n              formControlName="loja_id" optionLabel="nome" optionValue="id"></p-dropdown>\n            <p-paginator [value]="lojas.data" [paginator]="true" [rows]="lojas.meta.take"\n              [totalRecords]="lojas.meta.itemCount" [pageLinks]="lojas.meta.pageCount"\n              (onPageChange)="paginarLojas($event, dropdown_cargo)">\n            </p-paginator>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'loja_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n        </div>\n        <div class="flex justify-content-end">\n          <button pButton pRipple label="Salvar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n            [disabled]="disableCreateBtn()"></button>\n        </div>\n      </div>\n    </div>\n  </form>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],D);var Ke=a(54692);let w=class{constructor(e,t,o,i){this.formBuilder=e,this.patrimonioService=t,this.lojaService=o,this.modal=i,this.currentLojasPage=1,this.searchedLoja="",this.sortStatus=Ke.Dr,this.subscriptions=new b.w0}ngOnInit(){this.loadLojas();const{nome:e,descricao:t,valor_patrimonio:o,id_fisico:i,loja:s,status_patrimonio:r}=this.patrimonio;this.form=this.formBuilder.group({nome:[e,[c.kI.required]],descricao:[t,[c.kI.required]],valor_patrimonio:[o,[c.kI.required]],status_patrimonio:[r,[c.kI.required]],loja_id:[s.id||void 0,[c.kI.required]],id_fisico:[!!i]})}ngOnDestroy(){this.subscriptions.unsubscribe()}loadLojas(e=1,t){const o=this.lojaService.list({searchedLoja:this.searchedLoja},{order:m.L.ASC,page:e,take:10}).subscribe(i=>{this.lojas=i,t&&t.show()});this.subscriptions.add(o)}searchLoja(e){this.loadLojas(1,e)}paginarLojas(e,t){const{first:o,rows:i}=e,s=Number(Number(o)/Number(i)+1);s!=this.currentLojasPage&&(this.currentLojasPage=s,this.loadLojas(s,t))}update(){var e=this;return(0,h.Z)(function*(){const{id:t}=e.patrimonio,o=e.form.get("nome").value,i=e.form.get("descricao").value,s=Number(e.form.get("valor_patrimonio").value),r=e.form.get("id_fisico").value,d=e.form.get("loja_id").value,f=e.form.get("status_patrimonio").value;let g;r&&(g=(yield U.A.getId()).identifier);const O=e.patrimonioService.update(t,{nome:o,descricao:i,valor_patrimonio:s,id_fisico:g,loja_id:d,status_patrimonio:f}).subscribe(se=>{e.fechar(!0,{loja_id:d})});e.subscriptions.add(O)})()}fechar(e=!1,t){this.modal.dismiss(e,t)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableUpdateBtn(){return!this.form.valid}};w.ctorParameters=()=>[{type:c.QS},{type:T},{type:H.W},{type:v.IN}],w.propDecorators={patrimonio:[{type:n.IIB}]},w=(0,u.gn)([(0,n.wA2)({selector:"app-patrimonio-detail",template:'<ion-content appScrollTheme>\n  <form *ngIf="lojas" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n    <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n      <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n      <div class="surface-card p-4 shadow-2 border-round p-fluid">\n        <div class="grid formgrid p-fluid">\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="nome" class="font-medium text-900">Nome</label>\n            <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="valor_patrimonio">Valor do patrim\xf4nio</label>\n            <p-inputNumber inputId="valor_patrimonio" formControlName="valor_patrimonio" mode="decimal"\n              [minFractionDigits]="2" [maxFractionDigits]="2">\n            </p-inputNumber>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'valor_patrimonio\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12">\n            <label for="descricao">Descri\xe7\xe3o</label>\n            <textarea id="descricao" class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n              formControlName="descricao"></textarea>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <div class="flex align-items-center">\n              <p-checkbox  id="id_fisico" formControlName="id_fisico" [binary]="true"></p-checkbox>\n              <label class="ml-2" for="id_fisico">Associar a este dispositivo?</label>\n          </div>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'id_fisico\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="status_patrimonio">Status</label>\n            <p-dropdown  [options]="sortStatus" placeholder="Status"\n            formControlName="status_patrimonio" optionLabel="nome" optionValue="value"></p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'status_patrimonio\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n          <div class="field mb-4 col-12 justify-content-start">\n            <label for="loja_id">Loja</label>\n            <span class="p-input-icon-right mb-2 mt-2 w-3">\n              <i class="pi pi-search cursor-pointer text-primary" (click)="searchLoja()"></i>\n              <input type="search" pInputText [(ngModel)]="searchedLoja" [ngModelOptions]="{standalone: true}"\n                placeholder="Nome ou descri\xe7\xe3o" (keyup.enter)="searchLoja(dropdown_loja)">\n            </span>\n            <p-dropdown #dropdown_loja [options]="lojas.data" placeholder="Qual loja ele est\xe1 associado?"\n              formControlName="loja_id" optionLabel="nome" optionValue="id"></p-dropdown>\n            <p-paginator [value]="lojas.data" [paginator]="true" [rows]="lojas.meta.take"\n              [totalRecords]="lojas.meta.itemCount" [pageLinks]="lojas.meta.pageCount"\n              (onPageChange)="paginarLojas($event, dropdown_cargo)">\n            </p-paginator>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'loja_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n        </div>\n        <div class="flex justify-content-end">\n          <button pButton pRipple label="Salvar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="update()"\n            [disabled]="disableUpdateBtn()"></button>\n        </div>\n      </div>\n    </div>\n  </form>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],w);var I=a(59256),p=a(98739);let E=class{constructor(e,t,o,i,s){this.patrimonioService=e,this.modal=t,this.confirmationService=o,this.toastService=i,this.lojaService=s,this.sortOptions=[],this.sortLojas=[],this.searchedPatrimonio="",this.selectedLoja="",this.selectedStatus="",this.currentPage=1,this.subscriptions=new b.w0}ngOnInit(){var e=this;return(0,h.Z)(function*(){e.idFisicoDispositivo=yield e.getCurrentIdFisico(),e.loadLoja(),e.loadPatrimonios()})()}ngOnDestroy(){this.subscriptions.unsubscribe()}changeLoja({value:e}){this.selectedLoja=e,this.loadPatrimonios(1)}clearAllFilters(e,t){this.searchedPatrimonio=void 0,this.selectedLoja=void 0,this.selectedStatus=void 0,t.writeValue(null),this.loadPatrimonios(1)}loadLoja(){const e=this.lojaService.list().subscribe(t=>{this.sortLojas=t.data.map(o=>{const{id:i,nome:s,codigo:r}=o;return{value:i,label:`[${r}] - ${s}`}})});this.subscriptions.add(e)}loadPatrimonios(e=1){const t=this.patrimonioService.list({searchedPatrimonio:this.searchedPatrimonio,loja_id:this.selectedLoja,status_patrimonio:this.selectedStatus},{order:m.L.DESC,page:e,take:5}).subscribe(o=>{this.patrimonios=o});this.subscriptions.add(t)}search(){this.loadPatrimonios(1)}paginar(e){const{first:t,rows:o}=e,i=Number(Number(t)/Number(o)+1);i!=this.currentPage&&(this.currentPage=i,this.loadPatrimonios(i))}createNew(){this.showModal(D)}detalhar(e){this.showModal(w,{patrimonio:e})}associar(e){this.confirmationService.confirm({message:"Deseja associar o dispositivo em que est\xe1 logado a este patrim\xf4nio?",header:"Confirma\xe7\xe3o",icon:"pi pi-exclamation-triangle",accept:()=>{this.patrimonioService.associate(e.id,this.idFisicoDispositivo).subscribe(t=>{this.loadPatrimonios(1),this.toastService.presentToast({detalhe:"Associado com sucesso!",duracao:p.m4.mediumDuration,gravidade:p.kl.SUCESSO,titulo:"Sucesso!"})})},reject:t=>{this.toastService.clearToast()}})}desassociar(e){this.confirmationService.confirm({message:"Deseja desassociar o dispositivo este patrim\xf4nio?",header:"Confirma\xe7\xe3o",icon:"pi pi-exclamation-triangle",accept:()=>{this.patrimonioService.desassociar(e.id).subscribe(t=>{this.loadPatrimonios(1),this.toastService.presentToast({detalhe:"Desassociado com sucesso!",duracao:p.m4.mediumDuration,gravidade:p.kl.SUCESSO,titulo:"Sucesso!"})})},reject:t=>{this.toastService.clearToast()}})}getCurrentIdFisico(){return(0,h.Z)(function*(){const{identifier:e}=yield U.A.getId();return e})()}showModal(e,t){var o=this;return(0,h.Z)(function*(){const i=yield o.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-80",componentProps:t});return i.onDidDismiss().then(s=>{const{data:r}=s;if(r&&o.toastService.presentToast({detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:p.m4.mediumDuration,gravidade:p.kl.SUCESSO,titulo:"Sucesso!"}),s.role){const{loterica_id:d}=s.role;o.loadPatrimonios(1),o.toastService.presentToast({detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:p.m4.mediumDuration,gravidade:p.kl.SUCESSO,titulo:"Sucesso!"})}}),yield i.present()})()}};E.ctorParameters=()=>[{type:T},{type:v.IN},{type:z.YP},{type:I.D},{type:H.W}],E=(0,u.gn)([(0,n.wA2)({selector:"app-patrimonio-main",template:'<div class="card main-view">\n  <p-dataView *ngIf="patrimonios" emptyMessage="Nada encontrado, experimente escolher outro filtro"\n    class="data-container" #dv [lazy]="true" [value]="patrimonios.data" [paginator]="true"\n    [rows]="patrimonios.meta.take" [totalRecords]="patrimonios.meta.itemCount" [pageLinks]="patrimonios.meta.pageCount"\n    (onLazyLoad)="paginar($event)" filterBy="nome" layout="list">\n    <ng-template pTemplate="header">\n\n      <div class="flex justify-content-start mb-2">\n        <div class="field col-12 sm:col-6 xl:col-3 ml-0 ">\n          <p-dropdown #dropdown_lojas [options]="sortLojas" placeholder="Loja" styleClass="ml-0 mb-2 md:mb-0 w-full"\n            (onClear)="clearFilter($event)" (onChange)="changeLoja($event)" [showClear]="true">\n          </p-dropdown>\n        </div>\n      </div>\n\n      <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n        <div class="field col-12 sm:col-6 xl:col-3">\n          <button pButton pRipple class="sm:w-auto w-full p-button-outlined ml-1" icon="pi pi-times" label="Limpar filtros"\n            (click)="clearAllFilters($event, dropdown_lojas)">\n          </button>\n        </div>\n        <div class="field col-12 sm:col-6 xl:col-3 text-right">\n          <button pButton pRipple class="sm:w-auto w-full" icon="pi pi-plus" label="Novo patrimonio"\n            (click)="createNew()">\n          </button>\n        </div>\n      </div>\n\n      <div class="flex flex-column md:flex-row md:justify-content-center">\n        <span class="p-input-icon-right mb-2 md:mb-0 ">\n          <i class="pi pi-search cursor-pointer text-primary" (click)="search()"></i>\n          <input class="w-full" type="search" pInputText [(ngModel)]="searchedPatrimonio" [ngModelOptions]="{standalone: true}"\n            placeholder="Nome ou descri\xe7\xe3o" (keyup.enter)="search()">\n        </span>\n      </div>\n    </ng-template>\n\n    <ng-template let-patrimonio pTemplate="listItem">\n      <div *ngIf="patrimonios" #templateGrid class="col-12">\n        <div class="data-list-item">\n          <div class="data-list-detail">\n            <div class="data-name mt-2">{{ patrimonio.nome }}</div>\n            <div class="data-description mt-1">Status: {{ patrimonio.status_patrimonio }}</div>\n            <div class="data-description mt-1">{{ patrimonio.descricao }}</div>\n            <div class="mt-1">Valor: {{ patrimonio.valor_patrimonio | currency:\'BRL\': \'(R$)\'}}</div>\n            <div class="mt-3">Localiza\xe7\xe3o: {{ patrimonio.loja?.nome || \'Sem loja associada\'}}</div>\n            <div class="mt-1">ID F\xedsico: {{ patrimonio.id_fisico || \'Sem associa\xe7\xe3o\'}}</div>\n          </div>\n          <div class="data-list-action">\n            <p-button icon="pi pi-pencil" label="Atualizar" (click)="detalhar(patrimonio)">\n            </p-button>\n            <p-button icon="pi pi-sync" label="Associar" (click)="associar(patrimonio)">\n            </p-button>\n            <button pButton [disabled]="!patrimonio.id_fisico" icon="pi pi-ban" class=" p-button-warning"\n              label="Desassociar" (click)="desassociar(patrimonio)">\n            </button>\n          </div>\n        </div>\n      </div>\n    </ng-template>\n  </p-dataView>\n</div>\n\n<p-confirmDialog acceptLabel="Sim" rejectLabel="N\xe3o" [style]="{width: \'50vw\'}" [baseZIndex]="10000"\n  rejectButtonStyleClass="p-button-text"></p-confirmDialog>',styles:[""]})],E);var We=a(85226);var G=a(41117),F=a(53983);const te=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10}];var M=a(36640),V=a(18835),oe=a(22718);let L=class{constructor(e,t,o,i,s,r){this.formBuilder=e,this.areaService=t,this.cargoService=o,this.modal=i,this.modalCtrl=s,this.toastService=r,this.currentCargosPage=1,this.searchedCargo="",this.searchedSuperior="",this.showSuperiorDialog=!1,this.createdId="",this.wasCreated=!1,this.subscriptions=new b.w0,this.form=this.formBuilder.group({nome:[,[c.kI.required]],descricao:[,[c.kI.required]],nivel_hierarquico:[10,[c.kI.required]],responsavel_id:[,[]],superior:[,[]]})}ngOnInit(){this.loadCargos(),this.loadSuperiores()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadCargos(e=1,t){const o=this.cargoService.list({searchedCargo:this.searchedCargo},{order:m.L.ASC,page:e,take:10}).subscribe(i=>{this.cargos=i,t&&t.show()});this.subscriptions.add(o)}searchCargo(e){this.loadCargos(1,e)}paginarCargos(e,t){const{first:o,rows:i}=e,s=Number(Number(o)/Number(i)+1);s!=this.currentCargosPage&&(this.currentCargosPage=s,this.loadCargos(s,t))}create(){const e=this.form.get("nome").value,t=this.form.get("descricao").value,o=Number(this.form.get("nivel_hierarquico").value),i=this.form.get("responsavel_id").value||void 0,s=this.form.get("superior").value?this.form.get("superior").value.id:void 0,r=this.areaService.create({nome:e,descricao:t,nivel_hierarquico:o,responsavel_id:i,nivel_superior_id:s}).subscribe(d=>{this.createdId=d.id,this.fechar(!0)});this.subscriptions.add(r)}loadSuperiores(e=1,t){const o=this.areaService.list({searchedArea:this.searchedSuperior},{order:m.L.ASC,page:e,take:10}).subscribe(i=>{this.superiores=i,t&&t.show()});this.subscriptions.add(o)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){this.selectedSuperior=this.form.get("superior").value,this.selectedSuperior?this.showModal(oe.p,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:p.m4.shortDuration,gravidade:p.kl.INFORMACAO})}fechar(e=!1){this.modal.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showHierarquiaDialog(){this.showModal(V.L)}showModal(e,t){var o=this;return(0,h.Z)(function*(){return yield(yield o.modalCtrl.create({component:e,backdropDismiss:!1,cssClass:"modal-size-80",componentProps:t})).present()})()}};L.ctorParameters=()=>[{type:c.QS},{type:F.T},{type:M.u},{type:v.IN},{type:v.IN},{type:I.D}],L=(0,u.gn)([(0,n.wA2)({selector:"app-area-cadastro",template:'<ion-content appScrollTheme>\n  <ng-container>\n    <form *ngIf="cargos" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-8 md:px-6 lg:px-8 ">\n        <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid ">\n          <div class="grid formgrid p-fluid">\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nivel_hierarquico">N\xedvel Hierarquico</label>\n              <i class="ml-2 text-xs pi pi-question-circle cursor-pointer" id="question-circle"\n                (click)="showHierarquiaDialog()"></i>\n              <p-inputNumber inputId="nivel_hierarquico" formControlName="nivel_hierarquico" [min]="1" [max]="10"\n                [showButtons]="true" buttonLayout="horizontal" spinnerMode="horizontal" [step]="1"\n                decrementButtonClass="p-button-danger" incrementButtonClass="p-button-success"\n                incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus">\n              </p-inputNumber>\n              <div class=" flex mt-1 justify-content-end">\n                <p-message severity="error" text="Um valor entre 1 e 10" *ngIf="isInputError(\'nivel_hierarquico\')">\n                </p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12">\n              <label for="descricao">Descri\xe7\xe3o</label>\n              <textarea id="descricao" class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n                formControlName="descricao"></textarea>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-4 col-12 justify-content-start">\n              <label for="responsavel_id">Cargo respons\xe1vel</label>\n              <span class="p-input-icon-right mb-2 mt-2 w-3">\n                <i class="pi pi-search cursor-pointer text-primary" (click)="search()"></i>\n                <input type="search" pInputText [(ngModel)]="searchedCargo" [ngModelOptions]="{standalone: true}"\n                  placeholder="Nome ou descri\xe7\xe3o" (keyup.enter)="searchCargo(dropdown_cargo)">\n              </span>\n              <p-dropdown id="responsavel_id" #dropdown_cargo [options]="cargos.data"\n                placeholder="Selecione o cargo respons\xe1vel pela \xe1rea" formControlName="responsavel_id"\n                optionLabel="nome" [showClear]="true" optionValue="id"></p-dropdown>\n              <p-paginator [value]="cargos.data" [paginator]="true" [rows]="cargos.meta.take"\n                [totalRecords]="cargos.meta.itemCount" [pageLinks]="cargos.meta.pageCount"\n                (onPageChange)="paginarCargos($event, dropdown_cargo)">\n              </p-paginator>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'responsavel_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n            <div *ngIf="superiores" class="col-8 lg:col-10 field mb-5">\n              <label for="nivel_superior" class="text-900 font-medium mb-3">Superior</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n              <p-dropdown id="nivel_superior" #drop_superior [options]="superiores.data" formControlName="superior"\n                optionLabel="nome" [filter]="true" placeholder="Selecione uma op\xe7\xe3o" [virtualScroll]="true"\n                [virtualScrollItemSize]="38" [lazy]="true"\n                (onLazyLoad)="paginarSuperior($event)" (onFilter)="onSuperiorFilter($event)"\n                (onFocus)="blurSuperior($event, drop_superior)">\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton [width]="options.even ? \'60%\' : \'50%\'" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n              </p-dropdown>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Salvar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n              [disabled]="disableCreateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],L);let N=class{constructor(e,t,o,i,s,r){this.formBuilder=e,this.areaService=t,this.cargoService=o,this.modal=i,this.toastService=s,this.modalCtrl=r,this.currentCargoTake=5,this.searchedSuperior="",this.showSuperiorDialog=!1,this.createdId="",this.wasCreated=!1,this.subscriptions=new b.w0}ngOnInit(){const{nome:e,descricao:t,nivel_hierarquico:o,cargo_responsavel:i,nivel_superior:s}=this.area,r=i?.id||void 0;this.searchedSuperior=s?.nome||void 0;const d=i?.nome||void 0;this.loadCargos(1,r,d),this.loadSuperiores(),this.searchedSuperior="",this.form=this.formBuilder.group({nome:[e,[c.kI.required]],descricao:[t,[c.kI.required]],nivel_hierarquico:[o,[c.kI.required]],responsavel_id:[r,[]],superior:[s?.id,[]]}),this.form.get("responsavel_id").setValue(r)}ngOnDestroy(){this.subscriptions.unsubscribe()}loadCargos(e=1,t,o){const i=this.cargoService.list({searchedCargo:o},{order:m.L.ASC,page:e,take:5}).subscribe(s=>{this.cargos=s,t&&this.form.get("responsavel_id").setValue(t),this.form.updateValueAndValidity({onlySelf:!0})});this.subscriptions.add(i)}lazyLoadCargos(e){this.currentCargoTake+=5;const t=this.cargoService.list({},{order:m.L.ASC,page:1,take:this.currentCargoTake}).subscribe(o=>{this.cargos=o,e.show()});this.subscriptions.add(t)}update(){const{id:e}=this.area,t=this.form.get("nome").value,o=this.form.get("descricao").value,i=Number(this.form.get("nivel_hierarquico").value),s=this.form.get("responsavel_id").value||void 0,r=!s,d=this.form.get("superior").value?this.form.get("superior").value:void 0,f=this.areaService.update(e,{nome:t,descricao:o,nivel_hierarquico:i,responsavel_id:s,remove_responsavel:r,nivel_superior_id:d}).subscribe(g=>{this.createdId=g.id,this.fechar(!0)});this.subscriptions.add(f)}loadSuperiores(e=1,t){const o=this.areaService.list({searchedArea:this.searchedSuperior},{order:m.L.ASC,page:e,take:10}).subscribe(i=>{this.superiores=i,t&&t.show()});this.subscriptions.add(o)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){const e=this.form.get("superior").value;this.selectedSuperior=this.superiores.data.find(t=>t.id==e),this.selectedSuperior?this.showModal(oe.p,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:p.m4.shortDuration,gravidade:p.kl.INFORMACAO})}fechar(e=!1){this.modal.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showHierarquiaDialog(){this.showModal(V.L)}showModal(e,t){var o=this;return(0,h.Z)(function*(){return yield(yield o.modalCtrl.create({component:e,backdropDismiss:!1,cssClass:"modal-size-80",componentProps:t})).present()})()}};N.ctorParameters=()=>[{type:c.QS},{type:F.T},{type:M.u},{type:v.IN},{type:I.D},{type:v.IN}],N.propDecorators={area:[{type:n.IIB}]},N=(0,u.gn)([(0,n.wA2)({selector:"app-area-detail",template:'<ion-content appScrollTheme>\n  <ng-container>\n    <form *ngIf="cargos && area" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-8 md:px-6 lg:px-8 ">\n        <div class="text-900 font-medium text-xl mb-1">Atualizar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid ">\n          <div class="grid formgrid p-fluid">\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nivel_hierarquico">N\xedvel Hierarquico</label>\n              <i class="ml-2 text-xs pi pi-question-circle cursor-pointer" id="question-circle"\n                (click)="showHierarquiaDialog()"></i>\n              <p-inputNumber inputId="nivel_hierarquico" formControlName="nivel_hierarquico" [min]="1" [max]="10"\n                [showButtons]="true" buttonLayout="horizontal" spinnerMode="horizontal" [step]="1"\n                decrementButtonClass="p-button-danger" incrementButtonClass="p-button-success"\n                incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus">\n              </p-inputNumber>\n              <div class=" flex mt-1 justify-content-end">\n                <p-message severity="error" text="Um valor entre 1 e 10" *ngIf="isInputError(\'nivel_hierarquico\')">\n                </p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-12">\n              <label for="descricao" class="font-medium text-900">Descri\xe7\xe3o</label>\n              <textarea id="descricao" type="text" pInputTextarea rows="5" formControlName="descricao"></textarea>\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n            </div>\n            <div class="field mb-4 col-12">\n              <label for="responsavel_id">Cargo respons\xe1vel</label>\n              <p-dropdown id="responsavel_id" #dropdown_cargo [options]="cargos.data"\n                placeholder="Selecione o cargo respons\xe1vel pela \xe1rea" formControlName="responsavel_id"\n                optionLabel="nome" [showClear]="true" optionValue="id">\n                <ng-template let-cargo pTemplate="item">\n                  <div class="">\n                    <div>{{cargo.nome}}</div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="footer">\n                  <div class="col-12 w-auto">\n                    <button *ngIf="cargos.meta.hasNextPage" pButton pRipple type="button" label="Carregar mais"\n                      (click)="lazyLoadCargos(dropdown_cargo)" class="p-button-outlined p-button-rounded"></button>\n                  </div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'responsavel_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n            <div *ngIf="superiores" class="col-8 lg:col-10 field mb-5">\n              <label for="nivel_superior" class="text-900 font-medium mb-3">Superior</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n              <p-dropdown id="nivel_superior" #drop_superior [options]="superiores.data" formControlName="superior"\n                optionLabel="nome" [filter]="true" placeholder="Selecione uma op\xe7\xe3o" [virtualScroll]="true"\n                [virtualScrollItemSize]="38" [lazy]="true" optionValue=\'id\'\n                (onLazyLoad)="paginarSuperior($event)" (onFilter)="onSuperiorFilter($event)"\n                (onFocus)="blurSuperior($event, drop_superior)">\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton [width]="options.even ? \'60%\' : \'50%\'" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n              </p-dropdown>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Salvar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="update()"\n              [disabled]="disableCreateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],N);var at=a(9683);let P=class{constructor(e,t,o,i){this.modal=e,this.toastService=t,this.areaService=o,this.preferencesService=i,this.sortNiveis=[],this.searchedArea="",this.selectedNivel="",this.currentPage=1,this.contentError=new G.S,this.subscriptions=new b.w0}ngOnInit(){this.sortNiveis=[...te],this.loadArea()}ngOnDestroy(){this.subscriptions.unsubscribe()}changeNivel({value:e}){this.selectedNivel=e,e&&this.loadArea(1)}clearFilter(){this.loadArea(1)}clearAllFilters(e,t){this.searchedArea=void 0,this.selectedNivel=void 0,t.writeValue(null),this.loadArea(1)}loadArea(e=1){const t=this.areaService.list({searchedArea:this.searchedArea,nivel_hierarquico:this.selectedNivel},{order:m.L.ASC,page:e,take:5}).subscribe({next:o=>{this.areas=o},error:o=>{this.contentError={code:o.status,hasError:!0}}});this.subscriptions.add(t)}detalhar(e){this.showModal(N,{area:e})}setAreaImage(e){const{nivel_hierarquico:t}=e;return this.preferencesService.getDefaultAssetImgTheme()+`/niveis/${t}.png`}createNew(){this.showModal(L)}search(){this.loadArea(1)}paginar(e){const{first:t,rows:o}=e,i=Number(Number(t)/Number(o)+1);i!=this.currentPage&&(this.currentPage=i,this.loadArea(i))}showModal(e,t){var o=this;return(0,h.Z)(function*(){const i=yield o.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-80",componentProps:t});return i.onDidDismiss().then(s=>{const{data:r}=s;r&&(o.loadArea(),o.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:p.m4.mediumDuration,gravidade:p.kl.SUCESSO}))}),yield i.present()})()}};P.ctorParameters=()=>[{type:v.IN},{type:I.D},{type:F.T},{type:at.y}],P=(0,u.gn)([(0,n.wA2)({selector:"app-area-main",template:'<div class="card main-view">\n  <ng-container *ngIf="areas">\n    <p-dataView *ngIf="areas" emptyMessage="Nada encontrado, experimente escolher outro filtro" class="data-container"\n      #dv [lazy]="true" [value]="areas.data" [paginator]="true" [rows]="areas.meta.take"\n      [totalRecords]="areas.meta.itemCount" [pageLinks]="areas.meta.pageCount" (onLazyLoad)="paginar($event)"\n      filterBy="nome" layout="list">\n      <ng-template pTemplate="header">\n        <div class="flex justify-content-start mb-2">\n          <div class="field col-12 sm:col-6 xl:col-3 ml-0 ">\n            <p-dropdown #dropdown_niveis [options]="sortNiveis" placeholder="N\xedveis" (onChange)="changeNivel($event)"\n              (onClear)="clearFilter($event)" [showClear]="true" styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n        </div>\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field col-12 sm:col-6 xl:col-3">\n            <button pButton pRipple class="sm:w-auto w-full p-button-outlined ml-1" icon="pi pi-times"\n              label="Limpar filtros" (click)="clearAllFilters($event, dropdown_niveis)">\n            </button>\n          </div>\n          <div class="field col-12 sm:col-6 xl:col-3 text-right">\n            <button pButton pRipple class="sm:w-auto w-full" icon="pi pi-plus" label="Novo \xe1rea" (click)="createNew()">\n            </button>\n          </div>\n        </div>\n\n        <div class="flex flex-column md:flex-row md:justify-content-center">\n          <span class="p-input-icon-right mb-2 md:mb-0 ">\n            <i class="pi pi-search cursor-pointer text-primary" (click)="search()"></i>\n            <input class="w-full" type="search" pInputText [(ngModel)]="searchedArea"\n              [ngModelOptions]="{standalone: true}" placeholder="Nome ou descri\xe7\xe3o" (keyup.enter)="search()">\n          </span>\n        </div>\n      </ng-template>\n\n      <ng-template let-area pTemplate="listItem">\n        <div *ngIf="areas" #templateGrid class="col-12">\n          <div class="data-list-item">\n            <img [src]="setAreaImage(area)" [alt]="area.nome" />\n            <div class="data-list-detail">\n              <div class="data-name mt-2">{{ area.nome }}</div>\n              <div class="data-description mt-1">{{ area.descricao }}</div>\n              <div class="data-description">Cargo respons\xe1vel: {{ area.cargo_responsavel?.nome || "Sem cargo respons\xe1vel\n                atribu\xeddo" }}</div>\n              <i class="pi pi-sitemap data-category-icon"></i><span class="data-category">{{ area.nivel_hierarquico\n                }}</span>\n            </div>\n            <div class="data-list-action">\n              <p-button icon="pi pi-pencil" label="Atualizar" (click)="detalhar(area)">\n              </p-button>\n            </div>\n          </div>\n        </div>\n      </ng-template>\n    </p-dataView>\n  </ng-container>\n\n  <ng-container *ngIf="contentError.hasError">\n    <app-content-error [erroCode]="contentError.code"></app-content-error>\n  </ng-container>\n</div>',styles:[""]})],P);let _=class{constructor(e){this.http=e}list(e,t=new W.k){let o=ee.t.getPageOptionsParams(t);return e&&e.nome&&(o=o.append("nome",e.nome)),e&&e.descricao&&(o=o.append("descricao",e.descricao)),e&&e.is_descontado&&(o=o.append("is_descontado",e.is_descontado)),e&&e.tipo_desconto&&(o=o.append("tipo_desconto",e.tipo_desconto)),e&&e.searchedBeneficio&&(o=o.append("searchedBeneficio",e.searchedBeneficio)),this.http.get(`${C.Hz.baseURL}/beneficios`,{responseType:"json",params:o})}findById(e){return this.http.get(`${C.Hz.baseURL}/beneficios/${e}`,{responseType:"json"})}create(e){return this.http.post(`${C.Hz.baseURL}/beneficios`,e,{responseType:"json"})}update(e,t){return this.http.put(`${C.Hz.baseURL}/beneficios/${e}`,t,{responseType:"json"})}};_.ctorParameters=()=>[{type:Y.eN}],_=(0,u.gn)([(0,n.GSi)({providedIn:"root"})],_);var ie=a(53830);let j=class{constructor(e,t,o,i,s,r){this.formBuilder=e,this.cargoService=t,this.beneficioService=o,this.areaService=i,this.modalCtrl=s,this.toastService=r,this.createdId="",this.wasCreated=!1,this.currentAreasPage=1,this.searchedArea="",this.showQuestionBeneficioDialog=!1,this.currentBeneficiosPage=1,this.searchedBeneficio="",this.searchedSuperior="",this.showSuperiorDialog=!1,this.showQuestionDialog=!1,this.questionTitle="",this.questionDescription="",this.subscriptions=new b.w0}ngOnInit(){const{nome:e,descricao:t,nivel_hierarquico:o,salario_max:i,salario_min:s,area:r,beneficios:d,nivel_superior:f}=this.cargo;this.searchedSuperior=f?.nome||"",this.searchedArea=r?.nome||"",this.loadAreas(),this.loadBeneficios(),this.loadSuperiores(),this.searchedSuperior="",this.searchedArea="";const g=d.map(O=>O.id);this.form=this.formBuilder.group({nome:[e,[c.kI.required]],descricao:[t,[c.kI.required]],nivel_hierarquico:[o,[c.kI.required]],salario_min:[s,[c.kI.required]],salario_max:[i,[c.kI.required]],area_id:[r.id,[c.kI.required]],beneficios:[g,[]],superior:[f?.id,[]]})}ngOnDestroy(){this.subscriptions.unsubscribe()}update(){const{id:e}=this.cargo,t=this.form.get("nome").value,o=this.form.get("descricao").value,i=Number(this.form.get("salario_min").value),s=Number(this.form.get("salario_max").value),r=Number(this.form.get("nivel_hierarquico").value),d=this.form.get("beneficios").value||[],f=this.form.get("area_id").value,g=this.form.get("superior").value?this.form.get("superior").value:void 0,O=this.cargoService.update(e,{nome:t,descricao:o,area_id:f,beneficios:d,nivel_hierarquico:r,salario_max:s,salario_min:i,nivel_superior_id:g}).subscribe(se=>{this.createdId=se.id,this.fechar(!0)});this.subscriptions.add(O)}loadAreas(e=1,t){const o=this.areaService.list({searchedArea:this.searchedArea},{order:m.L.ASC,page:e,take:5}).subscribe(i=>{this.areas=i,t&&t.show()});this.subscriptions.add(o)}searchArea(e){this.loadAreas(1,e)}paginarAreas(e,t){const{first:o,rows:i}=e,s=Number(Number(o)/Number(i)+1);s!=this.currentAreasPage&&(this.currentAreasPage=s,this.loadAreas(s,t))}loadBeneficios(e=1){const t=this.beneficioService.list({searchedBeneficio:this.searchedBeneficio},{order:m.L.ASC,page:e,take:10}).subscribe(o=>{this.beneficios=o});this.subscriptions.add(t)}searchBeneficio(){this.loadBeneficios(1)}paginarBeneficio(e){const{first:t,rows:o}=e,i=Number(Number(t)/Number(o)+1);i!=this.currentBeneficiosPage&&(this.currentBeneficiosPage=i,this.loadBeneficios(i))}questionBeneficio(e){if(e&&e.originalEvent.target&&"question-circle"==e.originalEvent.target.id){const t=e.option;this.selectedBeneficio=t,this.showQuestionBeneficioDialog=!0}}showHierarquiaDialog(){this.showModal(V.L)}loadSuperiores(e=1,t){const o=this.cargoService.list({searchedCargo:this.searchedSuperior},{order:m.L.ASC,page:e,take:10}).subscribe(i=>{this.superiores=i,t&&t.show()});this.subscriptions.add(o)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){const e=this.form.get("superior").value;this.selectedSuperior=this.superiores.data.find(t=>t.id==e),this.selectedSuperior?this.showModal(ie.V,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:p.m4.shortDuration,gravidade:p.kl.INFORMACAO})}fechar(e=!1){this.modalCtrl.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableUpdateBtn(){return!this.form.valid}showModal(e,t){var o=this;return(0,h.Z)(function*(){return yield(yield o.modalCtrl.create({component:e,backdropDismiss:!1,cssClass:"modal-size-80",componentProps:t})).present()})()}};j.ctorParameters=()=>[{type:c.QS},{type:M.u},{type:_},{type:F.T},{type:v.IN},{type:I.D}],j.propDecorators={cargo:[{type:n.IIB}]},j=(0,u.gn)([(0,n.wA2)({selector:"app-cargo-detail",template:'<ion-content appScrollTheme>\n  <ng-container>\n    <form *ngIf="areas && beneficios" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-8 md:px-6 lg:px-8 ">\n        <div class="text-900 font-medium text-xl mb-1">Atualizar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid ">\n          <div class="grid formgrid p-fluid">\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="valor_desconto">N\xedvel hierarquico</label>\n              <i class="ml-2 text-xs pi pi-question-circle cursor-pointer" id="question-circle"\n                (click)="showHierarquiaDialog()"></i>\n              <p-inputNumber inputId="nivel_hierarquico" formControlName="nivel_hierarquico" [min]="1" [max]="10"\n              [showButtons]="true" buttonLayout="horizontal" spinnerMode="horizontal" [step]="1"\n                decrementButtonClass="p-button-danger" incrementButtonClass="p-button-success"\n                incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus">\n              </p-inputNumber>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nivel_hierarquico\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12">\n              <label for="descricao">Descri\xe7\xe3o</label>\n              <textarea id="descricao" class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n                formControlName="descricao"></textarea>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="salario_min">Faixa salarial (m\xednimo)</label>\n              <p-inputNumber inputId="salario_min" formControlName="salario_min" mode="decimal" [minFractionDigits]="2"\n                [maxFractionDigits]="2">\n              </p-inputNumber>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'salario_min\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="salario_min">Faixa salarial (m\xe1ximo)</label>\n              <p-inputNumber inputId="salario_max" formControlName="salario_max" mode="decimal" [minFractionDigits]="2"\n                [maxFractionDigits]="2">\n              </p-inputNumber>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'salario_max\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-4 col-12 justify-content-start">\n              <label for="area_id">\xc1rea associada</label>\n              <span class="p-input-icon-right mb-2 mt-2 w-3">\n                <i class="pi pi-search cursor-pointer text-primary" (click)="search()"></i>\n                <input type="search" pInputText [(ngModel)]="searchedArea" [ngModelOptions]="{standalone: true}"\n                  placeholder="Nome ou descri\xe7\xe3o" (keyup.enter)="searchArea(dropdown_area)">\n              </span>\n              <p-dropdown id="area_id" #dropdown_area [options]="areas.data"\n                placeholder="Selecione \xe1rea associada ao cargo" formControlName="area_id" optionLabel="nome"\n                [showClear]="true" optionValue="id">\n              </p-dropdown>\n              <p-paginator  [value]="areas.data" [paginator]="true" [rows]="areas.meta.take"\n                [totalRecords]="areas.meta.itemCount" [pageLinks]="areas.meta.pageCount"\n                (onPageChange)="paginarAreas($event, dropdown_area)">\n              </p-paginator>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'area_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n            <div class="field mb-4 col-12 w-full">\n              <label for="area_id">Benef\xedcios</label>\n              <p-listbox [options]="beneficios.data" formControlName="beneficios" [metaKeySelection]="false"\n                [checkbox]="true" [multiple]="true" [listStyle]="{\'max-height\':\'250px\'}" optionValue="id"\n                (onClick)="questionBeneficio($event)" [showToggleAll]="false">\n                <ng-template pTemplate="header">\n                  <span class="p-input-icon-right mb-2 md:mb-0 ">\n                    <i class="pi pi-search cursor-pointer text-primary" (click)="search()"></i>\n                    <input type="search" pInputText [(ngModel)]="searchedBeneficio"\n                      [ngModelOptions]="{standalone: true}" placeholder="Nome ou descri\xe7\xe3o"\n                      (keyup.enter)="searchBeneficio()">\n                  </span>\n                </ng-template>\n\n                <ng-template let-b pTemplate="item">\n                  <div class="p-d-flex p-ai-center">\n                    <span>{{b.nome}}</span>\n                    <i id="question-circle" class="ml-2 text-xs pi pi-question-circle"></i>\n                  </div>\n                </ng-template>\n\n                <ng-template pTemplate="footer">\n                  <p-paginator [value]="beneficios.data" [paginator]="true" [rows]="beneficios.meta.take"\n                    [totalRecords]="beneficios.meta.itemCount" [pageLinks]="beneficios.meta.pageCount"\n                    (onPageChange)="paginarBeneficio($event)">\n                  </p-paginator>\n                </ng-template>\n              </p-listbox>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div *ngIf="superiores" class="col-8 lg:col-10 field mb-5">\n              <label for="nivel_superior" class="text-900 font-medium mb-3">Superior</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n              <p-dropdown id="nivel_superior" #drop_superior [options]="superiores.data" formControlName="superior"\n                optionLabel="nome" [filter]="true" placeholder="Selecione uma op\xe7\xe3o" [virtualScroll]="true"\n                [virtualScrollItemSize]="38" [lazy]="true" optionValue=\'id\'\n                (onLazyLoad)="paginarSuperior($event)" (onFilter)="onSuperiorFilter($event)"\n                (onFocus)="blurSuperior($event, drop_superior)">\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton [width]="options.even ? \'60%\' : \'50%\'" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n              </p-dropdown>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Atualizar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="update()"\n              [disabled]="disableUpdateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n\n  <p-dialog *ngIf="selectedBeneficio" [(visible)]="showQuestionBeneficioDialog" appendTo="body" [modal]="true"\n    [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <span class="flex align-items-center justify-content-center bg-cyan-100 text-cyan-800 mr-3 border-circle"\n          style="width:32px;height:32px">\n          <i class="pi pi-info text-lg"></i>\n        </span>\n        <span class="font-medium text-2xl text-900">{{ selectedBeneficio.nome }}</span>\n      </div>\n    </ng-template>\n\n    <div class="grid">\n      <div class="col-12 line-height-3 p-0 m-1">\n        {{ selectedBeneficio.descricao }}.\n        <div class="mt-1">Este benef\xedcio {{ selectedBeneficio.is_descontado? \'\xc9\': \'N\xc3O \xc9\' }} descontado do colaborador\n        </div>\n        <div *ngIf="selectedBeneficio.is_descontado">O desconto \xe9 {{ selectedBeneficio.tipo_desconto}}</div>\n      </div>\n      <div class="col-12 border-top-1 surface-border pt-3  mt-2"></div>\n      <div class="col-12 md:col-6 p-3 text-center">\n        <div class="shadow-2 surface-card p-3" style="border-radius: 12px">\n          <div class="flex align-items-center justify-content-between">\n            <div>\n              <span class="text-xl text-900 font-bold">R$ {{ selectedBeneficio.custo_beneficio | currency:\'BRL\': \'\'\n                }}</span>\n              <p class="mt-2 mb-0 text-600 text-lg">Custo do benef\xedcio</p>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="col-12 md:col-6 p-3 text-center">\n        <div *ngIf="selectedBeneficio.is_descontado" class="shadow-2 surface-card p-3" style="border-radius: 12px">\n          <div class="flex align-items-center justify-content-between">\n            <div>\n              <span class="text-xl text-900 font-bold">R$ {{ selectedBeneficio.valor_desconto | currency:\'BRL\': \'\'\n                }}</span>\n              <p class="mt-2 mb-0 text-600 text-lg">Valor descontado</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <ng-template pTemplate="footer">\n      <div class=" pt-3">\n        <button pButton pRipple icon="pi pi-check" (click)="showQuestionBeneficioDialog = false" label="OK"></button>\n      </div>\n    </ng-template>\n  </p-dialog>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],j);let A=class{constructor(e,t,o,i,s,r){this.formBuilder=e,this.cargoService=t,this.beneficioService=o,this.areaService=i,this.modalCtrl=s,this.toastService=r,this.createdId="",this.wasCreated=!1,this.currentAreasPage=1,this.searchedArea="",this.showQuestionBeneficioDialog=!1,this.currentBeneficiosPage=1,this.searchedBeneficio="",this.searchedSuperior="",this.showSuperiorDialog=!1,this.showQuestionDialog=!1,this.questionTitle="",this.questionDescription="",this.subscriptions=new b.w0,this.form=this.formBuilder.group({nome:[,[c.kI.required]],descricao:[,[c.kI.required]],nivel_hierarquico:[,[c.kI.required]],salario_min:[,[c.kI.required]],salario_max:[,[c.kI.required]],area_id:[,[c.kI.required]],beneficios:[,[]],superior:[,[]]})}ngOnInit(){this.loadAreas(),this.loadBeneficios(),this.loadSuperiores()}ngOnDestroy(){this.subscriptions.unsubscribe()}create(){const e=this.form.get("nome").value,t=this.form.get("descricao").value,o=Number(this.form.get("salario_min").value),i=Number(this.form.get("salario_max").value),s=Number(this.form.get("nivel_hierarquico").value),r=this.form.get("beneficios").value||[],d=this.form.get("area_id").value,f=this.form.get("superior").value?this.form.get("superior").value.id:void 0,g=this.cargoService.create({nome:e,descricao:t,area_id:d,beneficios:r,nivel_hierarquico:s,salario_max:i,salario_min:o,nivel_superior_id:f}).subscribe(O=>{this.createdId=O.id,this.fechar(!0)});this.subscriptions.add(g)}loadAreas(e=1,t){const o=this.areaService.list({searchedArea:this.searchedArea},{order:m.L.ASC,page:e,take:5}).subscribe(i=>{this.areas=i,t&&t.show()});this.subscriptions.add(o)}searchArea(e){this.loadAreas(1,e)}paginarAreas(e,t){const{first:o,rows:i}=e,s=Number(Number(o)/Number(i)+1);s!=this.currentAreasPage&&(this.currentAreasPage=s,this.loadAreas(s,t))}loadBeneficios(e=1){const t=this.beneficioService.list({searchedBeneficio:this.searchedBeneficio},{order:m.L.ASC,page:e,take:10}).subscribe(o=>{this.beneficios=o});this.subscriptions.add(t)}searchBeneficio(){this.loadBeneficios(1)}paginarBeneficio(e){const{first:t,rows:o}=e,i=Number(Number(t)/Number(o)+1);i!=this.currentBeneficiosPage&&(this.currentBeneficiosPage=i,this.loadBeneficios(i))}questionBeneficio(e){if(e&&e.originalEvent.target&&"question-circle"==e.originalEvent.target.id){const t=e.option;this.selectedBeneficio=t,this.showQuestionBeneficioDialog=!0}}loadSuperiores(e=1,t){const o=this.cargoService.list({searchedCargo:this.searchedSuperior},{order:m.L.ASC,page:e,take:10}).subscribe(i=>{this.superiores=i,t&&t.show()});this.subscriptions.add(o)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){this.selectedSuperior=this.form.get("superior").value,this.selectedSuperior?this.showModal(ie.V,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:p.m4.shortDuration,gravidade:p.kl.INFORMACAO})}showHierarquiaDialog(){this.showModal(V.L)}fechar(e=!1){this.modalCtrl.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var o=this;return(0,h.Z)(function*(){return yield(yield o.modalCtrl.create({component:e,backdropDismiss:!1,cssClass:"modal-size-80",componentProps:t})).present()})()}};A.ctorParameters=()=>[{type:c.QS},{type:M.u},{type:_},{type:F.T},{type:v.IN},{type:I.D}],A=(0,u.gn)([(0,n.wA2)({selector:"app-cargo-cadastro",template:'<ion-content appScrollTheme>\n  <ng-container>\n    <form *ngIf="areas && beneficios" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-8 md:px-6 lg:px-8 ">\n        <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid ">\n          <div class="grid formgrid p-fluid">\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="valor_desconto">N\xedvel hierarquico</label>\n              <i class="ml-2 text-xs pi pi-question-circle cursor-pointer" id="question-circle"\n                (click)="showHierarquiaDialog()"></i>\n              <p-inputNumber inputId="nivel_hierarquico" formControlName="nivel_hierarquico" [min]="1" [max]="10"\n                [showButtons]="true" buttonLayout="horizontal" spinnerMode="horizontal" [step]="1"\n                decrementButtonClass="p-button-danger" incrementButtonClass="p-button-success"\n                incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus">\n              </p-inputNumber>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nivel_hierarquico\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12">\n              <label for="descricao">Descri\xe7\xe3o</label>\n              <textarea id="descricao" class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n                formControlName="descricao"></textarea>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="salario_min">Faixa salarial (m\xednimo)</label>\n              <p-inputNumber inputId="salario_min" formControlName="salario_min" mode="decimal" [minFractionDigits]="2"\n                [maxFractionDigits]="2">\n              </p-inputNumber>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'salario_min\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="salario_min">Faixa salarial (m\xe1ximo)</label>\n              <p-inputNumber inputId="salario_max" formControlName="salario_max" mode="decimal" [minFractionDigits]="2"\n                [maxFractionDigits]="2">\n              </p-inputNumber>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'salario_max\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-4 col-12 justify-content-start">\n              <label for="area_id">\xc1rea associada</label>\n              <span class="p-input-icon-right mb-2 mt-2 w-3">\n                <i class="pi pi-search cursor-pointer text-primary" (click)="search()"></i>\n                <input type="search" pInputText [(ngModel)]="searchedArea" [ngModelOptions]="{standalone: true}"\n                  placeholder="Nome ou descri\xe7\xe3o" (keyup.enter)="searchArea(dropdown_area)">\n              </span>\n              <p-dropdown id="area_id" #dropdown_area [options]="areas.data"\n                placeholder="Selecione \xe1rea associada ao cargo" formControlName="area_id" optionLabel="nome"\n                [showClear]="true" optionValue="id">\n              </p-dropdown>\n              <p-paginator [value]="areas.data" [paginator]="true" [rows]="areas.meta.take"\n                [totalRecords]="areas.meta.itemCount" [pageLinks]="areas.meta.pageCount"\n                (onPageChange)="paginarAreas($event, dropdown_area)">\n              </p-paginator>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'area_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n            <div class="field mb-4 col-12 w-full">\n              <label for="area_id">Benef\xedcios</label>\n              <p-listbox [options]="beneficios.data" formControlName="beneficios" [metaKeySelection]="false"\n                [checkbox]="true" [multiple]="true" [listStyle]="{\'max-height\':\'250px\'}" optionValue="id"\n                (onClick)="questionBeneficio($event)" [showToggleAll]="false">\n                <ng-template pTemplate="header">\n                  <span class="p-input-icon-right mb-2 md:mb-0 ">\n                    <i class="pi pi-search cursor-pointer text-primary" (click)="search()"></i>\n                    <input type="search" pInputText [(ngModel)]="searchedBeneficio"\n                      [ngModelOptions]="{standalone: true}" placeholder="Nome ou descri\xe7\xe3o"\n                      (keyup.enter)="searchBeneficio()">\n                  </span>\n                </ng-template>\n\n                <ng-template let-b pTemplate="item">\n                  <div class="p-d-flex p-ai-center">\n                    <span>{{b.nome}}</span>\n                    <i id="question-circle" class="ml-2 text-xs pi pi-question-circle"></i>\n                  </div>\n                </ng-template>\n\n                <ng-template pTemplate="footer">\n                  <p-paginator [value]="beneficios.data" [paginator]="true" [rows]="beneficios.meta.take"\n                    [totalRecords]="beneficios.meta.itemCount" [pageLinks]="beneficios.meta.pageCount"\n                    (onPageChange)="paginarBeneficio($event)">\n                  </p-paginator>\n                </ng-template>\n              </p-listbox>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div *ngIf="superiores" class="col-8 lg:col-10 field mb-5">\n              <label for="nivel_superior" class="text-900 font-medium mb-3">Superior</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n              <p-dropdown id="nivel_superior" #drop_superior [options]="superiores.data" formControlName="superior"\n                optionLabel="nome" [filter]="true" placeholder="Selecione uma op\xe7\xe3o" [virtualScroll]="true"\n                [virtualScrollItemSize]="38" [lazy]="true"\n                (onLazyLoad)="paginarSuperior($event)" (onFilter)="onSuperiorFilter($event)"\n                (onFocus)="blurSuperior($event, drop_superior)">\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton [width]="options.even ? \'60%\' : \'50%\'" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n              </p-dropdown>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Salvar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n              [disabled]="disableCreateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n\n  <p-dialog *ngIf="selectedBeneficio" [(visible)]="showQuestionBeneficioDialog" appendTo="body" [modal]="true"\n    [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <span class="flex align-items-center justify-content-center bg-cyan-100 text-cyan-800 mr-3 border-circle"\n          style="width:32px;height:32px">\n          <i class="pi pi-info text-lg"></i>\n        </span>\n        <span class="font-medium text-2xl text-900">{{ selectedBeneficio.nome }}</span>\n      </div>\n    </ng-template>\n\n    <div class="grid">\n      <div class="col-12 line-height-3 p-0 m-1">\n        {{ selectedBeneficio.descricao }}.\n        <div class="mt-1">Este benef\xedcio {{ selectedBeneficio.is_descontado? \'\xc9\': \'N\xc3O \xc9\' }} descontado do colaborador\n        </div>\n        <div *ngIf="selectedBeneficio.is_descontado">O desconto \xe9 {{ selectedBeneficio.tipo_desconto}}</div>\n      </div>\n      <div class="col-12 border-top-1 surface-border pt-3  mt-2"></div>\n      <div class="col-12 md:col-6 p-3 text-center">\n        <div class="shadow-2 surface-card p-3" style="border-radius: 12px">\n          <div class="flex align-items-center justify-content-between">\n            <div>\n              <span class="text-xl text-900 font-bold">R$ {{ selectedBeneficio.custo_beneficio | currency:\'BRL\': \'\'\n                }}</span>\n              <p class="mt-2 mb-0 text-600 text-lg">Custo do benef\xedcio</p>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="col-12 md:col-6 p-3 text-center">\n        <div *ngIf="selectedBeneficio.is_descontado" class="shadow-2 surface-card p-3" style="border-radius: 12px">\n          <div class="flex align-items-center justify-content-between">\n            <div>\n              <span class="text-xl text-900 font-bold">R$ {{ selectedBeneficio.valor_desconto | currency:\'BRL\': \'\'\n                }}</span>\n              <p class="mt-2 mb-0 text-600 text-lg">Valor descontado</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <ng-template pTemplate="footer">\n      <div class=" pt-3">\n        <button pButton pRipple icon="pi pi-check" (click)="showQuestionBeneficioDialog = false" label="OK"></button>\n      </div>\n    </ng-template>\n  </p-dialog>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],A);let q=class{constructor(e,t,o){this.modal=e,this.toastService=t,this.cargoService=o,this.sortNiveisHierarquicos=[],this.searchedCargo="",this.selectedNivelHierarquico="",this.selectedIsDescontado="",this.currentPage=1,this.contentError=new G.S,this.subscriptions=new b.w0}ngOnInit(){this.sortNiveisHierarquicos=[...te],this.loadCargos()}ngOnDestroy(){this.subscriptions.unsubscribe()}changeNivelHierarquico({value:e}){this.selectedNivelHierarquico=e,e&&this.loadCargos(1)}clearFilter(e){this.loadCargos(1)}clearAllFilters(e,t){this.searchedCargo=void 0,this.selectedNivelHierarquico=void 0,t.writeValue(null),this.loadCargos(1)}loadCargos(e=1){const t=Number(this.selectedNivelHierarquico)||void 0,o=this.cargoService.list({searchedCargo:this.searchedCargo,nivel_hierarquico:t},{order:m.L.ASC,page:e,take:5}).subscribe({next:i=>{this.cargos=i},error:i=>{this.contentError={code:i.status,hasError:!0}}});this.subscriptions.add(o)}detalhar(e){this.showModal(j,{cargo:e})}createNew(){this.showModal(A)}search(){this.loadCargos(1)}paginar(e){const{first:t,rows:o}=e,i=Number(Number(t)/Number(o)+1);i!=this.currentPage&&(this.currentPage=i,this.loadCargos(i))}showModal(e,t){var o=this;return(0,h.Z)(function*(){const i=yield o.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-80",componentProps:t});return i.onDidDismiss().then(s=>{const{data:r}=s;r&&(o.loadCargos(),o.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:p.m4.mediumDuration,gravidade:p.kl.SUCESSO}))}),yield i.present()})()}};q.ctorParameters=()=>[{type:v.IN},{type:I.D},{type:M.u}],q=(0,u.gn)([(0,n.wA2)({selector:"app-cargo-main",template:'<div class="card main-view">\n\n  <ng-container *ngIf="cargos">\n    <p-dataView *ngIf="cargos" emptyMessage="Nada encontrado, experimente escolher outro filtro" class="data-container"\n      #dv [lazy]="true" [value]="cargos.data" [paginator]="true" [rows]="cargos.meta.take"\n      [totalRecords]="cargos.meta.itemCount" [pageLinks]="cargos.meta.pageCount" (onLazyLoad)="paginar($event)"\n      filterBy="nome" layout="list">\n      <ng-template pTemplate="header">\n\n        <div class="flex justify-content-start mb-2">\n          <div class="field col-12 sm:col-6 xl:col-3 ml-0 ">\n            <p-dropdown #dropdown_tipoDesconto [options]="sortNiveisHierarquicos" placeholder="N\xedveis hierarquicos"\n              (onChange)="changeNivelHierarquico($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="ml-0 mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n        </div>\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field col-12 sm:col-6 xl:col-3">\n            <button pButton pRipple class="sm:w-auto w-full p-button-outlined ml-1" icon="pi pi-times"\n              label="Limpar filtros" (click)="clearAllFilters($event, dropdown_tipoDesconto)">\n            </button>\n          </div>\n          <div class="field col-12 sm:col-6 xl:col-3 text-right">\n            <button pButton pRipple class="sm:w-auto w-full" icon="pi pi-plus" label="Novo cargo" (click)="createNew()">\n            </button>\n          </div>\n        </div>\n\n        <div class="flex flex-column md:flex-row md:justify-content-center">\n          <span class="p-input-icon-right mb-2 md:mb-0 ">\n            <i class="pi pi-search cursor-pointer text-primary" (click)="search()"></i>\n            <input class="w-full" type="search" pInputText [(ngModel)]="searchedCargo"\n              [ngModelOptions]="{standalone: true}" placeholder="Nome ou descri\xe7\xe3o" (keyup.enter)="search()">\n          </span>\n        </div>\n      </ng-template>\n\n      <ng-template let-cargo pTemplate="listItem">\n        <div *ngIf="cargos" #templateGrid class="col-12">\n          <div class="data-list-item">\n            <div class="data-list-detail">\n              <div class="data-name mt-2">{{ cargo.nome }}</div>\n              <div class="data-description mt-1">{{ cargo.descricao }}</div>\n              <div class="mt-3">\xc1rea/Setor: {{ cargo.area?.nome || \'Sem \xe1rea/setor definido\' }}</div>\n              <div class="mt-1">N\xedvel Hierarquico: {{ cargo.nivel_hierarquico}}</div>\n              <div class="mt-3">Faixa salarial: </div>\n              <div class="mt-1">M\xednimo: {{ cargo.salario_min | currency:\'BRL\': \'(R$)\'}}</div>\n              <div class="mt-1">M\xe1ximo: {{ cargo.salario_max | currency:\'BRL\': \'(R$)\'}}</div>\n            </div>\n            <div class="data-list-action">\n              <p-button icon="pi pi-pencil" label="Atualizar" (click)="detalhar(cargo)">\n              </p-button>\n            </div>\n          </div>\n        </div>\n      </ng-template>\n    </p-dataView>\n  </ng-container>\n\n  <ng-container *ngIf="contentError.hasError">\n    <app-content-error [erroCode]="contentError.code"></app-content-error>\n  </ng-container>\n</div>',styles:[""]})],q);var y,l;(l=y||(y={})).FIXO="FIXO",l.PERCENTUAL="PERCENTUAL";const Z=[{label:"Fixo",value:y.FIXO},{label:"Percentual",value:y.PERCENTUAL}];let B=class{constructor(e,t,o){this.formBuilder=e,this.beneficioService=t,this.modal=o,this.createdId="",this.wasCreated=!1,this.sortTiposDesconto=Z,this.showQuestionDialog=!1,this.questionTitle="",this.questionDescription="",this.subscriptions=new b.w0}ngOnInit(){const{nome:e,descricao:t,is_descontado:o,custo_beneficio:i,tipo_desconto:s,valor_desconto:r}=this.beneficio;this.form=this.formBuilder.group({nome:[e,[c.kI.required]],descricao:[t,[c.kI.required]],is_descontado:[o,[c.kI.required]],tipo_desconto:[s||y.FIXO,[c.kI.required]],valor_desconto:[r||0,[c.kI.required]],custo_beneficio:[i||0,[c.kI.required]]})}ngOnDestroy(){this.subscriptions.unsubscribe()}update(){const{id:e}=this.beneficio,t=this.form.get("nome").value,o=this.form.get("descricao").value,i=this.form.get("is_descontado").value,s=this.form.get("tipo_desconto").value,r=Number(this.form.get("valor_desconto").value),d=Number(this.form.get("custo_beneficio").value),f=this.beneficioService.update(e,{nome:t,descricao:o,is_descontado:i,tipo_desconto:s,valor_desconto:r,custo_beneficio:d}).subscribe(g=>{this.createdId=g.id,this.fechar(!0)});this.subscriptions.add(f)}fechar(e=!1){this.modal.dismiss(e)}detailDesconto(e){e?(this.questionTitle="Sim",this.questionDescription="Esta op\xe7\xe3o indica que h\xe1 um valor FIXO ou percentual a ser descontado do contra-cheque do funcion\xe1rio"):(this.questionTitle="N\xe3o",this.questionDescription="Esta op\xe7\xe3o indica que absolutamente nenhum valor ser\xe1 descontado do funcion\xe1rio, com exce\xe7\xf5es de co-participa\xe7\xf5es"),this.showQuestionDialog=!0}tipoDescontoChanged(e){this.form.get("valor_desconto").setValue(0)}disabledDescontoFixo(){const e=this.form.get("tipo_desconto").value,t=this.form.get("is_descontado").value;return e==y.FIXO&&t}disabledDescontoPercentual(){const e=this.form.get("tipo_desconto").value,t=this.form.get("is_descontado").value;return e==y.PERCENTUAL&&t}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableUpdateBtn(){return!this.form.valid}};B.ctorParameters=()=>[{type:c.QS},{type:_},{type:v.IN}],B.propDecorators={beneficio:[{type:n.IIB}]},B=(0,u.gn)([(0,n.wA2)({selector:"app-beneficio-detail",template:'<ion-content appScrollTheme>\n  <ng-container>\n    <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-8 md:px-6 lg:px-8 ">\n        <div class="text-900 font-medium text-xl mb-1">Atualizar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid ">\n          <div class="grid formgrid p-fluid">\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="custo_beneficio">Custo gerado \xe0 empresa</label>\n              <p-inputNumber inputId="custo_beneficio" formControlName="custo_beneficio" mode="decimal"\n                [minFractionDigits]="2" [maxFractionDigits]="2">\n              </p-inputNumber>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'custo_beneficio\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-12">\n              <label for="descricao" class="font-medium text-900">Descri\xe7\xe3o</label>\n              <textarea id="descricao" type="text" pInputTextarea rows="5" formControlName="descricao"></textarea>\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n            </div>\n\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n            <div class="text-900 font-medium text-xl mb-3">\xc9 descontado do colaborador?</div>\n            <div class="field-radiobutton mb-4 col-12 ">\n              <p-radioButton name="is_descontado" [value]="false" formControlName="is_descontado" inputId="nao">\n              </p-radioButton>\n              <label for="nao">N\xe3o</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailDesconto(false)"></div>\n            </div>\n            <div class="field-radiobutton mb-4 col-12">\n              <p-radioButton name="is_descontado" [value]="true" formControlName="is_descontado" inputId="sim">\n              </p-radioButton>\n              <label for="sim">Sim</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailDesconto(true)"></div>\n            </div>\n\n            <div *ngIf="form.get(\'is_descontado\').value" class="field mb-4 col-12">\n              <label for="tipo_desconto">Tipo de desconto</label>\n              <p-dropdown id="tipo_desconto" [options]="sortTiposDesconto"\n                placeholder="Selecione o tipo de desconto" formControlName="tipo_desconto" optionLabel="label"\n                optionValue="value" (onChange)="tipoDescontoChanged($event)">\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tipo_desconto\')"></p-message>\n              </div>\n            </div>\n            <div *ngIf="disabledDescontoFixo()" class="field mb-4 col-12">\n              <label for="valor_desconto">Valor descontado do colaborador</label>\n              <p-inputNumber inputId="valor_desconto" formControlName="valor_desconto" mode="decimal"\n                [minFractionDigits]="2" [maxFractionDigits]="2">\n              </p-inputNumber>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'valor_desconto\')"></p-message>\n              </div>\n            </div>\n            <div *ngIf="disabledDescontoPercentual()" class="field mb-4 col-12">\n              <label for="valor_desconto">Valor descontado do colaborador</label>\n              <p-inputNumber inputId="valor_desconto" formControlName="valor_desconto" [min]="1" [max]="100">\n              </p-inputNumber>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'valor_desconto\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Salvar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="update()"\n              [disabled]="disableUpdateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n\n\n  <p-dialog [(visible)]="showQuestionDialog" appendTo="body" [modal]="true"\n    [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <span class="flex align-items-center justify-content-center bg-cyan-100 text-cyan-800 mr-3 border-circle"\n          style="width:32px;height:32px">\n          <i class="pi pi-info text-lg"></i>\n        </span>\n        <span class="font-medium text-2xl text-900">{{ questionTitle }}</span>\n      </div>\n    </ng-template>\n    <p class="line-height-3 p-0 m-0">\n      {{ questionDescription }}.\n    </p>\n    <ng-template pTemplate="footer">\n      <div class=" pt-3">\n        <button pButton pRipple icon="pi pi-check" (click)="showQuestionDialog = false" label="OK"></button>\n      </div>\n    </ng-template>\n  </p-dialog>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],B);let R=class{constructor(e,t,o){this.formBuilder=e,this.beneficioService=t,this.modal=o,this.createdId="",this.wasCreated=!1,this.sortTiposDesconto=Z,this.showQuestionDialog=!1,this.questionTitle="",this.questionDescription="",this.subscriptions=new b.w0,this.form=this.formBuilder.group({nome:[,[c.kI.required]],descricao:[,[c.kI.required]],is_descontado:[!1,[c.kI.required]],tipo_desconto:[y.FIXO,[c.kI.required]],valor_desconto:[0,[c.kI.required]],custo_beneficio:[0,[c.kI.required]]})}ngOnInit(){}ngOnDestroy(){this.subscriptions.unsubscribe()}create(){const e=this.form.get("nome").value,t=this.form.get("descricao").value,o=this.form.get("is_descontado").value,i=this.form.get("tipo_desconto").value,s=Number(this.form.get("valor_desconto").value),r=Number(this.form.get("custo_beneficio").value),d=this.beneficioService.create({nome:e,descricao:t,is_descontado:o,tipo_desconto:i,valor_desconto:s,custo_beneficio:r}).subscribe(f=>{this.createdId=f.id,this.fechar(!0)});this.subscriptions.add(d)}fechar(e=!1){this.modal.dismiss(e)}detailDesconto(e){e?(this.questionTitle="Sim",this.questionDescription="Esta op\xe7\xe3o indica que h\xe1 um valor FIXO ou percentual a ser descontado do contra-cheque do funcion\xe1rio"):(this.questionTitle="N\xe3o",this.questionDescription="Esta op\xe7\xe3o indica que absolutamente nenhum valor ser\xe1 descontado do funcion\xe1rio, com exce\xe7\xf5es de co-participa\xe7\xf5es"),this.showQuestionDialog=!0}tipoDescontoChanged(e){this.form.get("valor_desconto").setValue(0)}disabledDescontoFixo(){const e=this.form.get("tipo_desconto").value,t=this.form.get("is_descontado").value;return e==y.FIXO&&t}disabledDescontoPercentual(){const e=this.form.get("tipo_desconto").value,t=this.form.get("is_descontado").value;return e==y.PERCENTUAL&&t}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}};R.ctorParameters=()=>[{type:c.QS},{type:_},{type:v.IN}],R=(0,u.gn)([(0,n.wA2)({selector:"app-beneficio-cadastro",template:'<ion-content appScrollTheme>\n  <ng-container>\n    <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-8 md:px-6 lg:px-8 ">\n        <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid ">\n          <div class="grid formgrid p-fluid">\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="custo_beneficio">Custo gerado \xe0 empresa</label>\n              <p-inputNumber inputId="custo_beneficio" formControlName="custo_beneficio" mode="decimal"\n                [minFractionDigits]="2" [maxFractionDigits]="2">\n              </p-inputNumber>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'custo_beneficio\')"></p-message>\n              </div>\n            </div>\n           \n            <div class="field mb-4 col-12">\n              <label for="descricao">Descri\xe7\xe3o</label>\n              <textarea id="descricao" class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n                formControlName="descricao"></textarea>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n              </div>\n            </div>\n\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n            <div class="text-900 font-medium text-xl mb-3">\xc9 descontado do colaborador?</div>\n            <div class="field-radiobutton mb-4 col-12 ">\n              <p-radioButton name="is_descontado" [value]="false" formControlName="is_descontado" inputId="nao">\n              </p-radioButton>\n              <label for="nao">N\xe3o</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailDesconto(false)"></div>\n            </div>\n            <div class="field-radiobutton mb-4 col-12">\n              <p-radioButton name="is_descontado" [value]="true" formControlName="is_descontado" inputId="sim">\n              </p-radioButton>\n              <label for="sim">Sim</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailDesconto(true)"></div>\n            </div>\n\n            <div *ngIf="form.get(\'is_descontado\').value" class="field mb-4 col-12">\n              <label for="tipo_desconto">Tipo de desconto</label>\n              <p-dropdown id="tipo_desconto" [options]="sortTiposDesconto"\n                placeholder="Selecione o tipo de desconto" formControlName="tipo_desconto" optionLabel="label"\n                optionValue="value" (onChange)="tipoDescontoChanged($event)">\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tipo_desconto\')"></p-message>\n              </div>\n            </div>\n            <div *ngIf="disabledDescontoFixo()" class="field mb-4 col-12">\n              <label for="valor_desconto">Valor descontado do colaborador</label>\n              <p-inputNumber inputId="valor_desconto" formControlName="valor_desconto" mode="decimal"\n                [minFractionDigits]="2" [maxFractionDigits]="2">\n              </p-inputNumber>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'valor_desconto\')"></p-message>\n              </div>\n            </div>\n            <div *ngIf="disabledDescontoPercentual()" class="field mb-4 col-12">\n              <label for="valor_desconto">Valor descontado do colaborador</label>\n              <p-inputNumber inputId="valor_desconto" formControlName="valor_desconto" [min]="1" [max]="100">\n              </p-inputNumber>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'valor_desconto\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Salvar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n              [disabled]="disableCreateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n\n\n  <p-dialog [(visible)]="showQuestionDialog" appendTo="body" [modal]="true"\n    [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <span class="flex align-items-center justify-content-center bg-cyan-100 text-cyan-800 mr-3 border-circle"\n          style="width:32px;height:32px">\n          <i class="pi pi-info text-lg"></i>\n        </span>\n        <span class="font-medium text-2xl text-900">{{ questionTitle }}</span>\n      </div>\n    </ng-template>\n    <p class="line-height-3 p-0 m-0">\n      {{ questionDescription }}.\n    </p>\n    <ng-template pTemplate="footer">\n      <div class=" pt-3">\n        <button pButton pRipple icon="pi pi-check" (click)="showQuestionDialog = false" label="OK"></button>\n      </div>\n    </ng-template>\n  </p-dialog>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],R);let $=class{constructor(e,t,o){this.modal=e,this.toastService=t,this.beneficioservice=o,this.sortTipoDescontos=[],this.searchedBeneficio="",this.selectedTipoDesconto="",this.selectedIsDescontado="",this.currentPage=1,this.contentError=new G.S,this.subscriptions=new b.w0}ngOnInit(){this.sortTipoDescontos=[...Z],this.loadBeneficios()}ngOnDestroy(){this.subscriptions.unsubscribe()}changeTipoDesconto({value:e}){this.selectedTipoDesconto=e,e&&this.loadBeneficios(1)}clearFilter(e){this.loadBeneficios(1)}clearAllFilters(e,t){this.searchedBeneficio=void 0,this.selectedTipoDesconto=void 0,t.writeValue(null),this.loadBeneficios(1)}loadBeneficios(e=1){const t=this.beneficioservice.list({searchedBeneficio:this.searchedBeneficio,tipo_desconto:this.selectedTipoDesconto},{order:m.L.ASC,page:e,take:5}).subscribe({next:o=>{this.beneficios=o},error:o=>{this.contentError={code:o.status,hasError:!0}}});this.subscriptions.add(t)}detalhar(e){this.showModal(B,{beneficio:e})}createNew(){this.showModal(R)}search(){this.loadBeneficios(1)}paginar(e){const{first:t,rows:o}=e,i=Number(Number(t)/Number(o)+1);i!=this.currentPage&&(this.currentPage=i,this.loadBeneficios(i))}showModal(e,t){var o=this;return(0,h.Z)(function*(){const i=yield o.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-80",componentProps:t});return i.onDidDismiss().then(s=>{const{data:r}=s;r&&(o.loadBeneficios(),o.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:p.m4.mediumDuration,gravidade:p.kl.SUCESSO}))}),yield i.present()})()}};$.ctorParameters=()=>[{type:v.IN},{type:I.D},{type:_}],$=(0,u.gn)([(0,n.wA2)({selector:"app-beneficio-main",template:'<div class="card main-view">\n  <ng-container *ngIf="beneficios">\n    <p-dataView  emptyMessage="Nada encontrado, experimente escolher outro filtro"\n      class="data-container" #dv [lazy]="true" [value]="beneficios.data" [paginator]="true"\n      [rows]="beneficios.meta.take" [totalRecords]="beneficios.meta.itemCount" [pageLinks]="beneficios.meta.pageCount"\n      (onLazyLoad)="paginar($event)" filterBy="nome" layout="list">\n      <ng-template pTemplate="header">\n\n        <div class="flex justify-content-start mb-2">\n          <div class="field col-12 sm:col-6 xl:col-3 ml-0 ">\n            <p-dropdown #dropdown_tipoDesconto [options]="sortTipoDescontos" placeholder="Tipos de Desconto"\n              (onChange)="changeTipoDesconto($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n        </div>\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field col-12 sm:col-6 xl:col-3">\n            <button pButton pRipple class="sm:w-auto w-full p-button-outlined ml-1" icon="pi pi-times"\n              label="Limpar filtros" (click)="clearAllFilters($event, dropdown_tipoDesconto)">\n            </button>\n          </div>\n\n          <div class="field col-12 sm:col-6 xl:col-3 text-right">\n            <button pButton pRipple class="sm:w-auto w-full" icon="pi pi-plus" label="Novo benef\xedcio"\n              (click)="createNew()">\n            </button>\n          </div>\n\n        </div>\n\n        <div class="flex flex-column md:flex-row md:justify-content-center">\n          <span class="p-input-icon-right mb-2 md:mb-0 ">\n            <i class="pi pi-search cursor-pointer text-primary" (click)="search()"></i>\n            <input class="w-full" type="search" pInputText [(ngModel)]="searchedBeneficio"\n              [ngModelOptions]="{standalone: true}" placeholder="Nome ou descri\xe7\xe3o" (keyup.enter)="search()">\n          </span>\n        </div>\n      </ng-template>\n\n      <ng-template let-beneficio pTemplate="listItem">\n        <div *ngIf="beneficios" #templateGrid class="col-12">\n          <div class="data-list-item">\n            <div class="data-list-detail">\n              <div class="data-name mt-2">{{ beneficio.nome }}</div>\n              <div class="data-description mt-1">{{ beneficio.descricao }}</div>\n              <div class="mt-1">Custo \xe0 empresa: {{ beneficio.custo_beneficio | currency:\'BRL\': \'(R$)\'}}</div>\n              <div class="mt-1">Este benef\xedcio {{ beneficio.is_descontado? \'\xc9\': \'N\xc3O \xc9\' }} descontado do colaborador\n              </div>\n              <div *ngIf="beneficio.is_descontado" class="mt-1">O desconto \xe9 {{ beneficio.tipo_desconto}}</div>\n              <div *ngIf="beneficio.is_descontado" class="mt-1">Valor descontado do colaborador: {{\n                beneficio.valor_desconto |\n                currency:\'BRL\': \'(R$)\'}}</div>\n            </div>\n            <div class="data-list-action">\n              <p-button icon="pi pi-pencil" label="Atualizar" (click)="detalhar(beneficio)">\n              </p-button>\n            </div>\n          </div>\n        </div>\n      </ng-template>\n    </p-dataView>\n  </ng-container>\n\n  <ng-container *ngIf="contentError.hasError">\n    <app-content-error [erroCode]="contentError.code"></app-content-error>\n  </ng-container>\n</div>',styles:[""]})],$);var xt=a(19901),yt=a(33610),Ct=a(95037),It=a(81338),_t=a(36403),St=a(69768),wt=a(32506),ne=a(50952);let J=class{};J=(0,u.gn)([(0,n.LVF)({declarations:[D,w,E,L,N,P,A,j,q,R,B,$],imports:[x.ez,c.u5,c.UX,v.Pc,re.FI,Ee.QK,K.j,Ie.A,Fe.S,Me.T,qe.l,$e.x,ze.F,Ve.U$,Qe.$9,Re.WN,xt.q,X.L$,De.nD,je.U,Te.cc,Se.u,ce.Q,ke.ON,ye.kW,Ce.LU,K.j,Le.S,k,xe.hJ,Pe.O,_e.O,we.q,Ne.gz,Be.zz,Oe.Iu,X.L$,Ae.D,Ue.f,We.o,It.a,Ct.Y,yt.F,_t.H,St.B,wt.X,ne.S],exports:[D,w,E,L,N,P,A,j,q,R,B,$,ne.S]})],J)}}]);