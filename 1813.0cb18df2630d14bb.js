"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1813],{91813:(Oe,_,r)=>{r.r(_),r.d(_,{AdministracaoPessoasPageModule:()=>lt});var c=r(70655),l=r(98274),y=r(36895),o=r(24006),d=r(48058),m=r(92216),O=r(39528);let p=class{constructor(){this.currentTab="colaborador"}ngOnInit(){}changeTab(e){this.currentTab=e.detail.value}};p.ctorParameters=()=>[],p=(0,c.gn)([(0,l.wA2)({selector:"app-administracao-pessoas",template:'<ion-header [translucent]="true">\n  <ion-toolbar>\n    <ion-buttons slot="start">\n      <ion-menu-button></ion-menu-button>\n    </ion-buttons>\n    <ion-title>ADM. Pessoas</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content appScrollTheme>\n  <br />\n  <ion-segment class="background-segment" [(ngModel)]="currentTab" [ngModelOptions]="{standalone: true}"\n    (ionChange)="changeTab($event)">\n    <ion-segment-button style="margin-left: 5px; max-width: 200px" layout="icon-start" value="colaborador">\n      <ion-label text-wrap class="wrap-text" style="font-size: 1.1em">\n        Colaboradores\n      </ion-label>\n    </ion-segment-button>\n\n    <ion-segment-button style="margin-left: 5px; max-width: 200px" layout="icon-start" value="prestador">\n      <ion-label text-wrap class="wrap-text" style="font-size: 1.1em">\n        Prestadores\n      </ion-label>\n    </ion-segment-button>\n  </ion-segment>\n\n  <ion-segment class="background-segment" [(ngModel)]="currentTab" [ngModelOptions]="{standalone: true}"\n    (ionChange)="changeTab($event)">\n    <ion-segment-button style="max-width: 230px" layout="icon-start" value="usuarioSistema">\n      <ion-label style="font-size: 1.1em"> Usu\xe1rios de Sistema </ion-label>\n    </ion-segment-button>\n  </ion-segment>\n  <br />\n\n  <div class="wall-background h-screen">\n    <ng-container *ngIf="currentTab === \'colaborador\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-colaborador-main></app-colaborador-main>\n      </div>\n    </ng-container>\n\n    <ng-container *ngIf="currentTab === \'prestador\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-prestador-main></app-prestador-main>\n      </div>\n    </ng-container>\n    <ng-container *ngIf="currentTab === \'usuarioSistema\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-usuario-sistema-main></app-usuario-sistema-main>\n      </div>\n    </ng-container>\n  </div>\n\n</ion-content>',styles:[""]})],p);const w=[{path:"",component:p}];let f=class{};f=(0,c.gn)([(0,l.LVF)({imports:[O.Bz.forChild(w)],exports:[O.Bz]})],f);var j=r(77604),k=r(9764),I=r(51740),A=r(35593),U=r(82210),R=r(58783),z=r(63054),D=r(92665),$=r(1997),B=r(38433),F=r(50613),W=r(21493),V=r(32137),H=r(79512),Q=r(91795),X=r(45132),K=r(15108),G=r(68271),J=r(21327),N=r(85226),Z=r(32506),pe=r(2635),Ke=r(81338),Y=r(19901),q=r(42480),Ge=r(50952),Je=r(68350),ee=r(15861);var te=r(50727),n=r(98739),se=r(57118),Ze=r(42759),Ye=r(16320),ae=r(59256),g=r(59136),qe=r(1043),C=r(52710),ie=r(67578),et=r(80529),S=r(99038),tt=r(40199),st=r(55583);let ce=class{constructor(e){this.http=e}findById(e){return this.http.get(`${S.Hz.baseURL}/prestadores/${e}`,{responseType:"json"})}list(e,t=new tt.k){let s=st.t.getPageOptionsParams(t);return e&&e.searchedPrestador&&(s=s.append("searchedPrestador",e.searchedPrestador)),e&&e.status_pessoa&&(s=s.append("status_pessoa",e.status_pessoa)),e&&e.status_user&&(s=s.append("status_user",e.status_user)),e&&e.nome&&(s=s.append("nome",e.nome)),e&&e.cpf&&(s=s.append("cpf",e.cpf)),e&&e.email&&(s=s.append("email",e.email)),e&&e.loja_id&&(s=s.append("loja_id",e.loja_id)),this.http.get(`${S.Hz.baseURL}/prestadores`,{responseType:"json",params:s})}create(e){const{tel1:t,tel2:s,email_alternativo:a,cpf:i}=e;return e=ie.f.sanitizeCreate({tel1:t,tel2:s,email_alternativo:a,cpf:i},e),this.http.post(`${S.Hz.baseURL}/prestadores`,e,{responseType:"json"})}update(e,t){const{tel1:s,tel2:a,email_alternativo:i}=e;return e=ie.f.sanitizeCreate({tel1:s,tel2:a,email_alternativo:i,cpf:void 0},e),this.http.put(`${S.Hz.baseURL}/prestadores/${t}`,e,{responseType:"json"})}createEndereco(e,t){return this.http.post(`${S.Hz.baseURL}/prestadores/${t}/endereco`,e,{responseType:"json"})}updateEndereco(e,t){return this.http.post(`${S.Hz.baseURL}/prestadores/${t}/endereco`,e,{responseType:"json"})}updatePassword(e){return this.http.patch(`${S.Hz.baseURL}/users/password`,{senha:e},{responseType:"json"})}uploadAvatar(e,t){const s=new FormData;s.append("file",e);const a=t?`${S.Hz.baseURL}/prestadores/${t}/avatar`:`${S.Hz.baseURL}/prestadores/avatar`;return this.http.patch(a,s)}};ce.ctorParameters=()=>[{type:et.eN}],ce=(0,c.gn)([(0,l.GSi)({providedIn:"root"})],ce);var at=r(45088),re=r(94567),ue=r(41117),it=r(2870);var me=r(37945),he=r(34758),ve=r(34057),oe=r(81695),fe=r(95494),Ae=r(55575),rt=r(54452),ge=r(94826);let ne=class{constructor(e,t,s,a,i,u,h,v,b){this.formBuilder=e,this.userService=t,this.prestadoresService=s,this.lojaService=a,this.perfilService=i,this.empresaService=u,this.modalCadastro=h,this.toastService=v,this.storage=b,this.isModal=!0,this.updatedEvent=new l.vpe,this.currentPerfilTake=15,this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.currentEmpresasPage=1,this.searchedEmpresa="",this.searchedSuperior="",this.showSuperiorDialog=!1,this.createdUserId="",this.userWasCreated=!1,this.isCliente=!1,this.maxDate=fe.E.getDiaAnterior(),this.subscriptions=new te.w0}ngOnInit(){const{nome:e,loja:t,perfil:s,empresa:a,nivel_superior:i,tel1:u,tel2:h,email_alternativo:v,data_nascimento:b}=this.user,L=t?.id||void 0,E=a?.id||void 0,P=i?.id||void 0;this.form=this.formBuilder.group({nome:[e,[o.kI.required]],email_alternativo:[v,[o.kI.email]],tel1:[u,[o.kI.required]],tel2:[h,[]],data_nascimento:[new Date(b),[o.kI.required]],perfil_id:[s.id,[o.kI.required]],loja_id:[L,[o.kI.required]],empresa_id:[E,[]],superior:[P,[]]}),this.loadLojas(),this.loadPerfis(),this.loadEmpresas(),this.loadSuperiores()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPerfis(e=1){const t=this.perfilService.list({order:g.L.ASC,page:e,take:15},{with_cliente:!1}).subscribe(s=>{this.perfis=s});this.subscriptions.add(t)}lazyLoadPerfis(e){this.currentPerfilTake+=5;const t=this.perfilService.list({order:g.L.ASC,page:1,take:this.currentPerfilTake},{with_cliente:!1}).subscribe(s=>{this.perfis=s,e.show()});this.subscriptions.add(t)}loadLojas(e=1,t){const s=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:re.eX.OPERANDO},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.lojas=a,t&&t.show()});this.subscriptions.add(s)}searchLoja({value:e}){this.searchedLoja=e,this.loadLojas(1)}clearLoja(e){e.value="",this.searchedLoja="",this.loadLojas(1)}paginarLojas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentLojasPage&&(this.currentLojasPage=i,this.loadLojas(i,t))}loadEmpresas(e=1,t){const s=this.empresaService.list({searchedEmpresa:this.searchedEmpresa},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.empresas=a});this.subscriptions.add(s)}searchEmpresa({value:e}){this.searchedEmpresa=e,this.loadEmpresas(1)}clearEmpresa(e){e.value="",this.searchedEmpresa="",this.loadEmpresas(1)}paginarEmpresas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentEmpresasPage&&(this.currentEmpresasPage=i,this.loadEmpresas(i,t))}update(){const{id:e}=this.user,t=this.form.get("nome").value,s=this.form.get("data_nascimento").value,a=this.form.get("email_alternativo").value,i=this.form.get("tel1").value,u=this.form.get("tel2").value,h=this.form.get("perfil_id").value,v=this.form.get("loja_id").value,b=this.form.get("empresa_id").value||void 0,L=this.form.get("superior").value?this.form.get("superior").value:void 0,E=this.prestadoresService.update({nome:t,perfil_id:h,loja_id:v,empresa_id:b,nivel_superior_id:L,data_nascimento:s,email_alternativo:a,tel1:i,tel2:u},e).subscribe(P=>{this.createdUserId=P.id,this.userWasCreated=!0,this.fechar(this.userWasCreated)});this.subscriptions.add(E)}uploadFile(e,t){const{id:s,tipo_user:a}=this.user,{id:i,perfil_nome:u}=this.storage.getLocalUser();if(s!=i&&!ie.f.checkUpdateImagePermission(u))return void this.toastService.presentToast({titulo:"N\xe3o autorizado",detalhe:`Apenas ${ve.u.ADMIN} e ${ve.u.GERENTE} podem atualizar essas informa\xe7\xf5es`,duracao:n.m4.mediumDuration,gravidade:n.kl.ATENCAO});const h=e.files[0],v=this.userService.newUploadAvatar(a,h,s).subscribe(b=>{this.user=b,this.createdUserId=b.id,this.userWasCreated=!0,this.toastService.presentToast({detalhe:"Foto alterada",duracao:n.m4.shortDuration,gravidade:n.kl.SUCESSO,titulo:"Sucesso!"}),this.updatedEvent.emit(this.user),t.clear()});this.subscriptions.add(v)}loadSuperiores(e=1,t){const s=this.userService.listUsers({searchedUser:this.searchedSuperior,tipos_usarios:`${C.Wo.COLABORADOR}, ${C.Wo.PRESTADOR}`},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.superiores=a,t&&t.show()});this.subscriptions.add(s)}searchSuperior({value:e}){this.searchedSuperior=e,this.loadSuperiores(1)}clearSuperior(e){e.value="",this.searchedSuperior="",this.loadSuperiores(1)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){const e=this.form.get("superior").value;this.selectedSuperior=this.superiores.data.find(t=>t.id==e),this.selectedSuperior?this.showModal(oe.Q,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}detailEmpresa(){const e=this.form.get("empresa_id").value;this.selectedEmpresa=this.empresas.data.find(t=>t.id==e),this.selectedEmpresa?this.showModal(ge.P,{empresa:this.selectedEmpresa}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem empresa associada",titulo:"N\xe3o informado",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}listenEndereco(e){this.fechar(this.userWasCreated)}fechar(e=!1){this.modalCadastro.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,ee.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};ne.ctorParameters=()=>[{type:o.QS},{type:he.K},{type:ce},{type:se.W},{type:me.F},{type:Ae.o},{type:d.IN},{type:ae.D},{type:rt.V}],ne.propDecorators={user:[{type:l.IIB}],isModal:[{type:l.IIB}],updatedEvent:[{type:l.r_U}]},ne=(0,c.gn)([(0,l.wA2)({selector:"app-prestador-detail",template:'<ion-content appScrollTheme>\n\n  <form *ngIf="lojas && perfis && empresas" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n    <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n      <div class="flex flex-column align-items-center flex-or ">\n        <img [src]="user?.avatar_url || \'assets/imgs/outros/default-user.jpg\'"\n          class="h-10rem w-10rem border-circle border-2 border-primary mr-1 xl:mr-0 ml-3 " />\n        <p-fileUpload #avatarFile id="avatar" mode="basic" name="avatar" accept="image/*"\n          styleClass="p-button-rounded -mt-4 w-3rem  text-center" chooseIcon="pi pi-pencil" chooseLabel=" "\n          customUpload="true" [auto]="true" (uploadHandler)="uploadFile($event, avatarFile)">\n        </p-fileUpload>\n      </div>\n\n      <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n      <div class="surface-card p-4 shadow-2 border-round p-fluid">\n        <div class="grid formgrid p-fluid">\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="nome" class="font-medium text-900">Nome</label>\n            <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="descricao">Email (alternativo)</label>\n            <input type="text" pInputText placeholder="Email alternativo" formControlName="email_alternativo" />\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email_alternativo\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel1">Celular Principal</label>\n            <p-inputMask id="tel1" placeholder="Celular do prestador" formControlName="tel1" mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel1\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel2">Celular Alternativo</label>\n            <p-inputMask id="tel2" placeholder="Celular alternativo do prestador" formControlName="tel2"\n              mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel2\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="data_nascimento">Data de nascimento</label>\n            <p-calendar formControlName="data_nascimento" placeholder="Data de nascimento do prestador"\n              [maxDate]="maxDate" inputId="data_nascimento" [maxDate]="maxDate"></p-calendar>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'data_nascimento\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="field mb-4 col-12">\n            <label for="descricao">Perfil</label>\n            <p-dropdown #dropdown_perfil [options]="perfis.data" placeholder="Selecione o perfil de acesso"\n              formControlName="perfil_id" optionLabel="nome" optionValue="id">\n              <ng-template let-perfil pTemplate="item">\n                <div class="">\n                  <div>{{perfil.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="footer">\n                <div class="col-12 w-auto">\n                  <button *ngIf="perfis.meta.hasNextPage" pButton pRipple type="button" label="Carregar mais"\n                    (click)="lazyLoadPerfis(dropdown_perfil)" class="p-button-outlined p-button-rounded"></button>\n                </div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'perfil_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="col-12 field ">\n            <label for="loja_id" class="text-900 font-medium mb-3">Loja</label>\n            <p-dropdown id="loja_id" [options]="lojas.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="loja_id"\n              optionLabel="nome" filterBy="nome,codigo"\n              optionValue="id">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchLoja(searchLojaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearLoja(searchLojaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="item">\n                <div>\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="selectedItem">\n                <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'loja_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n          <div class="col-12 field ">\n            <label for="empresa_id" class="text-900 font-medium mb-3">Empresa</label>\n            <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailEmpresa()"></div>\n            <p-dropdown id="empresa_id" [options]="empresas.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="empresa_id"\n              optionLabel="razao_social" \n              filterBy="razao_social, cnpj" optionValue="id">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchEmpresaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchempresa(searchEmpresaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchEmpresa(searchEmpresaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearempresa(searchEmpresaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-empresa pTemplate="item">\n                <div>\n                  <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-empresa pTemplate="selectedItem">\n                <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'empresa_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div *ngIf="superiores" class="col-12 field ">\n            <label for="nivel_superior" class="text-900 font-medium mb-3">N\xedvel Superior</label>\n            <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n            <p-dropdown id="nivel_superior" [options]="superiores.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="superior"\n              optionLabel="nome" filterBy="nome, cpf"\n              optionValue="id" [showClear]="true" optionValue="id">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchSuperiorInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchSuperior(searchSuperiorInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchSuperior(searchSuperiorInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearSuperior(searchSuperiorInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-superior pTemplate="item">\n                <div>\n                  <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                </div>\n              </ng-template>\n              <ng-template let-superior pTemplate="selectedItem">\n                <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'superior\')"></p-message>\n            </div>\n          </div>\n\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n        </div>\n        <div class="flex justify-content-end">\n          <button pButton pRipple label="Atualizar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="update()"\n            [disabled]="disableCreateBtn()"></button>\n        </div>\n      </div>\n    </div>\n  </form>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],ne);var be=r(33930);let Se=class{constructor(e,t,s,a,i,u,h,v){this.formBuilder=e,this.userService=t,this.prestadoresService=s,this.lojaService=a,this.perfilService=i,this.empresasService=u,this.modalCadastro=h,this.toastService=v,this.currentPerfilTake=15,this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.currentEmpresasPage=1,this.searchedEmpresa="",this.searchedSuperior="",this.showSuperiorDialog=!1,this.stepIndex=0,this.createdUserId="",this.userWasCreated=!1,this.isCliente=!1,this.maxDate=fe.E.getDiaAnterior(),this.enderecoMode=be.x.USER,this.subscriptions=new te.w0,this.form=this.formBuilder.group({nome:[,[o.kI.required]],cpf:[,[o.kI.required]],email:[,[o.kI.required,o.kI.email]],email_alternativo:[,[o.kI.email]],tel1:[,[o.kI.required]],tel2:[,[]],data_nascimento:[,[o.kI.required]],perfil_id:[,[o.kI.required]],loja_id:[,[o.kI.required]],empresa_id:[,[o.kI.required]],superior:[,[]],user_ativo:[!0,[]]})}ngOnInit(){this.steps=[{label:"Informa\xe7\xf5es"},{label:"Endere\xe7o"}],this.loadLojas(),this.loadPerfis(),this.loadEmpresas(),this.loadSuperiores()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPerfis(e=1){const t=this.perfilService.list({order:g.L.ASC,page:e,take:15},{with_cliente:!1}).subscribe(s=>{this.perfis=s});this.subscriptions.add(t)}lazyLoadPerfis(e){this.currentPerfilTake+=5;const t=this.perfilService.list({order:g.L.ASC,page:1,take:this.currentPerfilTake},{with_cliente:!1}).subscribe(s=>{this.perfis=s,e.show()});this.subscriptions.add(t)}loadLojas(e=1,t){const s=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:re.eX.OPERANDO},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.lojas=a,t&&t.show()});this.subscriptions.add(s)}searchLoja({value:e}){this.searchedLoja=e,this.loadLojas(1)}clearLoja(e){e.value="",this.searchedLoja="",this.loadLojas(1)}paginarLojas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentLojasPage&&(this.currentLojasPage=i,this.loadLojas(i,t))}loadEmpresas(e=1,t){const s=this.empresasService.list({searchedEmpresa:this.searchedEmpresa},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.empresas=a,t&&t.show()});this.subscriptions.add(s)}searchEmpresa({value:e}){this.searchedEmpresa=e,this.loadEmpresas(1)}clearEmpresa(e){e.value="",this.searchedEmpresa="",this.loadEmpresas(1)}paginarEmpresas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentEmpresasPage&&(this.currentEmpresasPage=i,this.loadEmpresas(i,t))}create(){const e=this.form.get("nome").value,t=this.form.get("email").value,s=this.form.get("cpf").value,a=this.form.get("data_nascimento").value,i=this.form.get("email_alternativo").value,u=this.form.get("tel1").value,h=this.form.get("tel2").value,v=this.form.get("user_ativo").value,{id:b}=this.form.get("perfil_id").value,{id:L}=this.form.get("loja_id").value,E=this.form.get("empresa_id").value?this.form.get("empresa_id").value?.id:void 0,P=this.form.get("superior").value?this.form.get("superior").value?.id:void 0,dt=this.prestadoresService.create({nome:e,email:t,cpf:s,perfil_id:b,loja_id:L,empresa_id:E,nivel_superior_id:P,data_nascimento:a,email_alternativo:i,tel1:u,tel2:h,user_ativo:v}).subscribe(pt=>{this.createdUserId=pt.id,this.userWasCreated=!0,this.stepIndex++});this.subscriptions.add(dt)}loadSuperiores(e=1,t){const s=this.userService.listUsers({searchedUser:this.searchedSuperior,tipos_usarios:`${C.Wo.COLABORADOR}, ${C.Wo.PRESTADOR}`},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.superiores=a,t&&t.show()});this.subscriptions.add(s)}searchSuperior({value:e}){this.searchedSuperior=e,this.loadSuperiores(1)}clearSuperior(e){e.value="",this.searchedSuperior="",this.loadSuperiores(1)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){this.selectedSuperior=this.form.get("superior").value,this.selectedSuperior?this.showModal(oe.Q,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}detailEmpresa(){const e=this.form.get("empresa_id").value;e?this.showModal(ge.P,{empresa:e}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem empresa associada",titulo:"N\xe3o informado",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}listenEndereco(e){this.fechar(this.userWasCreated)}fechar(e=!1){this.modalCadastro.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,ee.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};Se.ctorParameters=()=>[{type:o.QS},{type:he.K},{type:ce},{type:se.W},{type:me.F},{type:Ae.o},{type:d.IN},{type:ae.D}],Se=(0,c.gn)([(0,l.wA2)({selector:"app-prestador-cadastro",template:'<ion-content appScrollTheme>\n  <div class="surface-ground  py-4">\n    <p-steps [activeIndex]="stepIndex" [model]="steps" [readonly]="true"></p-steps>\n  </div>\n\n  <ng-container *ngIf="stepIndex == 0">\n    <form *ngIf="lojas && perfis && empresas" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-2 md:px-6 lg:px-8">\n        <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid">\n          <div class="grid formgrid p-fluid">\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">CPF</label>\n              <p-inputMask placeholder="CPF do prestador" formControlName="cpf" mask="999.999.999-99">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'cpf\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">Email (principal)</label>\n              <input type="text" pInputText placeholder="Email principal" formControlName="email" />\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">Email (alternativo)</label>\n              <input type="text" pInputText placeholder="Email alternativo" formControlName="email_alternativo" />\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email_alternativo\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="tel1">Celular Principal</label>\n              <p-inputMask id="tel1" placeholder="Celular do prestador" formControlName="tel1" mask="(99)9 9999-9999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel1\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="tel2">Celular Alternativo</label>\n              <p-inputMask id="tel2" placeholder="Celular alternativo do prestador" formControlName="tel2"\n                mask="(99)9 9999-9999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel2\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="data_nascimento">Data de nascimento</label>\n              <p-calendar formControlName="data_nascimento" placeholder="Data de nascimento do funcion\xe1rio"\n                [maxDate]="maxDate" inputId="data_nascimento"></p-calendar>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'data_nascimento\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-4 col-12">\n              <label for="descricao">Perfil</label>\n              <p-dropdown #dropdown_perfil [options]="perfis.data" placeholder="Selecione o perfil de acesso"\n                formControlName="perfil_id" optionLabel="nome">\n                <ng-template let-perfil pTemplate="item">\n                  <div class="">\n                    <div>{{perfil.nome}}</div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="footer">\n                  <div class="col-12 w-auto">\n                    <button *ngIf="perfis.meta.hasNextPage" pButton pRipple type="button" label="Carregar mais"\n                      (click)="lazyLoadPerfis(dropdown_perfil)" class="p-button-outlined p-button-rounded"></button>\n                  </div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'perfil_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="col-12 field ">\n              <label for="loja_id" class="text-900 font-medium mb-3">Loja</label>\n              <p-dropdown id="loja_id" [options]="lojas.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="loja_id"\n                optionLabel="nome" filterBy="nome,codigo">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchLoja(searchLojaInput)">\n                      <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearLoja(searchLojaInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-loja pTemplate="item">\n                  <div>\n                    <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-loja pTemplate="selectedItem">\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'loja_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n            <div class="col-12 field ">\n              <label for="empresa_id" class="text-900 font-medium mb-3">Empresa</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailEmpresa()"></div>\n              <p-dropdown id="empresa_id" [options]="empresas.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="empresa_id"\n                optionLabel="razao_social" filterBy="razao_social, cnpj">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchEmpresaInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchempresa(searchEmpresaInput)">\n                      <button pButton pRipple icon="pi pi-search" (click)="searchEmpresa(searchEmpresaInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearempresa(searchEmpresaInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-empresa pTemplate="item">\n                  <div>\n                    <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-empresa pTemplate="selectedItem">\n                  <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'empresa_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div *ngIf="superiores" class="col-12 field ">\n              <label for="nivel_superior" class="text-900 font-medium mb-3">N\xedvel Superior</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n              <p-dropdown id="nivel_superior" [options]="superiores.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="superior"\n                optionLabel="nome" filterBy="nome, cpf" [showClear]="true">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchSuperiorInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchSuperior(searchSuperiorInput)">\n                      <button pButton pRipple icon="pi pi-search"\n                        (click)="searchSuperior(searchSuperiorInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearSuperior(searchSuperiorInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-superior pTemplate="item">\n                  <div>\n                    <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-superior pTemplate="selectedItem">\n                  <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'superior\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-2 col-12 ">\n              <div class="mb-3" for="user_ativo">Permitir acesso ao sistema?</div>\n              <p-inputSwitch class="ml-2" id="user_ativo" formControlName="user_ativo"></p-inputSwitch>\n            </div>\n\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Pr\xf3ximo" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n              [disabled]="disableCreateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n\n  <ng-container *ngIf="stepIndex == 1">\n    <app-endereco [idOf]="createdUserId" [enderecoMode]="enderecoMode"\n      (createdEvent)="listenEndereco($event)"></app-endereco>\n  </ng-container>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],Se);let Me=class{constructor(e,t,s,a){this.prestadoresService=e,this.modal=t,this.toastService=s,this.lojaService=a,this.sortUsertatus=C.Mm,this.sortPessoaStatus=C.hx,this.sortLojas=[],this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.searchedNome="",this.selectedPessoaStatus=void 0,this.selectedUsuarioStatus=void 0,this.currentPage=1,this.showStatusDialog=!1,this.editMenuItens=[{label:"Op\xe7\xf5es",items:[{label:"Atualizar",icon:"pi pi-user-edit",command:()=>this.detalharSimplificado(this.selectedUser)},{label:"Status",icon:"pi pi-exclamation-triangle",command:()=>this.detalharStatus(this.selectedUser)},{label:"Autoriza\xe7\xf5es",icon:"pi pi-verified",command:()=>this.detalharAuthorization(this.selectedUser)}]},{separator:!0,items:[{label:"Perfil",icon:"pi pi-id-card",command:()=>this.detalharPerfil(this.selectedUser)}]}],this.updateStatusObj={status_user:void 0,status_pessoa:void 0},this.enderecoMode=be.x.USER,this.contentError=new ue.S,this.subscriptions=new te.w0}ngOnInit(){this.loadLoja(),this.loadPrestadores()}ngOnDestroy(){this.subscriptions.unsubscribe()}changeStatusUsuario({value:e}){this.selectedUsuarioStatus=e,this.loadPrestadores(1)}changeStatusPessoa({value:e}){this.selectedPessoaStatus=e,this.loadPrestadores(1)}changeLoja({value:e}){this.selectedLoja=e,this.loadPrestadores(1)}clearFilter(){this.loadPrestadores(1)}clearAllFilters(e,t,s){this.searchedNome=void 0,this.selectedLoja=void 0,this.selectedPessoaStatus=void 0,this.selectedUsuarioStatus=void 0,t.writeValue(null),s.writeValue(null),this.loadPrestadores(1)}loadLoja(){const e=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:re.eX.OPERANDO}).subscribe(t=>{this.lojas=t});this.subscriptions.add(e)}searchLoja({value:e}){this.searchedLoja=e,this.loadLoja()}clearLoja(e){e.value="",this.searchedLoja="",this.loadLoja()}loadPrestadores(e=1){const t=this.prestadoresService.list({searchedPrestador:this.searchedNome,loja_id:this.selectedLoja,status_pessoa:this.selectedPessoaStatus,status_user:this.selectedUsuarioStatus},{order:g.L.DESC,page:e,take:5}).subscribe({next:s=>{this.contentError=new ue.S,this.users=s,this.isLoaded=!0},error:s=>{this.contentError={code:s.status,hasError:!0}}});this.subscriptions.add(t)}updateStatus(){const{id:e}=this.selectedUser,{status_pessoa:t,status_user:s}=this.updateStatusObj,a=this.prestadoresService.update({status_pessoa:t,status_user:s},e).subscribe({next:i=>{this.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:n.m4.mediumDuration,gravidade:n.kl.SUCESSO}),this.showStatusDialog=!1,this.loadPrestadores(1)},error:i=>{this.showStatusDialog=!1}});this.subscriptions.add(a)}detalharSimplificado(e){this.showModal(ne,{user:e})}detalharPerfil(e){this.showModal(at.E,{user:e})}detalharAuthorization(e){this.showModal(qe.T,{user:e})}detalharStatus(e){const{status_pessoa:t,status_user:s}=e;this.updateStatusObj={status_pessoa:t,status_user:s},this.showStatusDialog=!0}detalharEndereco(e){e.endereco?this.showModal(Ye.F,{currentEndereco:e,enderecoMode:this.enderecoMode}):this.showModal(Ze.A,{idOf:e.id,enderecoMode:this.enderecoMode,isModal:!0})}setUserImage(e){return e.avatar_url||"assets/imgs/outros/default-user.jpg"}createNewUser(){this.showModal(Se)}search(){this.loadPrestadores(1)}paginar(e){const{first:t,rows:s}=e,a=Number(Number(t)/Number(s)+1);a!=this.currentPage&&(this.currentPage=a,this.loadPrestadores(a))}detailSuperior(e){e?this.showModal(oe.Q,{user_id:e.id}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem superior alocado",titulo:"N\xe3o informado",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}detailLoja(e){e?this.showModal(it.t,{loja:e}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem loja alocada",titulo:"N\xe3o informado",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}detailEmpresa(e){e?this.showModal(ge.P,{empresa:e}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem empresa associada",titulo:"N\xe3o informado",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}showModal(e,t){var s=this;return(0,ee.Z)(function*(){const a=yield s.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{const{data:u}=i;s.isLoaded=!1,s.loadPrestadores(),!0===u&&s.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:n.m4.mediumDuration,gravidade:n.kl.SUCESSO})}),yield a.present()})()}};Me.ctorParameters=()=>[{type:ce},{type:d.IN},{type:ae.D},{type:se.W}],Me=(0,c.gn)([(0,l.wA2)({selector:"app-prestador-main",template:'<div class="card main-view h-full">\n\n  <ng-container *ngIf="isLoaded">\n    <p-dataView emptyMessage="Nada encontrado, experimente trocar os filtros" class="data-container" #dv [lazy]="true"\n      [value]="users.data" [paginator]="true" [rows]="users.meta.take" [totalRecords]="users.meta.itemCount"\n      [pageLinks]="users.meta.pageCount" (onLazyLoad)="paginar($event)" filterBy="nome" layout="list">\n      <ng-template pTemplate="header">\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field  col-12 sm:col-6 xl:col-3">\n            <p-dropdown *ngIf="lojas" #dropdown_lojas id="loja_id" [options]="lojas.data" [filter]="true"\n              placeholder="Selecione" [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" optionValue="id"\n              optionLabel="nome" filterBy="nome,codigo"\n              (onClear)="clearFilter($event)" (onChange)="changeLoja($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchLoja(searchLojaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearLoja(searchLojaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="item">\n                <div>\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="selectedItem">\n                <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n              </ng-template>\n            </p-dropdown>\n          </div>\n\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_filtro [options]="sortUsertatus" placeholder="Status Usu\xe1rio"\n              (onChange)="changeStatusUsuario($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_filtro [options]="sortPessoaStatus" placeholder="Status Pessoa"\n              (onChange)="changeStatusPessoa($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n        </div>\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field col-12 sm:col-6 xl:col-3">\n            <button pButton pRipple class="sm:w-auto w-full p-button-outlined" icon="pi pi-times" label="Limpar filtros"\n              (click)="clearAllFilters($event, dropdown_lojas, dropdown_filtro)">\n            </button>\n          </div>\n          <div class="field col-12 sm:col-6 xl:col-3 text-right">\n            <button pButton pRipple class="sm:w-auto w-full " icon="pi pi-user-plus" label="Novo cadastro"\n              (click)="createNewUser()">\n            </button>\n          </div>\n        </div>\n\n        <div class="flex flex-column md:flex-row md:justify-content-center">\n          <span class="p-inputgroup mb-2 md:mb-0 mt-2 max-w-30rem\t">\n            <input class="w-full" type="search" pInputText [(ngModel)]="searchedNome"\n              [ngModelOptions]="{standalone: true}" placeholder="CPF, Email ou Nome" (keyup.enter)="search()">\n            <button type="button" pButton pRipple class="pi pi-search cursor-pointer p-button-outlined"\n              (click)="search()"></button>\n            <button type="button" pButton pRipple class="pi pi-times cursor-pointer p-button-outlined p-button-danger"\n              (click)="searchedNome = \'\'; search();"></button>\n          </span>\n        </div>\n\n      </ng-template>\n\n      <ng-template let-user pTemplate="listItem">\n        <div *ngIf="isLoaded" #templateGrid class="col-12">\n          <div class="data-list-item">\n            <div class="crop mb-2 md:mb-0 ">\n              <img class="border-circle border-2 border-primary" [src]="setUserImage(user)" [alt]="user.name" />\n            </div>\n            <div class="data-list-detail">\n              <div class="data-name">{{ user.nome }}</div>\n              <div class="data-description mt-2">CPF: {{ user.cpf | cpfMask }}</div>\n              <div class="data-description mt-1">Situa\xe7\xe3o: {{ user.status_pessoa }}</div>\n              <div class="data-description mt-1">Acesso: {{ user.status_user }}</div>\n\n              <div class="data-description mt-2">E-mail: {{ user.email }}</div>\n              <div *ngIf="user.email_alternativo" class="data-description mt-1">E-mail (alternativo): {{\n                user.email_alternativo }}</div>\n              <div class="data-description mt-1">Celular: {{ user.tel1 | phoneMask }}</div>\n              <div *ngIf="user.tel2" class="data-description mt-1">Celular (alternativo): {{ user.tel2 | phoneMask }}</div>\n\n              <div class="data-description mt-2 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailLoja(user.loja)">\n                  Loja:\n                  {{ user.loja?.nome || \'N\xe3o informado\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n              <div class="data-description mt-1 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailSuperior(user.nivel_superior)">\n                  Superior: {{ user.nivel_superior?.nome || \'N\xe3o informado\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n              <div class="data-description mt-1 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailEmpresa(user.empresa)">\n                  Empresa: {{ user.empresa?.razao_social || \'N\xe3o informado\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n\n              <div class="mt-3">\n                <i class="pi pi-sitemap data-category-icon "></i>\n                <span class="data-category">Acesso: {{user.perfil?.nome || "Sem\n                  Perfil"}}</span>\n              </div>\n            </div>\n            <div class="data-list-action">\n              <button type="button" pButton icon="pi pi-cog" label="Op\xe7\xf5es"\n                (click)="selectedUser = user; editMenu.toggle($event)"></button>\n              <p-menu #editMenu appendTo="body" [popup]="true" [model]="editMenuItens"></p-menu>\n\n              <button pButton type="button" class="p-button-outlined" icon="pi pi-map" label="Endere\xe7o"\n                (click)="detalharEndereco(user)">\n              </button>\n            </div>\n          </div>\n        </div>\n      </ng-template>\n    </p-dataView>\n  </ng-container>\n\n  <ng-container *ngIf="contentError.hasError">\n    <app-content-error [erroCode]="contentError.code"></app-content-error>\n  </ng-container>\n\n\n  <p-dialog *ngIf="showStatusDialog" [(visible)]="showStatusDialog" [resizable]="false" [draggable]="false"\n    [modal]="true" [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\', height: \'80%\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <div class="text-900 font-medium mb-3 text-xl">Alterando status</div>\n      </div>\n    </ng-template>\n    <div class="surface-card border-round shadow-2 p-4">\n      <p class="mt-0 mb-4 p-0 line-height-3">Acesso ao sistema: </p>\n      <p-dropdown [options]="sortUsertatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n        [(ngModel)]="updateStatusObj.status_user" [ngModelOptions]="{standalone: true}"\n        styleClass="mb-2 md:mb-0 w-full">\n      </p-dropdown>\n    </div>\n\n    <div class="surface-card border-round shadow-2 p-4 mt-2">\n      <p class="mt-0 mb-4 p-0 line-height-3">Situa\xe7\xe3o na corpora\xe7\xe3o: </p>\n      <p-dropdown [options]="sortPessoaStatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n        [(ngModel)]="updateStatusObj.status_pessoa" [ngModelOptions]="{standalone: true}"\n        styleClass="mb-2 md:mb-0 w-full">\n      </p-dropdown>\n    </div>\n    <div class="flex justify-content-end mt-3 grid">\n      <div class="surface-border border-top-1 opacity-50 mb-1 col-12"></div>\n      <button class="" pButton pRipple label="Atualizar" (click)="updateStatus()"></button>\n    </div>\n  </p-dialog>\n</div>',styles:[""]})],Me);let Ue=class{};Ue=(0,c.gn)([(0,l.LVF)({declarations:[Me],imports:[y.ez,o.u5,o.UX,d.Pc,j.FI,H.QK,I.j,z.A,Q.T,X.l,K.x,G.F,J.$9,Y.q,$.U,F.cc,k.Q,B.ON,U.kW,R.LU,I.j,W.S,A.hJ,D.O,V.D,pe.f,N.o,Ke.a,Z.X,q.R,Je.U,Ge.S],exports:[Me]})],Ue);var xe=r(1236),ye=r(23520),je=r(17913),Ie=r(61989),Ce=r(25047),Le=r(3631),Ee=r(70585),ot=r(99983);let Re=class{};Re=(0,c.gn)([(0,l.LVF)({declarations:[ne],imports:[y.ez,o.u5,o.UX,d.Pc,j.FI,H.QK,I.j,ye.zz,je.Iu,ot.O,z.A,Ie.nD,Q.T,Ce.L$,Le.WN,X.l,K.x,G.F,J.$9,Y.q,$.U,F.cc,k.Q,Ee._8,B.ON,U.kW,xe.q,R.LU,I.j,W.S,A.hJ,D.O,V.D,N.o,Z.X,q.R],exports:[ne]})],Re);let ze=class{};ze=(0,c.gn)([(0,l.LVF)({declarations:[Se],imports:[y.ez,o.u5,o.UX,d.Pc,j.FI,H.QK,I.j,ye.zz,je.Iu,z.A,Ie.nD,Q.T,Ce.L$,Le.WN,X.l,K.x,G.F,J.$9,Y.q,$.U,F.cc,k.Q,Ee._8,B.ON,U.kW,xe.q,R.LU,I.j,W.S,A.hJ,D.O,V.D,N.o,Z.X,pe.f,q.R],exports:[Se]})],ze);let De=class{};De=(0,c.gn)([(0,l.LVF)({declarations:[],imports:[y.ez,Ue,Re,ze],exports:[Ue,Re,ze]})],De);let we=class{constructor(e){this.http=e}findById(e){return this.http.get(`${S.Hz.baseURL}/users-sistema/${e}`,{responseType:"json"})}list(e,t=new tt.k){let s=st.t.getPageOptionsParams(t);return e&&e.searchedUsuarioSistema&&(s=s.append("searchedUsuarioSistema",e.searchedUsuarioSistema)),e&&e.status_pessoa&&(s=s.append("status_pessoa",e.status_pessoa)),e&&e.status_user&&(s=s.append("status_user",e.status_user)),e&&e.nome&&(s=s.append("nome",e.nome)),e&&e.cpf&&(s=s.append("cpf",e.cpf)),e&&e.email&&(s=s.append("email",e.email)),e&&e.loja_id&&(s=s.append("loja_id",e.loja_id)),this.http.get(`${S.Hz.baseURL}/users-sistema`,{responseType:"json",params:s})}create(e){const{tel1:t,tel2:s,email_alternativo:a}=e;return e=ie.f.sanitizeCreate({tel1:t,tel2:s,email_alternativo:a,cpf:void 0},e),this.http.post(`${S.Hz.baseURL}/users-sistema`,e,{responseType:"json"})}update(e,t){const{tel1:s,tel2:a,email_alternativo:i}=e;return e=ie.f.sanitizeCreate({tel1:s,tel2:a,email_alternativo:i,cpf:void 0},e),this.http.put(`${S.Hz.baseURL}/users-sistema/${t}`,e,{responseType:"json"})}createEndereco(e,t){return this.http.post(`${S.Hz.baseURL}/users-sistema/${t}/endereco`,e,{responseType:"json"})}updateEndereco(e,t){return this.http.post(`${S.Hz.baseURL}/users-sistema/${t}/endereco`,e,{responseType:"json"})}updatePassword(e){return this.http.patch(`${S.Hz.baseURL}/users/password`,{senha:e},{responseType:"json"})}uploadAvatar(e,t){const s=new FormData;s.append("file",e);const a=t?`${S.Hz.baseURL}/users-sistema/${t}/avatar`:`${S.Hz.baseURL}/users-sistema/avatar`;return this.http.patch(a,s)}};we.ctorParameters=()=>[{type:et.eN}],we=(0,c.gn)([(0,l.GSi)({providedIn:"root"})],we);let ke=class{constructor(e,t,s,a,i,u,h,v){this.formBuilder=e,this.userService=t,this.usuariosSistemaService=s,this.lojaService=a,this.perfilService=i,this.empresasService=u,this.modalCadastro=h,this.toastService=v,this.currentPerfilTake=15,this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.currentEmpresasPage=1,this.searchedEmpresa="",this.searchedSuperior="",this.showSuperiorDialog=!1,this.stepIndex=0,this.createdUserId="",this.userWasCreated=!1,this.isCliente=!1,this.maxDate=fe.E.getDiaAnterior(),this.enderecoMode=be.x.USER,this.subscriptions=new te.w0,this.form=this.formBuilder.group({nome:[,[o.kI.required]],email:[,[o.kI.required,o.kI.email]],email_alternativo:[,[o.kI.email]],tel1:[,[o.kI.required]],tel2:[,[]],perfil_id:[,[o.kI.required]],loja_id:[,[o.kI.required]],empresa_id:[,[o.kI.required]],superior:[,[]],user_ativo:[!0,[]]})}ngOnInit(){this.steps=[{label:"Informa\xe7\xf5es"},{label:"Endere\xe7o"}],this.loadLojas(),this.loadPerfis(),this.loadEmpresas(),this.loadSuperiores()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPerfis(e=1){const t=this.perfilService.list({order:g.L.ASC,page:e,take:15},{with_cliente:!1}).subscribe(s=>{this.perfis=s});this.subscriptions.add(t)}lazyLoadPerfis(e){this.currentPerfilTake+=5;const t=this.perfilService.list({order:g.L.ASC,page:1,take:this.currentPerfilTake},{with_cliente:!1}).subscribe(s=>{this.perfis=s,e.show()});this.subscriptions.add(t)}loadLojas(e=1,t){const s=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:re.eX.OPERANDO},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.lojas=a,t&&t.show()});this.subscriptions.add(s)}searchLoja({value:e}){this.searchedLoja=e,this.loadLojas(1)}clearLoja(e){e.value="",this.searchedLoja="",this.loadLojas(1)}paginarLojas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentLojasPage&&(this.currentLojasPage=i,this.loadLojas(i,t))}loadEmpresas(e=1,t){const s=this.empresasService.list({searchedEmpresa:this.searchedEmpresa},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.empresas=a,t&&t.show()});this.subscriptions.add(s)}searchEmpresa({value:e}){this.searchedEmpresa=e,this.loadEmpresas(1)}clearEmpresa(e){e.value="",this.searchedEmpresa="",this.loadEmpresas(1)}paginarEmpresas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentEmpresasPage&&(this.currentEmpresasPage=i,this.loadEmpresas(i,t))}create(){const e=this.form.get("nome").value,t=this.form.get("email").value,s=this.form.get("email_alternativo").value,a=this.form.get("tel1").value,i=this.form.get("tel2").value,u=this.form.get("user_ativo").value,{id:h}=this.form.get("perfil_id").value,{id:v}=this.form.get("loja_id").value,b=this.form.get("empresa_id").value?this.form.get("empresa_id").value?.id:void 0,L=this.form.get("superior").value?this.form.get("superior").value?.id:void 0,E=this.usuariosSistemaService.create({nome:e,email:t,perfil_id:h,loja_id:v,empresa_id:b,nivel_superior_id:L,email_alternativo:s,tel1:a,tel2:i,user_ativo:u}).subscribe(P=>{this.createdUserId=P.id,this.userWasCreated=!0,this.stepIndex++});this.subscriptions.add(E)}loadSuperiores(e=1,t){const s=this.userService.listUsers({searchedUser:this.searchedSuperior,tipos_usarios:`${C.Wo.COLABORADOR}, ${C.Wo.PRESTADOR}`},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.superiores=a,t&&t.show()});this.subscriptions.add(s)}searchSuperior({value:e}){this.searchedSuperior=e,this.loadSuperiores(1)}clearSuperior(e){e.value="",this.searchedSuperior="",this.loadSuperiores(1)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){this.selectedSuperior=this.form.get("superior").value,this.selectedSuperior?this.showModal(oe.Q,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}detailEmpresa(){const e=this.form.get("empresa_id").value;e?this.showModal(ge.P,{empresa:e}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem empresa associada",titulo:"N\xe3o informado",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}listenEndereco(e){this.fechar(this.userWasCreated)}fechar(e=!1){this.modalCadastro.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,ee.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};ke.ctorParameters=()=>[{type:o.QS},{type:he.K},{type:we},{type:se.W},{type:me.F},{type:Ae.o},{type:d.IN},{type:ae.D}],ke=(0,c.gn)([(0,l.wA2)({selector:"app-usuario-sistema-cadastro",template:'<ion-content appScrollTheme>\n  <div class="surface-ground  py-4">\n    <p-steps [activeIndex]="stepIndex" [model]="steps" [readonly]="true"></p-steps>\n  </div>\n\n  <ng-container *ngIf="stepIndex == 0">\n    <form *ngIf="lojas && perfis && empresas" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-2 md:px-6 lg:px-8">\n        <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid">\n          <div class="grid formgrid p-fluid">\n\n            <div class="field mb-4 col-12 ">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">Email (principal)</label>\n              <input type="text" pInputText placeholder="Email principal" formControlName="email" />\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">Email (alternativo)</label>\n              <input type="text" pInputText placeholder="Email alternativo" formControlName="email_alternativo" />\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email_alternativo\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="tel1">Celular Principal</label>\n              <p-inputMask id="tel1" placeholder="Celular do usu\xe1rio de sistema" formControlName="tel1"\n                mask="(99)9 9999-9999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel1\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="tel2">Celular Alternativo</label>\n              <p-inputMask id="tel2" placeholder="Celular alternativo do usu\xe1rio de sistema" formControlName="tel2"\n                mask="(99)9 9999-9999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel2\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-4 col-12">\n              <label for="descricao">Perfil</label>\n              <p-dropdown #dropdown_perfil [options]="perfis.data" placeholder="Selecione o perfil de acesso"\n                formControlName="perfil_id" optionLabel="nome">\n                <ng-template let-perfil pTemplate="item">\n                  <div class="">\n                    <div>{{perfil.nome}}</div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="footer">\n                  <div class="col-12 w-auto">\n                    <button *ngIf="perfis.meta.hasNextPage" pButton pRipple type="button" label="Carregar mais"\n                      (click)="lazyLoadPerfis(dropdown_perfil)" class="p-button-outlined p-button-rounded"></button>\n                  </div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'perfil_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="col-12 field ">\n              <label for="loja_id" class="text-900 font-medium mb-3">Loja</label>\n              <p-dropdown id="loja_id" [options]="lojas.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="loja_id"\n                optionLabel="nome" filterBy="nome,codigo">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchLoja(searchLojaInput)">\n                      <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearLoja(searchLojaInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-loja pTemplate="item">\n                  <div>\n                    <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-loja pTemplate="selectedItem">\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'loja_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n            <div class="col-12 field ">\n              <label for="empresa_id" class="text-900 font-medium mb-3">Empresa</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailEmpresa()"></div>\n              <p-dropdown id="empresa_id" [options]="empresas.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="empresa_id"\n                optionLabel="razao_social" filterBy="razao_social, cnpj">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchEmpresaInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchempresa(searchEmpresaInput)">\n                      <button pButton pRipple icon="pi pi-search" (click)="searchEmpresa(searchEmpresaInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearempresa(searchEmpresaInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-empresa pTemplate="item">\n                  <div>\n                    <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-empresa pTemplate="selectedItem">\n                  <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'empresa_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div *ngIf="superiores" class="col-12 field ">\n              <label for="nivel_superior" class="text-900 font-medium mb-3">N\xedvel Superior</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n              <p-dropdown id="nivel_superior" [options]="superiores.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="superior"\n                optionLabel="nome" filterBy="nome, cpf" [showClear]="true">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchSuperiorInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchSuperior(searchSuperiorInput)">\n                      <button pButton pRipple icon="pi pi-search"\n                        (click)="searchSuperior(searchSuperiorInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearSuperior(searchSuperiorInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-superior pTemplate="item">\n                  <div>\n                    <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-superior pTemplate="selectedItem">\n                  <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'superior\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-2 col-12 ">\n              <div class="mb-3" for="user_ativo">Permitir acesso ao sistema?</div>\n              <p-inputSwitch class="ml-2" id="user_ativo" formControlName="user_ativo"></p-inputSwitch>\n            </div>\n\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Pr\xf3ximo" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n              [disabled]="disableCreateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n\n  <ng-container *ngIf="stepIndex == 1">\n    <app-endereco [idOf]="createdUserId" [enderecoMode]="enderecoMode"\n      (createdEvent)="listenEndereco($event)"></app-endereco>\n  </ng-container>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],ke);let $e=class{};$e=(0,c.gn)([(0,l.LVF)({declarations:[ke],imports:[y.ez,o.u5,o.UX,d.Pc,j.FI,H.QK,I.j,ye.zz,je.Iu,z.A,Ie.nD,Q.T,Ce.L$,Le.WN,X.l,K.x,G.F,J.$9,Y.q,$.U,F.cc,k.Q,Ee._8,B.ON,U.kW,xe.q,R.LU,I.j,W.S,A.hJ,D.O,V.D,N.o,Z.X,pe.f,q.R],exports:[ke]})],$e);let le=class{constructor(e,t,s,a,i,u,h,v,b){this.formBuilder=e,this.userService=t,this.usuariosSistemaService=s,this.lojaService=a,this.perfilService=i,this.empresaService=u,this.modalCadastro=h,this.toastService=v,this.storage=b,this.isModal=!0,this.updatedEvent=new l.vpe,this.currentPerfilTake=15,this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.currentEmpresasPage=1,this.searchedEmpresa="",this.searchedSuperior="",this.showSuperiorDialog=!1,this.createdUserId="",this.userWasCreated=!1,this.isCliente=!1,this.maxDate=fe.E.getDiaAnterior(),this.subscriptions=new te.w0}ngOnInit(){const{nome:e,loja:t,perfil:s,empresa:a,nivel_superior:i,tel1:u,tel2:h,email_alternativo:v}=this.user,b=t?.id||void 0,L=a?.id||void 0,E=i?.id||void 0;this.form=this.formBuilder.group({nome:[e,[o.kI.required]],email_alternativo:[v,[o.kI.email]],tel1:[u,[o.kI.required]],tel2:[h,[]],perfil_id:[s.id,[o.kI.required]],loja_id:[b,[o.kI.required]],empresa_id:[L,[]],superior:[E,[]]}),this.loadLojas(),this.loadPerfis(),this.loadEmpresas(),this.loadSuperiores()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPerfis(e=1){const t=this.perfilService.list({order:g.L.ASC,page:e,take:15},{with_cliente:!1}).subscribe(s=>{this.perfis=s});this.subscriptions.add(t)}lazyLoadPerfis(e){this.currentPerfilTake+=5;const t=this.perfilService.list({order:g.L.ASC,page:1,take:this.currentPerfilTake},{with_cliente:!1}).subscribe(s=>{this.perfis=s,e.show()});this.subscriptions.add(t)}loadLojas(e=1,t){const s=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:re.eX.OPERANDO},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.lojas=a,t&&t.show()});this.subscriptions.add(s)}searchLoja({value:e}){this.searchedLoja=e,this.loadLojas(1)}clearLoja(e){e.value="",this.searchedLoja="",this.loadLojas(1)}paginarLojas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentLojasPage&&(this.currentLojasPage=i,this.loadLojas(i,t))}loadEmpresas(e=1,t){const s=this.empresaService.list({searchedEmpresa:this.searchedEmpresa},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.empresas=a});this.subscriptions.add(s)}searchEmpresa({value:e}){this.searchedEmpresa=e,this.loadEmpresas(1)}clearEmpresa(e){e.value="",this.searchedEmpresa="",this.loadEmpresas(1)}paginarEmpresas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentEmpresasPage&&(this.currentEmpresasPage=i,this.loadEmpresas(i,t))}update(){const{id:e}=this.user,t=this.form.get("nome").value,s=this.form.get("email_alternativo").value,a=this.form.get("tel1").value,i=this.form.get("tel2").value,u=this.form.get("perfil_id").value,h=this.form.get("loja_id").value,v=this.form.get("empresa_id").value||void 0,b=this.form.get("superior").value?this.form.get("superior").value:void 0,L=this.usuariosSistemaService.update({nome:t,perfil_id:u,loja_id:h,empresa_id:v,nivel_superior_id:b,email_alternativo:s,tel1:a,tel2:i},e).subscribe(E=>{this.createdUserId=E.id,this.userWasCreated=!0,this.fechar(this.userWasCreated)});this.subscriptions.add(L)}uploadFile(e,t){const{id:s,tipo_user:a}=this.user,{id:i,perfil_nome:u}=this.storage.getLocalUser();if(s!=i&&!ie.f.checkUpdateImagePermission(u))return void this.toastService.presentToast({titulo:"N\xe3o autorizado",detalhe:`Apenas ${ve.u.ADMIN} e ${ve.u.GERENTE} podem atualizar essas informa\xe7\xf5es`,duracao:n.m4.mediumDuration,gravidade:n.kl.ATENCAO});const h=e.files[0],v=this.userService.newUploadAvatar(a,h,s).subscribe(b=>{this.user=b,this.createdUserId=b.id,this.userWasCreated=!0,this.toastService.presentToast({detalhe:"Foto alterada",duracao:n.m4.shortDuration,gravidade:n.kl.SUCESSO,titulo:"Sucesso!"}),this.updatedEvent.emit(this.user),t.clear()});this.subscriptions.add(v)}loadSuperiores(e=1,t){const s=this.userService.listUsers({searchedUser:this.searchedSuperior,tipos_usarios:`${C.Wo.COLABORADOR}, ${C.Wo.PRESTADOR}`},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.superiores=a,t&&t.show()});this.subscriptions.add(s)}searchSuperior({value:e}){this.searchedSuperior=e,this.loadSuperiores(1)}clearSuperior(e){e.value="",this.searchedSuperior="",this.loadSuperiores(1)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){const e=this.form.get("superior").value;this.selectedSuperior=this.superiores.data.find(t=>t.id==e),this.selectedSuperior?this.showModal(oe.Q,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}detailEmpresa(){const e=this.form.get("empresa_id").value;this.selectedEmpresa=this.empresas.data.find(t=>t.id==e),this.selectedEmpresa?this.showModal(ge.P,{empresa:this.selectedEmpresa}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem empresa associada",titulo:"N\xe3o informado",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}listenEndereco(e){this.fechar(this.userWasCreated)}fechar(e=!1){this.modalCadastro.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,ee.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};le.ctorParameters=()=>[{type:o.QS},{type:he.K},{type:we},{type:se.W},{type:me.F},{type:Ae.o},{type:d.IN},{type:ae.D},{type:rt.V}],le.propDecorators={user:[{type:l.IIB}],isModal:[{type:l.IIB}],updatedEvent:[{type:l.r_U}]},le=(0,c.gn)([(0,l.wA2)({selector:"app-usuario-sistema-detail",template:'<ion-content appScrollTheme>\n\n  <form *ngIf="lojas && perfis && empresas" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n    <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n      <div class="flex flex-column align-items-center flex-or ">\n        <img [src]="user?.avatar_url || \'assets/imgs/outros/default-user.jpg\'"\n          class="h-10rem w-10rem border-circle border-2 border-primary mr-1 xl:mr-0 ml-3 " />\n        <p-fileUpload #avatarFile id="avatar" mode="basic" name="avatar" accept="image/*"\n          styleClass="p-button-rounded -mt-4 w-3rem  text-center" chooseIcon="pi pi-pencil" chooseLabel=" "\n          customUpload="true" [auto]="true" (uploadHandler)="uploadFile($event, avatarFile)">\n        </p-fileUpload>\n      </div>\n\n      <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n      <div class="surface-card p-4 shadow-2 border-round p-fluid">\n        <div class="grid formgrid p-fluid">\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="nome" class="font-medium text-900">Nome</label>\n            <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="descricao">Email (alternativo)</label>\n            <input type="text" pInputText placeholder="Email alternativo" formControlName="email_alternativo" />\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email_alternativo\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel1">Celular Principal</label>\n            <p-inputMask id="tel1" placeholder="Celular do prestador" formControlName="tel1" mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel1\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel2">Celular Alternativo</label>\n            <p-inputMask id="tel2" placeholder="Celular alternativo do prestador" formControlName="tel2"\n              mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel2\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="field mb-4 col-12">\n            <label for="descricao">Perfil</label>\n            <p-dropdown #dropdown_perfil [options]="perfis.data" placeholder="Selecione o perfil de acesso"\n              formControlName="perfil_id" optionLabel="nome" optionValue="id">\n              <ng-template let-perfil pTemplate="item">\n                <div class="">\n                  <div>{{perfil.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="footer">\n                <div class="col-12 w-auto">\n                  <button *ngIf="perfis.meta.hasNextPage" pButton pRipple type="button" label="Carregar mais"\n                    (click)="lazyLoadPerfis(dropdown_perfil)" class="p-button-outlined p-button-rounded"></button>\n                </div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'perfil_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="col-12 field ">\n            <label for="loja_id" class="text-900 font-medium mb-3">Loja</label>\n            <p-dropdown id="loja_id" [options]="lojas.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="loja_id"\n              optionLabel="nome" filterBy="nome,codigo" optionValue="id">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchLoja(searchLojaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearLoja(searchLojaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="item">\n                <div>\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="selectedItem">\n                <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'loja_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n          <div class="col-12 field ">\n            <label for="empresa_id" class="text-900 font-medium mb-3">Empresa</label>\n            <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailEmpresa()"></div>\n            <p-dropdown id="empresa_id" [options]="empresas.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="empresa_id"\n              optionLabel="razao_social" filterBy="razao_social, cnpj" optionValue="id">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchEmpresaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchempresa(searchEmpresaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchEmpresa(searchEmpresaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearempresa(searchEmpresaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-empresa pTemplate="item">\n                <div>\n                  <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-empresa pTemplate="selectedItem">\n                <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'empresa_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div *ngIf="superiores" class="col-12 field ">\n            <label for="nivel_superior" class="text-900 font-medium mb-3">N\xedvel Superior</label>\n            <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n            <p-dropdown id="nivel_superior" [options]="superiores.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="superior"\n              optionLabel="nome" filterBy="nome, cpf" optionValue="id" [showClear]="true" optionValue="id">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchSuperiorInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchSuperior(searchSuperiorInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchSuperior(searchSuperiorInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearSuperior(searchSuperiorInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-superior pTemplate="item">\n                <div>\n                  <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                </div>\n              </ng-template>\n              <ng-template let-superior pTemplate="selectedItem">\n                <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'superior\')"></p-message>\n            </div>\n          </div>\n\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n        </div>\n        <div class="flex justify-content-end">\n          <button pButton pRipple label="Atualizar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="update()"\n            [disabled]="disableCreateBtn()"></button>\n        </div>\n      </div>\n    </div>\n  </form>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],le);let Be=class{};Be=(0,c.gn)([(0,l.LVF)({declarations:[le],imports:[y.ez,o.u5,o.UX,d.Pc,j.FI,H.QK,I.j,ye.zz,je.Iu,ot.O,z.A,Ie.nD,Q.T,Ce.L$,Le.WN,X.l,K.x,G.F,J.$9,Y.q,$.U,F.cc,k.Q,Ee._8,B.ON,U.kW,xe.q,R.LU,I.j,W.S,A.hJ,D.O,V.D,N.o,Z.X,q.R],exports:[le]})],Be);let Te=class{constructor(e,t,s,a){this.usuariosSistemaService=e,this.modal=t,this.toastService=s,this.lojaService=a,this.sortUsertatus=C.Mm,this.sortPessoaStatus=C.hx,this.sortLojas=[],this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.searchedNome="",this.selectedPessoaStatus=void 0,this.selectedUsuarioStatus=void 0,this.currentPage=1,this.showStatusDialog=!1,this.editMenuItens=[{label:"Op\xe7\xf5es",items:[{label:"Atualizar",icon:"pi pi-user-edit",command:()=>this.detalharSimplificado(this.selectedUser)},{label:"Status",icon:"pi pi-exclamation-triangle",command:()=>this.detalharStatus(this.selectedUser)},{label:"Autoriza\xe7\xf5es",icon:"pi pi-verified",command:()=>this.detalharAuthorization(this.selectedUser)}]},{separator:!0,items:[{label:"Perfil",icon:"pi pi-id-card",command:()=>this.detalharPerfil(this.selectedUser)}]}],this.updateStatusObj={status_user:void 0,status_pessoa:void 0},this.enderecoMode=be.x.USER,this.contentError=new ue.S,this.subscriptions=new te.w0}ngOnInit(){this.loadLoja(),this.loadUsuarioSistema()}ngOnDestroy(){this.subscriptions.unsubscribe()}changeStatusUsuario({value:e}){this.selectedUsuarioStatus=e,this.loadUsuarioSistema(1)}changeStatusPessoa({value:e}){this.selectedPessoaStatus=e,this.loadUsuarioSistema(1)}changeLoja({value:e}){this.selectedLoja=e,this.loadUsuarioSistema(1)}clearFilter(){this.loadUsuarioSistema(1)}clearAllFilters(e,t,s){this.searchedNome=void 0,this.selectedLoja=void 0,this.selectedPessoaStatus=void 0,this.selectedUsuarioStatus=void 0,t.writeValue(null),s.writeValue(null),this.loadUsuarioSistema(1)}loadLoja(){const e=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:re.eX.OPERANDO}).subscribe(t=>{this.lojas=t});this.subscriptions.add(e)}searchLoja({value:e}){this.searchedLoja=e,this.loadLoja()}clearLoja(e){e.value="",this.searchedLoja="",this.loadLoja()}loadUsuarioSistema(e=1){const t=this.usuariosSistemaService.list({searchedUsuarioSistema:this.searchedNome,loja_id:this.selectedLoja,status_pessoa:this.selectedPessoaStatus,status_user:this.selectedUsuarioStatus},{order:g.L.DESC,page:e,take:5}).subscribe({next:s=>{this.contentError=new ue.S,this.users=s,this.isLoaded=!0},error:s=>{this.contentError={code:s.status,hasError:!0}}});this.subscriptions.add(t)}updateStatus(){const{id:e}=this.selectedUser,{status_pessoa:t,status_user:s}=this.updateStatusObj,a=this.usuariosSistemaService.update({status_pessoa:t,status_user:s},e).subscribe({next:i=>{this.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:n.m4.mediumDuration,gravidade:n.kl.SUCESSO}),this.showStatusDialog=!1,this.loadUsuarioSistema(1)},error:i=>{this.showStatusDialog=!1}});this.subscriptions.add(a)}detalharSimplificado(e){this.showModal(le,{user:e})}detalharPerfil(e){this.showModal(at.E,{user:e})}detalharAuthorization(e){this.showModal(qe.T,{user:e})}detalharStatus(e){const{status_pessoa:t,status_user:s}=e;this.updateStatusObj={status_pessoa:t,status_user:s},this.showStatusDialog=!0}detalharEndereco(e){e.endereco?this.showModal(Ye.F,{currentEndereco:e,enderecoMode:this.enderecoMode}):this.showModal(Ze.A,{idOf:e.id,enderecoMode:this.enderecoMode,isModal:!0})}setUserImage(e){return e.avatar_url||"assets/imgs/outros/default-user.jpg"}createNewUser(){this.showModal(ke)}search(){this.loadUsuarioSistema(1)}paginar(e){const{first:t,rows:s}=e,a=Number(Number(t)/Number(s)+1);a!=this.currentPage&&(this.currentPage=a,this.loadUsuarioSistema(a))}detailSuperior(e){e?this.showModal(oe.Q,{user_id:e.id}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem superior alocado",titulo:"N\xe3o informado",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}detailLoja(e){e?this.showModal(it.t,{loja:e}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem loja alocada",titulo:"N\xe3o informado",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}detailEmpresa(e){e?this.showModal(ge.P,{empresa:e}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem empresa associada",titulo:"N\xe3o informado",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}showModal(e,t){var s=this;return(0,ee.Z)(function*(){const a=yield s.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{const{data:u}=i;s.isLoaded=!1,s.loadUsuarioSistema(),!0===u&&s.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:n.m4.mediumDuration,gravidade:n.kl.SUCESSO})}),yield a.present()})()}};Te.ctorParameters=()=>[{type:we},{type:d.IN},{type:ae.D},{type:se.W}],Te=(0,c.gn)([(0,l.wA2)({selector:"app-usuario-sistema-main",template:'<div class="card main-view h-full">\n\n  <ng-container *ngIf="isLoaded">\n    <p-dataView emptyMessage="Nada encontrado, experimente trocar os filtros" class="data-container" #dv [lazy]="true"\n      [value]="users.data" [paginator]="true" [rows]="users.meta.take" [totalRecords]="users.meta.itemCount"\n      [pageLinks]="users.meta.pageCount" (onLazyLoad)="paginar($event)" filterBy="nome" layout="list">\n      <ng-template pTemplate="header">\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field  col-12 sm:col-6 xl:col-3">\n            <p-dropdown *ngIf="lojas" #dropdown_lojas id="loja_id" [options]="lojas.data" [filter]="true"\n              placeholder="Selecione" [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" optionValue="id"\n              optionLabel="nome" filterBy="nome,codigo"\n              (onClear)="clearFilter($event)" (onChange)="changeLoja($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchLoja(searchLojaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearLoja(searchLojaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="item">\n                <div>\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="selectedItem">\n                <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n              </ng-template>\n            </p-dropdown>\n          </div>\n\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_filtro [options]="sortUsertatus" placeholder="Status Usu\xe1rio"\n              (onChange)="changeStatusUsuario($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_filtro [options]="sortPessoaStatus" placeholder="Status Pessoa"\n              (onChange)="changeStatusPessoa($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n        </div>\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field col-12 sm:col-6 xl:col-3">\n            <button pButton pRipple class="sm:w-auto w-full p-button-outlined" icon="pi pi-times" label="Limpar filtros"\n              (click)="clearAllFilters($event, dropdown_lojas, dropdown_filtro)">\n            </button>\n          </div>\n          <div class="field col-12 sm:col-6 xl:col-3 text-right">\n            <button pButton pRipple class="sm:w-auto w-full " icon="pi pi-user-plus" label="Novo cadastro"\n              (click)="createNewUser()">\n            </button>\n          </div>\n        </div>\n\n        <div class="flex flex-column md:flex-row md:justify-content-center">\n          <span class="p-inputgroup mb-2 md:mb-0 mt-2 max-w-30rem\t">\n            <input class="w-full" type="search" pInputText [(ngModel)]="searchedNome"\n              [ngModelOptions]="{standalone: true}" placeholder="Email ou Nome" (keyup.enter)="search()">\n            <button type="button" pButton pRipple class="pi pi-search cursor-pointer p-button-outlined"\n              (click)="search()"></button>\n            <button type="button" pButton pRipple class="pi pi-times cursor-pointer p-button-outlined p-button-danger"\n              (click)="searchedNome = \'\'; search();"></button>\n          </span>\n        </div>\n\n      </ng-template>\n\n      <ng-template let-user pTemplate="listItem">\n        <div *ngIf="isLoaded" #templateGrid class="col-12">\n          <div class="data-list-item">\n            <div class="crop mb-2 md:mb-0 ">\n              <img class="border-circle border-2 border-primary" [src]="setUserImage(user)" [alt]="user.name" />\n            </div>\n            <div class="data-list-detail">\n              <div class="data-name">{{ user.nome }}</div>\n              <div class="data-description mt-1">Situa\xe7\xe3o: {{ user.status_pessoa }}</div>\n              <div class="data-description mt-1">Acesso: {{ user.status_user }}</div>\n\n              <div class="data-description mt-2">E-mail: {{ user.email }}</div>\n              <div *ngIf="user.email_alternativo" class="data-description mt-1">E-mail (alternativo): {{\n                user.email_alternativo }}</div>\n              <div class="data-description mt-1">Celular: {{ user.tel1 | phoneMask }}</div>\n              <div *ngIf="user.tel2" class="data-description mt-1">Celular (alternativo): {{ user.tel2 | phoneMask }}</div>\n\n              <div class="data-description mt-2 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailLoja(user.loja)">\n                  Loja:\n                  {{ user.loja?.nome || \'N\xe3o informado\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n              <div class="data-description mt-1 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailSuperior(user.nivel_superior)">\n                  Superior: {{ user.nivel_superior?.nome || \'N\xe3o informado\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n              <div class="data-description mt-1 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailEmpresa(user.empresa)">\n                  Empresa: {{ user.empresa?.razao_social || \'N\xe3o informado\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n\n              <div class="mt-3">\n                <i class="pi pi-sitemap data-category-icon "></i>\n                <span class="data-category">Acesso: {{user.perfil?.nome || "Sem\n                  Perfil"}}</span>\n              </div>\n            </div>\n            <div class="data-list-action">\n              <button type="button" pButton icon="pi pi-cog" label="Op\xe7\xf5es"\n                (click)="selectedUser = user; editMenu.toggle($event)"></button>\n              <p-menu #editMenu appendTo="body" [popup]="true" [model]="editMenuItens"></p-menu>\n\n              <button pButton type="button" class="p-button-outlined" icon="pi pi-map" label="Endere\xe7o"\n                (click)="detalharEndereco(user)">\n              </button>\n            </div>\n          </div>\n        </div>\n      </ng-template>\n    </p-dataView>\n  </ng-container>\n\n  <ng-container *ngIf="contentError.hasError">\n    <app-content-error [erroCode]="contentError.code"></app-content-error>\n  </ng-container>\n\n\n  <p-dialog *ngIf="showStatusDialog" [(visible)]="showStatusDialog" [resizable]="false" [draggable]="false"\n    [modal]="true" [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\', height: \'80%\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <div class="text-900 font-medium mb-3 text-xl">Alterando status</div>\n      </div>\n    </ng-template>\n    <div class="surface-card border-round shadow-2 p-4">\n      <p class="mt-0 mb-4 p-0 line-height-3">Acesso ao sistema: </p>\n      <p-dropdown [options]="sortUsertatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n        [(ngModel)]="updateStatusObj.status_user" [ngModelOptions]="{standalone: true}"\n        styleClass="mb-2 md:mb-0 w-full">\n      </p-dropdown>\n    </div>\n\n    <div class="surface-card border-round shadow-2 p-4 mt-2">\n      <p class="mt-0 mb-4 p-0 line-height-3">Situa\xe7\xe3o na corpora\xe7\xe3o: </p>\n      <p-dropdown [options]="sortPessoaStatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n        [(ngModel)]="updateStatusObj.status_pessoa" [ngModelOptions]="{standalone: true}"\n        styleClass="mb-2 md:mb-0 w-full">\n      </p-dropdown>\n    </div>\n    <div class="flex justify-content-end mt-3 grid">\n      <div class="surface-border border-top-1 opacity-50 mb-1 col-12"></div>\n      <button class="" pButton pRipple label="Atualizar" (click)="updateStatus()"></button>\n    </div>\n  </p-dialog>\n</div>',styles:[""]})],Te);let Fe=class{};Fe=(0,c.gn)([(0,l.LVF)({declarations:[Te],imports:[y.ez,o.u5,o.UX,d.Pc,j.FI,H.QK,I.j,z.A,Q.T,X.l,K.x,G.F,J.$9,Y.q,$.U,F.cc,k.Q,B.ON,U.kW,R.LU,I.j,W.S,A.hJ,D.O,V.D,pe.f,N.o,Ke.a,Z.X,q.R,Je.U,Ge.S],exports:[Te]})],Fe);let We=class{};We=(0,c.gn)([(0,l.LVF)({declarations:[],imports:[y.ez,$e,Be,Fe],exports:[$e,Be,Fe]})],We);var ct=r(36640);let Pe=class{constructor(e){this.http=e}findById(e){return this.http.get(`${S.Hz.baseURL}/colaboradores/${e}`,{responseType:"json"})}list(e,t=new tt.k){let s=st.t.getPageOptionsParams(t);return e&&e.searchedColaborador&&(s=s.append("searchedColaborador",e.searchedColaborador)),e&&e.status_pessoa&&(s=s.append("status_pessoa",e.status_pessoa)),e&&e.status_user&&(s=s.append("status_user",e.status_user)),e&&e.nome&&(s=s.append("nome",e.nome)),e&&e.cpf&&(s=s.append("cpf",e.cpf)),e&&e.email&&(s=s.append("email",e.email)),e&&e.loja_id&&(s=s.append("loja_id",e.loja_id)),this.http.get(`${S.Hz.baseURL}/colaboradores`,{responseType:"json",params:s})}create(e){const{tel1:t,tel2:s,email_alternativo:a,cpf:i}=e;return e=ie.f.sanitizeCreate({tel1:t,tel2:s,email_alternativo:a,cpf:i},e),this.http.post(`${S.Hz.baseURL}/colaboradores`,e,{responseType:"json"})}update(e,t){const{tel1:s,tel2:a,email_alternativo:i}=e;return e=ie.f.sanitizeCreate({tel1:s,tel2:a,email_alternativo:i,cpf:void 0},e),this.http.put(`${S.Hz.baseURL}/colaboradores/${t}`,e,{responseType:"json"})}createEndereco(e,t){return this.http.post(`${S.Hz.baseURL}/colaboradores/${t}/endereco`,e,{responseType:"json"})}updateEndereco(e,t){return this.http.post(`${S.Hz.baseURL}/colaboradores/${t}/endereco`,e,{responseType:"json"})}updatePassword(e){return this.http.patch(`${S.Hz.baseURL}/users/password`,{senha:e},{responseType:"json"})}uploadAvatar(e,t){const s=new FormData;s.append("file",e);const a=t?`${S.Hz.baseURL}/colaboradores/${t}/avatar`:`${S.Hz.baseURL}/colaboradores/avatar`;return this.http.patch(a,s)}};Pe.ctorParameters=()=>[{type:et.eN}],Pe=(0,c.gn)([(0,l.GSi)({providedIn:"root"})],Pe);let _e=class{constructor(e,t,s,a,i,u,h,v){this.formBuilder=e,this.userService=t,this.colaboradoresService=s,this.lojaService=a,this.perfilService=i,this.cargoService=u,this.modalCadastro=h,this.toastService=v,this.currentPerfilTake=15,this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.currentCargosPage=1,this.searchedCargo="",this.searchedSuperior="",this.showSuperiorDialog=!1,this.stepIndex=0,this.createdUserId="",this.userWasCreated=!1,this.isCliente=!1,this.maxDate=fe.E.getDiaAnterior(),this.enderecoMode=be.x.USER,this.subscriptions=new te.w0,this.form=this.formBuilder.group({nome:[,[o.kI.required]],cpf:[,[o.kI.required]],email:[,[o.kI.required,o.kI.email]],email_alternativo:[,[o.kI.email]],tel1:[,[o.kI.required]],tel2:[,[]],data_nascimento:[,[o.kI.required]],perfil_id:[,[o.kI.required]],loja_id:[,[o.kI.required]],cargo_id:[,[]],superior:[,[]],user_ativo:[!0,[]]})}ngOnInit(){this.steps=[{label:"Informa\xe7\xf5es"},{label:"Endere\xe7o"}],this.loadLojas(),this.loadPerfis(),this.loadCargos(),this.loadSuperiores()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPerfis(e=1){const t=this.perfilService.list({order:g.L.ASC,page:e,take:15},{with_cliente:!1}).subscribe(s=>{this.perfis=s});this.subscriptions.add(t)}lazyLoadPerfis(e){this.currentPerfilTake+=5;const t=this.perfilService.list({order:g.L.ASC,page:1,take:this.currentPerfilTake},{with_cliente:!1}).subscribe(s=>{this.perfis=s,e.show()});this.subscriptions.add(t)}loadLojas(e=1,t){const s=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:re.eX.OPERANDO},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.lojas=a,t&&t.show()});this.subscriptions.add(s)}searchLoja({value:e}){this.searchedLoja=e,this.loadLojas(1)}clearLoja(e){e.value="",this.searchedLoja="",this.loadLojas(1)}paginarLojas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentLojasPage&&(this.currentLojasPage=i,this.loadLojas(i,t))}loadCargos(e=1,t){const s=this.cargoService.list({searchedCargo:this.searchedCargo},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.cargos=a,t&&t.show()});this.subscriptions.add(s)}searchCargo({value:e}){this.searchedCargo=e,this.loadCargos(1)}clearCargo(e){e.value="",this.searchedCargo="",this.loadCargos(1)}paginarCargos(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentCargosPage&&(this.currentCargosPage=i,this.loadCargos(i,t))}create(){const e=this.form.get("nome").value,t=this.form.get("email").value,s=this.form.get("cpf").value,a=this.form.get("data_nascimento").value,i=this.form.get("email_alternativo").value,u=this.form.get("tel1").value,h=this.form.get("tel2").value,v=this.form.get("user_ativo").value,{id:b}=this.form.get("perfil_id").value,{id:L}=this.form.get("loja_id").value,E=this.form.get("cargo_id").value?this.form.get("cargo_id").value?.id:void 0,P=this.form.get("superior").value?this.form.get("superior").value?.id:void 0,dt=this.colaboradoresService.create({nome:e,email:t,cpf:s,perfil_id:b,loja_id:L,cargo_id:E,nivel_superior_id:P,data_nascimento:a,email_alternativo:i,tel1:u,tel2:h,user_ativo:v}).subscribe(pt=>{this.createdUserId=pt.id,this.userWasCreated=!0,this.stepIndex++});this.subscriptions.add(dt)}loadSuperiores(e=1,t){const s=this.userService.listUsers({searchedUser:this.searchedSuperior,tipos_usarios:`${C.Wo.COLABORADOR}, ${C.Wo.PRESTADOR}`},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.superiores=a,t&&t.show()});this.subscriptions.add(s)}searchSuperior({value:e}){this.searchedSuperior=e,this.loadSuperiores(1)}clearSuperior(e){e.value="",this.searchedSuperior="",this.loadSuperiores(1)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){this.selectedSuperior=this.form.get("superior").value,this.selectedSuperior?this.showModal(oe.Q,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}listenEndereco(e){this.fechar(this.userWasCreated)}fechar(e=!1){this.modalCadastro.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,ee.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};_e.ctorParameters=()=>[{type:o.QS},{type:he.K},{type:Pe},{type:se.W},{type:me.F},{type:ct.u},{type:d.IN},{type:ae.D}],_e=(0,c.gn)([(0,l.wA2)({selector:"app-colaborador-cadastro",template:'<ion-content appScrollTheme>\n  <div class="surface-ground  py-4">\n    <p-steps [activeIndex]="stepIndex" [model]="steps" [readonly]="true"></p-steps>\n  </div>\n\n  <ng-container *ngIf="stepIndex == 0">\n    <form *ngIf="lojas && perfis && cargos" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-2 md:px-6 lg:px-8">\n\n        <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid">\n          <div class="grid formgrid p-fluid">\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">CPF</label>\n              <p-inputMask placeholder="CPF do funcion\xe1rio" formControlName="cpf" mask="999.999.999-99">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'cpf\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">Email (principal)</label>\n              <input type="text" pInputText placeholder="Email principal" formControlName="email" />\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">Email (alternativo)</label>\n              <input type="text" pInputText placeholder="Email alternativo" formControlName="email_alternativo" />\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email_alternativo\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="tel2">Celular Principal</label>\n              <p-inputMask id="tel1" placeholder="Celular do colaborador" formControlName="tel1" mask="(99)9 9999-9999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel1\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="tel2">Celular Alternativo</label>\n              <p-inputMask id="tel2" placeholder="Celular alternativo do colaborador" formControlName="tel2"\n                mask="(99)9 9999-9999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel2\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="data_nascimento">Data de nascimento</label>\n              <p-calendar formControlName="data_nascimento" placeholder="Data de nascimento do colaborador"\n                [maxDate]="maxDate" inputId="data_nascimento"></p-calendar>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'data_nascimento\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-4 col-12">\n              <label for="descricao">Perfil</label>\n              <p-dropdown #dropdown_perfil [options]="perfis.data" placeholder="Selecione o perfil de acesso"\n                formControlName="perfil_id" optionLabel="nome">\n                <ng-template let-perfil pTemplate="item">\n                  <div class="">\n                    <div>{{perfil.nome}}</div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="footer">\n                  <div class="col-12 w-auto">\n                    <button *ngIf="perfis.meta.hasNextPage" pButton pRipple type="button" label="Carregar mais"\n                      (click)="lazyLoadPerfis(dropdown_perfil)" class="p-button-outlined p-button-rounded"></button>\n                  </div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'perfil_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="col-12 field ">\n              <label for="loja_id" class="text-900 font-medium mb-3">Loja</label>\n              <p-dropdown id="loja_id" [options]="lojas.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="loja_id"\n                optionLabel="nome" filterBy="nome,codigo">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchLoja(searchLojaInput)">\n                      <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearLoja(searchLojaInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-loja pTemplate="item">\n                  <div>\n                    <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-loja pTemplate="selectedItem">\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'loja_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n            <div class="col-12 field ">\n              <label for="cargo_id" class="text-900 font-medium mb-3">Cargo</label>\n              <p-dropdown id="cargo_id" [options]="cargos.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="cargo_id"\n                optionLabel="nome" filterBy="nome" [showClear]="true">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchCargoInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchCargo(searchCargoInput)">\n                      <button pButton pRipple icon="pi pi-search" (click)="searchCargo(searchCargoInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearCargo(searchCargoInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-cargo pTemplate="item">\n                  <div>\n                    <div>{{ cargo.nome}}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-cargo pTemplate="selectedItem">\n                  <div>{{ cargo.nome}}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'cargo_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div *ngIf="superiores" class="col-12 field ">\n              <label for="nivel_superior" class="text-900 font-medium mb-3">N\xedvel Superior</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n              <p-dropdown id="nivel_superior" [options]="superiores.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="superior"\n                optionLabel="nome" filterBy="nome, cpf" [showClear]="true">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchSuperiorInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchSuperior(searchSuperiorInput)">\n                      <button pButton pRipple icon="pi pi-search"\n                        (click)="searchSuperior(searchSuperiorInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearSuperior(searchSuperiorInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-superior pTemplate="item">\n                  <div>\n                    <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-superior pTemplate="selectedItem">\n                  <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'superior\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-2 col-12 ">\n              <div class="mb-3" for="user_ativo">Permitir acesso ao sistema?</div>\n              <p-inputSwitch class="ml-2" id="user_ativo" formControlName="user_ativo"></p-inputSwitch>\n            </div>\n\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Pr\xf3ximo" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n              [disabled]="disableCreateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n\n  <ng-container *ngIf="stepIndex == 1">\n    <app-endereco [idOf]="createdUserId" [enderecoMode]="enderecoMode"\n      (createdEvent)="listenEndereco($event)"></app-endereco>\n  </ng-container>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],_e);let de=class{constructor(e,t,s,a,i,u,h,v,b){this.formBuilder=e,this.userService=t,this.colaboradoresService=s,this.lojaService=a,this.perfilService=i,this.cargoService=u,this.modalCadastro=h,this.toastService=v,this.storage=b,this.isModal=!0,this.updatedEvent=new l.vpe,this.currentPerfilTake=15,this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.currentCargosPage=1,this.searchedCargo="",this.searchedSuperior="",this.showSuperiorDialog=!1,this.createdUserId="",this.userWasCreated=!1,this.isCliente=!1,this.maxDate=fe.E.getDiaAnterior(),this.subscriptions=new te.w0}ngOnInit(){const{nome:e,loja:t,perfil:s,cargo:a,nivel_superior:i,tel1:u,tel2:h,email_alternativo:v,data_nascimento:b}=this.user,L=t?.id||void 0,E=a?.id||void 0,P=i?.id||void 0;this.form=this.formBuilder.group({nome:[e,[o.kI.required]],email_alternativo:[v,[o.kI.email]],tel1:[u,[o.kI.required]],tel2:[h,[]],data_nascimento:[new Date(b),[o.kI.required]],perfil_id:[s.id,[o.kI.required]],loja_id:[L,[o.kI.required]],cargo_id:[E,[]],superior:[P,[]]}),this.loadLojas(),this.loadPerfis(),this.loadCargos(),this.loadSuperiores()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPerfis(e=1){const t=this.perfilService.list({order:g.L.ASC,page:e,take:15},{with_cliente:!1}).subscribe(s=>{this.perfis=s});this.subscriptions.add(t)}lazyLoadPerfis(e){this.currentPerfilTake+=5;const t=this.perfilService.list({order:g.L.ASC,page:1,take:this.currentPerfilTake},{with_cliente:!1}).subscribe(s=>{this.perfis=s,e.show()});this.subscriptions.add(t)}loadLojas(e=1,t){const s=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:re.eX.OPERANDO},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.lojas=a,t&&t.show()});this.subscriptions.add(s)}searchLoja({value:e}){this.searchedLoja=e,this.loadLojas(1)}clearLoja(e){e.value="",this.searchedLoja="",this.loadLojas(1)}paginarLojas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentLojasPage&&(this.currentLojasPage=i,this.loadLojas(i,t))}loadCargos(e=1,t){const s=this.cargoService.list({searchedCargo:this.searchedCargo},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.cargos=a,t&&t.show()});this.subscriptions.add(s)}searchCargo({value:e}){this.searchedCargo=e,this.loadCargos(1)}clearCargo(e){e.value="",this.searchedCargo="",this.loadCargos(1)}paginarCargos(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentCargosPage&&(this.currentCargosPage=i,this.loadCargos(i,t))}update(){const{id:e}=this.user,t=this.form.get("nome").value,s=this.form.get("data_nascimento").value,a=this.form.get("email_alternativo").value,i=this.form.get("tel1").value,u=this.form.get("tel2").value,h=this.form.get("perfil_id").value,v=this.form.get("loja_id").value,b=this.form.get("cargo_id").value||void 0,L=this.form.get("superior").value?this.form.get("superior").value:void 0,E=this.colaboradoresService.update({nome:t,perfil_id:h,loja_id:v,cargo_id:b,nivel_superior_id:L,data_nascimento:s,email_alternativo:a,tel1:i,tel2:u},e).subscribe(P=>{this.createdUserId=P.id,this.userWasCreated=!0,this.fechar(this.userWasCreated)});this.subscriptions.add(E)}uploadFile(e,t){const{id:s,tipo_user:a}=this.user,{id:i,perfil_nome:u}=this.storage.getLocalUser();if(s!=i&&!ie.f.checkUpdateImagePermission(u))return void this.toastService.presentToast({titulo:"N\xe3o autorizado",detalhe:`Apenas ${ve.u.ADMIN} e ${ve.u.GERENTE} podem atualizar essas informa\xe7\xf5es`,duracao:n.m4.mediumDuration,gravidade:n.kl.ATENCAO});const h=e.files[0],v=this.userService.newUploadAvatar(a,h,s).subscribe(b=>{this.user=b,this.createdUserId=b.id,this.userWasCreated=!0,this.toastService.presentToast({detalhe:"Foto alterada",duracao:n.m4.shortDuration,gravidade:n.kl.SUCESSO,titulo:"Sucesso!"}),this.updatedEvent.emit(this.user),t.clear()});this.subscriptions.add(v)}loadSuperiores(e=1,t){const s=this.userService.listUsers({searchedUser:this.searchedSuperior,tipos_usarios:`${C.Wo.COLABORADOR}, ${C.Wo.PRESTADOR}`},{order:g.L.ASC,page:e,take:10}).subscribe(a=>{this.superiores=a,t&&t.show()});this.subscriptions.add(s)}searchSuperior({value:e}){this.searchedSuperior=e,this.loadSuperiores(1)}clearSuperior(e){e.value="",this.searchedSuperior="",this.loadSuperiores(1)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){const e=this.form.get("superior").value;this.selectedSuperior=this.superiores.data.find(t=>t.id==e),this.selectedSuperior?this.showModal(oe.Q,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}listenEndereco(e){this.fechar(this.userWasCreated)}fechar(e=!1){this.modalCadastro.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,ee.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};de.ctorParameters=()=>[{type:o.QS},{type:he.K},{type:Pe},{type:se.W},{type:me.F},{type:ct.u},{type:d.IN},{type:ae.D},{type:rt.V}],de.propDecorators={user:[{type:l.IIB}],isModal:[{type:l.IIB}],updatedEvent:[{type:l.r_U}]},de=(0,c.gn)([(0,l.wA2)({selector:"app-colaborador-detail",template:'<ion-content appScrollTheme>\n\n  <form *ngIf="lojas && perfis && cargos" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n    <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n      <div class="flex flex-column align-items-center flex-or ">\n        <img [src]="user?.avatar_url || \'assets/imgs/outros/default-user.jpg\'"\n          class="h-10rem w-10rem border-circle border-2 border-primary  " />\n        <p-fileUpload #avatarFile id="avatar" mode="basic" name="avatar" accept="image/*"\n          styleClass="p-button-rounded -mt-4 w-3rem  text-center" chooseIcon="pi pi-pencil" chooseLabel=" "\n          customUpload="true" [auto]="true" (uploadHandler)="uploadFile($event, avatarFile)">\n        </p-fileUpload>\n      </div>\n\n      <div class="text-900 font-medium text-xl mb-1">Atualizar</div>\n      <div class="surface-card p-4 shadow-2 border-round p-fluid">\n        <div class="grid formgrid p-fluid">\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="nome" class="font-medium text-900">Nome</label>\n            <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="descricao">Email (alternativo)</label>\n            <input type="text" pInputText placeholder="Email alternativo" formControlName="email_alternativo" />\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email_alternativo\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel2">Celular Principal</label>\n            <p-inputMask id="tel1" placeholder="Celular do colaborador" formControlName="tel1" mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel1\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel2">Celular Alternativo</label>\n            <p-inputMask id="tel2" placeholder="Celular alternativo do colaborador" formControlName="tel2"\n              mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel2\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="data_nascimento">Data de nascimento</label>\n            <p-calendar formControlName="data_nascimento" placeholder="Data de nascimento do colaborador"\n              [maxDate]="maxDate" inputId="data_nascimento" [maxDate]="maxDate"></p-calendar>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'data_nascimento\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="field mb-4 col-12">\n            <label for="descricao">Perfil</label>\n            <p-dropdown #dropdown_perfil [options]="perfis.data" placeholder="Selecione o perfil de acesso"\n              formControlName="perfil_id" optionLabel="nome" optionValue="id">\n              <ng-template let-perfil pTemplate="item">\n                <div class="">\n                  <div>{{perfil.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="footer">\n                <div class="col-12 w-auto">\n                  <button *ngIf="perfis.meta.hasNextPage" pButton pRipple type="button" label="Carregar mais"\n                    (click)="lazyLoadPerfis(dropdown_perfil)" class="p-button-outlined p-button-rounded"></button>\n                </div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'perfil_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="col-12 field ">\n            <label for="loja_id" class="text-900 font-medium mb-3">Loja</label>\n            <p-dropdown id="loja_id" [options]="lojas.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="loja_id"\n              optionLabel="nome" filterBy="nome,codigo"\n              optionValue="id">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchLoja(searchLojaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearLoja(searchLojaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="item">\n                <div>\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="selectedItem">\n                <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'loja_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n          <div class="col-12 field ">\n            <label for="cargo_id" class="text-900 font-medium mb-3">Cargo</label>\n            <p-dropdown id="cargo_id" [options]="cargos.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="cargo_id"\n              optionLabel="nome" filterBy="nome"\n              optionValue="id" [showClear]="true">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchCargoInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchCargo(searchCargoInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchCargo(searchCargoInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearCargo(searchCargoInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-cargo pTemplate="item">\n                <div>\n                  <div>{{ cargo.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-cargo pTemplate="selectedItem">\n                <div>{{ cargo.nome}}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'cargo_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div *ngIf="superiores" class="col-12 field ">\n            <label for="nivel_superior" class="text-900 font-medium mb-3">N\xedvel Superior</label>\n            <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n            <p-dropdown id="nivel_superior" [options]="superiores.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="superior"\n              optionLabel="nome" filterBy="nome, cpf"\n              optionValue="id" [showClear]="true">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchSuperiorInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchSuperior(searchSuperiorInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchSuperior(searchSuperiorInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearSuperior(searchSuperiorInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-superior pTemplate="item">\n                <div>\n                  <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                </div>\n              </ng-template>\n              <ng-template let-superior pTemplate="selectedItem">\n                <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'superior\')"></p-message>\n            </div>\n          </div>\n\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n        </div>\n        <div class="flex justify-content-end">\n          <button pButton pRipple label="Atualizar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="update()"\n            [disabled]="disableCreateBtn()"></button>\n        </div>\n      </div>\n    </div>\n  </form>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],de);let Ne=class{constructor(e,t,s,a){this.colaboradoresService=e,this.modal=t,this.toastService=s,this.lojaService=a,this.sortUsertatus=C.Mm,this.sortPessoaStatus=C.hx,this.sortLojas=[],this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.searchedNome="",this.selectedPessoaStatus=void 0,this.selectedUsuarioStatus=void 0,this.currentPage=1,this.showStatusDialog=!1,this.editMenuItens=[{label:"Op\xe7\xf5es",items:[{label:"Atualizar",icon:"pi pi-user-edit",command:()=>this.detalharSimplificado(this.selectedUser)},{label:"Status",icon:"pi pi-exclamation-triangle",command:()=>this.detalharStatus(this.selectedUser)},{label:"Autoriza\xe7\xf5es",icon:"pi pi-verified",command:()=>this.detalharAuthorization(this.selectedUser)}]},{separator:!0,items:[{label:"Perfil",icon:"pi pi-id-card",command:()=>this.detalharPerfil(this.selectedUser)}]}],this.updateStatusObj={status_user:void 0,status_pessoa:void 0},this.enderecoMode=be.x.USER,this.contentError=new ue.S,this.subscriptions=new te.w0}ngOnInit(){this.loadLoja(),this.loadColaboradores()}ngOnDestroy(){this.subscriptions.unsubscribe()}changeStatusUsuario({value:e}){this.selectedUsuarioStatus=e,this.loadColaboradores(1)}changeStatusPessoa({value:e}){this.selectedPessoaStatus=e,this.loadColaboradores(1)}changeLoja({value:e}){this.selectedLoja=e,this.loadColaboradores(1)}clearFilter(){this.loadColaboradores(1)}clearAllFilters(e,t,s){this.searchedNome=void 0,this.selectedLoja=void 0,this.selectedPessoaStatus=void 0,this.selectedUsuarioStatus=void 0,t.writeValue(null),s.writeValue(null),this.loadColaboradores(1)}loadLoja(){const e=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:re.eX.OPERANDO}).subscribe(t=>{this.lojas=t});this.subscriptions.add(e)}searchLoja({value:e}){this.searchedLoja=e,this.loadLoja()}clearLoja(e){e.value="",this.searchedLoja="",this.loadLoja()}loadColaboradores(e=1){const t=this.colaboradoresService.list({searchedColaborador:this.searchedNome,loja_id:this.selectedLoja,status_pessoa:this.selectedPessoaStatus,status_user:this.selectedUsuarioStatus},{order:g.L.DESC,page:e,take:5}).subscribe({next:s=>{this.contentError=new ue.S,this.users=s,this.isLoaded=!0},error:s=>{this.contentError={code:s.status,hasError:!0}}});this.subscriptions.add(t)}updateStatus(){const{id:e}=this.selectedUser,{status_pessoa:t,status_user:s}=this.updateStatusObj,a=this.colaboradoresService.update({status_pessoa:t,status_user:s},e).subscribe({next:i=>{this.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:n.m4.mediumDuration,gravidade:n.kl.SUCESSO}),this.showStatusDialog=!1,this.loadColaboradores(1)},error:i=>{this.showStatusDialog=!1}});this.subscriptions.add(a)}detalharSimplificado(e){this.showModal(de,{user:e})}detalharPerfil(e){this.showModal(at.E,{user:e})}detalharAuthorization(e){this.showModal(qe.T,{user:e})}detalharStatus(e){const{status_pessoa:t,status_user:s}=e;this.updateStatusObj={status_pessoa:t,status_user:s},this.showStatusDialog=!0}detalharEndereco(e){e.endereco?this.showModal(Ye.F,{currentEndereco:e,enderecoMode:this.enderecoMode}):this.showModal(Ze.A,{idOf:e.id,enderecoMode:this.enderecoMode,isModal:!0})}setUserImage(e){return e.avatar_url||"assets/imgs/outros/default-user.jpg"}createNewUser(){this.showModal(_e)}search(){this.loadColaboradores(1)}paginar(e){const{first:t,rows:s}=e,a=Number(Number(t)/Number(s)+1);a!=this.currentPage&&(this.currentPage=a,this.loadColaboradores(a))}detailSuperior(e){e?this.showModal(oe.Q,{user_id:e.id}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem superior alocado",titulo:"N\xe3o informado",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}detailLoja(e){e?this.showModal(it.t,{loja:e}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem loja alocada",titulo:"N\xe3o informado",duracao:n.m4.shortDuration,gravidade:n.kl.INFORMACAO})}showModal(e,t){var s=this;return(0,ee.Z)(function*(){const a=yield s.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{const{data:u}=i;s.isLoaded=!1,s.loadColaboradores(),!0===u&&s.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:n.m4.mediumDuration,gravidade:n.kl.SUCESSO})}),yield a.present()})()}};Ne.ctorParameters=()=>[{type:Pe},{type:d.IN},{type:ae.D},{type:se.W}],Ne=(0,c.gn)([(0,l.wA2)({selector:"app-colaborador-main",template:'<div class="card main-view h-full">\n\n  <ng-container *ngIf="isLoaded">\n    <p-dataView emptyMessage="Nada encontrado, experimente escolher outra carga" class="data-container" #dv\n      [lazy]="true" [value]="users.data" [paginator]="true" [rows]="users.meta.take"\n      [totalRecords]="users.meta.itemCount" [pageLinks]="users.meta.pageCount" (onLazyLoad)="paginar($event)"\n      filterBy="nome" layout="list">\n      <ng-template pTemplate="header">\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field  col-12 sm:col-6 xl:col-3">\n            <p-dropdown *ngIf="lojas" #dropdown_lojas id="loja_id" [options]="lojas.data" [filter]="true"\n              placeholder="Selecione" [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" optionValue="id"\n              optionLabel="nome" filterBy="nome,codigo"\n              (onClear)="clearFilter($event)" (onChange)="changeLoja($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchLoja(searchLojaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearLoja(searchLojaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="item">\n                <div>\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="selectedItem">\n                <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n              </ng-template>\n            </p-dropdown>\n          </div>\n\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_filtro [options]="sortUsertatus" placeholder="Status Usu\xe1rio"\n              (onChange)="changeStatusUsuario($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_filtro [options]="sortPessoaStatus" placeholder="Status Pessoa"\n              (onChange)="changeStatusPessoa($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n        </div>\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field col-12 sm:col-6 xl:col-3">\n            <button pButton pRipple class="sm:w-auto w-full p-button-outlined" icon="pi pi-times" label="Limpar filtros"\n              (click)="clearAllFilters($event, dropdown_lojas, dropdown_filtro)">\n            </button>\n          </div>\n          <div class="field col-12 sm:col-6 xl:col-3 text-right">\n            <button pButton pRipple class="sm:w-auto w-full " icon="pi pi-user-plus" label="Novo cadastro"\n              (click)="createNewUser()">\n            </button>\n          </div>\n        </div>\n\n        <div class="flex flex-column md:flex-row md:justify-content-center">\n          <span class="p-inputgroup mb-2 md:mb-0 mt-2 max-w-30rem\t">\n            <input class="w-full" type="search" pInputText [(ngModel)]="searchedNome"\n              [ngModelOptions]="{standalone: true}" placeholder="CPF, Email ou Nome" (keyup.enter)="search()">\n            <button type="button" pButton pRipple class="pi pi-search cursor-pointer p-button-outlined"\n              (click)="search()"></button>\n            <button type="button" pButton pRipple class="pi pi-times cursor-pointer p-button-outlined p-button-danger"\n              (click)="searchedNome = \'\'; search();"></button>\n          </span>\n        </div>\n\n      </ng-template>\n\n      <ng-template let-user pTemplate="listItem">\n        <div *ngIf="isLoaded" #templateGrid class="col-12">\n          <div class="data-list-item">\n            <div class="crop mb-2 md:mb-0 ">\n              <img class="border-circle border-2 border-primary" [src]="setUserImage(user)" [alt]="user.name" />\n            </div>\n            <div class="data-list-detail">\n              <div class="data-name">{{ user.nome }} ({{ user.cargo?.nome || \'Sem cargo definido\' }})</div>\n              <div class="data-description mt-2">CPF: {{ user.cpf | cpfMask }}</div>\n              <div class="data-description mt-1">Situa\xe7\xe3o: {{ user.status_pessoa }}</div>\n              <div class="data-description mt-1">Acesso: {{ user.status_user }}</div>\n\n              <div class="data-description mt-2">E-mail: {{ user.email }}</div>\n              <div *ngIf="user.email_alternativo" class="data-description mt-1">E-mail (alternativo): {{\n                user.email_alternativo }}</div>\n              <div class="data-description mt-1">Celular: {{ user.tel1 | phoneMask }}</div>\n              <div *ngIf="user.tel2" class="data-description mt-1">Celular (alternativo): {{ user.tel2 | phoneMask }}\n              </div>\n\n              <div class="data-description mt-2 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailLoja(user.loja)">\n                  Loja:\n                  {{ user.loja?.nome || \'N\xe3o informado\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n              <div class="data-description mt-1 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailSuperior(user.nivel_superior)">\n                  Superior: {{ user.nivel_superior?.nome || \'N\xe3o informado\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n\n              <div class="mt-3">\n                <i class="pi pi-sitemap data-category-icon "></i>\n                <span class="data-category">Acesso: {{user.perfil?.nome || "Sem\n                  Perfil"}}</span>\n              </div>\n            </div>\n            <div class="data-list-action">\n              <button type="button" pButton icon="pi pi-cog" label="Op\xe7\xf5es"\n                (click)="selectedUser = user; editMenu.toggle($event)"></button>\n              <p-menu #editMenu appendTo="body" [popup]="true" [model]="editMenuItens"></p-menu>\n\n              <button pButton type="button" class="p-button-outlined" icon="pi pi-map" label="Endere\xe7o"\n                (click)="detalharEndereco(user)">\n              </button>\n            </div>\n          </div>\n        </div>\n      </ng-template>\n    </p-dataView>\n  </ng-container>\n\n  <ng-container *ngIf="contentError.hasError">\n    <app-content-error [erroCode]="contentError.code"></app-content-error>\n  </ng-container>\n\n\n  <p-dialog *ngIf="showStatusDialog" [(visible)]="showStatusDialog" [resizable]="false" [draggable]="false"\n    [modal]="true" [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\', height: \'80%\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <div class="text-900 font-medium mb-3 text-xl">Alterando status</div>\n      </div>\n    </ng-template>\n    <div class="surface-card border-round shadow-2 p-4">\n      <p class="mt-0 mb-4 p-0 line-height-3">Acesso ao sistema: </p>\n      <p-dropdown [options]="sortUsertatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n        [(ngModel)]="updateStatusObj.status_user" [ngModelOptions]="{standalone: true}"\n        styleClass="mb-2 md:mb-0 w-full">\n      </p-dropdown>\n    </div>\n\n    <div class="surface-card border-round shadow-2 p-4 mt-2">\n      <p class="mt-0 mb-4 p-0 line-height-3">Situa\xe7\xe3o na corpora\xe7\xe3o: </p>\n      <p-dropdown [options]="sortPessoaStatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n        [(ngModel)]="updateStatusObj.status_pessoa" [ngModelOptions]="{standalone: true}"\n        styleClass="mb-2 md:mb-0 w-full">\n      </p-dropdown>\n    </div>\n    <div class="flex justify-content-end mt-3 grid">\n      <div class="surface-border border-top-1 opacity-50 mb-1 col-12"></div>\n      <button class="" pButton pRipple label="Atualizar" (click)="updateStatus()"></button>\n    </div>\n  </p-dialog>\n</div>',styles:[""]})],Ne);var _t=r(73814);let Ve=class{};Ve=(0,c.gn)([(0,l.LVF)({declarations:[Ne],imports:[y.ez,o.u5,o.UX,d.Pc,j.FI,H.QK,I.j,z.A,Q.T,X.l,K.x,G.F,J.$9,Y.q,$.U,F.cc,k.Q,B.ON,U.kW,R.LU,I.j,W.S,A.hJ,D.O,V.D,pe.f,N.o,Ke.a,Z.X,q.R,Je.U,Ge.S,_t.b],exports:[Ne]})],Ve);let He=class{};He=(0,c.gn)([(0,l.LVF)({declarations:[_e],imports:[y.ez,o.u5,o.UX,d.Pc,j.FI,H.QK,I.j,ye.zz,je.Iu,z.A,Ie.nD,Q.T,Ce.L$,Le.WN,X.l,K.x,G.F,J.$9,Y.q,$.U,F.cc,k.Q,Ee._8,B.ON,U.kW,xe.q,R.LU,I.j,W.S,A.hJ,D.O,V.D,N.o,Z.X,pe.f,q.R],exports:[_e]})],He);let Qe=class{};Qe=(0,c.gn)([(0,l.LVF)({declarations:[de],imports:[y.ez,o.u5,o.UX,d.Pc,j.FI,H.QK,I.j,ye.zz,je.Iu,z.A,ot.O,Ie.nD,Q.T,Ce.L$,Le.WN,X.l,K.x,G.F,J.$9,Y.q,$.U,F.cc,k.Q,Ee._8,B.ON,U.kW,xe.q,R.LU,I.j,W.S,A.hJ,D.O,V.D,N.o,Z.X,q.R],exports:[de]})],Qe);let Xe=class{};Xe=(0,c.gn)([(0,l.LVF)({declarations:[],imports:[y.ez,Ve,He,Qe],exports:[Ve,He,Qe]})],Xe);let nt=class{};nt=(0,c.gn)([(0,l.LVF)({declarations:[],imports:[y.ez,De,We,Xe],exports:[De,We,Xe]})],nt);let lt=class{};lt=(0,c.gn)([(0,l.LVF)({imports:[y.ez,o.u5,d.Pc,m.uH,N.o,nt,f],declarations:[p]})],lt)},94826:(Oe,_,r)=>{r.d(_,{P:()=>p});var c=r(15861),l=r(70655);var d=r(98274),m=r(48058),O=r(50727),M=r(59256),T=r(55575);let p=class{constructor(f,j,k){this.modal=f,this.toastMessageService=j,this.empresasService=k,this.hasUpdate=!1,this.subscriptions=new O.w0}ngOnInit(){this.toastMessageService.clearToast(),this.empresa||this.loadEmpresa()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadEmpresa(){const f=this.empresasService.findById(this.empresa_id).subscribe({next:j=>{this.empresa=j}});this.subscriptions.add(f)}fechar(){var f=this;return(0,c.Z)(function*(){yield f.modal.dismiss(f.hasUpdate)})()}};p.ctorParameters=()=>[{type:m.IN},{type:M.D},{type:T.o}],p.propDecorators={empresa:[{type:d.IIB}],empresa_id:[{type:d.IIB}]},p=(0,l.gn)([(0,d.wA2)({selector:"app-empresa-brief",template:'<ion-content appScrollTheme>\n  <div class="surface-card p-4 border-round shadow-2 ">\n    <div class="col-12 h-full">\n      <div class="border-1 border-double border-primary surface-border border-round mt-4" style="min-height: 30rem">\n        <ng-container *ngIf="empresa">\n          <div class="surface-card p-4 shadow-2 border-round">\n            <div class="flex align-items-center justify-content-end ml-auto cursor-pointer"\n              style="position: fixed; top: 15px; right: 15px;" (click)="fechar()">\n              <span\n                class="flex align-items-center justify-content-center bg-pink-100 text-pink-800 border-circle vertical-align-top"\n                style="width: 24px; height: 24px;">\n                <i class="pi pi-times text-sm"></i>\n              </span>\n            </div>\n            <div class="font-medium text-3xl text-900 mb-3">Detalhamento</div>\n            <div class="text-primary mb-1">{{ empresa.id }}</div>\n            <div class="flex flex-column align-items-center flex-or mb-5">\n              <img [src]="user?.avatar_url || \'assets/imgs/outros/default-empresa.jpg\'"\n                class="h-10rem w-10rem border-circle border-2 border-primary mr-1 xl:mr-0 ml-3" />\n            </div>\n            <ul class="list-none p-0 m-0 border-top-1 surface-border">\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Raz\xe3o Social</div>\n                <div class="text-900 w-full md:w-10">{{ empresa.razao_social }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Nome Fantasia</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ empresa.nome_fantasia }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">CNPJ</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ empresa.cnpj | cnpjMask }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">E-mail (principal)</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ empresa.email_principal }}</div>\n              </li>\n\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">E-mail alternativo</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ empresa.email_alternativo || "N\xe3o informado" }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Celular (principal)</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ empresa.tel1 | phoneMask }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Celular (alternativo)</div>\n                <div *ngIf="empresa.tel2" class="text-900 w-full md:w-10 line-height-3">{{ empresa.tel2 | phoneMask }}\n                </div>\n                <div *ngIf="!empresa.tel2" class="text-900 w-full md:w-10 line-height-3">N\xe3o informado</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Situa\xe7\xe3o</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ empresa.status }}</div>\n              </li>\n\n              <li *ngIf="empresa.endereco" class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Endere\xe7o</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Endere\xe7o</span>\n                        </div>\n                        <div class="text-700">{{ empresa.endereco.endereco }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">CEP</span>\n                        </div>\n                        <div class="text-700">{{ empresa.endereco.cep }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">N\xfamero</span>\n                        </div>\n                        <div class="text-700">{{ empresa.endereco.numero }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Complemento</span>\n                        </div>\n                        <div class="text-700">{{ empresa.endereco.complemento }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Bairro</span>\n                        </div>\n                        <div class="text-700">{{ empresa.endereco.bairro }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Cidade (UF)</span>\n                        </div>\n                        <div class="text-700">{{ empresa.endereco.cidade }} ({{ empresa.endereco.estado }})</div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </ng-container>\n      </div>\n    </div>\n  </div>\n</ion-content>',styles:[""]})],p)},73814:(Oe,_,r)=>{r.d(_,{b:()=>p});var c=r(70655),l=r(98274),y=r(36895),o=r(48058),d=r(35593),m=r(91795),O=r(85226),M=r(94826),T=r(42480);let p=class{};p=(0,c.gn)([(0,l.LVF)({declarations:[M.P],imports:[y.ez,o.Pc,d.hJ,m.T,O.o,T.R],exports:[M.P]})],p)},94567:(Oe,_,r)=>{r.d(_,{OL:()=>o,eX:()=>l,r6:()=>d});var l,m,y,c=r(46007);(m=l||(l={})).OPERANDO="OPERANDO",m.FECHADA_TEMPORARIAMENTE="FECHADA_TEMPORARIAMENTE",m.FECHADA_PERMANENTEMENTE="FECHADA_PERMANENTEMENTE",m.DELETADA="DELETADA",function(m){m.LOJA_FISICA="LOJA_FISICA",m.LOJA_DIGITAL="LOJA_DIGITAL",m.FILIAL="FILIAL",m.ARMAZEM="ARMAZEM",m.QUIOSQUE="QUIOSQUE",m.BOUTIQUE="BOUTIQUE",m.POP_UP_STORE="POP_UP_STORE",m.OUTLET="OUTLET",m.SHOWROOM="SHOWROOM",m.CONCEITO_STORE="CONCEITO_STORE",m.DEPARTAMENTO="DEPARTAMENTO",m.OUTRO="OUTRO"}(y||(y={}));const o=c.m.convertEnumToSelectItem(l),d=c.m.convertEnumToSelectItem(y)},42480:(Oe,_,r)=>{r.d(_,{R:()=>M});var c=r(70655),l=r(98274),y=r(36895);let o=class{transform(p,...w){if("string"==typeof p&&11==p.trim().length){let f=p.replace(/\D/g,"");return f=f.replace(/(\d{3})(\d)/,"$1.$2"),f=f.replace(/(\d{3})(\d)/,"$1.$2"),f=f.replace(/(\d{3})(\d{1,2})$/,"$1-$2"),f}return p}};o=(0,c.gn)([(0,l.E6H)({name:"cpfMask"})],o);let d=class{transform(p,...w){return p}};d=(0,c.gn)([(0,l.E6H)({name:"cepMask"})],d);let m=class{transform(p,...w){return p?p.length<11?p:p.includes("0800")?this.transform0800(p):this.transformCelular(p):""}transformCelular(p){const w=p.substring(0,2),f=p.substring(2,3),j=p.substring(3,7),k=p.substring(7,11);return p.length<=2?`(${w})`:p.length<=3?`(${w})${f}`:p.length<=7?`(${w})${f} ${j}`:`(${w})${f} ${j}-${k}`}transform0800(p){return`${p.slice(0,4)} ${p.slice(4,7)} ${p.slice(7)}`}};m=(0,c.gn)([(0,l.E6H)({name:"phoneMask"})],m);let O=class{transform(p,...w){if("string"==typeof p&&14===p.trim().length){let f=p.replace(/\D/g,"");return f=f.replace(/^(\d{2})(\d)/,"$1.$2"),f=f.replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3"),f=f.replace(/\.(\d{3})(\d)/,".$1/$2"),f=f.replace(/(\d{4})(\d)/,"$1-$2"),f}return p}};O=(0,c.gn)([(0,l.E6H)({name:"cnpjMask"})],O);let M=class{};M=(0,c.gn)([(0,l.LVF)({declarations:[o,d,m,O],imports:[y.ez],exports:[o,d,m,O]})],M)},67578:(Oe,_,r)=>{r.d(_,{f:()=>y});var c=r(34057),l=r(35326);class y{static sanitizeCreate(d,m){return m.tel1=l.r.ClearSpecialCharacters(d.tel1),m.tel2=l.r.ClearSpecialCharacters(d.tel2),(!d.tel1||0==d.tel1?.length)&&(m.tel1=void 0),(!d.tel2||0==d.tel2?.length)&&(m.tel2=void 0),(!d.cpf||""==d.cpf)&&(m.cpf=void 0),(!d.email_alternativo||""==d.email_alternativo)&&(m.email_alternativo=void 0),m}static checkUpdateImagePermission(d){return d==c.u.GERENTE||d==c.u.ADMIN}}}}]);