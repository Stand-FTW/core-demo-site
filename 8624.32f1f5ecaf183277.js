"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8624],{38624:(B,y,n)=>{n.r(y),n.d(y,{AdministracaoPagamentoPageModule:()=>Q});var d=n(70655),l=n(98274),g=n(36895),u=n(24006),v=n(48058),b=n(92216),m=n(39528);let s=class{constructor(){this.currentTab="pagamentos"}ngOnInit(){}changeTab(e){this.currentTab=e.detail.value}};s.ctorParameters=()=>[],s=(0,d.gn)([(0,l.wA2)({selector:"app-administracao-pagamento",template:'<ion-header [translucent]="true">\n  <ion-toolbar>\n    <ion-buttons slot="start">\n      <ion-menu-button></ion-menu-button>\n    </ion-buttons>\n    <ion-title>ADM. Pagamentos</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content appScrollTheme>\n  <br />\n  <ion-segment class="background-segment" [(ngModel)]="currentTab" [ngModelOptions]="{standalone: true}"\n    (ionChange)="changeTab($event)">\n    <ion-segment-button style="margin-left: 5px; max-width: 200px" layout="icon-start" value="pagamentos">\n      <ion-icon style="font-size: 1.2em" name="cash-outline"></ion-icon>\n      <ion-label text-wrap class="wrap-text" style="font-size: 1.1em">\n        Pagamentos\n      </ion-label>\n    </ion-segment-button>\n    <ion-segment-button style="margin-left: 5px; max-width: 200px" layout="icon-start" value="solicitacoes">\n      <ion-icon style="font-size: 1.2em" name="sync-outline"></ion-icon>\n      <ion-label text-wrap class="wrap-text" style="font-size: 1.1em">\n        Solicita\xe7\xf5es\n      </ion-label>\n    </ion-segment-button>\n  </ion-segment>\n  <br />\n  <ion-segment class="background-segment" [(ngModel)]="currentTab" [ngModelOptions]="{standalone: true}"\n    (ionChange)="changeTab($event)">\n    <ion-segment-button style="margin-left: 5px; max-width: 200px" layout="icon-start" value="operacoes">\n      <ion-icon style="font-size: 1.2em" name="shuffle-outline"></ion-icon>\n      <ion-label text-wrap class="wrap-text" style="font-size: 1.1em">\n        Workflow\n      </ion-label>\n    </ion-segment-button>\n    <ion-segment-button style="margin-left: 5px; max-width: 200px" layout="icon-start" value="eventos">\n      <ion-icon style="font-size: 1.2em" name="duplicate-outline"></ion-icon>\n      <ion-label text-wrap class="wrap-text" style="font-size: 1.1em">\n        Eventos\n      </ion-label>\n    </ion-segment-button>\n  </ion-segment>\n  <br />\n\n  <div class="wall-background h-screen">\n    <ng-container *ngIf="currentTab === \'pagamentos\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-pagamento-main></app-pagamento-main>\n      </div>\n    </ng-container>\n    <ng-container *ngIf="currentTab === \'solicitacoes\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-solicitacao-main></app-solicitacao-main>\n      </div>\n    </ng-container>\n\n    <ng-container *ngIf="currentTab === \'operacoes\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-operacoes-main></app-operacoes-main>\n      </div>\n    </ng-container>\n    <ng-container *ngIf="currentTab === \'eventos\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-evento-main></app-evento-main>\n      </div>\n    </ng-container>\n  </div>\n\n</ion-content>',styles:[""]})],s);const p=[{path:"",component:s}];let c=class{};c=(0,d.gn)([(0,l.LVF)({imports:[m.Bz.forChild(p)],exports:[m.Bz]})],c);var x=n(85226),S=n(35593),j=n(91795),J=n(17913),G=n(50613),X=n(51740),Y=n(1997),q=n(25047),ee=n(21493),ne=n(82210),ae=n(15108),te=n(45132),se=n(77604),oe=n(9764),ie=n(21327),re=n(92665),le=n(17489),ce=n(70585),de=n(32137),pe=n(65722),V=n(86679),ve=n(99983),xe=n(28396),me=n(58949),ue=n(91670),W=n(61663),M=n(15861);var N=n(50727),L=n(59256),A=n(59136),Ce=n(3857);let D=class{constructor(e,a){this.modalBrief=e,this.toastMessageService=a,this.hasUpdate=!1}ngOnInit(){console.log(this.nivel_aprovacao),this.toastMessageService.clearToast()}fechar(){var e=this;return(0,M.Z)(function*(){yield e.modalBrief.dismiss(e.hasUpdate)})()}};D.ctorParameters=()=>[{type:v.IN},{type:L.D}],D.propDecorators={nivel_aprovacao:[{type:l.IIB}]},D=(0,d.gn)([(0,l.wA2)({selector:"app-nivel-aprovacao-brief",template:'<ion-content appScrollTheme>\n  <div class="surface-card p-4 border-round shadow-2 h-full">\n    <div class="col-12">\n      <div class="border-1 border-double border-primary surface-border border-round mt-4" style="min-height: 30rem">\n        <ng-container *ngIf="nivel_aprovacao">\n          <div class="surface-card p-4 shadow-2 border-round">\n            <div class="flex align-items-center justify-content-end ml-auto cursor-pointer"\n              style="position: fixed; top: 15px; right: 15px;" (click)="fechar()">\n              <span\n                class="flex align-items-center justify-content-center bg-pink-100 text-pink-800 border-circle vertical-align-top"\n                style="width: 24px; height: 24px;">\n                <i class="pi pi-times text-sm"></i>\n              </span>\n            </div>\n            <div class="font-medium text-3xl text-900 mb-3">Detalhamento</div>\n            <div class="text-primary mb-5">{{ nivel_aprovacao.id }}</div>\n            <ul class="list-none p-0 m-0 border-top-1 surface-border">\n              <li *ngIf="nivel_aprovacao" class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">N\xedvel de aprova\xe7\xe3o</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Ordem</span>\n                        </div>\n                        <div class="text-700">{{ nivel_aprovacao.ordem }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Perfil Aprovador</span>\n                        </div>\n                        <div class="text-700">{{ nivel_aprovacao.perfil_aprovador?.nome || \'N.E\' }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Cargo Aprovador</span>\n                        </div>\n                        <div class="text-700">{{ nivel_aprovacao.cargo_aprovador?.nome || \'N.E\' }}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </ng-container>\n      </div>\n    </div>\n  </div>\n</ion-content>',styles:[""]})],D);var Me=n(81695);var fe=n(94327),Oe=n(35216),C=n(98739);let I=class{constructor(e,a,t){this.modalBrief=e,this.toastMessageService=a,this.solicitacaosService=t,this.hasUpdate=!1,this.subscriptions=new N.w0}ngOnInit(){this.toastMessageService.clearToast(),this.solicitacao||this.loadSolicitacao()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadSolicitacao(){const e=this.solicitacaosService.findById(this.solicitacao_id).subscribe({next:a=>{this.solicitacao=a}});this.subscriptions.add(e)}downContaOriginal(){const{conta_original_url:e,conta_original:a}=this.solicitacao;(0,fe.saveAs)(e,a),this.toastMessageService.presentToast({detalhe:"Baixando a conta",duracao:C.m4.shortDuration,gravidade:C.kl.SUCESSO,titulo:"Download em andamento"})}downComprovante(){const{comprovante_url:e,comprovante:a}=this.solicitacao;(0,fe.saveAs)(e,a),this.toastMessageService.presentToast({detalhe:"Baixando o comprovante",duracao:C.m4.shortDuration,gravidade:C.kl.SUCESSO,titulo:"Download em andamento"})}fechar(){var e=this;return(0,M.Z)(function*(){yield e.modalBrief.dismiss(e.hasUpdate)})()}};I.ctorParameters=()=>[{type:v.IN},{type:L.D},{type:Oe.H}],I.propDecorators={solicitacao:[{type:l.IIB}],solicitacao_id:[{type:l.IIB}]},I=(0,d.gn)([(0,l.wA2)({selector:"app-solicitacao-brief",template:'<ion-content appScrollTheme>\n  <div class="surface-card p-4 border-round shadow-2 ">\n    <div class="col-12 ">\n      <div class="border-1 border-double border-primary surface-border border-round mt-4 h-full" style="min-height: 30rem">\n        <ng-container *ngIf="solicitacao">\n          <div class="surface-card p-4 shadow-2 border-round">\n            <div class="flex align-items-center justify-content-end ml-auto cursor-pointer"\n              style="position: fixed; top: 15px; right: 15px;" (click)="fechar()">\n              <span\n                class="flex align-items-center justify-content-center bg-pink-100 text-pink-800 border-circle vertical-align-top"\n                style="width: 24px; height: 24px;">\n                <i class="pi pi-times text-sm"></i>\n              </span>\n            </div>\n            <div class="font-medium text-3xl text-900 mb-3">Detalhamento</div>\n            <div class="text-primary mb-5">{{ solicitacao.id }}</div>\n            <ul class="list-none p-0 m-0 border-top-1 surface-border">\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Status</div>\n                <div class="text-900 w-full md:w-10">{{ solicitacao.status }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Custo</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ solicitacao.custo | currency:\'BRL\':\' R$\' }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Anexos</div>\n                <div class="text-900 w-full md:w-10">\n                  <p-tag *ngIf="solicitacao.conta_original_url" styleClass="mr-2 text-surface-500 bg-surface-100"\n                    value="Conta original" [rounded]="true" icon="pi pi-download" (click)="downContaOriginal()"\n                    class="cursor-pointer"></p-tag>\n\n                  <p-tag *ngIf="solicitacao.comprovante_url" styleClass="mr-2 text-surface-100 bg-surface-500"\n                    value="Comprovante" [rounded]="true" icon="pi pi-download" (click)="downComprovante()"\n                    class="cursor-pointer"></p-tag>\n                </div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Data de vencimento</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ solicitacao.data_vencimento | date: \'dd/MM/yyyy\'\n                  }}</div>\n              </li>\n\n              <li *ngIf="solicitacao.operacao" class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Opera\xe7\xe3o</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">ID</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.operacao.id }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Nome</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.operacao.nome }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Descri\xe7\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.operacao.descricao }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Tipo</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.operacao.tipo_transacao }}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n\n              <li *ngIf="solicitacao.configuracao" class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Configura\xe7\xe3o</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">ID</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.configuracao.id }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Vers\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.configuracao.versao }}</div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n\n              <li *ngIf="solicitacao.nivel_atual" class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">N\xedvel Atual</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">ID</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.nivel_atual.id }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Ordem</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.nivel_atual.ordem }}</div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n\n              <li *ngIf="solicitacao.nivel_aprovacao" class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">N\xedvel de aprova\xe7\xe3o</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Ordem</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.nivel_aprovacao.ordem }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Perfil Aprovador</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.nivel_aprovacao.perfil_aprovador?.nome || \'N.E\' }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Cargo Aprovador</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.nivel_aprovacao.cargo_aprovador?.nome || \'N.E\' }}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n\n\n              <li *ngIf="solicitacao.solicitante" class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Solicitante</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">ID</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.solicitante.id }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Tipo de usu\xe1rio</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.solicitante.tipo_user }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Nome</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.solicitante.nome }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">CPF</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.solicitante.cpf ? (solicitacao.solicitante.cpf | cpfMask) :\n                          \'N\xe3o informado\'\n                          }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">E-mail</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.solicitante.email || \'N\xe3o informado\' }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">E-mail (alternativo)</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.solicitante.email_alternativo || \'N\xe3o informado\' }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Celular</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.solicitante.tel1 ? (solicitacao.solicitante.tel1 |\n                          phoneMask) : \'N\xe3o\n                          h\xe1\' }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Celular (alternativo)</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.solicitante.tel2 ? (solicitacao.solicitante.tel2 |\n                          phoneMask) : \'N\xe3o\n                          h\xe1\' }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Acesso ao sistema</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.solicitante.status_user }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Situa\xe7\xe3o na corpora\xe7\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ solicitacao.solicitante.status_pessoa }}\n                        </div>\n                      </div>\n                    </div>\n\n                  </div>\n                </div>\n              </li>\n\n            </ul>\n          </div>\n        </ng-container>\n      </div>\n    </div>\n  </div>\n</ion-content>',styles:[""]})],I);var Ee=n(69890),Ae=n(5491);let R=class{constructor(e,a,t,o,f){this.modal=e,this.toastService=a,this.router=t,this.eventoAprovacaoService=o,this.filesService=f,this.searchedEvento="",this.solicitacaoSearched="",this.aprovadorSearched="",this.sortTipoAcao=Ee.v,this.currentPage=1,this.pageOrder=A.L.DESC,this.currentTake=5,this.min_total=0,this.max_total=0,this.selectedTransacoes=[],this.subscriptions=new N.w0}ngOnInit(){this.cols=[{field:"id",header:"ID"},{field:"solicitacao_id",header:"Solicita\xe7\xe3o ID"},{field:"ator_nome",header:"Ator (nome)"},{field:"ator_email",header:"Ator (e-mail)"},{field:"nivel",header:"N\xedvel"},{field:"custo",header:"Custo"},{field:"tipo_evento",header:"Tipo de Evento"},{field:"data_evento",header:"Data do Evento"}],this.exportColumns=this.cols.map(e=>({title:e.header,dataKey:e.field})),this.loadEventos()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadEventos(e=1,a){const t=this.eventoAprovacaoService.list({solicitanteSearched:this.searchedSolicitante,solicitacaoSearched:this.solicitacaoSearched,aprovadorSearched:this.aprovadorSearched,min_custo_pagamento:this.min_total,max_custo_pagamento:this.max_total,data_evento:this.dataEvento},{order:this.pageOrder,page:e,take:this.currentTake}).subscribe({next:o=>{this.eventos=o},error:()=>{a&&(a.paginator=!0)},complete:()=>{a&&(a.paginator=!0)}});this.subscriptions.add(t)}paginar(e,a){a.paginator=!1;const{first:t,rows:o,sortOrder:f}=e,P=Number(Number(t)/Number(o)+1);this.doFilter(e),this.currentPage=P,this.currentTake=o,this.pageOrder=f&&1==f?A.L.DESC:A.L.ASC,this.loadEventos(P,a)}doFilter(e){if(!e||!e.filters||!e.filters.id)return;const{id:a,solicitacao:t,user:o,custo:f,acao:P,data_aprovacao:T}=e.filters;this.min_total>this.max_total&&(this.max_total=void 0),a[0].value?this.searchedEvento=a[0].value:this.searchedEvento=void 0,t[0].value?this.solicitacaoSearched=t[0].value:this.solicitacaoSearched=void 0,o[0].value?this.aprovadorSearched=o[0].value:this.aprovadorSearched=void 0,T[0].value?this.dataEvento=T[0].value:this.dataEvento=void 0}clearTotal(){this.min_total=void 0,this.max_total=void 0,this.loadEventos(1)}exportPdf(){var e=this;return(0,M.Z)(function*(){const a=`Eventos de Pagamentos - ${(new Date).toLocaleDateString()}`,t=e.cols.map(f=>f.header),o=e.convertTransacaoData().map(Object.values);yield e.filesService.exportPdf(a,t,o)})()}exportExcel(){var e=this;return(0,M.Z)(function*(){const a=`Eventos de Pagamentos - ${(new Date).toLocaleDateString()}`;yield e.filesService.exportExcel(a,e.convertTransacaoData())})()}exportCsv(){var e=this;return(0,M.Z)(function*(){const a=`Eventos de Pagamentos - ${(new Date).toLocaleDateString()}`;yield e.filesService.exportCSV(a,e.convertTransacaoData())})()}openNivelAprovacao(e){this.showModal(D,{nivel_aprovacao:e})}openUser(e){this.showModal(Me.Q,{user:e})}openSolicitacao(e){this.showModal(I,{solicitacao:e})}openSolicitacaoUpdated(e){this.showModal(W._,{solicitacao_id:e.id})}convertTransacaoData(){return this.eventos.data.map(a=>{const t=new Date(a.data_aprovacao);return{id:a.id,solicitacao_id:a.solicitacao.id,ator_nome:a.user.nome,ator_email:a.user.email,nivel:a.nivel_aprovacao.ordem,custo:`R$ ${Number(a.solicitacao.custo).toFixed(2)}`,tipo_evento:a.acao,data_evento:t.toLocaleString()}})}showModal(e,a,t="modal-size-100"){var o=this;return(0,M.Z)(function*(){const f=yield o.modal.create({component:e,backdropDismiss:!1,cssClass:t,componentProps:a});return f.onDidDismiss().then(P=>{const{data:T,role:be}=P}),yield f.present()})()}};R.ctorParameters=()=>[{type:v.IN},{type:L.D},{type:m.F0},{type:Ce.P},{type:Ae.n}],R=(0,d.gn)([(0,l.wA2)({selector:"app-evento-main",template:'<p-table *ngIf="eventos" #dt [(selection)]="selectedEventos" dataKey="id" [rowHover]="true"\n  [showCurrentPageReport]="true" [filterDelay]="2" [rowsPerPageOptions]="[5,10,25,50]"\n  [globalFilterFields]="[\'nome\',\'user.nome\', \'vendedor.nome\', \'status\']"\n  currentPageReportTemplate="Mostrando {first} at\xe9 {last} de {totalRecords} entradas" [lazy]="true"\n  [value]="eventos.data" [paginator]="true" [rows]="eventos.meta.take" [totalRecords]="eventos.meta.itemCount"\n  [pageLinks]="eventos.meta.pageCount" (onLazyLoad)="paginar($event, dt)" responsiveLayout="scroll">\n  <ng-template pTemplate="caption">\n    <div class="grid flex">\n\n      <div class="table-header text-primary col-6">\n        Lista de Eventos\n      </div>\n\n      <div class="col-6 justify-content-end text-right">\n        <button type="button" pButton pRipple icon="pi pi-file-o" (click)="exportCsv()" class="p-button-help mr-2"\n          pTooltip="CSV" tooltipPosition="bottom"></button>\n\n        <button type="button" pButton pRipple icon="pi pi-file-excel" (click)="exportExcel()"\n          class="p-button-success mr-2" pTooltip="XLS" tooltipPosition="bottom"></button>\n\n        <button type="button" pButton pRipple icon="pi pi-file-pdf" (click)="exportPdf()" class="p-button-danger mr-2"\n          pTooltip="PDF" tooltipPosition="bottom"></button>\n      </div>\n\n    </div>\n  </ng-template>\n  <ng-template pTemplate="header">\n    <tr>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          ID do Evento\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text" field="id"\n            [pSortableColumnDisabled]="true" class="ml-auto" display="menu"></p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Solicita\xe7\xe3o\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n            field="solicitacao" display="menu" class="ml-auto"></p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Ator\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n            field="user" display="menu" class="ml-auto"></p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          N\xedvel de Aprova\xe7\xe3o\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Custo\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="numeric"\n            field="custo" display="menu" currency="BRL" class="ml-auto" [showClearButton]="false">\n            <ng-template pTemplate="filter" let-value let-filter="filterCallback">\n              <div class="grid  justify-content-between">\n                <div class="field col-6 text-center">\n                  <label for="minmax-buttons">M\xednimo (R$)</label>\n                  <p-inputNumber mode="decimal" [showButtons]="true" buttonLayout="vertical" spinnerMode="vertical"\n                    inputId="vertical" decrementButtonClass="button-secondary" incrementButtonClass="button-secondary"\n                    incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus" [min]="0" [(ngModel)]="min_total"\n                    [minFractionDigits]="2" [maxFractionDigits]="2">\n                  </p-inputNumber>\n                </div>\n\n                <div class="field  col-6 text-center">\n                  <label for="minmax-buttons">Max (R$)</label>\n                  <p-inputNumber mode="decimal" [showButtons]="true" buttonLayout="vertical" spinnerMode="vertical"\n                    inputId="vertical" decrementButtonClass="button-secondary" incrementButtonClass="button-secondary"\n                    incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus" [min]="min_total"\n                    [(ngModel)]="max_total" [minFractionDigits]="2" [maxFractionDigits]="2">\n                  </p-inputNumber>\n                </div>\n              </div>\n              <div>\n                <button pButton type="button" class="button-primary p-button-outlined w-full" label="Limpar"\n                  (click)="clearTotal()"></button>\n              </div>\n            </ng-template>\n          </p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Tipo de Evento\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" field="acao"\n            matchMode="equals" display="menu" class="ml-auto">\n            <ng-template pTemplate="filter" let-value let-filter="filterCallback">\n              <p-dropdown [ngModel]="value" [options]="sortTipoAcao" (onChange)="filter($event.value)"\n                placeholder="Tipo de evento">\n                <ng-template let-option pTemplate="item">\n                  <span class="font-light py-1 px-3 text-green-50 hover:bg-green-900" style="border-radius: 30px;"\n                    [ngClass]="{\n                      \'REJEITADA\' : \'text-pink-50 hover:bg-pink-900\',\n                      \'CANCELADA\' : \'text-pink-50 hover:bg-pink-900\',\n                      \'PENDENTE\' : \'text-yellow-50 hover:bg-yellow-900\'\n                    }[option.value]">{{option.label}}</span>\n                </ng-template>\n              </p-dropdown>\n            </ng-template>\n          </p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center" pSortableColumn="created_at">\n        <div class="flex justify-content-between align-items-center text-center">\n          Data do Evento\n          <p-sortIcon field="data_aprovacao"></p-sortIcon>\n          <p-columnFilter type="date" field="data_aprovacao" display="menu" class="ml-auto" matchMode="between"\n            display="menu" [showMatchModes]="false" [showOperator]="false" [showAddButton]="false"></p-columnFilter>\n        </div>\n      </th>\n      <th style="width: 8rem"></th>\n    </tr>\n  </ng-template>\n  <ng-template pTemplate="body" let-data>\n    <tr>\n      <td class="text-center">\n        <span class="p-column-title">ID do evento</span>\n        {{ data.id }}\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Solicita\xe7\xe3o</span>\n        <span class="image-text cursor-pointer" (click)="openSolicitacao(data.solicitacao)">{{ data.solicitacao.id }}</span>\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Ator</span>\n        <div class="cursor-pointer" (click)="openUser(data.user)">\n          <img *ngIf="data.user" [src]="data.user?.avatar_url || \'assets/imgs/outros/default-user.jpg\'" width="32"\n            height="32" class="mr-1 border-circle border-2 border-primary" style="vertical-align: middle" />\n          <br><br>\n          <span class="image-text">{{ data.user?.nome || \'N\xe3o registrado\' }}</span>\n        </div>\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">N\xedvel de Aprova\xe7\xe3o</span>\n        <div class="cursor-pointer" (click)="openNivelAprovacao(data.nivel_aprovacao)">\n          <span class="image-text">{{ data.nivel_aprovacao.ordem }}</span>\n        </div>\n      </td>\n\n      <td class="text-center">\n        {{data.solicitacao.custo | currency:\'BRL\':\'R$\'}}\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Tipo Evento</span>\n        <span class="font-light py-1 px-3 text-green-50 bg-green-900" style="border-radius: 30px;" [ngClass]="{\n          \'REJEITADA\' : \'text-pink-50 bg-pink-900\',\n          \'CANCELADA\' : \'text-pink-50 bg-pink-900\',\n          \'PENDENTE\' : \'text-yellow-50 bg-yellow-900\'\n        }[data.acao]">{{data.acao}}\n        </span>\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Data do evento</span>\n        {{data.data_aprovacao | date: \'dd/MM/yyyy\'}}\n      </td>\n      <td class="text-center">\n        <button pButton type="button" class="button-primary p-button-outlined" icon="pi pi-external-link"\n          (click)="openSolicitacaoUpdated(data.solicitacao)"></button>\n      </td>\n    </tr>\n  </ng-template>\n\n  <ng-template pTemplate="emptymessage">\n    <tr>\n      <td colspan="12">\n        <div class="surface-ground px-4 py-4 md:px-6 lg:px-8 h-full">\n          <div\n            style="background: radial-gradient(50% 109137.91% at 50% 50%, rgba(233, 203, 30, 0.1) 0%, rgba(254, 253, 244, 0) 100%);"\n            class="text-center">\n            <span class="bg-surface-50 text-yellow-500 font-bold text-2xl inline-block px-3">Aten\xe7\xe3o</span>\n          </div>\n          <div class="mt-6 mb-5 font-bold text-6xl text-900 text-center">Nenhuma transa\xe7\xe3o encontrada</div>\n          <p class="text-700 text-3xl mt-0 mb-6 text-center">Experimente trocar os filtros.</p>\n\n        </div>\n      </td>\n    </tr>\n  </ng-template>\n</p-table>',styles:[""]})],R);let K=class{};K=(0,d.gn)([(0,l.LVF)({declarations:[D],imports:[g.ez,g.ez,v.Pc,S.hJ,j.T,x.o],exports:[D]})],K);var Te=n(69768),Be=n(42480);let k=class{};k=(0,d.gn)([(0,l.LVF)({declarations:[I],imports:[g.ez,v.Pc,S.hJ,j.T,V.W,x.o,Be.R],exports:[I]})],k);let _=class{};_=(0,d.gn)([(0,l.LVF)({declarations:[W._,R],imports:[g.ez,u.u5,u.UX,v.Pc,S.hJ,j.T,X.j,J.Iu,G.cc,Y.U,q.L$,ee.S,ne.kW,ve.O,ae.x,te.l,se.FI,pe.q4,V.W,oe.Q,ie.$9,re.O,le.m,xe.U$,ce._8,de.D,me.d,x.o,ue.A,K,Te.B,k],exports:[W._,R]})],_);var Re=n(83905),Ue=n(80529),ge=n(99038);let U=class{constructor(e){this.http=e}findById(e){return this.http.get(`${ge.Hz.baseURL}/configuracoes-aprovacao/${e}/current`,{responseType:"json"})}create(e){return this.http.post(`${ge.Hz.baseURL}/configuracoes-aprovacao/`,e,{responseType:"json"})}};U.ctorParameters=()=>[{type:Ue.eN}],U=(0,d.gn)([(0,l.GSi)({providedIn:"root"})],U);var $e=n(32307);var F,Fe=n(10805),ze=new Uint8Array(16);function Ve(){if(!F&&!(F=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return F(ze)}const We=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const ke=function Ke(i){return"string"==typeof i&&We.test(i)};for(var h=[],H=0;H<256;++H)h.push((H+256).toString(16).substr(1));const Ze=function He(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(h[i[e+0]]+h[i[e+1]]+h[i[e+2]]+h[i[e+3]]+"-"+h[i[e+4]]+h[i[e+5]]+"-"+h[i[e+6]]+h[i[e+7]]+"-"+h[i[e+8]]+h[i[e+9]]+"-"+h[i[e+10]]+h[i[e+11]]+h[i[e+12]]+h[i[e+13]]+h[i[e+14]]+h[i[e+15]]).toLowerCase();if(!ke(a))throw TypeError("Stringified UUID is invalid");return a};const Je=function Qe(i,e,a){var t=(i=i||{}).random||(i.rng||Ve)();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,e){a=a||0;for(var o=0;o<16;++o)e[a+o]=t[o];return e}return Ze(t)};var Ge=n(36640),Xe=n(37945);let O=class{constructor(e,a,t,o,f,P){this.modalCtrl=e,this.perfilService=a,this.cargoService=t,this.configuracaoAprovacaoService=o,this.confirmationService=f,this.toastService=P,this.searchedPerfil="",this.searchedCargo="",this.showDialog=!1,this.niveis_aprovacao=[],this.hasUpdate=!1,this.subscriptions=new N.w0}ngOnInit(){this.niveis_aprovacao=this.configuracaoAtual?.niveis_aprovacao||[],this.loadCargo(),this.loadPerfil()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPerfil(e=1,a){const t=this.perfilService.list({order:A.L.ASC,page:e,take:10}).subscribe(o=>{this.perfis=o,a&&a.show()});this.subscriptions.add(t)}paginarPerfil(e){this.loadPerfil()}onPerfilFilter(e){const a=e.filter;this.searchedPerfil=a}blurPerfil(e,a){this.searchedPerfil=void 0,a.filterValue=void 0}loadCargo(e=1,a){const t=this.cargoService.list({searchedCargo:this.searchedCargo},{order:A.L.ASC,page:e,take:10}).subscribe(o=>{this.cargos=o,a&&a.show()});this.subscriptions.add(t)}paginarCargo(e){this.loadCargo()}onCargoFilter(e){const a=e.filter;this.searchedCargo=a}blurCargo(e,a){this.searchedCargo=void 0,a.filterValue=void 0}getVersaoAtual(){const e=Number(this.configuracaoAtual?.versao)+1;return Number.isNaN(e)?"1":e}salvarNivel(){this.nivelIndexToUpdate>=0?(this.niveis_aprovacao[this.nivelIndexToUpdate].cargo_aprovador=this.selectedCargo,this.niveis_aprovacao[this.nivelIndexToUpdate].perfil_aprovador=this.selectedPerfil):this.niveis_aprovacao.push({id:Je(),ordem:void 0,user_registrou:void 0,cargo_aprovador:this.selectedCargo,perfil_aprovador:this.selectedPerfil}),this.closeDialog(null)}editNivel(e){const a=this.niveis_aprovacao.findIndex(f=>f.id==e.id),t=this.niveis_aprovacao[a];this.selectedPerfil=t.perfil_aprovador;const o=this.cargos.data.findIndex(f=>f.id==t.cargo_aprovador?.id);this.selectedCargo=this.cargos.data[o],this.nivelIndexToUpdate=a,this.showDialog=!0}deleteNivel(e,a){this.confirmationService.confirm({message:`Deseja mesmo deletar o n\xedvel ${a+1}?`,header:"Dele\xe7\xe3o",icon:"pi pi-exclamation-triangle",accept:()=>{const t=this.niveis_aprovacao.findIndex(o=>o.id==e.id);this.niveis_aprovacao.splice(t,1),this.toastService.presentToast({titulo:"Sucesso",detalhe:"N\xedvel deletado com sucesso!",duracao:C.m4.shortDuration,gravidade:C.kl.SUCESSO})},reject:t=>{this.toastService.clearToast()}})}disableSalvarNivelBtn(){return!this.selectedCargo&&!this.selectedPerfil}closeDialog(e){this.selectedCargo=void 0,this.selectedPerfil=void 0,this.nivelIndexToUpdate=void 0,this.showDialog=!1}fechar(){this.confirmationService.close(),this.modalCtrl.dismiss(this.hasUpdate)}atualizar(){this.confirmationService.confirm({message:"As solicita\xe7\xf5es em andamento seguir\xe3o o fluxo atual, mas as novas seguir\xe3o o novo fluxo.",header:"Deseja prosseguir?",icon:"pi pi-exclamation-triangle",accept:()=>{const e=this.niveis_aprovacao.map(t=>({cargo_aprovador_id:t.cargo_aprovador?.id||void 0,perfil_aprovador_id:t.perfil_aprovador?.id||void 0})),a=this.configuracaoAprovacaoService.create({tipo_operacao_id:this.tipoOperacaoId,niveis_aprovacao:e}).subscribe({next:t=>{this.toastService.presentToast({titulo:"Sucesso",detalhe:"Configura\xe7\xe3o atualizada com sucesso!",duracao:C.m4.shortDuration,gravidade:C.kl.SUCESSO}),this.hasUpdate=!0,this.fechar()}});this.subscriptions.add(a)},reject:e=>{this.toastService.clearToast()}})}};O.ctorParameters=()=>[{type:v.IN},{type:Xe.F},{type:Ge.u},{type:U},{type:Fe.YP},{type:L.D}],O.propDecorators={configuracaoAtual:[{type:l.IIB}],tipoPerfilNome:[{type:l.IIB}],tipoOperacaoId:[{type:l.IIB}]},O=(0,d.gn)([(0,l.wA2)({selector:"app-operacoes-create",template:'<ion-content appScrollTheme>\n\n  <div class="surface-50 px-4 py-4">\n    <div class="text-900 font-medium text-3xl mb-5">{{ configuracaoAtual?.tipo_operacao?.nome || tipoOperacaoNome }}\n    </div>\n    <div class="grid -mr-3 -ml-3">\n      <div class="col-12 p-3">\n        <div class="px-0 py-4 lg:px-4 surface-card border-round shadow-2">\n\n          <div id="niveis-container" class="flex">\n            <div class="ml-0 lg:ml-5 p-2 flex-auto">\n              <div class="mb-3">\n                <span class="text-900 text-xl block ml-2 text-center">Vers\xe3o: {{ getVersaoAtual() }}</span>\n              </div>\n              <div class="grid flex-column lg:flex-row">\n                <div *ngFor="let n of niveis_aprovacao; let i = index" class="col lg:col-4 p-4">\n                  <div class="flex flex-column border-round border-1 text-center border-50 p-4  hover:border-primary \n                    transition-duration-150">\n                    <div class="text-center mb-3">\n                      <span class="text-900 text-xl font-medium">N\xedvel: {{ i+1 }}</span>\n                    </div>\n                    <div class="inline-block text-600 mb-3">\n                      Perfil: {{ n.perfil_aprovador?.nome || \'N.A\' }}\n                    </div>\n                    <div class="inline-block text-600 mb-3">\n                      Cargo: {{ n.cargo_aprovador?.nome || \'N.A\' }}\n                    </div>\n                    <div class="flex justify-content-between my-3">\n                      <span class="text-600 font-medium cursor-pointer hover:text-pink-800"\n                        (click)="deleteNivel(n, i)"><i class="pi pi-times mr-2"></i>Deletar</span>\n                      <span class="text-600 font-medium cursor-pointer hover:text-blue-800" (click)="editNivel(n)"><i\n                          class="pi pi-pencil mr-2"></i>Editar</span>\n                    </div>\n                  </div>\n                </div>\n                <div class="col-12 lg:col-3 p-3">\n                  <div class="flex h-full flex-column justify-content-center align-items-center py-5 lg:py-0 \n                    border-round border-1 surface-border surface-100 cursor-pointer hover:border-primary \n                    transition-duration-150" (click)="showDialog = true"\n                    style="min-height: 220px;">\n                    <span\n                      class="text-600 border-circle border-2 w-2rem h-2rem flex align-items-center justify-content-center"><i\n                        class="pi pi-fw pi-plus"></i></span>\n                    <span class="text-600 mt-3">Novo n\xedvel</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="flex justify-content-between mx-2">\n            <button pButton pRipple class="p-button-outlined mt-3 " (click)="fechar()" label="Fechar"></button>\n            <button pButton pRipple class="mt-3 " [disabled]="false" (click)="atualizar()" label="Atualizar"></button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</ion-content>\n\n\n<p-dialog *ngIf="cargos && perfis" [(visible)]="showDialog" [resizable]="false" [draggable]="false" [modal]="true"\n  [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\', height: \'80%\'}"\n  (onHide)="closeDialog($event)">\n  <ng-template pTemplate="header">\n    <div class="flex align-items-center">\n      <div class="text-900 font-medium mb-3 text-xl">Qual perfil/cargo pode aprovar?</div>\n    </div>\n  </ng-template>\n\n  <div class="grid formgrid p-fluid">\n    <div class="field mb-4 col-12 md:col-6">\n      <label for="custo" class="font-medium text-900">Selecione um perfil:</label>\n      <p-dropdown id="perfil" #drop_perfil [options]="perfis.data" optionLabel="nome" [filter]="true"\n        placeholder="Selecione um perfil" [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true"\n         (onLazyLoad)="paginarPerfil($event)"\n        (onFilter)="onPerfilFilter($event)" (onFocus)="blurPerfil($event, drop_perfil)" [showClear]="true"\n        (onChange)="changePerfil($event)" [(ngModel)]="selectedPerfil" [ngModelOptions]="{standalone: true}">\n        <ng-template pTemplate="loader" let-options="options">\n          <div class="flex align-items-center py-2 px-3" style="height: 38px">\n            <p-skeleton [width]="options.even ? \'60%\' : \'50%\'" height="1rem"></p-skeleton>\n          </div>\n        </ng-template>\n      </p-dropdown>\n    </div>\n\n    <div class="field mb-4 col-12 md:col-6">\n      <label for="custo" class="font-medium text-900">Selecione um cargo:</label>\n      <p-dropdown id="cargo" #drop_cargo [options]="cargos.data" optionLabel="nome" [filter]="true"\n        placeholder="Selecione um cargo" [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true"\n         (onLazyLoad)="paginarCargo($event)"\n        (onFilter)="onCargoFilter($event)" (onFocus)="blurCargo($event, drop_cargo)" (onChange)="changeCargo($event)"\n        [(ngModel)]="selectedCargo" [ngModelOptions]="{standalone: true}" [showClear]="true">\n        <ng-template pTemplate="loader" let-options="options">\n          <div class="flex align-items-center py-2 px-3" style="height: 38px">\n            <p-skeleton [width]="options.even ? \'60%\' : \'50%\'" height="1rem"></p-skeleton>\n          </div>\n        </ng-template>\n      </p-dropdown>\n    </div>\n\n  </div>\n\n  <ng-template pTemplate="footer">\n    <div class="flex justify-content-end mt-3">\n      <button pButton pRipple label="Salvar" (click)="salvarNivel()" [disabled]="disableSalvarNivelBtn()"></button>\n    </div>\n  </ng-template>\n</p-dialog>\n\n\n<p-confirmDialog acceptLabel="Sim" rejectLabel="N\xe3o" [style]="{width: \'50vw\'}" [baseZIndex]="10000"\n  rejectButtonStyleClass="p-button-text"></p-confirmDialog>',styles:[""]})],O);let E=class{constructor(e){this.modalCtrl=e,this.hasUpdate=!1,this.subscriptions=new N.w0}ngOnInit(){}ngOnDestroy(){this.subscriptions.unsubscribe()}setUserImage(e){return e.avatar_url||"assets/imgs/outros/default-user.jpg"}fechar(){this.modalCtrl.dismiss(this.hasUpdate)}};E.ctorParameters=()=>[{type:v.IN}],E.propDecorators={configuracaoAtual:[{type:l.IIB}]},E=(0,d.gn)([(0,l.wA2)({selector:"app-operacoes-detail",template:'<ion-content appScrollTheme>\n\n  <div class="surface-50 px-4 py-4">\n    <div class="text-900 font-medium text-3xl mb-5">{{ configuracaoAtual.tipo_operacao.nome }}</div>\n    <div class="grid -mr-3 -ml-3">\n      <div class="col-12 p-3">\n        <div class="px-0 py-4 lg:px-4 surface-card border-round shadow-2">\n\n          <div id="user-container" class="flex">\n            <div class="ml-0 lg:ml-5 p-2 flex-auto">\n              <div class="mb-3">\n                <span class="text-900 text-xl block ml-2">Configurado por</span>\n              </div>\n              <div class="p-2 flex flex-row  ">\n                <img [src]="setUserImage(configuracaoAtual.user_registrou)"\n                  class="w-8rem h-8rem mb-3 lg:mb-0 flex-shrink-0 border-circle border-2 border-primary"\n                  alt="configuracaoAtual.user_registrou.nome" />\n                <div class="flex-auto ml-3">\n                  <div class="flex align-items-center justify-content-between mb-3">\n                    <span class="text-900 font-medium">{{ configuracaoAtual.user_registrou.nome }}</span>\n                  </div>\n                  <div class="text-600 text-sm mb-3">Perfil de acesso: {{ configuracaoAtual.user_registrou.perfil?.nome || \'Sem perfil associado\'\n                    }}</div>\n                  <div class="text-600 text-sm mb-3">Cargo: {{ configuracaoAtual.user_registrou.cargo?.nome || \'Sem cargo associado\' }}</div>\n                  <div class="text-600 text-sm mb-3">E-mail: {{ configuracaoAtual.user_registrou.email }}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div id="niveis-container" class="flex">\n            <div class="ml-0 lg:ml-5 p-2 flex-auto">\n              <div class="mb-3">\n                <span class="text-900 text-xl block ml-2 text-center">Vers\xe3o: {{ configuracaoAtual.versao }}</span>\n              </div>\n              <div class="grid flex-column lg:flex-row">\n                <div *ngFor="let n of configuracaoAtual.niveis_aprovacao" class="col lg:col-4 p-4">\n                  <div\n                    class="flex flex-column text-center border-round border-1 p-4 border-primary transition-duration-150">\n                    <div class="mb-3 ">\n                      <span class="text-900 text-xl font-medium ">N\xedvel: {{ n.ordem }}</span>\n                    </div>\n                    <div class="inline-block text-600 mb-3">\n                      Perfil: {{ n.perfil_aprovador?.nome || \'N.A\' }}\n                    </div>\n                    <div class="inline-block text-600 mb-3">\n                      Cargo: {{ n.cargo_aprovador?.nome || \'N.A\' }}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n\n</ion-content>\n\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],E);let $=class{constructor(e,a,t,o){this.modal=e,this.toastMessageService=a,this.tipoOperacaoSaidaService=t,this.configuracaoAprovacaoService=o,this.searchedOperacao="",this.currentPage=1,this.subscriptions=new N.w0}ngOnInit(){this.loadOperacao()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadOperacao(e=1,a){const t=this.tipoOperacaoSaidaService.list({searchedTipoOperacao:this.searchedOperacao},{order:A.L.ASC,page:e,take:10}).subscribe(o=>{this.operacoes=o,a&&a.show()});this.subscriptions.add(t)}createNew({id:e,nome:a}){var t=this;return(0,M.Z)(function*(){let o;t.toastMessageService.clearToast();try{o=yield(0,Re.z)(t.configuracaoAprovacaoService.findById(e))}catch{t.toastMessageService.clearToast()}t.showModal(O,{configuracaoAtual:o,tipoOperacaoNome:a,tipoOperacaoId:e},["modal-size-80"])})()}detalhar({id:e}){this.toastMessageService.clearToast(),this.configuracaoAprovacaoService.findById(e).subscribe({next:a=>{this.showModal(E,{configuracaoAtual:a},["modal-size-80","modal-transparent"])}})}search(){this.loadOperacao(1)}paginar(e){const{first:a,rows:t}=e,o=Number(Number(a)/Number(t)+1);o!=this.currentPage&&(this.currentPage=o,this.loadOperacao(o))}showModal(e,a,t=["modal-size-80"]){var o=this;return(0,M.Z)(function*(){const f=yield o.modal.create({component:e,backdropDismiss:!1,cssClass:t,componentProps:a});return f.onDidDismiss().then(P=>{const{data:T,role:be}=P;T&&(o.loadOperacao(o.currentPage),"create"==be&&o.toastMessageService.presentToast({detalhe:"Pagamento criado com sucesso!",titulo:"Sucesso!",duracao:C.m4.mediumDuration,gravidade:C.kl.SUCESSO}))}),yield f.present()})()}};$.ctorParameters=()=>[{type:v.IN},{type:L.D},{type:$e.c},{type:U}],$=(0,d.gn)([(0,l.wA2)({selector:"app-operacoes-main",template:'<br>\n<div class="card main-view">\n  <p-dataView *ngIf="operacoes" emptyMessage="Nada encontrado, experimente escolher outro filtro" class="data-container"\n    #dv [lazy]="true" [value]="operacoes.data" [paginator]="true" [rows]="operacoes.meta.take"\n    [totalRecords]="operacoes.meta.itemCount" [pageLinks]="operacoes.meta.pageCount" (onLazyLoad)="paginar($event)"\n    filterBy="nome" layout="list">\n    <ng-template pTemplate="header">\n      <div class="flex flex-column md:flex-row md:justify-content-center">\n        <span class="p-input-icon-right mb-2 md:mb-0 ">\n          <i class="pi pi-search cursor-pointer text-primary" (click)="search()"></i>\n          <input class="w-full" type="search" pInputText [(ngModel)]="searchedOperacao" [ngModelOptions]="{standalone: true}"\n            placeholder="Buscar " (keyup.enter)="search()">\n        </span>\n      </div>\n    </ng-template>\n\n    <ng-template let-data pTemplate="listItem">\n      <div *ngIf="operacoes" #templateGrid class="col-12">\n        <div class="data-list-item">\n          <div class="data-list-detail">\n            <div class="data-name">Opera\xe7\xe3o: {{ data.nome }}</div>\n            <div class="mt-3">{{ data.descricao }}</div>\n          </div>\n          <div class="data-list-action">\n            <p-button icon="pi pi-search" label="Detalhar" (click)="detalhar(data)">\n            </p-button>\n\n            <button pButton type="button" class="p-button-outlined" icon="pi pi-pencil" label="Atualizar"\n              (click)="createNew(data)">\n            </button>\n          </div>\n        </div>\n      </div>\n    </ng-template>\n  </p-dataView>\n</div>\n\n\n<p-confirmDialog [style]="{width: \'50vw\'}" [baseZIndex]="10000" rejectButtonStyleClass="p-button-text">\n</p-confirmDialog>',styles:[""]})],$);let z=class{};z=(0,d.gn)([(0,l.LVF)({declarations:[$,O,E],imports:[g.ez,u.u5,u.UX,v.Pc,S.hJ,j.T,X.j,J.Iu,G.cc,Y.U,q.L$,ee.S,ne.kW,ve.O,ae.x,te.l,se.FI,pe.q4,V.W,oe.Q,ie.$9,re.O,le.m,ce._8,de.D,me.d,x.o,ue.A],exports:[$,O,E]})],z);var he=n(15250);let Z=class{};Z=(0,d.gn)([(0,l.LVF)({declarations:[],imports:[g.ez,_,z,he.Q],exports:[_,z,he.Q]})],Z);var en=n(83229);let Q=class{};Q=(0,d.gn)([(0,l.LVF)({imports:[g.ez,u.u5,b.uH,v.Pc,x.o,c,en.E,Z],declarations:[s]})],Q)},81695:(B,y,n)=>{n.d(y,{Q:()=>s});var d=n(15861),l=n(70655);var v=n(98274),b=n(48058),m=n(50727),w=n(59256),r=n(34758);let s=class{constructor(c,x,S){this.modal=c,this.toastMessageService=x,this.usersService=S,this.hasUpdate=!1,this.subscriptions=new m.w0}ngOnInit(){this.toastMessageService.clearToast(),this.user||this.loadUser()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadUser(){const c=this.usersService.findById(this.user_id).subscribe({next:x=>{this.user=x}});this.subscriptions.add(c)}fechar(){var c=this;return(0,d.Z)(function*(){yield c.modal.dismiss(c.hasUpdate)})()}};s.ctorParameters=()=>[{type:b.IN},{type:w.D},{type:r.K}],s.propDecorators={user:[{type:v.IIB}],user_id:[{type:v.IIB}]},s=(0,l.gn)([(0,v.wA2)({selector:"app-colaborador-brief",template:'<ion-content appScrollTheme>\n  <div class="surface-card p-4 border-round shadow-2 ">\n    <div class="col-12 ">\n      <div class="border-1 border-double border-primary surface-border border-round mt-4 h-full"\n        style="min-height: 30rem">\n        <ng-container *ngIf="user">\n          <div class="surface-card p-4 shadow-2 border-round">\n            <div class="flex align-items-center justify-content-end ml-auto cursor-pointer"\n              style="position: fixed; top: 15px; right: 15px;" (click)="fechar()">\n              <span\n                class="flex align-items-center justify-content-center bg-pink-100 text-pink-800 border-circle vertical-align-top"\n                style="width: 24px; height: 24px;">\n                <i class="pi pi-times text-sm"></i>\n              </span>\n            </div>\n            <div class="font-medium text-3xl text-900 mb-3">Detalhamento</div>\n            <div class="text-primary mb-5">{{ user.id }}</div>\n            <ul class="list-none p-0 m-0 border-top-1 surface-border">\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">nome</div>\n                <div class="text-900 w-full md:w-10">{{ user.nome }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">E-mail</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ user.email }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Acesso ao sistema</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ user.status_user }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Situa\xe7\xe3o na corpora\xe7\xe3o</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ user.status_pessoa }}</div>\n              </li>\n\n              <li *ngIf="user.perfil" class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Perfil</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Nome</span>\n                        </div>\n                        <div class="text-700">{{ user.perfil.nome }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Descri\xe7\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ user.perfil.descricao }}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n\n              <li *ngIf="user.endereco" class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Endere\xe7o</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Endere\xe7o</span>\n                        </div>\n                        <div class="text-700">{{ user.endereco.endereco }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">CEP</span>\n                        </div>\n                        <div class="text-700">{{ user.endereco.cep }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">N\xfamero</span>\n                        </div>\n                        <div class="text-700">{{ user.endereco.numero }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Complemento</span>\n                        </div>\n                        <div class="text-700">{{ user.endereco.complemento }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Bairro</span>\n                        </div>\n                        <div class="text-700">{{ user.endereco.bairro }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Cidade (UF)</span>\n                        </div>\n                        <div class="text-700">{{ user.endereco.cidade }} ({{ user.endereco.estado }})</div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n\n              <li *ngIf="user.cargo" class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Cargo</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Nome</span>\n                        </div>\n                        <div class="text-700">{{ user.cargo.nome }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Descri\xe7\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ user.cargo.descricao }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">N\xedvel Hierarquico</span>\n                        </div>\n                        <div class="text-700">{{ user.cargo.nivel_hierarquico }}</div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n\n              <li *ngIf="user.cargo && user.cargo.area" class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">\xc1rea</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Nome</span>\n                        </div>\n                        <div class="text-700">{{ user.cargo.area.nome }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Descri\xe7\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ user.cargo.area.descricao }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">N\xedvel Hierarquico</span>\n                        </div>\n                        <div class="text-700">{{ user.cargo.area.nivel_hierarquico }}</div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n\n              <li *ngIf="user.loja" class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Loja</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Nome</span>\n                        </div>\n                        <div class="text-700">{{ user.loja.nome }} ({{ user.loja.codigo }})</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Descri\xe7\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ user.loja.descricao }}</div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n\n            </ul>\n          </div>\n        </ng-container>\n      </div>\n    </div>\n  </div>\n</ion-content>',styles:[""]})],s)},69768:(B,y,n)=>{n.d(y,{B:()=>r});var d=n(70655),l=n(98274),g=n(36895),u=n(48058),v=n(35593),b=n(91795),m=n(81695),w=n(85226);let r=class{};r=(0,d.gn)([(0,l.LVF)({declarations:[m.Q],imports:[g.ez,u.Pc,v.hJ,b.T,w.o],exports:[m.Q]})],r)},42480:(B,y,n)=>{n.d(y,{R:()=>w});var d=n(70655),l=n(98274),g=n(36895);let u=class{transform(s,...p){if("string"==typeof s&&11==s.trim().length){let c=s.replace(/\D/g,"");return c=c.replace(/(\d{3})(\d)/,"$1.$2"),c=c.replace(/(\d{3})(\d)/,"$1.$2"),c=c.replace(/(\d{3})(\d{1,2})$/,"$1-$2"),c}return s}};u=(0,d.gn)([(0,l.E6H)({name:"cpfMask"})],u);let v=class{transform(s,...p){return s}};v=(0,d.gn)([(0,l.E6H)({name:"cepMask"})],v);let b=class{transform(s,...p){return s?s.length<11?s:s.includes("0800")?this.transform0800(s):this.transformCelular(s):""}transformCelular(s){const p=s.substring(0,2),c=s.substring(2,3),x=s.substring(3,7),S=s.substring(7,11);return s.length<=2?`(${p})`:s.length<=3?`(${p})${c}`:s.length<=7?`(${p})${c} ${x}`:`(${p})${c} ${x}-${S}`}transform0800(s){return`${s.slice(0,4)} ${s.slice(4,7)} ${s.slice(7)}`}};b=(0,d.gn)([(0,l.E6H)({name:"phoneMask"})],b);let m=class{transform(s,...p){if("string"==typeof s&&14===s.trim().length){let c=s.replace(/\D/g,"");return c=c.replace(/^(\d{2})(\d)/,"$1.$2"),c=c.replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3"),c=c.replace(/\.(\d{3})(\d)/,".$1/$2"),c=c.replace(/(\d{4})(\d)/,"$1-$2"),c}return s}};m=(0,d.gn)([(0,l.E6H)({name:"cnpjMask"})],m);let w=class{};w=(0,d.gn)([(0,l.LVF)({declarations:[u,v,b,m],imports:[g.ez],exports:[u,v,b,m]})],w)},36640:(B,y,n)=>{n.d(y,{u:()=>m});var d=n(70655),l=n(98274),g=n(80529),u=n(99038),v=n(55583),b=n(40199);let m=class{constructor(r){this.http=r}list(r,s=new b.k){let p=v.t.getPageOptionsParams(s);return r&&r.searchedCargo&&(p=p.append("searchedCargo",r.searchedCargo)),r&&r.nome&&(p=p.append("nome",r.nome)),r&&r.descricao&&(p=p.append("descricao",r.descricao)),r&&r.nivel_hierarquico&&(p=p.append("nivel_hierarquico",r.nivel_hierarquico)),this.http.get(`${u.Hz.baseURL}/cargos`,{responseType:"json",params:p})}findById(r){return this.http.get(`${u.Hz.baseURL}/cargos/${r}`,{responseType:"json"})}create(r){return this.http.post(`${u.Hz.baseURL}/cargos`,r,{responseType:"json"})}update(r,s){return this.http.put(`${u.Hz.baseURL}/cargos/${r}`,s,{responseType:"json"})}};m.ctorParameters=()=>[{type:g.eN}],m=(0,d.gn)([(0,l.GSi)({providedIn:"root"})],m)},37945:(B,y,n)=>{n.d(y,{F:()=>m});var d=n(70655),l=n(80529),g=n(98274),u=n(99038),v=n(40199),b=n(55583);let m=class{constructor(r){this.http=r}list(r=new v.k,s){let p=b.t.getPageOptionsParams(r);return s&&(p=p.append("with_cliente",s.with_cliente.toString())),this.http.get(`${u.Hz.baseURL}/perfis`,{responseType:"json",params:p})}};m.ctorParameters=()=>[{type:l.eN}],m=(0,d.gn)([(0,g.GSi)({providedIn:"root"})],m)}}]);