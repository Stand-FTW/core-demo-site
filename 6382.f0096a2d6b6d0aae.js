"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6382],{37085:(A,y,t)=>{t.r(y),t.d(y,{PdvPageModule:()=>R});var m=t(70655),p=t(98274),P=t(36895),r=t(24006),v=t(48058),x=t(39528);let o=class{constructor(){}ngOnInit(){}};o.ctorParameters=()=>[],o=(0,m.gn)([(0,p.wA2)({selector:"app-pdv",template:"<ion-content appScrollTheme>\n  <app-pdv-main></app-pdv-main>\n</ion-content>",styles:[""]})],o);const d=[{path:"",component:o}];let s=class{};s=(0,m.gn)([(0,p.LVF)({imports:[x.Bz.forChild(d)],exports:[x.Bz]})],s);var l=t(35593),$=t(25047),U=t(91795),z=t(21493),D=t(82210),V=t(15108),q=t(61989),_=t(45132),H=t(77604),K=t(9764),Q=t(51740),W=t(58783),X=t(63054),G=t(1997),J=t(21327),k=t(31167),Z=t(65722),Y=t(17489),ee=t(70585),te=t(73425),oe=t(68377),ne=t(92665),se=t(50613),ae=t(58949),ie=t(85226),B=t(15861);var N=t(50727),b=t(98739),F=t(59256);var I=t(59136),pe=t(34758);let S=class{constructor(){this.cart={total:0,pedido:{cliente_id:void 0,loja_id:void 0,pagamento_forma:void 0,item_produto:[],vendedor_id:void 0}}}addProduto(e,n){const{quantidade:a}=e,{id:i,preco_venda:c,nome:u,imagem_principal_url:C}=e.produto;this.cart.pedido.item_produto.findIndex(Pe=>Pe.produto_id==i)>=0&&this.removProduto(i);const T=Number(c)*Number(n),ye=Number(this.cart.total||0)+T;this.cart.pedido.item_produto.push({produto_id:i,quantidade:n,sub_total:T,valor_unitario:Number(c),nome:u,quantidade_max:a,imagem_principal_url:C}),this.cart.total=ye}changeQuantidade(e,n){const a=this.cart.pedido.item_produto.findIndex(C=>C.produto_id==e);if(a<0)return;const i=this.cart.pedido.item_produto[a],c=Number(i.valor_unitario)*Number(n);this.cart.total=this.cart.total-i.sub_total;const u=Number(this.cart.total)+c;i.sub_total=c,this.cart.pedido.item_produto[a]=i,this.cart.total=u}removProduto(e){const n=this.getCart().pedido.item_produto,a=n.findIndex(u=>u.produto_id==e);if(a<0)return;const c=n[a].sub_total;this.getCart().total=Number(this.getCart().total)-Number(c),n.splice(a,1),this.getCart().pedido.item_produto=n}getCart(){return this.cart}clear(){this.cart={total:0,pedido:{cliente_id:void 0,loja_id:void 0,pagamento_forma:void 0,item_produto:[],vendedor_id:void 0}}}getItemProduto(){return this.cart.pedido.item_produto.map(e=>{const{produto_id:n,quantidade:a}=e;return{produto_id:n,quantidade:a}})}};S.ctorParameters=()=>[],S=(0,m.gn)([(0,p.GSi)({providedIn:"root"})],S);var w=t(89535),ue=t(16137),g=t(50735);var he=t(71644),ve=t(68488),ge=t(79702);let O=class{constructor(e,n,a,i,c,u,C,E){this.formBuilder=e,this.modalFechamento=n,this.userService=a,this.storage=i,this.pdvCartService=c,this.pedidoService=u,this.clientesService=C,this.toastService=E,this.searchedNome="",this.currentClientPage=1,this.formasPagamento=ue.q,this.opcoesAcrescimoDesconto=g.Dh,this.selectedOpcaoAcrescimoDesconto=g.F4.NAO,this.opcoesTipo=g.UC,this.createdId="",this.wasCreated=!1,this.subscriptions=new N.w0}ngOnInit(){this.loadClients(),this.loadCart(),this.funcionario=this.storage.getCompleteLocalUser(),this.loja=this.funcionario.loja,this.form=this.formBuilder.group({cliente_id:[,[r.kI.required]],pagamento_forma:[,[r.kI.required]],vendedor_id:[this.funcionario.id,[r.kI.required]],loja_id:[this.loja.id,[r.kI.required]],acrescimo_desconto:[,[]],descricao:[,[]]})}ngOnDestroy(){this.subscriptions.unsubscribe()}loadClients(e=1,n){const a=this.clientesService.list({searchedUser:this.searchedNome},{order:I.L.DESC,page:e,take:10}).subscribe(i=>{this.clients=i});this.subscriptions.add(a)}paginarClient(e){this.loadClients()}onClientFilter(e){const n=e.filter;this.searchedNome=n}blurClient(e,n){this.searchedNome=void 0,n.filterValue=void 0}cadastrarCliente(){this.showModal(ge.r,{default_loja:this.funcionario.loja})}selectFormaPagamento(){const e=this.form.get("pagamento_forma").value;this.selectedFormaPagamento=e}selectFormaPagamentoDiv(e){this.form.get("pagamento_forma").setValue(e.value),this.selectedFormaPagamento=e.value}loadCart(){this.cart=this.pdvCartService.getCart()}getTotalItens(){return this.cart.pedido.item_produto.length}getSubTotal(){return this.cart.total}getTotal(){return Number(this.cart.total)+Number(this.getDescontoAcrescimo())}changeQuantidade(e){e.quantidade<=0?this.removProduto(e.produto_id):this.pdvCartService.changeQuantidade(e.produto_id,e.quantidade)}removProduto(e){this.pdvCartService.removProduto(e)}getLoad(){return this.clients&&this.cart&&this.cart.pedido.item_produto.length>0}disableOpcoesTipo(){return this.selectedOpcaoAcrescimoDesconto&&this.selectedOpcaoAcrescimoDesconto!=g.F4.NAO}listenOpcaoAcrescimoDesconto(){this.selectedOpcaoAcrescimoDesconto==g.F4.NAO?(this.selectedOpcaoTipo=void 0,this.form.get("acrescimo_desconto").setValue(void 0),this.form.get("acrescimo_desconto").clearValidators(),this.form.get("descricao").clearValidators()):(this.form.get("acrescimo_desconto").setValidators([r.kI.required]),this.form.get("descricao").setValidators([r.kI.required,r.kI.minLength(5)])),this.form.get("acrescimo_desconto").updateValueAndValidity(),this.form.get("descricao").updateValueAndValidity()}listenOpcoesTipoChange(){this.form.get("acrescimo_desconto").setValue(void 0)}getDescontoAcrescimo(){let e=this.form.get("acrescimo_desconto").value;return e&&0!=e?(this.selectedOpcaoTipo==g.ax.PERCENTUAL&&(e=this.cart.total*(e/100)),this.selectedOpcaoAcrescimoDesconto==g.F4.DESCONTO&&(e*=-1),Number(e)):0}getDescontoAcrescimoTxt(){const e=this.getDescontoAcrescimo();return e&&0!=e?e<0?"(-) "+-1*e:`(+) ${e}`:" -"}finalizarPedido(){const e=this.form.get("pagamento_forma").value,n=this.form.get("cliente_id").value,a=this.form.get("vendedor_id").value,i=this.form.get("loja_id").value,c=this.form.get("descricao").value,u=this.form.get("acrescimo_desconto").value;let E={pagamento_forma:e,cliente_id:n,vendedor_id:a,loja_id:i,descricao:c,item_produto:this.pdvCartService.getItemProduto()};E=class me{static setAcrescimoDesconto(e,n,a,i){return e==g.F4.NAO?(delete a.descricao,a):(e==g.F4.ACRESCIMO?n==g.ax.FIXO?a.valor_acrescimo=i:a.percentual_acrescimo=i:n==g.ax.FIXO?a.valor_desconto=i:a.percentual_desconto=i,a)}}.setAcrescimoDesconto(this.selectedOpcaoAcrescimoDesconto,this.selectedOpcaoTipo,E,u),this.pedidoService.create(E,!0).subscribe(T=>{this.pdvCartService.clear(),this.createdId=T.id,this.wasCreated=!0,this.fechar()})}disabledCreatePedido(){return!this.form.valid}fechar(){this.modalFechamento.dismiss(this.wasCreated)}showModal(e,n){var a=this;return(0,B.Z)(function*(){const i=yield a.modalFechamento.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:n});return i.onDidDismiss().then(c=>{const{data:u}=c;a.loadClients(),u&&a.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:b.m4.mediumDuration,gravidade:b.kl.SUCESSO})}),yield i.present()})()}};O.ctorParameters=()=>[{type:r.QS},{type:v.IN},{type:pe.K},{type:w.V},{type:S},{type:he.$},{type:ve.Y},{type:F.D}],O.propDecorators={selectedLoja:[{type:p.IIB}]},O=(0,m.gn)([(0,p.wA2)({selector:"app-pdv-fechamento",template:'<ion-content appScrollTheme>\n  <div *ngIf="getLoad()" class="surface-ground px-4 py-4 md:px-6 lg:px-8">\n    <div class="grid -mr-3 -ml-3">\n      <div class="col-12 lg:col-8 p-4">\n\n        <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n          <div class="surface-card grid formgrid p-fluid border-round shadow-2 p-4">\n            <div class="col-12 mb-4 flex flex-column lg:flex-row align-items-center justify-content-between">\n              <div class="text-900 font-medium text-xl">Fechamento de venda</div>\n              <div class="mt-3 lg:mt-0">\n                <span class="text-600 mr-2">Cliente sem cadastro?</span>\n                <a tabindex="0" (click)="cadastrarCliente()"\n                  class="cursor-pointer text-900 hover:text-primary transition-duration-150">Clique\n                  aqui!</a>\n              </div>\n            </div>\n\n            <p-divider class="w-full px-2 mb-3"></p-divider>\n            <div class="col-12 field mb-5">\n              <label for="client" class="text-900 font-medium mb-3">Cliente</label>\n\n              <p-dropdown #drop_client id="client" [options]="clients.data" formControlName="cliente_id"\n                optionLabel="nome" [filter]="true" placeholder="Selecione um cliente" optionValue="id"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true"\n                (onLazyLoad)="paginarClient($event)" (onFilter)="onClientFilter($event)"\n                (onFocus)="blurClient($event, drop_client)">\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton [width]="options.even ? \'60%\' : \'50%\'" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n              </p-dropdown>\n              \x3c!--\n\n              <p-dropdown #drop_client id="client" [options]="clients.data" formControlName="cliente_id"\n                optionLabel="nome" [filter]="true" placeholder="Selecione um cliente" optionValue="id"\n                [showClear]="true" (onFilter)="onClientFilter($event, drop_client)"\n                (onClear)="onClientClear($event, drop_client)">\n              </p-dropdown>\n              --\x3e\n            </div>\n\n            <div class="col-12 md:col-6 field mb-3">\n              <label for="vendedor" class="text-900 font-medium mb-1 font-bold">Vendedor</label>\n              <div id="vendedor" class="flex justify-content-between p-3 border-round border-1 border-primary surface-50\n              surface-border w-full mr-3 hover:border-primary cursor-pointer">\n                <div class="mr-3 lg:mr-0 ">\n                  <div class="text-900 font-bold mb-2">{{ funcionario.nome }}</div>\n                  <span class="text-600 text-start">{{ funcionario.cpf ? (funcionario.cpf | cpfMask) : \'CPF n\xe3o\n                    informado\' }}</span>\n                </div>\n              </div>\n            </div>\n\n            <div class="col-12 md:col-6 field mb-3">\n              <label for="loja" class="text-900 font-medium mb-1 font-bold">Loja</label>\n              <div id="loja" class="flex justify-content-between p-3 border-round border-1 border-primary surface-50\n              surface-border w-full mr-3 hover:border-primary cursor-pointer">\n                <div class="mr-3 lg:mr-0 ">\n                  <div class="text-900 font-bold mb-2">[{{ loja.codigo }}] {{ loja.nome }}</div>\n                  <span class="text-600">{{ loja.descricao | limitCharsPipe:20 }}</span>\n                </div>\n              </div>\n            </div>\n            <p-divider class="w-full px-2 mb-3"></p-divider>\n\n            <ng-container>\n              <div class="col-12 md:col-6 field mb-3">\n                <label for="desconto_acrescimo" class="text-900 font-medium mb-1 font-bold">Acr\xe9scimo/Desconto?</label>\n                <p-dropdown id="desconto_acrescimo" [options]="opcoesAcrescimoDesconto"\n                  [(ngModel)]="selectedOpcaoAcrescimoDesconto" [ngModelOptions]="{standalone: true}"\n                  placeholder="Selecione" (onChange)="listenOpcaoAcrescimoDesconto()">\n                </p-dropdown>\n              </div>\n              <div *ngIf="disableOpcoesTipo()" class="col-12 md:col-6 field mb-3">\n                <label for="tipo_desconto_acrescimo" class="text-900 font-medium mb-1 font-bold">Tipo de\n                  Acr\xe9scimo/Desconto</label>\n                <p-dropdown id="tipo_desconto_acrescimo" [options]="opcoesTipo" [(ngModel)]="selectedOpcaoTipo"\n                  [ngModelOptions]="{standalone: true}" placeholder="Selecione" (onChange)="listenOpcoesTipoChange()">\n                </p-dropdown>\n              </div>\n\n              <div *ngIf="selectedOpcaoTipo == \'FIXO\'" class="field mb-4 col-12">\n                <label for="acrescimo_desconto" class="font-medium text-900">Valor (FIXO)</label>\n                <p-inputNumber id="acrescimo_desconto" formControlName="acrescimo_desconto" mode="decimal"\n                  [minFractionDigits]="2" [maxFractionDigits]="2"></p-inputNumber>\n              </div>\n              <div *ngIf="selectedOpcaoTipo == \'PERCENTUAL\'" class="field mb-4 col-12">\n                <label for="acrescimo_desconto" class="font-medium text-900">Valor (PERCENTUAL)</label>\n                <p-inputNumber id="acrescimo_desconto" formControlName="acrescimo_desconto" max="100"></p-inputNumber>\n              </div>\n              <div *ngIf="selectedOpcaoTipo" class="field mb-4 col-12">\n                <label for="descricao" class="font-medium text-900">Justificativa</label>\n                <input id="descricao" type="text" pInputText formControlName="descricao">\n              </div>\n            </ng-container>\n\n            <p-divider class="w-full px-2 mb-3"></p-divider>\n\n            <div class="text-900 font-medium text-xl mt-4 lg:mt-0 mb-4 px-2">Forma de pagamento</div>\n            <div class="col-12 mb-4">\n              <div *ngFor="let f of formasPagamento" class="p-3 border-1 border-round-top surface-border cursor-pointer"\n                (click)="selectFormaPagamentoDiv(f)"\n                [ngClass]="{\'border-primary surface-50\': selectedFormaPagamento === f.value}">\n                <p-radioButton [value]="f.value" [inputId]="f.value" formControlName="pagamento_forma"\n                  (onClick)="selectFormaPagamento()"></p-radioButton>\n                <label class="text-900 ml-3">{{ f.label }}</label>\n              </div>\n            </div>\n          </div>\n        </form>\n\n      </div>\n\n      <div *ngIf="cart" class="col-12 lg:col-4 p-4">\n        <div class="surface-card border-round shadow-2 p-5">\n          <div class="flex justify-content-between align-items-center border-bottom-1 pb-3 surface-border">\n            <span class="text-900 font-medium text-lg lg:text-xl"><i class="pi pi-shopping-cart text-xl mr-2"></i>\n              Seu pedido ({{ getTotalItens() }})</span>\n          </div>\n          <div *ngFor="let item of cart.pedido?.item_produto"\n            class="flex flex-column lg:flex-row flex-wrap lg:align-items-center py-3 my-3 border-bottom-1 surface-border">\n            <img [src]="item.imagem_principal_url || \'assets/imgs/outros/default-produto.png\'"\n              class="w-8rem h-8rem flex-shrink-0 mb-3" />\n            <div class="flex-auto lg:ml-3">\n              <div class="flex align-items-center justify-content-between mb-3">\n                <span class="text-900 font-medium">{{ item.nome }}</span>\n                <span class="text-900 font-bold">R$ {{ item.sub_total | currency:\'BRL\': \'\' }}</span>\n              </div>\n              <div class="flex flex-auto justify-content-between align-items-center">\n                <p-inputNumber [showButtons]="true" buttonLayout="horizontal" spinnerMode="horizontal" min="0"\n                  inputStyleClass="w-2rem text-center py-2 px-1 border-transparent" [max]="item.quantidade_max"\n                  class="border-1 surface-border border-round" [(ngModel)]="item.quantidade"\n                  decrementButtonClass="p-button-text text-600 hover:text-primary py-1 px-1"\n                  incrementButtonClass="p-button-text text-600 hover:text-primary py-1 px-1"\n                  incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus" (onBlur)="changeQuantidade(item)"\n                  (onInput)="changeQuantidade(item)">\n                </p-inputNumber>\n                <button pButton pRipple icon="pi pi-trash" (click)="removProduto(item.produto_id)"\n                  class="text-600 p-button-text p-button-rounded"></button>\n              </div>\n            </div>\n          </div>\n\n          <div class="py-2 mt-3 border-bottom-1 surface-border">\n            <div class="flex justify-content-between align-items-center mb-3">\n              <span class="text-900">Subtotal</span>\n              <span class="text-900">R$ {{ getSubTotal() | currency:\'BRL\': \'\' }}</span>\n            </div>\n            <div class="flex justify-content-between align-items-center mb-3">\n              <span class="text-900">Desconto/Acr\xe9scimo</span>\n              <span class="text-900">R${{ getDescontoAcrescimoTxt() }}</span>\n            </div>\n            <div class="flex justify-content-between align-items-center mb-3">\n              <span class="text-900">Total</span>\n              <span class="text-900 font-bold">R$ {{ getTotal() | currency:\'BRL\': \'\' }}</span>\n            </div>\n          </div>\n\n          <button pButton class="p-button-primary w-full mt-3" label="Finalizar venda" (click)="finalizarPedido()"\n            [disabled]="disabledCreatePedido()"></button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div *ngIf="!getLoad()" class="surface-ground px-4 py-4 md:px-6 lg:px-8 h-full">\n    <div\n      style="background: radial-gradient(50% 109137.91% at 50% 50%, rgba(233, 203, 30, 0.1) 0%, rgba(254, 253, 244, 0) 100%);"\n      class="text-center">\n      <span class="bg-surface-50 text-yellow-500 font-bold text-2xl inline-block px-3">Aten\xe7\xe3o</span>\n    </div>\n    <div class="mt-6 mb-5 font-bold text-6xl text-900 text-center">Carrinho vazio</div>\n    <p class="text-700 text-3xl mt-0 mb-6 text-center">Adicione itens ao carrinho para prosseguir.</p>\n\n  </div>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],O);var fe=t(57118),be=t(86587);let L=class{constructor(e,n,a,i,c,u,C){this.modal=e,this.toastService=n,this.estoqueService=a,this.storage=i,this.pdvCartService=c,this.menuController=u,this.lojaService=C,this.currentLojasPage=1,this.searchedLoja="",this.sortNiveisHierarquicos=[],this.selectedNivelHierarquico="",this.selectedIsDescontado="",this.currentPage=1,this.items=[{label:"Mais velho",command:()=>{this.loadEstoques(this.currentPage,I.L.ASC)}},{label:"Mais novo",command:()=>{this.loadEstoques(this.currentPage,I.L.DESC)}}],this.showAddDialog=!1,this.quantidade=1,this.subscriptions=new N.w0}ngOnInit(){this.loja_id=this.storage.getCompleteLocalUser().loja.id,this.loadEstoques(),this.loadLojas()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadLojas(e=1,n){const a=this.lojaService.list({searchedLoja:this.searchedLoja},{order:I.L.ASC,page:e,take:10}).subscribe(i=>{this.lojas=i,n&&n.show()});this.subscriptions.add(a)}filterLoja(e){const{filter:n}=e;e.originalEvent.preventDefault(),e.originalEvent.stopImmediatePropagation(),n&&!(n.length<3)&&(this.searchedLoja=n,this.loadLojas(1))}openMainMenu(){this.menuController.open()}changeNivelHierarquico({value:e}){this.selectedNivelHierarquico=e,e&&this.loadEstoques(1)}clearFilter(e){this.loadEstoques(1)}clearAllFilters(e,n){this.searchedProduto=void 0,this.selectedNivelHierarquico=void 0,n.writeValue(null),this.loadEstoques(1)}loadEstoques(e=1,n=I.L.ASC){const a=this.estoqueService.findProdutosByLoja(this.loja_id,{searchedProduto:this.searchedProduto},{order:n,page:e,take:15}).subscribe(i=>{this.estoques=i});this.subscriptions.add(a)}detalhar(e){}finalizar(){this.showModal(O,{selectedLoja:this.loja_id})}clearCart(){this.pdvCartService.clear()}search(){!this.searchedProduto||this.searchedProduto.trim().length<=0?this.searchedProduto="":this.loadEstoques(1)}clearSearch(){!this.searchedProduto||this.searchedProduto.trim().length<=0?this.searchedProduto="":(this.searchedProduto="",this.loadEstoques(1))}paginar(e){const{first:n,rows:a}=e,i=Number(Number(n)/Number(a)+1);i!=this.currentPage&&(this.currentPage=i,this.loadEstoques(i))}addQuantidade(e){const{quantidade:n}=e;n<=0?this.toastService.presentToast({titulo:"Sem estoque",detalhe:`O produto ${e.produto.nome} n\xe3o possui estoque no momento`,duracao:b.m4.shortDuration,gravidade:b.kl.ATENCAO},"down"):(this.showAddDialog=!0,this.produtoToBeAdd=e)}addCart(){const{produto:e,quantidade:n}=this.produtoToBeAdd;if(!(!this.quantidade||isNaN(this.quantidade)||this.quantidade<=0)){if(n<this.quantidade)return void this.toastService.presentToast({titulo:"Estoque insuficiente",detalhe:`O produto possui apenas ${n} itens em estoque no momento`,duracao:b.m4.shortDuration,gravidade:b.kl.ATENCAO},"down");this.pdvCartService.addProduto(this.produtoToBeAdd,this.quantidade),this.produtoToBeAdd=void 0,this.quantidade=1,this.showAddDialog=!1,this.toastService.presentToast({titulo:"Adicionado!",detalhe:`${e.nome} adicionado ao carrinho`,duracao:b.m4.shortDuration,gravidade:b.kl.INFORMACAO},"down")}}removProduto(e){this.pdvCartService.removProduto(e)}disableAddQuantidadeBtn(){return!this.quantidade||this.quantidade<=0}getQuantidadeItensCart(){const n=this.pdvCartService.getCart().pedido.item_produto.length;return n<=1?`${n} item`:`${n} itens`}getCart(){return this.pdvCartService.getCart()}showModal(e,n){var a=this;return(0,B.Z)(function*(){const i=yield a.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:n});return i.onDidDismiss().then(c=>{const{data:u}=c;u&&(a.loadEstoques(),a.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:b.m4.mediumDuration,gravidade:b.kl.SUCESSO}))}),yield i.present()})()}};L.ctorParameters=()=>[{type:v.IN},{type:F.D},{type:be.e},{type:w.V},{type:S},{type:v._q},{type:fe.W}],L=(0,m.gn)([(0,p.wA2)({selector:"app-pdv-main",template:'<ion-content appScrollTheme >\n\n  <ng-container *ngIf="lojas">\n    <p-divider styleClass="w-full border-gray-200 m-0"></p-divider>\n    \n    <div class="surface-overlay px-3 lg:px-6 flex align-items-stretch relative border-bottom-1 surface-border"\n      style="min-height: 80px">\n      <div class="flex align-items-center justify-content-center text-center text-xl">\n        <button pButton pRipple type="button" icon="pi pi-bars" styleClass="p-button-lg"\n          class="p-button-rounded p-button-text hidden lg:inline lg:mr-6 text-900" (click)="openMainMenu()"></button>\n\n        <button pButton pRipple type="button" icon="pi pi-bars" styleClass="p-button-lg"\n          class="p-button-rounded p-button-text inline lg:hidden lg:mr-6 text-900" (click)="openMainMenu()"></button>\n      </div>\n      <div class="flex align-items-center flex-auto">\n        <div class="p-input-icon-right w-full p-input-filled">\n          <i class="pi pi-search cursor-pointer" (click)="search()"></i>\n          <input pInputText type="text" class="w-full" placeholder="Pesquisar" type="search" pInputText\n            [(ngModel)]="searchedProduto" [ngModelOptions]="{standalone: true}" (keyup.enter)="search()">\n        </div>\n      </div>\n\n      <div class="flex">\n        <ul class="list-none p-0 m-0 flex">\n          <li class="inline-flex relative">\n            <a pRipple class="text-900 font-medium inline-flex align-items-center cursor-pointer px-1 \n            lg:px-3 " (click)="clearSearch()">\n              <i class="pi pi-times text-xl" pBadge></i>\n            </a>\n          </li>\n          <li class="inline-flex relative ml-5 mr-3">\n            <a pRipple class="text-900 font-medium inline-flex align-items-center cursor-pointer px-1\n               lg:px-3 border-bottom-2 border-transparent hover:border-primary select-none" pStyleClass="@next"\n              enterClass="hidden" enterActiveClass="scalein" leaveToClass="hidden" leaveActiveClass="fadeout"\n              [hideOnOutsideClick]="true">\n              <i class="pi pi-shopping-cart text-xl" pBadge></i>\n              <span class="hidden">Carrinho</span>\n            </a>\n            <div\n              class="hidden border-round surface-overlay p-4 shadow-2 absolute right-0 top-100 z-1 w-20rem origin-top">\n              <span class="text-900 font-medium mb-3 block">Carrinho ({{ getQuantidadeItensCart() }})</span>\n              <div *ngFor="let item of getCart().pedido?.item_produto"\n                class="flex align-items-center border-bottom-1 surface-border pb-3">\n                <img [src]="item.imagem_principal_url || \'assets/imgs/outros/default-produto.png\'"\n                  class="w-4rem flex-shrink-0 shadow-1 limit-image-64" />\n                <div class="flex flex-column pl-3">\n                  <div class="justify-content-between pt-3">\n                    <span class="text-900 font-medium mb-2 mr-6">{{ item.nome.substring(0, 10) }}...</span>\n                    <i class="pi pi-times  cursor-pointer" (click)="removProduto(item.produto_id)"></i>\n                  </div>\n                  <span class="text-600 mb-2">Quantidade: {{ item.quantidade }}</span>\n                  <span class="text-primary font-bold">R$ {{ item.sub_total | currency:\'BRL\': \'\' }}</span>\n                </div>\n              </div>\n              <p-divider styleClass="w-full border-gray-200 m-0"></p-divider>\n              <div class="flex pt-3 text-center">\n                <div class="text-primary font-bold col-12">Total: R$ {{ getCart().total | currency:\'BRL\': \'\' }}</div>\n              </div>\n              <div class="flex pt-1 justify-content-between">\n                <button pButton pRipple class="p-button-outlined mr-2" [disabled]="getCart().total == 0"\n                  (click)="clearCart()">Limpar</button>\n                <button pButton pRipple class="ml-2" (click)="finalizar()"\n                  [disabled]="getCart().total == 0">Finalizar</button>\n              </div>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <div class="surface-section px-4 py-5 md:px-6 lg:px-8">\n      <div class="flex justify-content-end flex-wrap">\n        <div>\n          <button type="button" pButton icon="pi pi-sort-alt" class="p-button-outlined p-button-secondary w-7rem p-2"\n            iconPos="right" label="Ordenar" (click)="menu.toggle($event)"></button>\n          <p-menu #menu [popup]="true" [model]="items" appendTo="body"></p-menu>\n        </div>\n      </div>\n      <p-divider styleClass="w-full border-gray-200"></p-divider>\n\n      \x3c!-- <div class="grid grid-nogutter align-items-center">\n        <p-dropdown #dropdown_loja [options]="lojas.data" placeholder="Loja em que a venda est\xe1 ocorrendo"\n          [(ngModel)]="loja_id" [ngModelOptions]="{standalone: true}" optionLabel="nome" optionValue="id"\n          [filter]="true" (onFilter)="filterLoja($event)" (onChange)="loadEstoques()"\n          class="flex-auto lg:flex-1 mb-3 lg:mt-0 w-full mr-0 lg:mr-4 text-900" styleClass="w-full"></p-dropdown>\n      </div>\n      <a pRipple tabindex="0" class="cursor-pointer flex align-items-center mb-3 lg:mt-0 text-900">Clear All</a>  --\x3e\n    </div>\n\n    <div *ngIf="estoques?.data" class="h-full surface-section px-4 py-5 md:px-6 lg:px-8">\n      <div class="grid -mt-3 -ml-3 -mr-3">\n        <div *ngFor="let e of estoques.data"\n          class="col-12 md:col-6 lg:col-4 xl:col-2 border-bottom-1 surface-border md:border-bottom-none">\n          <div class="p-2 text-center">\n            <div class="mb-3 relative product-img justify-content-center">\n              <img [src]="e.produto.imagem_principal_url || \'assets/imgs/outros/default-produto.png\'"\n                class="w-full mb-3 border-3 border-500 limit-image-259"\n                 />\n              <button type="button" pRipple (click)="addQuantidade(e)" class="border-1 border-white-alpha-20 border-round py-2 px-3 \n              absolute bg-black-alpha-30 text-white inline-flex align-items-center \n              justify-content-center hover:bg-black-alpha-40 transition-colors transition-duration-300 \n              cursor-pointer font-semibold"\n                style="bottom: 30px; left: 2.5rem; width: calc(100% - 5rem); backdrop-filter: blur(4px);">\n                <i class="pi pi-shopping-cart  text-center"></i>\n              </button>\n            </div>\n            <div class="mb-2">\n              <span class="text-600 ">Estoque: </span>\n              <span class="ml-2 text-primary font-medium">{{ e.quantidade }}</span>\n            </div>\n            <div class="text-900 text-xl font-medium mb-2">R$ {{ e.produto.preco_venda | currency:\'BRL\': \'\' }}</div>\n            <span class="text-900">{{e.produto.nome}}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div *ngIf="!estoques?.data || estoques.meta.itemCount == 0"\n      class="surface-section px-4 py-8 md:px-6 lg:px-8 h-full">\n      <div\n        style="background: radial-gradient(50% 109137.91% at 50% 50%, rgba(233, 203, 30, 0.1) 0%, rgba(254, 253, 244, 0) 100%);"\n        class="text-center">\n        <span class="bg-surface-50 text-yellow-500 font-bold text-2xl inline-block px-3">Aten\xe7\xe3o</span>\n      </div>\n      <div class="mt-6 mb-5 font-bold text-6xl text-900 text-center">Sem estoque</div>\n      <p class="text-700 text-3xl mt-0 mb-6 text-center">O produto n\xe3o possui estoque cadastrados em nenhuma loja.</p>\n      <div class="flex mt-3 lg:mt-0 justify-content-center">\n        <button pButton iconPos="right" pRipple label="Criar estoque em loja n\xe3o presente" icon="pi pi-plus"\n          (click)="listLojasSemProduto()" class="p-button-outlined p-button-help "></button>\n      </div>\n    </div>\n\n    <p-divider styleClass="w-full border-gray-200 m-0"></p-divider>\n  </ng-container>\n\n</ion-content>\n\n<p-dialog [(visible)]="showAddDialog" appendTo="body" [modal]="true" [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}"\n  [style]="{width: \'40vw\'}">\n  <ng-template pTemplate="header">\n    <div class="flex align-items-center">\n      <div class="text-900 font-medium mb-3 text-xl">Quantidade</div>\n    </div>\n  </ng-template>\n  <div class="surface-card border-round shadow-2 p-4">\n    <p class="mt-0 mb-4 p-0 line-height-3">Insira a quantidade desejada: </p>\n    <p-inputNumber class="flex-auto mr-3" (keyup.enter)="addCart()" [(ngModel)]="quantidade"\n      [ngModelOptions]="{standalone: true}" [showButtons]="true" buttonLayout="horizontal" inputId="horizontal"\n      [min]="1" spinnerMode="horizontal" [step]="1" decrementButtonClass="p-button-danger"\n      incrementButtonClass="p-button-success" incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus">\n    </p-inputNumber>\n  </div>\n  <ng-template pTemplate="footer">\n    <button pButton pRipple label="Adicionar" (click)="addCart()" [disabled]="disableAddQuantidadeBtn()"></button>\n  </ng-template>\n</p-dialog>',styles:["@media only screen and (max-width: 770px) {\n  .product-img {\n    width: 320px;\n    height: 320px;\n    margin: auto;\n  }\n}\n.limit-image-259 {\n  width: 259px;\n  height: 259px;\n}\n.limit-image-64 {\n  width: 64px;\n  height: 64px;\n}"]})],L);var xe=t(42480),Ce=t(44588);let M=class{};M=(0,m.gn)([(0,p.LVF)({declarations:[O,L],imports:[P.ez,r.u5,r.UX,v.Pc,l.hJ,$.L$,U.T,se.cc,Y.m,ee._8,te.gz,oe.kK,z.S,D.kW,J.$9,k.KZ,Z.q4,G.U,V.x,q.nD,_.l,H.FI,K.Q,Q.j,W.LU,X.A,ne.O,ae.d,xe.R,ie.o,Ce.J],exports:[O,L]})],M);let R=class{};R=(0,m.gn)([(0,p.LVF)({imports:[P.ez,r.u5,v.Pc,s,M],declarations:[o]})],R)},32506:(A,y,t)=>{t.d(y,{X:()=>o});var m=t(70655),p=t(98274),P=t(36895),r=t(35593);var h=t(39528);let f=class{constructor(s){this.router=s,this.erroCode=404}ngOnInit(){401!=this.erroCode?403!=this.erroCode?this.erroCode>=500?this.define500():this.define404():this.define403():this.define401()}define401(){this.contentError={title:"N\xe3o t\xe3o r\xe1pido, parceiro",message:"Parece que voc\xea precisa de uma credencial adequada para passar por aqui. Vamos, d\xea um passo atr\xe1s e realize novamente o login, caso n\xe3o o tenha feito.",code:401}}define403(){this.contentError={title:"Ops! Voc\xea n\xe3o tem a chave secreta para abrir esta porta!",message:"Parece que voc\xea tentou entrar em uma \xe1rea restrita. Talvez voc\xea precise de um perfil diferente ou autoriza\xe7\xe3o adicional para acessar este lugar secreto.",code:403}}define404(){this.contentError={title:"Perdido no sistema: Conte\xfado N\xe3o Encontrado!",message:"Parece que voc\xea seguiu um coelho branco que nos levou para um buraco no sistema. O conte\xfado que voc\xea est\xe1 procurando n\xe3o foi encontrado.",code:404}}define500(){this.contentError={title:"Falha na Matrix!",message:"Parece que algo mais s\xe9rio afetou nossa matrix. Recomenda-se entrar em contato com o administrador de T.I. Tire um print completo dessa tela e envie para eles.",code:500}}getErrorImg(){return`assets/imgs/erros/${this.contentError.code}.png`}goHome(){this.router.navigateByUrl("home")}};f.ctorParameters=()=>[{type:h.F0}],f.propDecorators={erroCode:[{type:p.IIB}]},f=(0,m.gn)([(0,p.wA2)({selector:"app-content-error",template:'<div class="surface-section px-4 py-8 md:px-6 lg:px-8">\n    <div class="border-top-1 opacity-50 border-primary"></div>\n    <div class="flex flex-column lg:flex-row justify-content-center align-items-center gap-4 ">\n        <div class="text-center lg:text-right">\n            <div class="mt-6 mb-3 font-bold text-4xl text-900">{{ contentError.title }}</div>\n            <p class="text-700 text-2xl mt-0 mb-6">{{ contentError.message }}</p>\n            <button pButton type="button" label="Voltar para casa" class="p-button-outlined"\n                (click)="goHome()"></button>\n        </div>\n        <img [src]="getErrorImg()" alt="Image" class=" mt-2 xl:w-25rem lg:w-20rem md:w-15rem sm:w-20rem border-circle\t">\n    </div>\n</div>',styles:[""]})],f);let o=class{};o=(0,m.gn)([(0,p.LVF)({declarations:[f],imports:[P.ez,r.hJ],exports:[f]})],o)},86587:(A,y,t)=>{t.d(y,{e:()=>h});var m=t(70655),p=t(80529),P=t(98274),r=t(99038),v=t(40199),x=t(55583);let h=class{constructor(o){this.http=o}listLojasSemProdutoX(o){return this.http.get(`${r.Hz.baseURL}/estoques/produto/${o}`,{responseType:"json"})}findProdutosByLoja(o,d,s=new v.k){let l=x.t.getPageOptionsParams(s);return d&&d.nome&&(l=l.append("nome",d.nome)),d&&d.descricao&&(l=l.append("descricao",d.descricao)),d&&d.searchedProduto&&(l=l.append("searchedProduto",d.searchedProduto)),this.http.get(`${r.Hz.baseURL}/estoques/loja/${o}`,{responseType:"json",params:l})}findProdutosSemLoja(o,d=new v.k,s){let l=x.t.getPageOptionsParams(d);return s&&s.nome&&(l=l.append("nome",s.nome)),s&&s.descricao&&(l=l.append("descricao",s.descricao)),s&&s.searchedProduto&&(l=l.append("searchedProduto",s.searchedProduto)),this.http.get(`${r.Hz.baseURL}/estoques/loja/${o}/sem-produto`,{responseType:"json",params:l})}createEstoque(o){return this.http.post(`${r.Hz.baseURL}/estoques`,o,{responseType:"json"})}entradaEstoque(o){return this.http.put(`${r.Hz.baseURL}/estoques/entrada/`,o,{responseType:"json"})}saidaEstoque(o){return this.http.put(`${r.Hz.baseURL}/estoques/saida/`,o,{responseType:"json"})}};h.ctorParameters=()=>[{type:p.eN}],h=(0,m.gn)([(0,P.GSi)({providedIn:"root"})],h)},71644:(A,y,t)=>{t.d(y,{$:()=>h});var m=t(70655),p=t(80529),P=t(98274),r=t(99038),v=t(40199),x=t(55583);let h=class{constructor(o){this.http=o}create(o,d=!1){const s=d?`${r.Hz.baseURL}/pedidos/pdv`:`${r.Hz.baseURL}/pedidos`;return this.http.post(s,o,{responseType:"json"})}list(o,d=new v.k){let s=x.t.getPageOptionsParams(d);return o&&(o.acrescimo_desconto&&(s=s.append("acrescimo_desconto",o.acrescimo_desconto)),o.cliente_id&&(s=s.append("cliente_id",o.cliente_id)),o.local&&(s=s.append("local",o.local)),o.loja_id&&(s=s.append("loja_id",o.loja_id)),o.pagamento_forma&&(s=s.append("pagamento_forma",o.pagamento_forma)),o.status_pedido&&(s=s.append("status_pedido",o.status_pedido)),o.vendedor_id&&(s=s.append("vendedor_id",o.vendedor_id)),o.searchedCliente&&(s=s.append("searchedCliente",o.searchedCliente)),o.searchedLoja&&(s=s.append("searchedLoja",o.searchedLoja)),o.searchedVendedor&&(s=s.append("searchedVendedor",o.searchedVendedor)),o.searchedPedido&&(s=s.append("searchedPedido",o.searchedPedido)),o.min_total&&(s=s.append("min_total",o.min_total)),o.max_total&&(s=s.append("max_total",o.max_total)),o.created_at&&(s=s.append("created_at",o.created_at.toString()))),this.http.get(`${r.Hz.baseURL}/pedidos`,{responseType:"json",params:s})}findById(o){return this.http.get(`${r.Hz.baseURL}/pedidos/${o}`,{responseType:"json"})}};h.ctorParameters=()=>[{type:p.eN}],h=(0,m.gn)([(0,P.GSi)({providedIn:"root"})],h)}}]);