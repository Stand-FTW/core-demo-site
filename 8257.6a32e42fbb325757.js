"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8257],{48257:(T,S,e)=>{e.d(S,{J:()=>oe});var d=e(70655),c=e(98274),h=e(36895),a=e(24006),i=e(48058),p=e(35593),b=e(25047),m=e(91795),u=e(21493),t=e(82210),l=e(15108),n=e(61989),x=e(45132),k=e(77604),P=e(9764),U=e(51740),M=e(58783),J=e(63054),Y=e(1997),y=e(21327),q=e(31167),ee=e(65722),F=e(68377),ie=e(92665),o=e(50613),r=e(17489),g=e(70585),f=e(58949),C=e(85226);var V=e(94567),N=e(52710),_=e(50727),$=e(5241),I=e(91391),X=e(11177),B=e(54692),le=e(91475),ce=e(16137),j=e(50735),de=e(7475),pe=e(54452),Z=e(59136),me=e(57118),ue=e(34758),w=e(98739),ve=e(59256),he=e(68488);let K=class{constructor(s,v,A,O,L,W,G,H,Q){this.formBuilder=s,this.userService=v,this.lojaService=A,this.servicosService=O,this.modal=L,this.storage=W,this.toastService=G,this.prestacaoServicosService=H,this.clientesService=Q,this.searchedLoja="",this.searchedCliente="",this.searchedColaborador="",this.searchedServico="",this.showDialog=!1,this.showStatusDialog=!1,this.showAgendamento=!1,this.showLocal=!1,this.formasPagamento=ce.q,this.statusServico=B.Tx,this.selectedStatusServico=B.vx.FINALIZADO,this.opcoesAcrescimoDesconto=j.Dh,this.selectedOpcaoAcrescimoDesconto=j.F4.NAO,this.opcoesTipo=j.UC,this.localAgendamentos=I.r2,this.listEstados=X.Z,this.liberateEndereco=!1,this.total=0,this.subscriptions=new _.w0}ngOnInit(){this.menuAgendamento=[{label:"Op\xe7\xf5es",items:[{label:"Limpar",icon:"pi pi-refresh",command:()=>{this.resetAgendamento()}}]}],this.loadColaboradores(),this.loadLojas(),this.loadClients(),this.loadServicos();const{loja:s,id:v}=this.storage.getCompleteLocalUser();this.form=this.formBuilder.group({loja_id:[s.id,[a.kI.required]],colaborador_id:[v,[a.kI.required]],cliente_id:[,[a.kI.required]],servico:[,[a.kI.required]],pagamento_forma:[,[a.kI.required]],acrescimo_desconto:[,[]],descricao:[,[]],quantidade:[1,[a.kI.required,a.kI.min(1)]],local:[I.sK.LOCAL,[a.kI.required]],data_inicio:[,[]],data_fim:[,[]],cep:[,[]],endereco:[,[]],numero:[,[]],complemento:[,[]],bairro:[,[]],cidade:[,[]],estado:[,[]]})}ngOnDestroy(){this.subscriptions.unsubscribe()}loadLojas(s=1,v){const A=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:V.eX.OPERANDO},{order:Z.L.ASC,page:s,take:10}).subscribe(O=>{this.lojas=O,v&&v.show()});this.subscriptions.add(A)}searchLoja({value:s}){this.searchedLoja=s,this.loadLojas(1)}clearLoja(s){s.value="",this.searchedLoja="",this.loadLojas(1)}loadClients(s=1){const v=this.clientesService.list({searchedCliente:this.searchedCliente},{order:Z.L.DESC,page:s,take:10}).subscribe(A=>{this.clients=A});this.subscriptions.add(v)}searchCliente({value:s}){this.searchedCliente=s,this.loadClients(1)}clearCliente(s){s.value="",this.searchedCliente="",this.loadClients(1)}loadColaboradores(s=1){const v=this.userService.listUsers({searchedUser:this.searchedColaborador,tipos_usarios:`${N.Wo.COLABORADOR}, ${N.Wo.PRESTADOR}`},{order:Z.L.DESC,page:s,take:15}).subscribe(A=>{this.colaboradores=A});this.subscriptions.add(v)}searchColaborador({value:s}){this.searchedColaborador=s,this.loadColaboradores(1)}clearColaborador(s){s.value="",this.searchedColaborador="",this.loadColaboradores(1)}loadServicos(s=1,v){const A=this.servicosService.list({searchedServico:this.searchedServico},{order:Z.L.ASC,page:s,take:10}).subscribe(O=>{this.servicos=O,v&&v.show()});this.subscriptions.add(A)}searchServico({value:s}){this.searchedServico=s,this.loadServicos(1)}clearServico(s){s.value="",this.searchedServico="",this.loadServicos(1)}onServicoChange({value:s}){const v=this.servicos.data.find(L=>L.id==s);if(!v)return void(this.total=0);const{preco_servico:A}=v,O=this.form.get("quantidade").value;this.total=Number(A)*Number(O)}detailServico(){const s=this.form.get("servico").value;this.selectedServico=this.servicos.data.find(v=>v.id==s),this.selectedServico?this.showDialog=!0:this.toastService.presentToast({detalhe:"Selecione um servi\xe7o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:w.m4.shortDuration,gravidade:w.kl.INFORMACAO})}changeQuantidade(){const s=this.form.get("servico").value,v=this.servicos.data.find(L=>L.id==s);if(!v)return void(this.total=0);const{preco_servico:A}=v,O=this.form.get("quantidade").value;this.total=Number(A)*Number(O)}changeStatusServico(s){if(this.selectedStatusServico==B.vx.AGENDADO)return this.showAgendamento=!0,this.form.get("data_inicio").setValue(new Date),this.form.get("data_fim").setValue(void 0),this.form.get("data_inicio").setValidators([a.kI.required]),this.form.get("data_fim").setValidators([a.kI.required]),this.form.get("data_inicio").updateValueAndValidity(),void this.form.get("data_fim").updateValueAndValidity();this.form.get("local").setValue(I.sK.LOCAL),this.form.get("data_inicio").clearValidators(),this.form.get("data_fim").clearValidators(),this.form.get("data_inicio").updateValueAndValidity(),this.form.get("data_fim").updateValueAndValidity(),this.hideEnderecoFields(),this.showAgendamento=!1,this.form.updateValueAndValidity({onlySelf:!0})}resetAgendamento(){this.form.get("local").setValue(I.sK.LOCAL),this.form.get("data_inicio").setValue(new Date),this.form.get("data_fim").setValue(void 0),this.form.get("data_inicio").clearValidators(),this.form.get("data_fim").clearValidators(),this.form.get("cep").setValue(void 0),this.form.get("endereco").setValue(void 0),this.form.get("numero").setValue(void 0),this.form.get("complemento").setValue(void 0),this.form.get("bairro").setValue(void 0),this.form.get("cidade").setValue(void 0),this.form.get("estado").setValue(void 0),this.hideEnderecoFields(),this.form.updateValueAndValidity()}localChanged(){this.form.get("local").value==I.sK.EXTERNO?this.showEnderecoFields():this.hideEnderecoFields()}getSubTotal(){return this.total}getTotal(){return Number(this.total)+Number(this.getDescontoAcrescimo())}disableOpcoesTipo(){return this.selectedOpcaoAcrescimoDesconto&&this.selectedOpcaoAcrescimoDesconto!=j.F4.NAO}listenOpcaoAcrescimoDesconto(){this.selectedOpcaoAcrescimoDesconto==j.F4.NAO?(this.selectedOpcaoTipo=void 0,this.form.get("acrescimo_desconto").setValue(void 0),this.form.get("acrescimo_desconto").clearValidators(),this.form.get("descricao").clearValidators()):(this.form.get("acrescimo_desconto").setValidators([a.kI.required]),this.form.get("descricao").setValidators([a.kI.required,a.kI.minLength(5)])),this.form.get("acrescimo_desconto").updateValueAndValidity(),this.form.get("descricao").updateValueAndValidity()}listenOpcoesTipoChange(){this.form.get("acrescimo_desconto").setValue(void 0)}getDescontoAcrescimo(){let s=this.form.get("acrescimo_desconto").value;return s&&0!=s?(this.selectedOpcaoTipo==j.ax.PERCENTUAL&&(s=this.total*(s/100)),this.selectedOpcaoAcrescimoDesconto==j.F4.DESCONTO&&(s*=-1),Number(s)):0}getDescontoAcrescimoTxt(){const s=this.getDescontoAcrescimo();return s&&0!=s?s<0?"(-) "+-1*s:`(+) ${s}`:" -"}create(){const s=this.form.get("cliente_id").value,v=this.form.get("colaborador_id").value,A=this.form.get("loja_id").value,O=this.form.get("servico").value,L=this.form.get("quantidade").value,W=this.form.get("descricao").value,G=this.form.get("acrescimo_desconto").value;let R={cliente_id:s,colaborador_id:v,descricao:W,loja_id:A,pagamento_forma:this.form.get("pagamento_forma").value,itens_prestacao_servico:[{servico_id:O,quantidade:L}],local:this.form.get("local").value};if(R=$.D.setAcrescimoDesconto(this.selectedOpcaoAcrescimoDesconto,this.selectedOpcaoTipo,R,G),this.selectedStatusServico!=B.vx.FINALIZADO){if(this.selectedStatusServico!=B.vx.INICIADO)return this.selectedStatusServico==B.vx.AGENDADO?(R.agendamento_servico=this.generateAgendamentoServicoObject(),void this.prestacaoServicosService.create(R).subscribe(re=>{this.toastService.presentToast({detalhe:"Sucesso",titulo:"Presta\xe7\xe3o de servi\xe7o agendada com sucesso",duracao:w.m4.mediumDuration,gravidade:w.kl.INFORMACAO}),this.clearForm(),this.resetAgendamento()})):void 0;this.prestacaoServicosService.create(R).subscribe(re=>{this.toastService.presentToast({detalhe:"Sucesso",titulo:"Presta\xe7\xe3o de servi\xe7o iniciada com sucesso",duracao:w.m4.mediumDuration,gravidade:w.kl.SUCESSO}),this.clearForm(),this.resetAgendamento()})}else this.prestacaoServicosService.createFinalized(R).subscribe(re=>{this.toastService.presentToast({detalhe:"Sucesso",titulo:"Presta\xe7\xe3o de servi\xe7o registrada com sucesso",duracao:w.m4.mediumDuration,gravidade:w.kl.SUCESSO}),this.clearForm(),this.resetAgendamento()})}isInputError(s){return!(this.form.controls[s].untouched||!this.form.controls[s].errors)}disableCreateBtn(){return!this.form.valid}clearForm(){this.form.reset(),this.selectedFormaPagamento=void 0,this.selectedOpcaoAcrescimoDesconto=void 0,this.selectedOpcaoTipo=void 0,this.total=void 0,this.resetAgendamento(),this.showAgendamento=!1,this.selectedStatusServico=B.vx.FINALIZADO,this.selectedOpcaoAcrescimoDesconto=j.F4.NAO;const{loja:s,id:v}=this.storage.getCompleteLocalUser();this.form.get("loja_id").setValue(s.id),this.form.get("colaborador_id").setValue(v),this.form.get("quantidade").setValue(1),this.form.get("local").setValue(I.sK.LOCAL),this.form.updateValueAndValidity({onlySelf:!0})}generateAgendamentoServicoObject(){const s=this.form.get("data_inicio").value,v=this.form.get("data_fim").value;let A;if(this.form.get("local").value==I.sK.EXTERNO){A={cep:this.form.get("cep").value,endereco:this.form.get("endereco").value,numero:this.form.get("numero").value,complemento:this.form.get("complemento").value,bairro:this.form.get("bairro").value,cidade:this.form.get("cidade").value,estado:this.form.get("estado").value}}return{data_inicio:s,data_fim:v,endereco_compromisso:A}}showEnderecoFields(){this.form.get("cep").setValidators([a.kI.required]),this.form.get("endereco").setValidators([a.kI.required]),this.form.get("numero").setValidators([a.kI.required]),this.form.get("complemento").setValidators([a.kI.required]),this.form.get("bairro").setValidators([a.kI.required]),this.form.get("cidade").setValidators([a.kI.required]),this.form.get("estado").setValidators([a.kI.required]),this.form.updateValueAndValidity({onlySelf:!0}),this.liberateEndereco=!0}hideEnderecoFields(){this.form.get("cep").clearValidators(),this.form.get("cep").setErrors(null),this.form.get("endereco").clearValidators(),this.form.get("endereco").setErrors(null),this.form.get("numero").clearValidators(),this.form.get("numero").setErrors(null),this.form.get("complemento").clearValidators(),this.form.get("complemento").setErrors(null),this.form.get("bairro").clearValidators(),this.form.get("bairro").setErrors(null),this.form.get("cidade").clearValidators(),this.form.get("cidade").setErrors(null),this.form.get("estado").clearValidators(),this.form.get("estado").setErrors(null),this.form.updateValueAndValidity({onlySelf:!0}),this.liberateEndereco=!1}};K.ctorParameters=()=>[{type:a.QS},{type:ue.K},{type:me.W},{type:de.B},{type:i.IN},{type:pe.V},{type:ve.D},{type:le.P},{type:he.Y}],K=(0,d.gn)([(0,c.wA2)({selector:"app-servicos-main",template:'<form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n  <div class="wall-background px-4 py-6 md:px-6 lg:px-8">\n    <div class="text-900 font-medium text-xl mb-3">Criar/Cadastrar</div>\n    <div class="surface-card p-4 shadow-2 border-round p-fluid">\n      <div class="grid formgrid p-fluid">\n        <div id="loja" *ngIf="lojas" class="field mb-4 col-12 justify-content-start">\n          <label for="loja_id">Loja</label>\n          <p-dropdown id="loja_id" [options]="lojas.data" [filter]="true" placeholder="Selecione a loja de atendimento"\n            [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="loja_id"\n            optionLabel="nome" filterBy="nome, codigo" [showClear]="true" optionValue="id">\n            <ng-template pTemplate="filter" let-options="options">\n              <div class="flex p-3">\n                <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                  <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                    (keyup.enter)="searchLoja(searchLojaInput)">\n                  <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                  <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                    (click)="clearLoja(searchLojaInput)"></button>\n                </div>\n              </div>\n            </ng-template>\n            <ng-template pTemplate="loader" let-options="options">\n              <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                <p-skeleton width="50%" height="1rem"></p-skeleton>\n              </div>\n            </ng-template>\n            <ng-template let-loja pTemplate="item">\n              <div>\n                <div> [{{ loja.codigo }}] {{ loja.nome}} </div>\n              </div>\n            </ng-template>\n            <ng-template let-loja pTemplate="selectedItem">\n              <div> [{{ loja.codigo }}] {{ loja.nome}} </div>\n            </ng-template>\n          </p-dropdown>\n        </div>\n        <p-divider class="w-full px-2 mb-3"></p-divider>\n\n        <div *ngIf="colaboradores" class="col-12 field mb-5">\n          <label for="colaboradores" class="text-900 font-medium mb-3">Prestador</label>\n          <p-dropdown id="colaboradores" [options]="colaboradores.data" [filter]="true"\n            placeholder="Selecione o colaborador que far\xe1 o servi\xe7o" [virtualScroll]="true" [virtualScrollItemSize]="38"\n            [lazy]="true" formControlName="colaborador_id" optionLabel="nome" filterBy="nome, cpf" [showClear]="true"\n            optionValue="id">\n            <ng-template pTemplate="filter" let-options="options">\n              <div class="flex p-3">\n                <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                  <input #searchColaboradorInput type="text" pInputText placeholder="Procurar"\n                    (keyup.enter)="searchColaborador(searchColaboradorInput)">\n                  <button pButton pRipple icon="pi pi-search"\n                    (click)="searchColaborador(searchColaboradorInput)"></button>\n                  <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                    (click)="clearColaborador(searchColaboradorInput)"></button>\n                </div>\n              </div>\n            </ng-template>\n            <ng-template pTemplate="loader" let-options="options">\n              <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                <p-skeleton width="50%" height="1rem"></p-skeleton>\n              </div>\n            </ng-template>\n            <ng-template let-colaborador pTemplate="item">\n              <div>\n                <div>{{ colaborador.nome}} - {{ colaborador.cpf | cpfMask }}</div>\n              </div>\n            </ng-template>\n            <ng-template let-colaborador pTemplate="selectedItem">\n              <div>{{ colaborador.nome}} - {{ colaborador.cpf | cpfMask }}</div>\n            </ng-template>\n          </p-dropdown>\n        </div>\n        <p-divider class="w-full px-2 mb-3"></p-divider>\n\n        <div *ngIf="clients" class="col-12 field mb-5">\n          <label for="clients" class="text-900 font-medium mb-3">Cliente</label>\n          <p-dropdown id="clients" [options]="clients.data" [filter]="true" placeholder="Selecione um cliente"\n            [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="cliente_id"\n            optionLabel="nome" filterBy="nome, cpf" [showClear]="true" optionValue="id">\n            <ng-template pTemplate="filter" let-options="options">\n              <div class="flex p-3">\n                <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                  <input #searchClienteInput type="text" pInputText placeholder="Procurar"\n                    (keyup.enter)="searchCliente(searchClienteInput)">\n                  <button pButton pRipple icon="pi pi-search" (click)="searchCliente(searchClienteInput)"></button>\n                  <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                    (click)="clearCliente(searchClienteInput)"></button>\n                </div>\n              </div>\n            </ng-template>\n            <ng-template pTemplate="loader" let-options="options">\n              <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                <p-skeleton width="50%" height="1rem"></p-skeleton>\n              </div>\n            </ng-template>\n            <ng-template let-cliente pTemplate="item">\n              <div>\n                <div>{{ cliente.nome}} - {{ cliente.cpf | cpfMask }}</div>\n              </div>\n            </ng-template>\n            <ng-template let-cliente pTemplate="selectedItem">\n              <div>{{ cliente.nome}} - {{ cliente.cpf | cpfMask }}</div>\n            </ng-template>\n          </p-dropdown>\n        </div>\n        <p-divider class="w-full px-2 mb-3"></p-divider>\n\n        <div *ngIf="servicos" class="col-8 lg:col-10 field mb-5">\n          <label for="servicos" class="text-900 font-medium mb-3">Servi\xe7o a ser prestado</label>\n          <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailServico()"></div>\n          <p-dropdown id="servicos" [options]="servicos.data" [filter]="true" placeholder="Selecione um servi\xe7o"\n            [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="servico"\n            optionLabel="nome" filterBy="nome" [showClear]="true" optionValue="id" (onChange)="onServicoChange($event)">\n            <ng-template pTemplate="filter" let-options="options">\n              <div class="flex p-3">\n                <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                  <input #searchServicoInput type="text" pInputText placeholder="Procurar"\n                    (keyup.enter)="searchServico(searchServicoInput)">\n                  <button pButton pRipple icon="pi pi-search" (click)="searchServico(searchServicoInput)"></button>\n                  <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                    (click)="clearServico(searchServicoInput)"></button>\n                </div>\n              </div>\n            </ng-template>\n            <ng-template pTemplate="loader" let-options="options">\n              <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                <p-skeleton width="50%" height="1rem"></p-skeleton>\n              </div>\n            </ng-template>\n            <ng-template let-servico pTemplate="item">\n              <div>\n                <div>{{ servico.nome}}</div>\n              </div>\n            </ng-template>\n            <ng-template let-servico pTemplate="selectedItem">\n              <div>{{ servico.nome}}</div>\n            </ng-template>\n          </p-dropdown>\n        </div>\n        <div *ngIf="servicos" class="col-4 lg:col-2 field mb-5">\n          <label for="quantidade" class="text-900 font-medium mb-3">Quantidade</label>\n          <p-inputNumber id="quantidade" [showButtons]="true" buttonLayout="horizontal" spinnerMode="horizontal" min="1"\n            inputStyleClass="w-2rem text-center py-2 px-1 border-transparent"\n            class="border-1 surface-border border-round" formControlName="quantidade"\n            decrementButtonClass="p-button-text text-600 hover:text-primary py-1 px-1"\n            incrementButtonClass="p-button-text text-600 hover:text-primary py-1 px-1" incrementButtonIcon="pi pi-plus"\n            decrementButtonIcon="pi pi-minus" (onBlur)="changeQuantidade()" (onInput)="changeQuantidade()">\n          </p-inputNumber>\n        </div>\n        <p-divider class="w-full px-2 mb-3"></p-divider>\n\n        <div class="col-12 field">\n          <label for="pagamento_forma" class="text-900 font-medium mb-2 font-bold">Forma de pagamento</label>\n          <p-dropdown id="pagamento_forma" [options]="formasPagamento" formControlName="pagamento_forma"\n            placeholder="Forma de pagamento">\n          </p-dropdown>\n        </div>\n        <p-divider class="w-full px-2 mb-3"></p-divider>\n\n        <ng-container id="acrescimo_desconto">\n          <div class="col-12 md:col-6 field mb-3">\n            <label for="desconto_acrescimo" class="text-900 font-medium mb-1 font-bold">Acr\xe9scimo/Desconto?</label>\n            <p-dropdown id="desconto_acrescimo" [options]="opcoesAcrescimoDesconto"\n              [(ngModel)]="selectedOpcaoAcrescimoDesconto" [ngModelOptions]="{standalone: true}" placeholder="Selecione"\n              (onChange)="listenOpcaoAcrescimoDesconto()">\n            </p-dropdown>\n          </div>\n          <div *ngIf="disableOpcoesTipo()" class="col-12 md:col-6 field mb-3">\n            <label for="tipo_desconto_acrescimo" class="text-900 font-medium mb-1 font-bold">Tipo de\n              Acr\xe9scimo/Desconto</label>\n            <p-dropdown id="tipo_desconto_acrescimo" [options]="opcoesTipo" [(ngModel)]="selectedOpcaoTipo"\n              [ngModelOptions]="{standalone: true}" placeholder="Selecione" (onChange)="listenOpcoesTipoChange()">\n            </p-dropdown>\n          </div>\n\n          <div *ngIf="selectedOpcaoTipo == \'FIXO\'" class="field mb-4 col-12">\n            <label for="acrescimo_desconto" class="font-medium text-900">Valor (FIXO)</label>\n            <p-inputNumber id="acrescimo_desconto" formControlName="acrescimo_desconto" mode="decimal"\n              [minFractionDigits]="2" [maxFractionDigits]="2"></p-inputNumber>\n          </div>\n          <div *ngIf="selectedOpcaoTipo == \'PERCENTUAL\'" class="field mb-4 col-12">\n            <label for="acrescimo_desconto" class="font-medium text-900">Valor (PERCENTUAL)</label>\n            <p-inputNumber id="acrescimo_desconto" formControlName="acrescimo_desconto" max="100"></p-inputNumber>\n          </div>\n          <div *ngIf="selectedOpcaoTipo" class="field mb-4 col-12">\n            <label for="descricao" class="font-medium text-900">Justificativa</label>\n            <input id="descricao" type="text" pInputText formControlName="descricao">\n          </div>\n        </ng-container>\n        <p-divider class="w-full px-2 mb-3"></p-divider>\n\n        <div class="col-12 md:col-6 field">\n          <label for="status_servico" class="text-900 font-medium mb-2 font-bold">Status do servi\xe7o</label>\n          <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="showStatusDialog = true"></div>\n          <p-dropdown id="status_servico" [options]="statusServico" [(ngModel)]="selectedStatusServico"\n            [ngModelOptions]="{standalone: true}" placeholder="Status do servi\xe7o"\n            (onChange)="changeStatusServico($event)">\n          </p-dropdown>\n        </div>\n        <div *ngIf="selectedStatusServico == \'AGENDADO\'" class="col-12 md:col-6 field">\n          <label for="local" class="text-900 font-medium mb-2 font-bold">Local da presta\xe7\xe3o</label>\n          <p-dropdown inputId="local" [options]="localAgendamentos" optionLabel="label" formControlName="local"\n            optionValue="value" [showClear]="true" placeholder="Selecione o local" (onChange)="localChanged()">\n            <ng-template let-local pTemplate="item">\n              <div class="flex align-items-center">\n                <div>{{local.label}}</div>\n              </div>\n            </ng-template>\n          </p-dropdown>\n        </div>\n        <p-divider class="w-full px-2 mb-3"></p-divider>\n\n        <ng-container *ngIf="showAgendamento" id="agendamento">\n          <p-panel class="mb-4 col-12" header="Agendamento" [toggleable]="true" [collapsed]="false" iconPos="end">\n            <ng-template pTemplate="icons">\n              <button pButton class="p-panel-header-icon p-link" (click)="menu.toggle($event)">\n                <span class="pi pi-cog"></span>\n              </button>\n              <p-menu #menu id="config_menu" [model]="menuAgendamento" [popup]="true" appendTo="body"></p-menu>\n            </ng-template>\n\n            <ng-template pTemplate="content">\n              <div class="grid formgrid p-fluid">\n                <div class="field mb-4 col-12 md:col-6">\n                  <label for="data_inicio" class="font-medium text-900">Prev. In\xedcio</label>\n                  <p-calendar id="data_inicio" [showTime]="true" [showIcon]="true" formControlName="data_inicio"\n                    showButtonBar="true">\n                  </p-calendar>\n                </div>\n                <div class="field mb-4 col-12 md:col-6">\n                  <label for="data_fim" class="font-medium text-900">Prev. Fim</label>\n                  <p-calendar id="data_fim" [showTime]="true" [showIcon]="true" formControlName="data_fim"\n                    showButtonBar="true"></p-calendar>\n                </div>\n\n\n                <ng-container *ngIf="liberateEndereco">\n                  <div class="field mb-4 col-12 md:col-6">\n                    <label for="cep" class="font-medium text-900">Cep</label>\n                    <input id="cep" type="text" pInputText formControlName="cep">\n                  </div>\n                  <div class="field mb-4 col-12 md:col-6">\n                    <label for="endereco" class="font-medium text-900">Endere\xe7o</label>\n                    <input id="endereco" type="text" pInputText formControlName="endereco">\n                  </div>\n                  <div class="field mb-4 col-12 md:col-6">\n                    <label for="numero" class="font-medium text-900">N\xfamero</label>\n                    <input id="numero" type="text" pInputText formControlName="numero">\n                  </div>\n                  <div class="field mb-4 col-12 md:col-6">\n                    <label for="complemento" class="font-medium text-900">Complemento</label>\n                    <input id="complemento" type="text" pInputText formControlName="complemento">\n                  </div>\n                  <div class="field mb-4 col-12 md:col-6">\n                    <label for="bairro" class="font-medium text-900">Bairro</label>\n                    <input id="bairro" type="text" pInputText formControlName="bairro">\n                  </div>\n                  <div class="field mb-4 col-12 md:col-6">\n                    <label for="cidade" class="font-medium text-900">Cidade</label>\n                    <input id="cidade" type="text" pInputText formControlName="cidade">\n                  </div>\n                  <div class="field mb-4 col-12 md:col-6">\n                    <label for="estados" class="font-medium text-900">Estado</label>\n                    <p-dropdown inputId="estados" [options]="listEstados" formControlName="estado" optionLabel="nome"\n                      optionValue="sigla" [showClear]="true" placeholder="Selecione o estado">\n                      <ng-template let-estado pTemplate="item">\n                        <div class="flex align-items-center">\n                          <div>{{estado.nome}}</div>\n                        </div>\n                      </ng-template>\n                    </p-dropdown>\n                  </div>\n                  <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n                </ng-container>\n              </div>\n            </ng-template>\n          </p-panel>\n        </ng-container>\n        <p-divider class="w-full px-2 mb-3"></p-divider>\n\n        <div class="col-6 ml-auto py-2 mt-3 border-bottom-1 border-primary">\n          <div class="flex justify-content-between align-items-center mb-3">\n            <span class="text-900">Subtotal</span>\n            <span class="text-900">R$ {{ getSubTotal() | currency:\'BRL\': \'\' }}</span>\n          </div>\n          <div class="flex justify-content-between align-items-center mb-3">\n            <span class="text-900">Desconto/Acr\xe9scimo</span>\n            <span class="text-900">R${{ getDescontoAcrescimoTxt() }}</span>\n          </div>\n          <div class="flex justify-content-between align-items-center mb-3">\n            <span class="text-900">Total</span>\n            <span class="text-900 font-bold">R$ {{ getTotal() | currency:\'BRL\': \'\' }}</span>\n          </div>\n        </div>\n        <p-divider class="w-full px-2 mb-3 border-primary"></p-divider>\n      </div>\n      <div class="flex justify-content-end">\n        <button pButton pRipple label="Cadastrar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n          [disabled]="disableCreateBtn()"></button>\n      </div>\n    </div>\n  </div>\n\n  <app-question-servico [showDialog]="showDialog" [selectedServico]="selectedServico"\n    (closeEvent)="selectedServico = undefined; showDialog = false;"></app-question-servico>\n  <app-question-status-servico [showDialog]="showStatusDialog"\n    (closeEvent)="showStatusDialog = false"></app-question-status-servico>\n</form>',styles:[""]})],K);var fe=e(52681);let z=class{constructor(){this.showDialog=!1,this.closeEvent=new c.vpe}ngOnInit(){}close(){this.showDialog=!1,this.closeEvent.emit(this.showDialog)}};z.ctorParameters=()=>[],z.propDecorators={showDialog:[{type:c.IIB}],closeEvent:[{type:c.r_U}]},z=(0,d.gn)([(0,c.wA2)({selector:"app-question-status-servico",template:'<p-dialog [(visible)]="showDialog" appendTo="body" [modal]="true" [closable]="false"\n  [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\'}">\n  <ng-template pTemplate="header">\n    <div class="flex align-items-center">\n      <span class="flex align-items-center justify-content-center bg-cyan-100 text-cyan-800 mr-3 border-circle"\n        style="width:32px;height:32px">\n        <i class="pi pi-info text-lg"></i>\n      </span>\n      <span class="font-medium text-2xl text-900">Status do Servi\xe7o</span>\n    </div>\n  </ng-template>\n  <div class="grid">\n    <div class="col-12 border-top-1 surface-border pt-3  mt-2"></div>\n    <div class="col-12 lg:col-4 p-3 text-center">\n      <div class="shadow-2 surface-card p-3" style="border-radius: 12px">\n        <div class="flex align-items-center justify-content-between">\n          <div>\n            <span class="text-xl text-900 font-bold">Iniciado</span>\n            <p class="mt-2 mb-0 text-700 text-lg">Utilize esse status caso esteja iniciando a presta\xe7\xe3o de servi\xe7o imediatamente</p>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="col-12 lg:col-4 p-3 text-center">\n      <div class="shadow-2 surface-card p-3" style="border-radius: 12px">\n        <div class="flex align-items-center justify-content-between">\n          <div>\n            <span class="text-xl text-900 font-bold">Agendar</span>\n            <p class="mt-2 mb-0 text-700 text-lg">Utilize esse status caso v\xe1 agendar a presta\xe7\xe3o de servi\xe7o</p>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <div class="col-12 lg:col-4 p-3 text-center">\n      <div class="shadow-2 surface-card p-3" style="border-radius: 12px">\n        <div class="flex align-items-center justify-content-between">\n          <div>\n            <span class="text-xl text-900 font-bold">Finalizado</span>\n            <p class="mt-2 mb-0 text-700 text-lg">Utilize esse status caso j\xe1 tenha realizado a presta\xe7\xe3o de servi\xe7o</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <ng-template pTemplate="footer">\n    <button pButton pRipple icon="pi pi-check" (click)="close()" label="OK"></button>\n  </ng-template>\n</p-dialog>',styles:[""]})],z);let te=class{};te=(0,d.gn)([(0,c.LVF)({declarations:[z],imports:[h.ez,i.Pc,u.S,p.hJ,m.T],exports:[z]})],te);var ae=e(45037),Se=e(42480);let oe=class{};oe=(0,d.gn)([(0,c.LVF)({declarations:[K,ae.U],imports:[h.ez,a.u5,a.UX,i.Pc,p.hJ,b.L$,m.T,u.S,t.kW,l.x,n.nD,x.l,r.m,y.$9,k.FI,g._8,P.Q,U.j,M.LU,J.A,Y.U,q.KZ,ee.q4,F.kK,ie.O,o.cc,fe.y,te,f.d,Se.R,C.o],exports:[K,ae.U]})],oe)},45037:(T,S,e)=>{e.d(S,{U:()=>F});var d=e(70655);var a=e(98274),i=e(24006),p=e(48058),b=e(50727),m=e(91391),u=e(11177),t=e(54692),l=e(91475),n=e(16137),x=e(50735),k=e(7475),P=e(54452),U=e(18109),M=e(59136),J=e(57118),Y=e(34758),y=e(98739),q=e(59256),ee=e(5241);let F=class{constructor(o,r,g,f,C,E,D,V){this.formBuilder=o,this.userService=r,this.lojaService=g,this.servicosService=f,this.modal=C,this.storage=E,this.toastService=D,this.prestacaoServicosService=V,this.searchedLoja="",this.searchedCliente="",this.searchedColaborador="",this.searchedServico="",this.showDialog=!1,this.showStatusDialog=!1,this.showAgendamento=!1,this.showLocal=!1,this.formasPagamento=n.q,this.statusServico=t.Tx,this.selectedStatusServico=t.vx.FINALIZADO,this.opcoesAcrescimoDesconto=x.Dh,this.selectedOpcaoAcrescimoDesconto=x.F4.NAO,this.opcoesTipo=x.UC,this.localAgendamentos=m.r2,this.listEstados=u.Z,this.liberateEndereco=!1,this.total=0,this.subscriptions=new b.w0}ngOnInit(){this.menuAgendamento=[{label:"Op\xe7\xf5es",items:[{label:"Limpar",icon:"pi pi-refresh",command:()=>{this.resetAgendamento()}}]}],this.loadColaboradores(),this.loadLojas(),this.loadClients(),this.loadServicos();const{loja:o,colaborador:r,cliente:g,agendamento_servico:f,itens_prestacao_servico:C,pagamento_forma:E,status_servico:D,acrescimo_desconto:V,descricao:N,local:_,total_devido:$}=this.prestacaoServico;this.selectedStatusServico=D,this.total=$,this.form=this.formBuilder.group({loja_id:[o.id,[i.kI.required]],colaborador_id:[r.id,[i.kI.required]],cliente_id:[g.id,[i.kI.required]],servico:[C[0].servico.id,[i.kI.required]],pagamento_forma:[E,[i.kI.required]],acrescimo_desconto:[V||0,[]],descricao:[N,[]],quantidade:[C[0].quantidade,[i.kI.required,i.kI.min(1)]],local:[_,[i.kI.required]],data_inicio:[,[]],data_fim:[,[]],cep:[f?.endereco?.cep||"",[]],endereco:[f?.endereco?.endereco||"",[]],numero:[f?.endereco?.numero||"",[]],complemento:[f?.endereco?.complemento||"",[]],bairro:[f?.endereco?.bairro||"",[]],cidade:[f?.endereco?.cidade||"",[]],estado:[f?.endereco?.estado||"",[]]}),this.selectedStatusServico==t.vx.AGENDADO&&(this.showAgendamento=!0,this.form.get("data_inicio").setValue(new Date(f.compromisso.data_inicio_completa)),this.form.get("data_fim").setValue(new Date(f.compromisso.data_fim_completa)),this.form.get("data_inicio").setValidators([i.kI.required]),this.form.get("data_fim").setValidators([i.kI.required]),this.form.get("data_inicio").updateValueAndValidity(),this.form.get("data_fim").updateValueAndValidity()),this.localChanged()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadLojas(o=1,r){const g=this.lojaService.list({searchedLoja:this.searchedLoja},{order:M.L.ASC,page:o,take:10}).subscribe(f=>{this.lojas=f,r&&r.show()});this.subscriptions.add(g)}paginarLoja(o){this.loadLojas()}onLojaFilter(o){const r=o.filter;this.searchedCliente=r}blurLoja(o,r){this.searchedCliente=void 0,r.filterValue=void 0}loadClients(o=1){const r=this.userService.listUsers({searchedUser:this.searchedCliente,tipo_user:U.X.CLIENTE},{order:M.L.DESC,page:o,take:10}).subscribe(g=>{this.clients=g});this.subscriptions.add(r)}paginarClient(o){this.loadClients()}onClientFilter(o){const r=o.filter;this.searchedCliente=r}blurClient(o,r){this.searchedCliente=void 0,r.filterValue=void 0}loadColaboradores(o=1){const r=this.userService.listUsers({searchedUser:this.searchedColaborador,tipo_user:U.X.FUNCIONARIO},{order:M.L.DESC,page:o,take:10}).subscribe(g=>{this.colaboradores=g});this.subscriptions.add(r)}paginarColaborador(o){this.loadColaboradores()}onColaboradorFilter(o){const r=o.filter;this.searchedColaborador=r}blurColaborador(o,r){this.searchedColaborador=void 0,r.filterValue=void 0}loadServicos(o=1,r){const g=this.servicosService.list({searchedServico:this.searchedServico},{order:M.L.ASC,page:o,take:10}).subscribe(f=>{this.servicos=f,r&&r.show()});this.subscriptions.add(g)}paginarServico(o){this.loadServicos()}onServicoFilter(o){const r=o.filter;this.searchedServico=r}blurServico(o,r){this.searchedServico=void 0,r.filterValue=void 0}onServicoChange({value:o}){if(!o)return void(this.total=0);const r=this.form.get("servico").value,g=this.servicos.data.find(E=>E.id==r),{preco_servico:f}=g,C=this.form.get("quantidade").value;this.total=Number(f)*Number(C)}detailServico(){const o=this.form.get("servico").value;this.selectedServico=this.servicos.data.find(r=>r.id==o),this.selectedServico?this.showDialog=!0:this.toastService.presentToast({detalhe:"Selecione um servi\xe7o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:y.m4.shortDuration,gravidade:y.kl.INFORMACAO})}changeQuantidade(){const o=this.form.get("servico").value,r=this.servicos.data.find(C=>C.id==o);if(!r)return void(this.total=0);const{preco_servico:g}=r,f=this.form.get("quantidade").value;this.total=Number(g)*Number(f)}changeStatusServico(o){if(this.selectedStatusServico==t.vx.AGENDADO)return this.showAgendamento=!0,this.form.get("data_inicio").setValue(new Date),this.form.get("data_fim").setValue(void 0),this.form.get("data_inicio").setValidators([i.kI.required]),this.form.get("data_fim").setValidators([i.kI.required]),this.form.get("data_inicio").updateValueAndValidity(),void this.form.get("data_fim").updateValueAndValidity();this.form.get("local").setValue(m.sK.LOCAL),this.form.get("data_inicio").clearValidators(),this.form.get("data_fim").clearValidators(),this.form.get("data_inicio").updateValueAndValidity(),this.form.get("data_fim").updateValueAndValidity(),this.hideEnderecoFields(),this.showAgendamento=!1,this.form.updateValueAndValidity({onlySelf:!0})}resetAgendamento(){this.form.get("local").setValue(m.sK.LOCAL),this.form.get("data_inicio").setValue(new Date),this.form.get("data_fim").setValue(void 0),this.form.get("data_inicio").clearValidators(),this.form.get("data_fim").clearValidators(),this.form.get("cep").setValue(void 0),this.form.get("endereco").setValue(void 0),this.form.get("numero").setValue(void 0),this.form.get("complemento").setValue(void 0),this.form.get("bairro").setValue(void 0),this.form.get("cidade").setValue(void 0),this.form.get("estado").setValue(void 0),this.hideEnderecoFields(),this.form.updateValueAndValidity({onlySelf:!0})}localChanged(){this.form.get("local").value==m.sK.EXTERNO?this.showEnderecoFields():this.hideEnderecoFields()}getSubTotal(){return this.total}getTotal(){return Number(this.total)+Number(this.getDescontoAcrescimo())}disableOpcoesTipo(){return this.selectedOpcaoAcrescimoDesconto&&this.selectedOpcaoAcrescimoDesconto!=x.F4.NAO}listenOpcaoAcrescimoDesconto(){this.selectedOpcaoAcrescimoDesconto==x.F4.NAO?(this.selectedOpcaoTipo=void 0,this.form.get("acrescimo_desconto").setValue(void 0),this.form.get("acrescimo_desconto").clearValidators(),this.form.get("descricao").clearValidators()):(this.form.get("acrescimo_desconto").setValidators([i.kI.required]),this.form.get("descricao").setValidators([i.kI.required,i.kI.minLength(5)])),this.form.get("acrescimo_desconto").updateValueAndValidity(),this.form.get("descricao").updateValueAndValidity()}listenOpcoesTipoChange(){this.form.get("acrescimo_desconto").setValue(void 0)}getDescontoAcrescimo(){let o=this.form.get("acrescimo_desconto").value;return o&&0!=o?(this.selectedOpcaoTipo==x.ax.PERCENTUAL&&(o=this.total*(o/100)),this.selectedOpcaoAcrescimoDesconto==x.F4.DESCONTO&&(o*=-1),Number(o)):0}getDescontoAcrescimoTxt(){const o=this.getDescontoAcrescimo();return o&&0!=o?o<0?"(-) "+-1*o:`(+) ${o}`:" -"}update(){const{id:o}=this.prestacaoServico,r=this.form.get("cliente_id").value,g=this.form.get("colaborador_id").value,f=this.form.get("loja_id").value,C=this.form.get("servico").value,E=Number(this.form.get("quantidade").value),D=this.form.get("descricao").value,V=this.form.get("acrescimo_desconto").value;let I={cliente_id:r,colaborador_id:g,descricao:D,loja_id:f,pagamento_forma:this.form.get("pagamento_forma").value,itens_prestacao_servico:[{servico_id:C,quantidade:E}],local:this.form.get("local").value};if(I=ee.D.setAcrescimoDesconto(this.selectedOpcaoAcrescimoDesconto,this.selectedOpcaoTipo,I,V),this.selectedStatusServico!=t.vx.FINALIZADO){if(this.selectedStatusServico!=t.vx.INICIADO)return this.selectedStatusServico==t.vx.AGENDADO?(I.agendamento_servico=this.generateAgendamentoServicoObject(),void this.prestacaoServicosService.update(o,I).subscribe(X=>{this.toastService.presentToast({detalhe:"Sucesso",titulo:"Presta\xe7\xe3o de servi\xe7o agendada com sucesso",duracao:y.m4.mediumDuration,gravidade:y.kl.INFORMACAO}),this.close(!0)})):void 0;this.prestacaoServicosService.update(o,I).subscribe(X=>{this.toastService.presentToast({detalhe:"Sucesso",titulo:"Presta\xe7\xe3o de servi\xe7o iniciada com sucesso",duracao:y.m4.mediumDuration,gravidade:y.kl.SUCESSO}),this.close(!0)})}else this.prestacaoServicosService.updateFinalized(o,I).subscribe(X=>{this.toastService.presentToast({detalhe:"Sucesso",titulo:"Presta\xe7\xe3o de servi\xe7o registrada com sucesso",duracao:y.m4.mediumDuration,gravidade:y.kl.SUCESSO}),this.close(!0)})}close(o=!1){this.modal.dismiss(o)}isInputError(o){return!(this.form.controls[o].untouched||!this.form.controls[o].errors)}disableCreateBtn(){return!this.form.valid}clearForm(){this.form.reset(),this.selectedFormaPagamento=void 0,this.selectedOpcaoAcrescimoDesconto=void 0,this.selectedOpcaoTipo=void 0,this.total=void 0,this.resetAgendamento(),this.showAgendamento=!1,this.selectedStatusServico=t.vx.FINALIZADO,this.selectedOpcaoAcrescimoDesconto=x.F4.NAO;const{loja:o,id:r}=this.storage.getCompleteLocalUser();this.form.get("loja_id").setValue(o.id),this.form.get("colaborador_id").setValue(r),this.form.get("quantidade").setValue(1),this.form.get("local").setValue(m.sK.LOCAL),this.form.updateValueAndValidity({onlySelf:!0})}generateAgendamentoServicoObject(){const o=this.form.get("data_inicio").value,r=this.form.get("data_fim").value;let g;if(this.form.get("local").value==m.sK.EXTERNO){g={cep:this.form.get("cep").value,endereco:this.form.get("endereco").value,numero:this.form.get("numero").value,complemento:this.form.get("complemento").value,bairro:this.form.get("bairro").value,cidade:this.form.get("cidade").value,estado:this.form.get("estado").value}}return{data_inicio:o,data_fim:r,endereco_compromisso:g}}showEnderecoFields(){this.form.get("cep").setValidators([i.kI.required]),this.form.get("endereco").setValidators([i.kI.required]),this.form.get("numero").setValidators([i.kI.required]),this.form.get("complemento").setValidators([i.kI.required]),this.form.get("bairro").setValidators([i.kI.required]),this.form.get("cidade").setValidators([i.kI.required]),this.form.get("estado").setValidators([i.kI.required]),this.form.updateValueAndValidity({onlySelf:!0}),this.liberateEndereco=!0}hideEnderecoFields(){this.form.get("cep").clearValidators(),this.form.get("cep").setErrors(null),this.form.get("endereco").clearValidators(),this.form.get("endereco").setErrors(null),this.form.get("numero").clearValidators(),this.form.get("numero").setErrors(null),this.form.get("complemento").clearValidators(),this.form.get("complemento").setErrors(null),this.form.get("bairro").clearValidators(),this.form.get("bairro").setErrors(null),this.form.get("cidade").clearValidators(),this.form.get("cidade").setErrors(null),this.form.get("estado").clearValidators(),this.form.get("estado").setErrors(null),this.form.updateValueAndValidity({onlySelf:!0}),this.liberateEndereco=!1}};F.ctorParameters=()=>[{type:i.QS},{type:Y.K},{type:J.W},{type:k.B},{type:p.IN},{type:P.V},{type:q.D},{type:l.P}],F.propDecorators={prestacaoServico:[{type:a.IIB}]},F=(0,d.gn)([(0,a.wA2)({selector:"app-servicos-update",template:'<ion-content appScrollTheme>\n  <form *ngIf="prestacaoServico" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n    <div class="wall-background px-2 py-2 md:px-4 lg:px-4">\n      <div class="text-900 font-medium text-xl mb-3">Atualizar</div>\n      <div class="surface-card p-4 shadow-2 border-round p-fluid">\n        <div class="grid formgrid p-fluid">\n          <div id="loja" *ngIf="lojas" class="field mb-4 col-12 justify-content-start">\n            <label for="loja_id">Loja</label>\n            <p-dropdown id="loja_id" #drop_loja [options]="lojas.data" formControlName="loja_id" optionLabel="nome"\n              [filter]="true" placeholder="Selecione a loja de atendimento" optionValue="id" [virtualScroll]="true"\n              [virtualScrollItemSize]="38" [lazy]="true" (onLazyLoad)="paginarLoja($event)"\n              (onFilter)="onLojaFilter($event)" (onFocus)="blurLoja($event, drop_loja)">\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton [width]="options.even ? \'60%\' : \'50%\'" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n            </p-dropdown>\n          </div>\n          <p-divider class="w-full px-2 mb-3"></p-divider>\n\n          <div *ngIf="colaboradores" class="col-12 field mb-5">\n            <label for="colaboradores" class="text-900 font-medium mb-3">Prestador</label>\n            <p-dropdown id="colaboradores" #drop_colaborador [options]="colaboradores.data"\n              formControlName="colaborador_id" optionLabel="nome" optionValue="id" [filter]="true"\n              placeholder="Selecione o colaborador que far\xe1 o servi\xe7o" [virtualScroll]="true"\n              [virtualScrollItemSize]="38" [lazy]="true" (onLazyLoad)="paginarColaborador($event)"\n              (onFilter)="onColaboradorFilter($event)" (onFocus)="blurColaborador($event, drop_colaborador)">\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton [width]="options.even ? \'60%\' : \'50%\'" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n            </p-dropdown>\n          </div>\n          <p-divider class="w-full px-2 mb-3"></p-divider>\n\n          <div *ngIf="clients" class="col-12 field mb-5">\n            <label for="clients" class="text-900 font-medium mb-3">Cliente</label>\n            <p-dropdown id="clients" #drop_client [options]="clients.data" formControlName="cliente_id"\n              optionLabel="nome" [filter]="true" placeholder="Selecione um cliente" optionValue="id"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" (onLazyLoad)="paginarClient($event)"\n              (onFilter)="onClientFilter($event)" (onFocus)="blurClient($event, drop_client)">\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton [width]="options.even ? \'60%\' : \'50%\'" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n            </p-dropdown>\n          </div>\n          <p-divider class="w-full px-2 mb-3"></p-divider>\n\n          <div *ngIf="servicos" class="col-8 lg:col-10 field mb-5">\n            <label for="servicos" class="text-900 font-medium mb-3">Servi\xe7o a ser prestado</label>\n            <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailServico()"></div>\n            <p-dropdown id="servicos" #drop_client [options]="servicos.data" formControlName="servico"\n              optionLabel="nome" optionValue="id" [filter]="true" placeholder="Selecione um servi\xe7o"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" (onLazyLoad)="paginarServico($event)"\n              (onFilter)="onServicoFilter($event)" (onFocus)="blurServico($event, drop_client)"\n              (onChange)="onServicoChange($event)">\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton [width]="options.even ? \'60%\' : \'50%\'" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n            </p-dropdown>\n          </div>\n          <div *ngIf="servicos" class="col-4 lg:col-2 field mb-5">\n            <label for="quantidade" class="text-900 font-medium mb-3">Quantidade</label>\n            <p-inputNumber id="quantidade" [showButtons]="true" buttonLayout="horizontal" spinnerMode="horizontal"\n              min="1" inputStyleClass="w-2rem text-center py-2 px-1 border-transparent"\n              class="border-1 surface-border border-round" formControlName="quantidade"\n              decrementButtonClass="p-button-text text-600 hover:text-primary py-1 px-1"\n              incrementButtonClass="p-button-text text-600 hover:text-primary py-1 px-1"\n              incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus" (onBlur)="changeQuantidade()"\n              (onInput)="changeQuantidade()">\n            </p-inputNumber>\n          </div>\n          <p-divider class="w-full px-2 mb-3"></p-divider>\n\n          <div class="col-12 field">\n            <label for="pagamento_forma" class="text-900 font-medium mb-2 font-bold">Forma de pagamento</label>\n            <p-dropdown id="pagamento_forma" [options]="formasPagamento" formControlName="pagamento_forma"\n              placeholder="Forma de pagamento">\n            </p-dropdown>\n          </div>\n          <p-divider class="w-full px-2 mb-3"></p-divider>\n\n          <ng-container id="acrescimo_desconto">\n            <div class="col-12 md:col-6 field mb-3">\n              <label for="desconto_acrescimo" class="text-900 font-medium mb-1 font-bold">Acr\xe9scimo/Desconto?</label>\n              <p-dropdown id="desconto_acrescimo" [options]="opcoesAcrescimoDesconto"\n                [(ngModel)]="selectedOpcaoAcrescimoDesconto" [ngModelOptions]="{standalone: true}"\n                placeholder="Selecione" (onChange)="listenOpcaoAcrescimoDesconto()">\n              </p-dropdown>\n            </div>\n            <div *ngIf="disableOpcoesTipo()" class="col-12 md:col-6 field mb-3">\n              <label for="tipo_desconto_acrescimo" class="text-900 font-medium mb-1 font-bold">Tipo de\n                Acr\xe9scimo/Desconto</label>\n              <p-dropdown id="tipo_desconto_acrescimo" [options]="opcoesTipo" [(ngModel)]="selectedOpcaoTipo"\n                [ngModelOptions]="{standalone: true}" placeholder="Selecione" (onChange)="listenOpcoesTipoChange()">\n              </p-dropdown>\n            </div>\n\n            <div *ngIf="selectedOpcaoTipo == \'FIXO\'" class="field mb-4 col-12">\n              <label for="acrescimo_desconto" class="font-medium text-900">Valor (FIXO)</label>\n              <p-inputNumber id="acrescimo_desconto" formControlName="acrescimo_desconto" mode="decimal"\n                [minFractionDigits]="2" [maxFractionDigits]="2"></p-inputNumber>\n            </div>\n            <div *ngIf="selectedOpcaoTipo == \'PERCENTUAL\'" class="field mb-4 col-12">\n              <label for="acrescimo_desconto" class="font-medium text-900">Valor (PERCENTUAL)</label>\n              <p-inputNumber id="acrescimo_desconto" formControlName="acrescimo_desconto" max="100"></p-inputNumber>\n            </div>\n            <div *ngIf="selectedOpcaoTipo" class="field mb-4 col-12">\n              <label for="descricao" class="font-medium text-900">Justificativa</label>\n              <input id="descricao" type="text" pInputText formControlName="descricao">\n            </div>\n          </ng-container>\n          <p-divider class="w-full px-2 mb-3"></p-divider>\n\n          <div class="col-12 md:col-6 field">\n            <label for="status_servico" class="text-900 font-medium mb-2 font-bold">Status do servi\xe7o</label>\n            <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="showStatusDialog = true"></div>\n            <p-dropdown id="status_servico" [options]="statusServico" [(ngModel)]="selectedStatusServico"\n              [ngModelOptions]="{standalone: true}" placeholder="Status do servi\xe7o"\n              (onChange)="changeStatusServico($event)">\n            </p-dropdown>\n          </div>\n          <div *ngIf="selectedStatusServico == \'AGENDADO\'" class="col-12 md:col-6 field">\n            <label for="local" class="text-900 font-medium mb-2 font-bold">Local da presta\xe7\xe3o</label>\n            <p-dropdown inputId="local" [options]="localAgendamentos" optionLabel="label" formControlName="local"\n              optionValue="value" [showClear]="true" placeholder="Selecione o local" (onChange)="localChanged()">\n              <ng-template let-local pTemplate="item">\n                <div class="flex align-items-center">\n                  <div>{{local.label}}</div>\n                </div>\n              </ng-template>\n            </p-dropdown>\n          </div>\n          <p-divider class="w-full px-2 mb-3"></p-divider>\n\n          <ng-container *ngIf="showAgendamento" id="agendamento">\n            <p-panel class="mb-4 col-12" header="Agendamento" [toggleable]="true" [collapsed]="false" iconPos="end">\n              <ng-template pTemplate="icons">\n                <button pButton class="p-panel-header-icon p-link" (click)="menu.toggle($event)">\n                  <span class="pi pi-cog"></span>\n                </button>\n                <p-menu #menu id="config_menu" [model]="menuAgendamento" [popup]="true" appendTo="body"></p-menu>\n              </ng-template>\n\n              <ng-template pTemplate="content">\n                <div class="grid formgrid p-fluid">\n                  <div class="field mb-4 col-12 md:col-6">\n                    <label for="data_inicio" class="font-medium text-900">Prev. In\xedcio</label>\n                    <p-calendar id="data_inicio" [showTime]="true" [showIcon]="true" formControlName="data_inicio"\n                      showButtonBar="true">\n                    </p-calendar>\n                  </div>\n                  <div class="field mb-4 col-12 md:col-6">\n                    <label for="data_fim" class="font-medium text-900">Prev. Fim</label>\n                    <p-calendar id="data_fim" [showTime]="true" [showIcon]="true" formControlName="data_fim"\n                      showButtonBar="true"></p-calendar>\n                  </div>\n\n\n                  <ng-container *ngIf="liberateEndereco">\n                    <div class="field mb-4 col-12 md:col-6">\n                      <label for="cep" class="font-medium text-900">Cep</label>\n                      <input id="cep" type="text" pInputText formControlName="cep">\n                    </div>\n                    <div class="field mb-4 col-12 md:col-6">\n                      <label for="endereco" class="font-medium text-900">Endere\xe7o</label>\n                      <input id="endereco" type="text" pInputText formControlName="endereco">\n                    </div>\n                    <div class="field mb-4 col-12 md:col-6">\n                      <label for="numero" class="font-medium text-900">N\xfamero</label>\n                      <input id="numero" type="text" pInputText formControlName="numero">\n                    </div>\n                    <div class="field mb-4 col-12 md:col-6">\n                      <label for="complemento" class="font-medium text-900">Complemento</label>\n                      <input id="complemento" type="text" pInputText formControlName="complemento">\n                    </div>\n                    <div class="field mb-4 col-12 md:col-6">\n                      <label for="bairro" class="font-medium text-900">Bairro</label>\n                      <input id="bairro" type="text" pInputText formControlName="bairro">\n                    </div>\n                    <div class="field mb-4 col-12 md:col-6">\n                      <label for="cidade" class="font-medium text-900">Cidade</label>\n                      <input id="cidade" type="text" pInputText formControlName="cidade">\n                    </div>\n                    <div class="field mb-4 col-12 md:col-6">\n                      <label for="estados" class="font-medium text-900">Estado</label>\n                      <p-dropdown inputId="estados" [options]="listEstados" formControlName="estado" optionLabel="nome"\n                        optionValue="sigla" [showClear]="true" placeholder="Selecione o estado">\n                        <ng-template let-estado pTemplate="item">\n                          <div class="flex align-items-center">\n                            <div>{{estado.nome}}</div>\n                          </div>\n                        </ng-template>\n                      </p-dropdown>\n                    </div>\n                    <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n                  </ng-container>\n                </div>\n              </ng-template>\n            </p-panel>\n          </ng-container>\n          <p-divider class="w-full px-2 mb-3"></p-divider>\n\n          <div class="col-6 ml-auto py-2 mt-3 border-bottom-1 border-primary">\n            <div class="flex justify-content-between align-items-center mb-3">\n              <span class="text-900">Subtotal</span>\n              <span class="text-900">R$ {{ getSubTotal() | currency:\'BRL\': \'\' }}</span>\n            </div>\n            <div class="flex justify-content-between align-items-center mb-3">\n              <span class="text-900">Desconto/Acr\xe9scimo</span>\n              <span class="text-900">R${{ getDescontoAcrescimoTxt() }}</span>\n            </div>\n            <div class="flex justify-content-between align-items-center mb-3">\n              <span class="text-900">Total</span>\n              <span class="text-900 font-bold">R$ {{ getTotal() | currency:\'BRL\': \'\' }}</span>\n            </div>\n          </div>\n          <p-divider class="w-full px-2 mb-3 border-primary"></p-divider>\n        </div>\n        <div class="flex justify-content-between">\n          <button pButton pRipple label="Fechar" icon="pi pi-times" iconPos="right"\n            class="w-auto p-button-danger p-button-outlined" (click)="close()"></button>\n          <button pButton pRipple label="Atualizar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="update()"\n            [disabled]="disableCreateBtn()"></button>\n        </div>\n      </div>\n    </div>\n  </form>\n</ion-content>\n\n<app-question-servico [showDialog]="showDialog" [selectedServico]="selectedServico"\n  (closeEvent)="selectedServico = undefined; showDialog = false;"></app-question-servico>\n<app-question-status-servico [showDialog]="showStatusDialog"\n  (closeEvent)="showStatusDialog = false"></app-question-status-servico>',styles:[""]})],F)},52681:(T,S,e)=>{e.d(S,{y:()=>x});var d=e(70655),c=e(98274),h=e(36895),a=e(48058),i=e(21493),p=e(35593),b=e(91795);var t=e(7475),l=e(50727);let n=class{constructor(P){this.servicosService=P,this.showDialog=!1,this.closeEvent=new c.vpe,this.subscriptions=new l.w0}ngOnInit(){this.selectedServico?this.showDialog=!0:this.loadServico()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadServico(){if(!this.selectedServico&&!this.servico_id)return void this.close();const P=this.servicosService.findById(this.servico_id).subscribe(U=>{this.selectedServico=U,this.showDialog=!0});this.subscriptions.add(P)}close(){this.showDialog=!1,this.closeEvent.emit(this.showDialog)}};n.ctorParameters=()=>[{type:t.B}],n.propDecorators={showDialog:[{type:c.IIB}],selectedServico:[{type:c.IIB}],servico_id:[{type:c.IIB}],closeEvent:[{type:c.r_U}]},n=(0,d.gn)([(0,c.wA2)({selector:"app-question-servico",template:'\n\n<p-dialog *ngIf="selectedServico" [(visible)]="showDialog" appendTo="body" [modal]="true"  [closable]="false"\n[breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\'}" [draggable]="false">\n<ng-template pTemplate="header">\n  <div class="flex align-items-center">\n    <span class="flex align-items-center justify-content-center bg-cyan-100 text-cyan-800 mr-3 border-circle"\n      style="width:32px;height:32px">\n      <i class="pi pi-info text-lg"></i>\n    </span>\n    <span class="font-medium text-2xl text-900">{{ selectedServico.nome }}</span>\n  </div>\n</ng-template>\n<div class="grid">\n  <div class="col-12 line-height-3 p-0 m-1">\n    {{ selectedServico.descricao }}\n    <div class="mt-1">Pode ser realizado de maneira remota: {{ selectedServico.is_remoto ? \'Sim\': \'N\xe3o\' }}</div>\n    <div>Pode ser realizado \xe0 domic\xedlio: {{ selectedServico.is_domicilio ? \'Sim\': \'N\xe3o\' }}</div>\n  </div>\n  <div class="col-12 border-top-1 surface-border pt-3  mt-2"></div>\n  <div class="col-12 lg:col-6 p-3 text-center">\n    <div class="shadow-2 surface-card p-3" style="border-radius: 12px">\n      <div class="flex align-items-center justify-content-between">\n        <div>\n          <span class="text-xl text-900 font-bold">R$ {{ selectedServico.custo_servico | currency:\'BRL\': \'\'\n            }}</span>\n          <p class="mt-2 mb-0 text-600 text-lg">Custo tabelado do servi\xe7o</p>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="col-12 lg:col-6 p-3 text-center">\n    <div class="shadow-2 surface-card p-3" style="border-radius: 12px">\n      <div class="flex align-items-center justify-content-between">\n        <div>\n          <span class="text-xl text-900 font-bold">R$ {{ selectedServico.preco_servico | currency:\'BRL\': \'\'\n            }}</span>\n          <p class="mt-2 mb-0 text-600 text-lg">Valor tabelado a ser cobrado</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<ng-template pTemplate="footer">\n  <button pButton pRipple icon="pi pi-check" (click)="close()"\n    label="OK"></button>\n</ng-template>\n</p-dialog>',styles:[""]})],n);let x=class{};x=(0,d.gn)([(0,c.LVF)({declarations:[n],imports:[h.ez,a.Pc,i.S,p.hJ,b.T],exports:[n]})],x)},91391:(T,S,e)=>{var d,i,c;e.d(S,{CZ:()=>d,Vl:()=>h,r2:()=>a,sK:()=>c}),(i=d||(d={})).PESSOAL="Compromisso Pessoal",i.EVENTO="Evento",i.SERVICO="Servi\xe7o",function(i){i.LOCAL="Local",i.EXTERNO="Externo",i.REMOTO="Remoto"}(c||(c={}));const h=[{label:d.EVENTO,value:d.EVENTO},{label:d.PESSOAL,value:d.PESSOAL},{label:d.SERVICO,value:d.SERVICO}],a=[{label:"Local",value:c.LOCAL},{label:"Externo",value:c.EXTERNO},{label:"Remoto",value:c.REMOTO}]},54692:(T,S,e)=>{e.d(S,{Dr:()=>b,Ti:()=>u,Tx:()=>t,cr:()=>c,s3:()=>a,vx:()=>m});var c,l,h;(l=c||(c={})).FALHA="FALHA",l.EM_EXECUCAO="EM EXECUCAO",l.CONCLUIDO="CONCLUIDO",function(l){l.ATIVO="ATIVO",l.AFASTADO="AFASTADO",l.FERIAS="FERIAS",l.DESLIGADO="DESLIGADO",l.DELETADO="DELETADO"}(h||(h={}));const a=[{label:"Ativo",value:h.ATIVO},{label:"Afastado",value:h.AFASTADO},{label:"F\xe9rias",value:h.FERIAS},{label:"Desligado",value:h.DESLIGADO},{label:"Deletado",value:h.DELETADO}];h.ATIVO,h.DELETADO;var p;!function(l){l.ATIVO="ATIVO",l.EM_MANUTENCAO="EM MANUTENCAO",l.VENDIDO="VENDIDO",l.FORA_DE_OPERACAO="FORA DE OPERACAO"}(p||(p={}));const b=[{nome:"ATIVO",value:p.ATIVO},{nome:"EM_MANUTENCAO",value:p.EM_MANUTENCAO},{nome:"VENDIDO",value:p.VENDIDO},{nome:"FORA_DE_OPERACAO",value:p.FORA_DE_OPERACAO}];var m;!function(l){l.INICIADO="INICIADO",l.AGENDADO="AGENDADO",l.FINALIZADO="FINALIZADO",l.CANCELADO="CANCELADO"}(m||(m={}));const u=[{label:"Iniciado",value:m.INICIADO},{label:"Agendar",value:m.AGENDADO},{label:"Finalizado",value:m.FINALIZADO},{label:"Cancelado",value:m.CANCELADO}],t=[{label:"Iniciado",value:m.INICIADO},{label:"Agendar",value:m.AGENDADO},{label:"Finalizado",value:m.FINALIZADO}]},18109:(T,S,e)=>{var d,c;e.d(S,{X:()=>d}),(c=d||(d={})).FUNCIONARIO="FUNCIONARIO",c.CLIENTE="CLIENTE"},91475:(T,S,e)=>{e.d(S,{P:()=>m});var d=e(70655),c=e(80529),h=e(98274),a=e(40199),i=e(55583),p=e(99038),b=e(94203);let m=class{constructor(t){this.http=t}createFinalized(t){return this.http.post(`${p.Hz.baseURL}/prestacao/servicos/finalized`,t,{responseType:"json"})}create(t){const{hora_inicio:l,hora_fim:n}=b.G.corrigirTimezone(t.agendamento_servico.data_inicio,t.agendamento_servico.data_fim);return t.agendamento_servico.data_inicio=l,t.agendamento_servico.data_fim=n,this.http.post(`${p.Hz.baseURL}/prestacao/servicos`,t,{responseType:"json"})}updateFinalized(t,l){return this.http.put(`${p.Hz.baseURL}/prestacao/servicos/${t}/finalized`,l,{responseType:"json"})}update(t,l){return this.http.put(`${p.Hz.baseURL}/prestacao/servicos/${t}`,l,{responseType:"json"})}list(t,l=new a.k){let n=i.t.getPageOptionsParams(l);return t&&(t.acrescimo_desconto&&(n=n.append("acrescimo_desconto",t.acrescimo_desconto)),t.cliente_id&&(n=n.append("cliente_id",t.cliente_id)),t.colaborador_id&&(n=n.append("colaborador_id",t.colaborador_id)),t.created_at&&(n=n.append("created_at",t.created_at.toDateString())),t.local&&(n=n.append("local",t.local)),t.loja_id&&(n=n.append("loja_id",t.loja_id)),t.max_total&&(n=n.append("max_total",t.max_total)),t.min_total&&(n=n.append("min_total",t.min_total)),t.pagamento_forma&&(n=n.append("pagamento_forma",t.pagamento_forma)),t.searchedCliente&&(n=n.append("searchedCliente",t.searchedCliente)),t.searchedColaborador&&(n=n.append("searchedColaborador",t.searchedColaborador)),t.searchedLoja&&(n=n.append("searchedLoja",t.searchedLoja)),t.searchedPrestacaoServico&&(n=n.append("searchedPrestacaoServico",t.searchedPrestacaoServico)),t.status_servico&&(n=n.append("status_servico",t.status_servico))),this.http.get(`${p.Hz.baseURL}/prestacao/servicos`,{responseType:"json",params:n})}findById(t){return this.http.get(`${p.Hz.baseURL}/prestacao/servicos/${t}`,{responseType:"json"})}initiateById(t){return this.http.patch(`${p.Hz.baseURL}/prestacao/servicos/${t}/initiate`,{responseType:"json"})}finalizeById(t){return this.http.patch(`${p.Hz.baseURL}/prestacao/servicos/${t}/finalize`,{responseType:"json"})}cancelById(t){return this.http.delete(`${p.Hz.baseURL}/prestacao/servicos/${t}`,{responseType:"json"})}};m.ctorParameters=()=>[{type:c.eN}],m=(0,d.gn)([(0,h.GSi)({providedIn:"root"})],m)},7475:(T,S,e)=>{e.d(S,{B:()=>b});var d=e(70655),c=e(80529),h=e(98274),a=e(99038),i=e(40199),p=e(55583);let b=class{constructor(u){this.http=u}create(u){return this.http.post(`${a.Hz.baseURL}/servicos`,u,{responseType:"json"})}update(u,t){return this.http.put(`${a.Hz.baseURL}/servicos/${u}`,t,{responseType:"json"})}list(u,t=new i.k){let l=p.t.getPageOptionsParams(t);return u&&u.searchedServico&&(l=l.append("searchedServico",u.searchedServico)),u&&u.nome&&(l=l.append("nome",u.nome)),u&&u.descricao&&(l=l.append("descricao",u.descricao)),this.http.get(`${a.Hz.baseURL}/servicos`,{responseType:"json",params:l})}listBasic(){return this.http.get(`${a.Hz.baseURL}/servicos/basic/list`,{responseType:"json"})}findById(u){return this.http.get(`${a.Hz.baseURL}/servicos/${u}`,{responseType:"json"})}};b.ctorParameters=()=>[{type:c.eN}],b=(0,d.gn)([(0,h.GSi)({providedIn:"root"})],b)},94203:(T,S,e)=>{e.d(S,{G:()=>c});var d=e(91391);class c{static convertCompromissoToEvent(a){const{data_inicio:i,data_fim:p,hora_fim:b,hora_inicio:m,tipo:u}=a,t=new Date(`${i} ${m}`),l=new Date(`${p} ${b}`);let n;switch(u){case d.CZ.EVENTO:n="#2e2e85";break;case d.CZ.SERVICO:n="#2e854b";break;case d.CZ.PESSOAL:n="#856c2e";break;default:n="#852e3d"}return{start:t,end:l,backgroundColor:n}}static corrigirTimezone(a,i){return a.setHours(a.getHours()-3),i.setHours(i.getHours()-3),{hora_fim:i,hora_inicio:a}}}},5241:(T,S,e)=>{e.d(S,{D:()=>c});var d=e(50735);class c{static setAcrescimoDesconto(a,i,p,b){return a==d.F4.NAO?(delete p.descricao,p):(a==d.F4.ACRESCIMO?i==d.ax.FIXO?p.valor_acrescimo=b:p.percentual_acrescimo=b:i==d.ax.FIXO?p.valor_desconto=b:p.percentual_desconto=b,p)}}}}]);