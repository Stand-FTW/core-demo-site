"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7919],{44897:(O,y,n)=>{n.r(y),n.d(y,{AdministracaoFinanceiraPageModule:()=>G});var i=n(70655),d=n(98274),C=n(36895),g=n(24006),u=n(48058),m=n(39528);let c=class{constructor(){this.currentTab="transacoes"}ngOnInit(){}changeTab(e){this.currentTab=e.detail.value}};c.ctorParameters=()=>[],c=(0,i.gn)([(0,d.wA2)({selector:"app-administracao-financeira",template:'<ion-header [translucent]="true">\n  <ion-toolbar>\n    <ion-buttons slot="start">\n      <ion-menu-button></ion-menu-button>\n    </ion-buttons>\n    <ion-title>ADM. Financeira</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content appScrollTheme>\n  <ion-segment class="background-segment" [(ngModel)]="currentTab" [ngModelOptions]="{standalone: true}"\n    (ionChange)="changeTab($event)">\n    <ion-segment-button style="margin-left: 5px; max-width: 200px" layout="icon-start" value="transacoes">\n      <ion-icon style="font-size: 1.2em" name="cash-outline"></ion-icon>\n      <ion-label text-wrap class="wrap-text" style="font-size: 1.1em">\n        Transa\xe7\xf5es\n      </ion-label>\n    </ion-segment-button>\n  </ion-segment>\n\n  <ion-segment class="background-segment" [(ngModel)]="currentTab" [ngModelOptions]="{standalone: true}"\n    (ionChange)="changeTab($event)">\n    <ion-segment-button style="margin-left: 5px; max-width: 200px" layout="icon-start" value="pedidos">\n      <ion-icon style="font-size: 1.2em" name="bag-outline"></ion-icon>\n      <ion-label text-wrap class="wrap-text" style="font-size: 1.1em">\n        Pedidos\n      </ion-label>\n    </ion-segment-button>\n\n    <ion-segment-button style="max-width: 200px" layout="icon-start" value="prestacao-servicos">\n      <ion-icon style="font-size: 1.2em" name="build-outline"></ion-icon>\n      <ion-label style="font-size: 1.1em"> Servi\xe7os </ion-label>\n    </ion-segment-button>\n  </ion-segment>\n  <br>\n\n  <div class="wall-background">\n    <ng-container *ngIf="currentTab === \'transacoes\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-transacoes-main></app-transacoes-main>\n      </div>\n    </ng-container>\n    <ng-container *ngIf="currentTab === \'prestacao-servicos\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-prestacao-servico-main></app-prestacao-servico-main>\n      </div>\n    </ng-container>\n    <ng-container *ngIf="currentTab === \'pedidos\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-pedido-main></app-pedido-main>\n      </div>\n    </ng-container>\n  </div>\n</ion-content>',styles:[""]})],c);const s=[{path:"",component:c}];let f=class{};f=(0,i.gn)([(0,d.LVF)({imports:[m.Bz.forChild(s)],exports:[m.Bz]})],f);var r=n(85226),te=n(92216),ne=n(77604),ae=n(9764),se=n(51740),oe=n(35593),ie=n(82210),le=n(58783),re=n(92665),J=n(23520),X=n(70585),Q=n(25047),ce=n(50613),de=n(1236),pe=n(73425),ue=n(17913),me=n(28396),he=n(32137),ve=n(21493),ge=n(78177),fe=n(63054),be=n(61989),_=n(15861);var j,b,_e=n(94327),Ce=n(10805),L=n(50727);(b=j||(j={}))[b.SALDO_LOCAL_TRANSACAO=2]="SALDO_LOCAL_TRANSACAO",b[b.SALDO_LOCAL_DIA=3]="SALDO_LOCAL_DIA",b[b.FECHAMENTO_DIA=4]="FECHAMENTO_DIA",b[b.FECHAMENTO_DIA_TOTAL=5]="FECHAMENTO_DIA_TOTAL";const Te=[{label:"Fechamento do Dia - Operador",value:j.FECHAMENTO_DIA},{label:"Fechamento do Dia - Gerente",value:j.FECHAMENTO_DIA_TOTAL}];var w=n(98739),we=n(89535),B=n(57118),K=n(80529),k=n(99038);let R=class{constructor(e){this.http=e}getById(e,t){const a={data:t},o={headers:new K.WM({"Content-Type":"application/json"}),responseType:"blob"};return this.http.post(`${k.Hz.baseURL}/relatorio/${e}`,a,o)}};R.ctorParameters=()=>[{type:K.eN}],R=(0,i.gn)([(0,d.GSi)({providedIn:"root"})],R);var F=n(34758);let M=class{constructor(e,t,a,o,l,p){this.toastService=e,this.reportService=t,this.platform=a,this.lojaService=o,this.userService=l,this.storage=p,this.reportList=Te,this.sortlojas=[],this.operadores=[],this.data={},this.touchUI=!1,this.reportName="Relat\xf3rio.xlsx",this.subscriptions=new L.w0}ngOnInit(){this.platform.is("mobile")&&(this.touchUI=!0),this.loadlojas()}ngOnDestroy(){this.subscriptions.unsubscribe()}reportDownload(){var e=this;return(0,_.Z)(function*(){try{yield e.handleBeforeDown();const t=e.reportService.getById(e.selectedReport,e.data).subscribe(a=>{(0,_e.saveAs)(a,e.reportName),e.presentToast("success","Download em andamento","Baixando relat\xf3rio",w.m4.mediumDuration)});e.subscriptions.add(t)}catch{}})()}getDisabled(){return 4==this.selectedReport?!(this.data.date&&this.data.user_id):5==this.selectedReport?!(this.data.date&&this.data.loja_id):void 0}handleReportDropChange(e){this.reportName="Relat\xf3rio.xlsx",this.operadores=[],this.data={}}handleBeforeDown(){var e=this;return(0,_.Z)(function*(){if(4==e.selectedReport){const t=e.operadores.find(a=>a.id==e.data.user_id);e.reportName=`Fechamento do dia ${e.data.date.toLocaleDateString("pt-BR")} - ${t.nome}.xlsx`}if(5==e.selectedReport){e.reportName=`Fechamento do dia ${e.data.date.toLocaleDateString("pt-BR")} - [LOJA].xlsx`;try{const{date:t,loja_id:a}=e.data}catch(t){throw t}}})()}loadlojas(){const e=this.lojaService.list().subscribe(t=>{const a=t.data.map(o=>{const{id:l,nome:p,codigo:v}=o;return{value:l,label:`${p} - ${v}`}});this.sortlojas=[{value:void 0,label:"Selecione"},...a]});this.subscriptions.add(e)}loadOperadores(e){if(!e)return this.operadores=[],void(this.data.user_id=void 0);const t=this.userService.listUsers(e).subscribe(a=>{this.operadores=a.data});this.subscriptions.add(t)}presentToast(e,t,a,o){this.toastService.clear(),this.toastService.add({severity:e,summary:t,detail:a,life:o})}};M.ctorParameters=()=>[{type:Ce.ez},{type:R},{type:u.t4},{type:B.W},{type:F.K},{type:we.V}],M=(0,i.gn)([(0,d.wA2)({selector:"app-relatorio-main",template:'<p-panel>\n  <ng-template pTemplate="header">\n    <p-dropdown [options]="reportList" placeholder="Selecione o relat\xf3rio" [(ngModel)]="selectedReport"\n      [ngModelOptions]="{standalone: true}" optionLabel="label" optionValue="value"\n      (onChange)="handleReportDropChange($event.value)"></p-dropdown>\n  </ng-template>\n\n  <div class="p-fluid grid">\n\n    <ng-container *ngIf="selectedReport == 4">\n\n      <div class="p-float-label field col-12 md:col-4">\n        <p-dropdown [options]="sortLotericas" placeholder="Selecione uma Lot\xe9rica" optionLabel="label"\n          optionValue="value" (onChange)="loadOperadores($event.value)"></p-dropdown>\n      </div>\n\n      <div class="p-float-label field col-12 md:col-4">\n        <p-dropdown [options]="operadores" placeholder="Selecione um funcion\xe1rio" [(ngModel)]="data.user_id"\n          [ngModelOptions]="{standalone: true}" optionLabel="nome" optionValue="id"></p-dropdown>\n      </div>\n\n      <div class="p-float-label field col-12 md:col-4">\n        <p-calendar [(ngModel)]="data.date" [ngModelOptions]="{standalone: true}" dateFormat="dd-mm-yy"\n          inputId="report_4_date"></p-calendar>\n        <label for="report_4_date">Data desejada</label>\n      </div>\n    </ng-container>\n\n    <ng-container *ngIf="selectedReport == 5">\n\n      <div class="p-float-label field col-12 md:col-4">\n        <p-dropdown [options]="sortLotericas" placeholder="Selecione uma Lot\xe9rica" optionLabel="label"\n        optionValue="value" [(ngModel)]="data.loterica_id"></p-dropdown>\n      </div>\n\n\n      <div class="p-float-label field col-12 md:col-4">\n        <p-calendar [(ngModel)]="data.date" [ngModelOptions]="{standalone: true}" dateFormat="dd-mm-yy"\n          inputId="report_5_inicio"></p-calendar>\n        <label for="report_5_inicio">Data desejada</label>\n      </div>\n    </ng-container>\n  </div>\n\n  <ng-template pTemplate="footer">\n    <button style="margin-left: 5px" pButton [disabled]="getDisabled()" icon="pi pi-download" class=" p-button-primary"\n      label="Baixar" (click)="reportDownload()">\n    </button>\n  </ng-template>\n</p-panel>',styles:[".p-float-label {\n  margin-top: 15px;\n}"]})],M);var Oe=n(71644),N=n(59256),P=n(59136),Y=n(82455),$=n(75828),W=n(82145),H=n(45088);let E=class{constructor(e,t,a,o,l,p,v){this.pedidoService=e,this.modal=t,this.toastService=a,this.router=o,this.lojaService=l,this.userService=p,this.filesService=v,this.searchedPedido="",this.sortLojas=[],this.sortStatus=[],this.sortLocais=[],this.currentPage=1,this.pageOrder=P.L.DESC,this.currentTake=5,this.min_total=0,this.max_total=0,this.selectedPedidos=[],this.subscriptions=new L.w0}ngOnInit(){this.sortStatus=[...$.SX],this.sortLocais=[...$.YU],this.cols=[{field:"id",header:"ID"},{field:"loja.nome",header:"Loja"},{field:"cliente.nome",header:"Cliente"},{field:"vendedor.nome",header:"Vendedor"},{field:"total_pedido",header:"Total do Pedido"},{field:"status_pedido",header:"Status"},{field:"from_pdv",header:"Local"},{field:"created_at",header:"Data de Cria\xe7\xe3o"}],this.exportColumns=this.cols.map(e=>({title:e.header,dataKey:e.field})),this.loadPedidos()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPedidos(e=1,t){const a=this.pedidoService.list({searchedPedido:this.searchedPedido,searchedLoja:this.searchedLoja,status_pedido:this.selectedStatus,local:this.selectedLocal,searchedCliente:this.searchedCliente,searchedVendedor:this.searchedColaborador,min_total:Number(this.min_total),max_total:Number(this.max_total),created_at:this.selectedDate},{order:this.pageOrder,page:e,take:this.currentTake}).subscribe(o=>{this.pedidos=o},()=>{},()=>{t&&(t.paginator=!0)});this.subscriptions.add(a)}paginar(e,t){t.paginator=!1;const{first:a,rows:o,sortOrder:l}=e,p=Number(Number(a)/Number(o)+1);this.doFilter(e),this.currentPage=p,this.currentTake=o,this.pageOrder=l&&1==l?P.L.DESC:P.L.ASC,this.loadPedidos(p,t)}doFilter(e){if(!e||!e.filters||!e.filters.id)return;const{id:t,cliente:a,vendedor:o,created_at:l,loja:p,status:v,local:T}=e.filters;this.min_total>this.max_total&&(this.max_total=void 0),t[0].value?this.searchedPedido=t[0].value:this.searchedPedido=void 0,a[0].value?this.searchedCliente=a[0].value:this.searchedCliente=void 0,o[0].value?this.searchedColaborador=o[0].value:this.searchedColaborador=void 0,v[0].value?this.selectedStatus=v[0].value:this.selectedStatus=void 0,T[0].value?this.selectedLocal=T[0].value:this.selectedLocal=void 0,l[0].value?this.selectedDate=l[0].value:this.selectedDate=void 0,p[0].value?this.searchedLoja=p[0].value:this.searchedLoja=void 0}clearTotal(){this.min_total=void 0,this.max_total=void 0,this.loadPedidos(1)}exportPdf(){var e=this;return(0,_.Z)(function*(){const t=`Pedidos - ${(new Date).toLocaleDateString()}`,a=e.cols.map(l=>l.header),o=e.convertPedidoData().map(Object.values);yield e.filesService.exportPdf(t,a,o)})()}exportExcel(){var e=this;return(0,_.Z)(function*(){const t=`Pedidos - ${(new Date).toLocaleDateString()}`;yield e.filesService.exportExcel(t,e.convertPedidoData())})()}exportCsv(){var e=this;return(0,_.Z)(function*(){const t=`Pedidos - ${(new Date).toLocaleDateString()}`;yield e.filesService.exportCSV(t,e.convertPedidoData())})()}doCancelamento(e){}detail(e){this.showModal(Y.z,{pedido:e})}openColaborador(e){this.showModal(H.E,{user_id:e})}openCliente(e){}convertPedidoData(){return this.pedidos.data.map(t=>({id:t.id,loja:t.loja.nome,cliente:t.cliente.nome,vendedor:t.vendedor.nome,total_pedido:`R$ ${Number(t.total_pedido).toFixed(2)}`,status:t.status_pedido,local:t.from_pdv?$.Gz.PDV:$.Gz.E_COMMERCE,data_criacao:new Date(t.created_at).toLocaleString()}))}showModal(e,t){var a=this;return(0,_.Z)(function*(){const o=yield a.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return o.onDidDismiss().then(l=>{const{data:p,role:v}=l;p&&(a.loadPedidos(a.currentPage),a.toastService.presentToast({detalhe:"Opera\xe7\xe3o bem sucedida!",titulo:"Sucesso!",duracao:w.m4.mediumDuration,gravidade:w.kl.SUCESSO}))}),yield o.present()})()}};E.ctorParameters=()=>[{type:Oe.$},{type:u.IN},{type:N.D},{type:m.F0},{type:B.W},{type:F.K},{type:W.n}],E=(0,i.gn)([(0,d.wA2)({selector:"app-pedido-main",template:'<p-table *ngIf="pedidos" #dt [(selection)]="selectedPedidos" dataKey="id" \n  [rowHover]="true" [showCurrentPageReport]="true" [filterDelay]="2"\n  [rowsPerPageOptions]="[5,10,25,50,100,250,500,1000]"\n  [globalFilterFields]="[\'nome\',\'cliente.nome\', \'vendedor.nome\', \'status\']"\n  currentPageReportTemplate="Mostrando {first} at\xe9 {last} de {totalRecords} entradas" [lazy]="true"\n  [value]="pedidos.data" [paginator]="true" [rows]="pedidos.meta.take" [totalRecords]="pedidos.meta.itemCount"\n  [pageLinks]="pedidos.meta.pageCount" (onLazyLoad)="paginar($event, dt)" responsiveLayout="scroll" >\n  <ng-template pTemplate="caption">\n    <div class="grid flex">\n\n      <div class="table-header text-primary col-6">\n        Lista de pedidos\n      </div>\n\n      <div class="col-6 justify-content-end text-right">\n        <button type="button" pButton pRipple icon="pi pi-file-o" (click)="exportCsv()" class="p-button-help mr-2"\n          pTooltip="CSV" tooltipPosition="bottom"></button>\n\n        <button type="button" pButton pRipple icon="pi pi-file-excel" (click)="exportExcel()"\n          class="p-button-success mr-2" pTooltip="XLS" tooltipPosition="bottom"></button>\n\n        <button type="button" pButton pRipple icon="pi pi-file-pdf" (click)="exportPdf()" class="p-button-danger mr-2"\n          pTooltip="PDF" tooltipPosition="bottom"></button>\n      </div>\n\n    </div>\n  </ng-template>\n  <ng-template pTemplate="header">\n    <tr>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          ID\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text" field="id"\n            [pSortableColumnDisabled]="true" class="ml-auto" display="menu"></p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Loja\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n            field="loja" display="menu" class="ml-auto"></p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Cliente\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n            field="cliente" display="menu" class="ml-auto"></p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Vendedor\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n            field="vendedor" display="menu" class="ml-auto"></p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Total do pedido\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="numeric"\n            field="total_pedido" display="menu" currency="BRL" class="ml-auto" [showClearButton]="false">\n            <ng-template pTemplate="filter" let-value let-filter="filterCallback">\n              <div class="grid  justify-content-between">\n                <div class="field col-6 text-center">\n                  <label for="minmax-buttons">M\xednimo (R$)</label>\n                  <p-inputNumber mode="decimal" [showButtons]="true" buttonLayout="vertical" spinnerMode="vertical"\n                    inputId="vertical" decrementButtonClass="button-secondary"\n                    incrementButtonClass="button-secondary" incrementButtonIcon="pi pi-plus"\n                    decrementButtonIcon="pi pi-minus" [min]="0" [(ngModel)]="min_total" [minFractionDigits]="2"\n                    [maxFractionDigits]="2">\n                  </p-inputNumber>\n                </div>\n\n                <div class="field  col-6 text-center">\n                  <label for="minmax-buttons">Max (R$)</label>\n                  <p-inputNumber mode="decimal" [showButtons]="true" buttonLayout="vertical" spinnerMode="vertical"\n                    inputId="vertical" decrementButtonClass="button-secondary"\n                    incrementButtonClass="button-secondary" incrementButtonIcon="pi pi-plus"\n                    decrementButtonIcon="pi pi-minus" [min]="min_total" [(ngModel)]="max_total" [minFractionDigits]="2"\n                    [maxFractionDigits]="2">\n                  </p-inputNumber>\n                </div>\n              </div>\n              <div>\n                <button pButton type="button" class="button-primary p-button-outlined w-full" label="Limpar"\n                  (click)="clearTotal()"></button>\n              </div>\n            </ng-template>\n          </p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Status\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" field="status"\n            matchMode="equals" display="menu" class="ml-auto">\n            <ng-template pTemplate="filter" let-value let-filter="filterCallback">\n              <p-dropdown [ngModel]="value" [options]="sortStatus" (onChange)="filter($event.value)"\n                placeholder="Status">\n                <ng-template let-option pTemplate="item">\n                  <span class="font-light py-1 px-3 text-blue-500 hover:bg-blue-100" style="border-radius: 30px;"\n                    [ngClass]="{\n                      \'PENDENTE_ESTOQUE\' : \'text-pink-500 hover:bg-pink-100\', \n                      \'CANCELADO\' : \'text-pink-500 hover:bg-pink-100\', \n                      \n                      \'PENDENTE_PAGAMENTO\' : \'text-yellow-500 hover:bg-yellow-100\', \n                      \'CANCELAMENTO_SOLICITADO\' : \'text-yellow-500 hover:bg-yellow-100\', \n              \n                      \'FINALIZADO\' : \'text-green-500 hover:bg-green-100\'\n                    }[option.value]">{{option.label}}</span>\n                </ng-template>\n              </p-dropdown>\n            </ng-template>\n          </p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Local\n          <p-columnFilter field="local" matchMode="between" display="menu" [showMatchModes]="false"\n            [showOperator]="false" [showAddButton]="false" class="ml-auto">\n            <ng-template pTemplate="filter" let-value let-filter="filterCallback">\n              <p-dropdown [ngModel]="value" [options]="sortLocais" (onChange)="filter($event.value)"\n                placeholder="Local">\n                <ng-template let-option pTemplate="item">\n                  <div class="mb-2">\n                    <fa-icon class="text-primary text-xs "\n                      [icon]="option.label == \'PDV\'? [\'fas\', \'shop\']: [\'fas\', \'at\']"></fa-icon>\n                    <span class="font-light px-2 " style="border-radius: 30px;">{{option.label}}</span>\n                  </div>\n                </ng-template>\n              </p-dropdown>\n            </ng-template>\n          </p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center" pSortableColumn="created_at">\n        <div class="flex justify-content-between align-items-center text-center">\n          Data de Cria\xe7\xe3o\n          <p-sortIcon field="created_at"></p-sortIcon>\n          <p-columnFilter type="date" field="created_at" display="menu" class="ml-auto" matchMode="between"\n            display="menu" [showMatchModes]="false" [showOperator]="false" [showAddButton]="false"></p-columnFilter>\n        </div>\n      </th>\n      <th style="width: 8rem"></th>\n    </tr>\n  </ng-template>\n  <ng-template pTemplate="body" let-data>\n    <tr>\n      <td class="text-center">\n        <span class="p-column-title">ID</span>\n        {{data.id}}\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Loja</span>\n        <span class="image-text cursor-pointer">{{data.loja.nome}}</span>\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Cliente</span>\n        <div class="cursor-pointer" (click)="openCliente(data.cliente.id)">\n          <img *ngIf="data.cliente" [src]="data.cliente?.avatar_url || \'assets/imgs/outros/default-user.jpg\'" width="32"\n          height="32" class="mr-1 border-circle border-2 border-primary" style="vertical-align: middle" />\n          <br><br>\n        <span class="image-text">{{data.cliente.nome}}</span>\n        </div>\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Vendedor</span>\n        <div class="cursor-pointer" (click)="openColaborador(data.vendedor.id)">\n          <img *ngIf="data.vendedor" [src]="data.vendedor?.avatar_url || \'assets/imgs/outros/default-user.jpg\'" width="32"\n          height="32" class="mr-1 border-circle border-2 border-primary" style="vertical-align: middle" />\n          <br><br>\n        <span class="image-text">{{data.vendedor.nome}}</span>\n        </div>\n      </td>\n\n      <td class="text-center">\n        {{data.total_pedido | currency:\'BRL\':\'R$\'}}\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Status</span>\n        <span class="font-light py-1 px-3 text-blue-500 bg-blue-100" style="border-radius: 30px;" [ngClass]="{\n          \'PENDENTE_ESTOQUE\' : \'text-pink-500 bg-pink-100\', \n          \'CANCELADO\' : \'text-pink-500 bg-pink-100\', \n          \n          \'PENDENTE_PAGAMENTO\' : \'text-yellow-500 bg-yellow-100\', \n          \'CANCELAMENTO_SOLICITADO\' : \'text-yellow-500 bg-yellow-100\', \n  \n          \'FINALIZADO\' : \'text-green-500 bg-green-100\'\n        }[data.status_pedido]">{{data.status_pedido}}\n        </span>\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Local</span>\n        <div class="text-center" *ngIf="data.from_pdv">\n          <fa-icon class="text-primary text-xs mb-1" [icon]="[\'fas\', \'shop\']"></fa-icon>\n          <br><br>\n          <span>PDV</span>\n        </div>\n        <div class="text-center" *ngIf="!data.from_pdv">\n          <fa-icon class="text-primary text-xs mb-1" [icon]="[\'fas\', \'at\']"></fa-icon>\n          <br><br>\n          <span>E-Commerce</span>\n        </div>\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Data de cria\xe7\xe3o</span>\n        {{data.created_at | date: \'dd/MM/yyyy\'}}\n      </td>\n      <td class="text-center">\n        <button pButton type="button" class="button-primary p-button-outlined" icon="pi pi-external-link"\n          (click)="detail(data)"></button>\n      </td>\n    </tr>\n  </ng-template>\n\n  <ng-template pTemplate="emptymessage">\n    <tr>\n      <td colspan="12">\n        <div class="surface-ground px-4 py-4 md:px-6 lg:px-8 h-full">\n          <div\n            style="background: radial-gradient(50% 109137.91% at 50% 50%, rgba(233, 203, 30, 0.1) 0%, rgba(254, 253, 244, 0) 100%);"\n            class="text-center">\n            <span class="bg-surface-50 text-yellow-500 font-bold text-2xl inline-block px-3">Aten\xe7\xe3o</span>\n          </div>\n          <div class="mt-6 mb-5 font-bold text-6xl text-900 text-center">Nenhum pedido encontrado</div>\n          <p class="text-700 text-3xl mt-0 mb-6 text-center">Experimente trocar os filtros.</p>\n\n        </div>\n      </td>\n    </tr>\n  </ng-template>\n</p-table>',styles:[""]})],E);var Le=n(98373);let D=class{constructor(){}ngOnInit(){}};D.ctorParameters=()=>[],D=(0,i.gn)([(0,d.wA2)({selector:"app-transacoes-detail",template:"<p>\n  transacoes-detail works!\n</p>\n",styles:[""]})],D);var Be=n(54222),q=n(91475),V=n(91391);let S=class{constructor(e,t,a){this.modal=e,this.toastService=t,this.prestacaoServicosService=a,this.showDialog=!0,this.showEnderecoDialog=!1,this.title="Presta\xe7\xe3o de Servi\xe7o",this.subscriptions=new L.w0}ngOnInit(){this.id?this.findById():this.selectedPrestacaoServico&&this.generateEndereco()}ngOnDestroy(){this.subscriptions.unsubscribe()}findById(){const e=this.prestacaoServicosService.findById(this.id).subscribe({next:t=>{this.selectedPrestacaoServico=t,this.generateEndereco()}});this.subscriptions.add(e)}generateEndereco(){const{local:e,agendamento_servico:t,loja:a}=this.selectedPrestacaoServico;if(e==V.sK.LOCAL||e==V.sK.EXTERNO){const o=t?.endereco||a.endereco;this.endereco=o}}close(){this.showDialog=!1,this.modal.dismiss()}dialogSeeEndereco(){this.endereco?this.showEnderecoDialog=!0:this.toastService.presentToast({detalhe:"Sem endere\xe7o adicional cadastrado",titulo:"Aten\xe7\xe3o",duracao:w.m4.shortDuration,gravidade:w.kl.ATENCAO})}closeEndereco(){this.showEnderecoDialog=!1}dialogOpenMap(){const{bairro:e,cep:t,cidade:a,complemento:o,endereco:l,estado:p,numero:v}=this.endereco,T=`https://www.google.com.br/maps/place/${l},+${v},+-+${e},+${a}+-+${p},+${t}`;Be.U.externalLinkHandle(T)}};S.ctorParameters=()=>[{type:u.IN},{type:N.D},{type:q.P}],S.propDecorators={id:[{type:d.IIB}],selectedPrestacaoServico:[{type:d.IIB}]},S=(0,i.gn)([(0,d.wA2)({selector:"app-prestacao-servico-detail",template:'<ion-content appScrollTheme>\n  <ng-container *ngIf="selectedPrestacaoServico">\n    <p-dialog [(visible)]="showDialog" appendTo="body" [modal]="true" [closable]="false" [draggable]="false"\n      [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'60vw\'}">\n      <ng-template pTemplate="header">\n        <div class="flex align-items-center ">\n          <span class="flex align-items-center justify-content-center bg-cyan-100 text-cyan-800 mr-3 border-circle"\n            style="width:32px;height:32px">\n            <i class="pi pi-info text-lg"></i>\n          </span>\n          <span class="font-medium text-2xl text-900">{{ title }}</span>\n        </div>\n\n        <div class="flex align-items-center justify-content-end ml-auto cursor-pointer" (click)="close()">\n          <span\n            class="flex align-items-center justify-content-center bg-pink-100 text-pink-800 border-circle vertical-align-top"\n            style="width:24px;height:24px">\n            <i class="pi pi-times text-sm"></i>\n          </span>\n        </div>\n      </ng-template>\n\n      <ng-template pTemplate="content">\n        <div class="surface-card p-4 shadow-2 border-round">\n          <div class="font-medium text-3xl text-900 mb-3">Detalhamento</div>\n          <div class="text-primary mb-5">{{ selectedPrestacaoServico.id }}</div>\n          <ul class="list-none p-0 m-0 border-top-1 surface-border">\n            <li class="flex align-items-center py-3 px-2 flex-wrap ">\n              <div class="text-500 w-full md:w-2 font-medium">Prestador</div>\n              <div class="text-900 w-full md:w-10">{{ selectedPrestacaoServico.colaborador.nome }}</div>\n            </li>\n            <li class="flex align-items-center py-3 px-2  flex-wrap surface-ground">\n              <div class="text-500 w-full md:w-2 font-medium">Cliente</div>\n              <div class="text-900 w-full md:w-10">{{ selectedPrestacaoServico.cliente.nome }}</div>\n            </li>\n            <li class="flex align-items-center py-3 px-2 flex-wrap ">\n              <div class="text-500 w-full md:w-2 font-medium">Total a ser pago:</div>\n              <div class="text-900 w-full md:w-10">{{ selectedPrestacaoServico.total_devido | currency:\'BRL\':\'\' }}</div>\n            </li>\n            <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n              <div class="text-500 w-full md:w-2 font-medium">Loja faturando</div>\n              <div class="text-900 w-full md:w-10">{{ selectedPrestacaoServico.loja.nome }}</div>\n            </li>\n            <li class="flex align-items-center py-3 px-2 flex-wrap ">\n              <div class="text-500 w-full md:w-2 font-medium">Adicionais</div>\n              <div class="text-900 w-full md:w-10">\n                <p-tag styleClass="mr-2 text-green-500 bg-green-100" [value]="selectedPrestacaoServico.pagamento_forma"\n                  [rounded]="true"></p-tag>\n                <p-tag styleClass="mr-2 text-blue-500 bg-blue-100" [value]="selectedPrestacaoServico.status_servico"\n                  [rounded]="true"></p-tag>\n                <p-tag styleClass="mr-2 text-orange-500 bg-orange-100" [value]="selectedPrestacaoServico.local"\n                  [rounded]="true"></p-tag>\n              </div>\n            </li>\n            <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n              <div class="text-500 w-full md:w-2 font-medium">Detalhe da ordem de servi\xe7o</div>\n              <div class="text-900 w-full md:w-10">\n                <div class="grid mt-0 mr-0">\n                  <div *ngFor="let i of selectedPrestacaoServico.itens_prestacao_servico" class="col-12 md:col-6">\n                    <div class="p-3 border-1 surface-border border-round surface-card">\n                      <div class="text-900 mb-2">\n                        <ion-icon slot="start" icon="business-outline" class="mr-2"></ion-icon>\n                        <span class="font-medium">{{ i.servico.nome }}</span>\n                      </div>\n                      <div class="text-900 mb-2">\n                        <i class="pi pi-tag mr-2"></i>\n                        <span class="font-medium">{{ i.servico.descricao }}</span>\n                      </div>\n                      <div class="surface-200 mb-1 mt-1 " style="height:2px"></div>\n                      <ng-container>\n                        <div class="text-700 mb-1">Valor unit\xe1rio: {{ i.valor_unitario | currency:\'BRL\':\'\' }}</div>\n                        <div class="text-700 mb-1">Quantidade: {{ i.quantidade }}</div>\n                        <div class="text-700">Sub total: {{ i.sub_total | currency:\'BRL\':\'\' }}</div>\n                      </ng-container>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </li>\n            <li class="flex align-items-center py-3 px-2 flex-wrap ">\n              <div class="text-500 w-full md:w-2 font-medium">Resumo da ordem de servi\xe7o</div>\n              <div class="text-900 w-full md:w-10">\n                <div class="grid mt-0 mr-0">\n                  <div class="col-12 md:col-6">\n                    <div class="p-3 border-1 surface-border border-round surface-card">\n                      <ng-container>\n                        <div class="text-700 mb-1">Total do servi\xe7o: {{ selectedPrestacaoServico.total_servico |\n                          currency:\'BRL\':\'\' }}</div>\n                        <div class="text-700 mb-1">Acr\xe9scimo/Desconto: {{ selectedPrestacaoServico.acrescimo_desconto |\n                          currency:\'BRL\':\'\' }}</div>\n                        <div class="text-700">Total a ser pago: {{ selectedPrestacaoServico.total_devido |\n                          currency:\'BRL\':\'\' }}</div>\n                      </ng-container>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </li>\n            <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n              <div class="text-500 w-full md:w-2 font-medium ">Justificativa (desconto/acr\xe9scimo)</div>\n              <div class="text-900 w-full md:w-10">{{ selectedPrestacaoServico.descricao || \'N.A\' }}</div>\n            </li>\n          </ul>\n        </div>\n      </ng-template>\n\n      <ng-template pTemplate="footer">\n        <div class="mt-2">\n          <button class="" type="button" pButton pRipple icon="pi pi-external-link" iconPos="right"\n            (click)="dialogSeeEndereco()" label="Ver endere\xe7o"></button>\n        </div>\n      </ng-template>\n    </p-dialog>\n\n    <p-dialog *ngIf="endereco" [(visible)]="showEnderecoDialog" appendTo="body" [modal]="true" [closable]="false"\n      [draggable]="false" [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\'}">\n      <ng-template pTemplate="header">\n        <div class="flex align-items-center ">\n          <span class="flex align-items-center justify-content-center bg-cyan-100 text-cyan-800 mr-3 border-circle"\n            style="width:32px;height:32px">\n            <i class="pi pi-info text-lg"></i>\n          </span>\n          <span class="font-medium text-2xl text-900">{{ title }}</span>\n        </div>\n\n        <div class="flex align-items-center justify-content-end ml-auto cursor-pointer" (click)="closeEndereco()">\n          <span\n            class="flex align-items-center justify-content-center bg-pink-100 text-pink-800 border-circle vertical-align-top"\n            style="width:24px;height:24px">\n            <i class="pi pi-times text-sm"></i>\n          </span>\n        </div>\n      </ng-template>\n      <div class="grid">\n        <div class="text-900 font-medium text-xl mt-2 mb-3">Endere\xe7o</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid">\n          <div class="grid formgrid p-fluid">\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="company_name" class="font-medium text-900">CEP</label>\n              <input readonly id="company_name" type="text" pInputText [value]="endereco.cep">\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="invoice_id" class="font-medium text-900">Cidade</label>\n              <input readonly id="invoice_id" type="text" pInputText [value]="endereco.cidade">\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="customer_name" class="font-medium text-900">Estado</label>\n              <input readonly id="customer_name" type="text" pInputText [value]="endereco.estado">\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="customer_email" class="font-medium text-900">N\xfamero</label>\n              <input readonly id="customer_email" type="text" pInputText [value]="endereco.numero">\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="customer_email" class="font-medium text-900">Endere\xe7o</label>\n              <input readonly id="customer_email" type="text" pInputText [value]="endereco.endereco">\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="customer_email" class="font-medium text-900">Complemento</label>\n              <input readonly id="customer_email" type="text" pInputText [value]="endereco.complemento">\n            </div>\n          </div>\n        </div>\n      </div>\n      <ng-template pTemplate="footer">\n        <div class="flex justify-content-end">\n          <button type="button" pButton pRipple icon="pi pi-globe" iconPos="right" (click)="dialogOpenMap()"\n            label="Maps"></button>\n        </div>\n      </ng-template>\n    </p-dialog>\n  </ng-container>\n\n  <ng-container *ngIf="!selectedPrestacaoServico">\n    <app-attention-surface title=\'Inv\xe1lido\' subtitle=\'Associa\xe7\xe3o com presta\xe7\xe3o de servi\xe7o inv\xe1lida\'\n      message=\'N\xe3o foi poss\xedvel associar no ato de finaliza\xe7\xe3o da presta\xe7\xe3o de servi\xe7o, a transa\xe7\xe3o\'>\n    </app-attention-surface>\n\n  </ng-container>\n</ion-content>\n\n<ion-footer *ngIf="!selectedPrestacaoServico">\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="close()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],S);var U=n(7689),Re=n(55583),Fe=n(40199);let z=class{constructor(e){this.http=e}list(e,t=new Fe.k){let a=Re.t.getPageOptionsParams(t);return e&&(e.created_at&&(a=a.append("created_at",e.created_at.toDateString())),e.loja_id&&(a=a.append("loja_id",e.loja_id)),e.cliente_id&&(a=a.append("cliente_id",e.cliente_id)),e.max_valor_transacao&&(a=a.append("max_valor_transacao",e.max_valor_transacao)),e.solicitante_id&&(a=a.append("solicitante_id",e.solicitante_id)),e.tipo_cash&&(a=a.append("tipo_cash",e.tipo_cash)),e.tipo_transacao&&(a=a.append("tipo_transacao",e.tipo_transacao)),e.searchedCliente&&(a=a.append("searchedCliente",e.searchedCliente)),e.searchedLoja&&(a=a.append("searchedLoja",e.searchedLoja)),e.searchedSolicitante&&(a=a.append("searchedSolicitante",e.searchedSolicitante)),e.searchedTransacao&&(a=a.append("searchedTransacao",e.searchedTransacao))),this.http.get(`${k.Hz.baseURL}/financeiro/transacoes/list`,{responseType:"json",params:a})}findById(e){return this.http.get(`${k.Hz.baseURL}/financeiro/transacoes/${e}`,{responseType:"json"})}};z.ctorParameters=()=>[{type:K.eN}],z=(0,i.gn)([(0,d.GSi)({providedIn:"root"})],z);let I=class{constructor(e,t,a,o,l,p,v){this.transacoesService=e,this.modal=t,this.toastService=a,this.router=o,this.lojaService=l,this.userService=p,this.filesService=v,this.searchedTransacao="",this.sortLojas=[],this.sortTipoCash=[],this.sortTipoTransacao=[],this.currentPage=1,this.pageOrder=P.L.DESC,this.currentTake=5,this.min_total=0,this.max_total=0,this.selectedTransacoes=[],this.subscriptions=new L.w0}ngOnInit(){this.sortTipoCash=[...U._2],this.sortTipoTransacao=[...U.$X],this.cols=[{field:"id",header:"ID"},{field:"loja.nome",header:"Loja"},{field:"cliente.nome",header:"Cliente"},{field:"solicitante.nome",header:"Solicitante"},{field:"valor_transacao",header:"Valor da Transa\xe7\xe3o"},{field:"tipo_cash",header:"Tipo financeiro"},{field:"tipo_transacao",header:"Tipo de Transa\xe7\xe3o"},{field:"id_associado",header:"ID Associado"},{field:"created_at",header:"Data de Cria\xe7\xe3o"}],this.exportColumns=this.cols.map(e=>({title:e.header,dataKey:e.field})),this.loadTransacoes()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadTransacoes(e=1,t){const a=this.transacoesService.list({searchedSolicitante:this.searchedSolicitante,searchedCliente:this.searchedCliente,searchedLoja:this.searchedLoja,searchedTransacao:this.searchedTransacao,min_valor_transacao:Number(this.min_total),max_valor_transacao:Number(this.max_total),created_at:this.selectedDate,tipo_cash:this.selectedTipoCash,tipo_transacao:this.selectedTipoTransacao},{order:this.pageOrder,page:e,take:this.currentTake}).subscribe(o=>{this.transacoes=o},()=>{},()=>{t&&(t.paginator=!0)});this.subscriptions.add(a)}paginar(e,t){t.paginator=!1;const{first:a,rows:o,sortOrder:l}=e,p=Number(Number(a)/Number(o)+1);this.doFilter(e),this.currentPage=p,this.currentTake=o,this.pageOrder=l&&1==l?P.L.DESC:P.L.ASC,this.loadTransacoes(p,t)}doFilter(e){if(!e||!e.filters||!e.filters.id)return;const{id:t,cliente:a,solicitante:o,created_at:l,loja:p,tipo_cash:v,tipo_transacao:T}=e.filters;this.min_total>this.max_total&&(this.max_total=void 0),t[0].value?this.searchedTransacao=t[0].value:this.searchedTransacao=void 0,a[0].value?this.searchedCliente=a[0].value:this.searchedCliente=void 0,o[0].value?this.searchedSolicitante=o[0].value:this.searchedSolicitante=void 0,v[0].value?this.selectedTipoCash=v[0].value:this.selectedTipoCash=void 0,T[0].value?this.selectedTipoTransacao=T[0].value:this.selectedTipoTransacao=void 0,l[0].value?this.selectedDate=l[0].value:this.selectedDate=void 0,p[0].value?this.searchedLoja=p[0].value:this.searchedLoja=void 0}clearTotal(){this.min_total=void 0,this.max_total=void 0,this.loadTransacoes(1)}exportPdf(){var e=this;return(0,_.Z)(function*(){const t=`Transa\xe7\xf5es - ${(new Date).toLocaleDateString()}`,a=e.cols.map(l=>l.header),o=e.convertTransacaoData().map(Object.values);yield e.filesService.exportPdf(t,a,o)})()}exportExcel(){var e=this;return(0,_.Z)(function*(){const t=`Transa\xe7\xf5es - ${(new Date).toLocaleDateString()}`;yield e.filesService.exportExcel(t,e.convertTransacaoData())})()}exportCsv(){var e=this;return(0,_.Z)(function*(){const t=`Transa\xe7\xf5es - ${(new Date).toLocaleDateString()}`;yield e.filesService.exportCSV(t,e.convertTransacaoData())})()}detail(e){const{tipo_transacao:t}=e;switch(t){case U.KO.PRODUTO:this.showModal(Y.z,{id:e.pedido?.id||void 0});break;case U.KO.SERVICO:this.showModal(S,{id:e.prestacao_servico?.id||void 0},"");break;default:this.toastService.presentToast({detalhe:`Detalhamento ainda n\xe3o dispon\xedvel para ${t}`,titulo:"Indispon\xedvel",duracao:w.m4.shortDuration,gravidade:w.kl.ATENCAO})}}openColaborador(e){this.showModal(H.E,{user_id:e})}openCliente(e){}convertTransacaoData(){return this.transacoes.data.map(t=>({id:t.id,loja:t.loja.nome,cliente:t.cliente?.nome||"N\xe3o registrado",solicitante:t.solicitante.nome,valor_transacao:`R$ ${Number(t.valor_transacao).toFixed(2)}`,tipo_financeiro:t.tipo_cash,tipo_transacao:t.tipo_transacao,id_associado:t.pedido?.id||t.prestacao_servico?.id||"Nenhum ID associado",data_criacao:new Date(t.created_at).toLocaleString()}))}showModal(e,t,a="modal-size-100"){var o=this;return(0,_.Z)(function*(){const l=yield o.modal.create({component:e,backdropDismiss:!1,cssClass:a,componentProps:t});return l.onDidDismiss().then(p=>{const{data:v,role:T}=p}),yield l.present()})()}};I.ctorParameters=()=>[{type:z},{type:u.IN},{type:N.D},{type:m.F0},{type:B.W},{type:F.K},{type:W.n}],I=(0,i.gn)([(0,d.wA2)({selector:"app-transacoes-main",template:'<p-table *ngIf="transacoes" #dt [(selection)]="selectedTransacoes" dataKey="id" [rowHover]="true"\n  [showCurrentPageReport]="true" [filterDelay]="2" [rowsPerPageOptions]="[5,10,25,50,100,250,500,1000]"\n  [globalFilterFields]="[\'nome\',\'cliente.nome\', \'vendedor.nome\', \'status\']"\n  currentPageReportTemplate="Mostrando {first} at\xe9 {last} de {totalRecords} entradas" [lazy]="true"\n  [value]="transacoes.data" [paginator]="true" [rows]="transacoes.meta.take" [totalRecords]="transacoes.meta.itemCount"\n  [pageLinks]="transacoes.meta.pageCount" (onLazyLoad)="paginar($event, dt)" responsiveLayout="scroll">\n  <ng-template pTemplate="caption">\n    <div class="grid flex">\n\n      <div class="table-header text-primary col-6">\n        Lista de Transa\xe7\xf5es\n      </div>\n\n      <div class="col-6 justify-content-end text-right">\n        <button type="button" pButton pRipple icon="pi pi-file-o" (click)="exportCsv()" class="p-button-help mr-2"\n          pTooltip="CSV" tooltipPosition="bottom"></button>\n\n        <button type="button" pButton pRipple icon="pi pi-file-excel" (click)="exportExcel()"\n          class="p-button-success mr-2" pTooltip="XLS" tooltipPosition="bottom"></button>\n\n        <button type="button" pButton pRipple icon="pi pi-file-pdf" (click)="exportPdf()" class="p-button-danger mr-2"\n          pTooltip="PDF" tooltipPosition="bottom"></button>\n      </div>\n\n    </div>\n  </ng-template>\n  <ng-template pTemplate="header">\n    <tr>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          ID\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text" field="id"\n            [pSortableColumnDisabled]="true" class="ml-auto" display="menu"></p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Loja\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n            field="loja" display="menu" class="ml-auto"></p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Cliente\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n            field="cliente" display="menu" class="ml-auto"></p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Solicitante\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n            field="solicitante" display="menu" class="ml-auto"></p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Valor da Transa\xe7\xe3o\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="numeric"\n            field="total_pedido" display="menu" currency="BRL" class="ml-auto" [showClearButton]="false">\n            <ng-template pTemplate="filter" let-value let-filter="filterCallback">\n              <div class="grid  justify-content-between">\n                <div class="field col-6 text-center">\n                  <label for="minmax-buttons">M\xednimo (R$)</label>\n                  <p-inputNumber mode="decimal" [showButtons]="true" buttonLayout="vertical" spinnerMode="vertical"\n                    inputId="vertical" decrementButtonClass="button-secondary" incrementButtonClass="button-secondary"\n                    incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus" [min]="0" [(ngModel)]="min_total"\n                    [minFractionDigits]="2" [maxFractionDigits]="2">\n                  </p-inputNumber>\n                </div>\n\n                <div class="field  col-6 text-center">\n                  <label for="minmax-buttons">Max (R$)</label>\n                  <p-inputNumber mode="decimal" [showButtons]="true" buttonLayout="vertical" spinnerMode="vertical"\n                    inputId="vertical" decrementButtonClass="button-secondary" incrementButtonClass="button-secondary"\n                    incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus" [min]="min_total"\n                    [(ngModel)]="max_total" [minFractionDigits]="2" [maxFractionDigits]="2">\n                  </p-inputNumber>\n                </div>\n              </div>\n              <div>\n                <button pButton type="button" class="button-primary p-button-outlined w-full" label="Limpar"\n                  (click)="clearTotal()"></button>\n              </div>\n            </ng-template>\n          </p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Tipo financeiro\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" field="tipo_cash"\n            matchMode="equals" display="menu" class="ml-auto">\n            <ng-template pTemplate="filter" let-value let-filter="filterCallback">\n              <p-dropdown [ngModel]="value" [options]="sortTipoCash" (onChange)="filter($event.value)"\n                placeholder="Tipo financeiro">\n                <ng-template let-option pTemplate="item">\n                  <span class="font-light py-1 px-3 text-green-500 hover:bg-green-100" style="border-radius: 30px;"\n                    [ngClass]="{\n                      \'CASH_OUT\' : \'text-pink-500 hover:bg-pink-100\'\n                    }[option.value]">{{option.label}}</span>\n                </ng-template>\n              </p-dropdown>\n            </ng-template>\n          </p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Tipo de Transa\xe7\xe3o\n          <p-columnFilter field="tipo_transacao" matchMode="between" display="menu" [showMatchModes]="false"\n            [showOperator]="false" [showAddButton]="false" class="ml-auto">\n            <ng-template pTemplate="filter" let-value let-filter="filterCallback">\n              <p-dropdown [ngModel]="value" [options]="sortTipoTransacao" (onChange)="filter($event.value)"\n                placeholder="Local">\n                <ng-template let-option pTemplate="item">\n                  <div class="mb-2">\n                    <span class="font-light px-2 " style="border-radius: 30px;">{{option.label}}</span>\n                  </div>\n                </ng-template>\n              </p-dropdown>\n            </ng-template>\n          </p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center" pSortableColumn="created_at">\n        <div class="flex justify-content-between align-items-center text-center">\n          Data de Cria\xe7\xe3o\n          <p-sortIcon field="created_at"></p-sortIcon>\n          <p-columnFilter type="date" field="created_at" display="menu" class="ml-auto" matchMode="between"\n            display="menu" [showMatchModes]="false" [showOperator]="false" [showAddButton]="false"></p-columnFilter>\n        </div>\n      </th>\n      <th style="width: 8rem"></th>\n    </tr>\n  </ng-template>\n  <ng-template pTemplate="body" let-data>\n    <tr>\n      <td class="text-center">\n        <span class="p-column-title">ID</span>\n        {{ data.id }}\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Loja</span>\n        <span class="image-text cursor-pointer">{{ data.loja.nome }}</span>\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Cliente</span>\n        <div class="cursor-pointer" (click)="openCliente(data.cliente.id)">\n          <img *ngIf="data.cliente" [src]="data.cliente?.avatar_url || \'assets/imgs/outros/default-user.jpg\'" width="32"\n            height="32" class="mr-1 border-circle border-2 border-primary" style="vertical-align: middle" />\n          <br><br>\n          <span class="image-text">{{ data.cliente?.nome || \'N\xe3o registrado\' }}</span>\n        </div>\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Solicitante</span>\n        <div class="cursor-pointer" (click)="openColaborador(data.solicitante.id)">\n          <img *ngIf="data.solicitante" [src]="data.solicitante?.avatar_url || \'assets/imgs/outros/default-user.jpg\'"\n            width="32" height="32" class="mr-1 border-circle border-2 border-primary" style="vertical-align: middle" />\n          <br><br>\n          <span class="image-text">{{ data.solicitante.nome }}</span>\n        </div>\n      </td>\n\n      <td class="text-center">\n        {{data.valor_transacao | currency:\'BRL\':\'R$\'}}\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Tipo Financeiro</span>\n        <span class="font-light py-1 px-3 text-green-500 bg-green-100" style="border-radius: 30px;" [ngClass]="{\n          \'CASH_OUT\' : \'text-pink-500 bg-pink-100\'\n        }[data.tipo_cash]">{{data.tipo_cash}}\n        </span>\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Tipo Transa\xe7\xe3o</span>\n        <div class="text-center">\n          <span class="font-light py-1 px-3 text-blue-500 bg-blue-100" style="border-radius: 30px;">{{\n            data.tipo_transacao }}</span>\n        </div>\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Data de cria\xe7\xe3o</span>\n        {{data.created_at | date: \'dd/MM/yyyy\'}}\n      </td>\n      <td class="text-center">\n        <button pButton type="button" class="button-primary p-button-outlined" icon="pi pi-external-link"\n          (click)="detail(data)"></button>\n      </td>\n    </tr>\n  </ng-template>\n\n  <ng-template pTemplate="emptymessage">\n    <tr>\n      <td colspan="12">\n        <div class="surface-ground px-4 py-4 md:px-6 lg:px-8 h-full">\n          <div\n            style="background: radial-gradient(50% 109137.91% at 50% 50%, rgba(233, 203, 30, 0.1) 0%, rgba(254, 253, 244, 0) 100%);"\n            class="text-center">\n            <span class="bg-surface-50 text-yellow-500 font-bold text-2xl inline-block px-3">Aten\xe7\xe3o</span>\n          </div>\n          <div class="mt-6 mb-5 font-bold text-6xl text-900 text-center">Nenhuma transa\xe7\xe3o encontrada</div>\n          <p class="text-700 text-3xl mt-0 mb-6 text-center">Experimente trocar os filtros.</p>\n\n        </div>\n      </td>\n    </tr>\n  </ng-template>\n</p-table>',styles:[""]})],I);var Ue=n(54692);let A=class{constructor(e,t,a,o,l,p,v){this.prestacaoServicosService=e,this.modal=t,this.toastService=a,this.router=o,this.lojaService=l,this.userService=p,this.filesService=v,this.searchedPrestacaoServico="",this.sortLojas=[],this.sortStatus=[],this.sortLocais=[],this.currentPage=1,this.pageOrder=P.L.DESC,this.currentTake=5,this.min_total=0,this.max_total=0,this.selectedPedidos=[],this.subscriptions=new L.w0}ngOnInit(){this.sortStatus=[...Ue.Ti],this.sortLocais=[...V.r2],this.cols=[{field:"id",header:"ID"},{field:"loja.nome",header:"Loja"},{field:"cliente.nome",header:"Cliente"},{field:"colaborador.nome",header:"Colaborador"},{field:"total_devido",header:"Total do Servi\xe7o"},{field:"status_servico",header:"Status"},{field:"local",header:"Local"},{field:"created_at",header:"Data de Cria\xe7\xe3o"}],this.exportColumns=this.cols.map(e=>({title:e.header,dataKey:e.field})),this.loadPrestacoesServico()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPrestacoesServico(e=1,t){const a=this.prestacaoServicosService.list({searchedPrestacaoServico:this.searchedPrestacaoServico,searchedLoja:this.searchedLoja,status_servico:this.selectedStatus,searchedCliente:this.searchedCliente,searchedColaborador:this.searchedColaborador,min_total:Number(this.min_total),max_total:Number(this.max_total),created_at:this.selectedDate,local:this.selectedLocal},{order:this.pageOrder,page:e,take:this.currentTake}).subscribe(o=>{this.prestacoesServico=o},()=>{},()=>{t&&(t.paginator=!0)});this.subscriptions.add(a)}paginar(e,t){t.paginator=!1;const{first:a,rows:o,sortOrder:l}=e,p=Number(Number(a)/Number(o)+1);this.doFilter(e),this.currentPage=p,this.currentTake=o,this.pageOrder=l&&1==l?P.L.DESC:P.L.ASC,this.loadPrestacoesServico(p,t)}doFilter(e){if(!e||!e.filters||!e.filters.id)return;const{id:t,cliente:a,colaborador:o,created_at:l,loja:p,status:v,local:T}=e.filters;this.min_total>this.max_total&&(this.max_total=void 0),t[0].value?this.searchedPrestacaoServico=t[0].value:this.searchedPrestacaoServico=void 0,a[0].value?this.searchedCliente=a[0].value:this.searchedCliente=void 0,o[0].value?this.searchedColaborador=o[0].value:this.searchedColaborador=void 0,v[0].value?this.selectedStatus=v[0].value:this.selectedStatus=void 0,T[0].value?this.selectedLocal=T[0].value:this.selectedLocal=void 0,l[0].value?this.selectedDate=l[0].value:this.selectedDate=void 0,p[0].value?this.searchedLoja=p[0].value:this.searchedLoja=void 0}clearTotal(){this.min_total=void 0,this.max_total=void 0,this.loadPrestacoesServico(1)}exportPdf(){var e=this;return(0,_.Z)(function*(){const t=`Pedidos - ${(new Date).toLocaleDateString()}`,a=e.cols.map(l=>l.header),o=e.convertPrestacaoServicoData().map(Object.values);yield e.filesService.exportPdf(t,a,o)})()}exportExcel(){var e=this;return(0,_.Z)(function*(){const t=`Pedidos - ${(new Date).toLocaleDateString()}`;yield e.filesService.exportExcel(t,e.convertPrestacaoServicoData())})()}exportCsv(){var e=this;return(0,_.Z)(function*(){const t=`Pedidos - ${(new Date).toLocaleDateString()}`;yield e.filesService.exportCSV(t,e.convertPrestacaoServicoData())})()}detail(e){this.showModal(S,{selectedPrestacaoServico:e})}openColaborador(e){this.showModal(H.E,{user_id:e})}openCliente(e){}convertPrestacaoServicoData(){return this.prestacoesServico.data.map(t=>({id:t.id,loja:t.loja.nome,cliente:t.cliente.nome,colaborador:t.colaborador.nome,total_prestacao:`R$ ${Number(t.total_devido).toFixed(2)}`,status:t.status_servico,local:t.local,data_criacao:new Date(t.created_at).toLocaleString()}))}showModal(e,t){var a=this;return(0,_.Z)(function*(){const o=yield a.modal.create({component:e,backdropDismiss:!1,componentProps:t});return o.onDidDismiss().then(l=>{const{data:p,role:v}=l;p&&(a.loadPrestacoesServico(a.currentPage),a.toastService.presentToast({detalhe:"Opera\xe7\xe3o bem sucedida!",titulo:"Sucesso!",duracao:w.m4.mediumDuration,gravidade:w.kl.SUCESSO}))}),yield o.present()})()}};A.ctorParameters=()=>[{type:q.P},{type:u.IN},{type:N.D},{type:m.F0},{type:B.W},{type:F.K},{type:W.n}],A=(0,i.gn)([(0,d.wA2)({selector:"app-prestacao-servico-main",template:'<p-table *ngIf="prestacoesServico" #dt [(selection)]="selectedPrestacoesServico" dataKey="id" [rowHover]="true"\n  [showCurrentPageReport]="true" [filterDelay]="2" [rowsPerPageOptions]="[5,10,25,50,100,250,500,1000]"\n  [globalFilterFields]="[\'nome\',\'cliente.nome\', \'vendedor.nome\', \'status\']"\n  currentPageReportTemplate="Mostrando {first} at\xe9 {last} de {totalRecords} entradas" [lazy]="true"\n  [value]="prestacoesServico.data" [paginator]="true" [rows]="prestacoesServico.meta.take"\n  [totalRecords]="prestacoesServico.meta.itemCount" [pageLinks]="prestacoesServico.meta.pageCount"\n  (onLazyLoad)="paginar($event, dt)" responsiveLayout="scroll">\n  <ng-template pTemplate="caption">\n    <div class="grid flex">\n\n      <div class="table-header text-primary col-6">\n        Lista de Presta\xe7\xf5es\n      </div>\n\n      <div class="col-6 justify-content-end text-right">\n        <button type="button" pButton pRipple icon="pi pi-file-o" (click)="exportCsv()" class="p-button-help mr-2"\n          pTooltip="CSV" tooltipPosition="bottom"></button>\n\n        <button type="button" pButton pRipple icon="pi pi-file-excel" (click)="exportExcel()"\n          class="p-button-success mr-2" pTooltip="XLS" tooltipPosition="bottom"></button>\n\n        <button type="button" pButton pRipple icon="pi pi-file-pdf" (click)="exportPdf()" class="p-button-danger mr-2"\n          pTooltip="PDF" tooltipPosition="bottom"></button>\n      </div>\n\n    </div>\n  </ng-template>\n  <ng-template pTemplate="header">\n    <tr>\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          ID\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text" field="id"\n            [pSortableColumnDisabled]="true" class="ml-auto" display="menu"></p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Loja\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n            field="loja" display="menu" class="ml-auto"></p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Cliente\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n            field="cliente" display="menu" class="ml-auto"></p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Colaborador\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n            field="colaborador" display="menu" class="ml-auto"></p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Total da Presta\xe7\xe3o\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="numeric"\n            field="total_devido" display="menu" currency="BRL" class="ml-auto" [showClearButton]="false">\n            <ng-template pTemplate="filter" let-value let-filter="filterCallback">\n              <div class="grid  justify-content-between">\n                <div class="field col-6 text-center">\n                  <label for="minmax-buttons">M\xednimo (R$)</label>\n                  <p-inputNumber mode="decimal" [showButtons]="true" buttonLayout="vertical" spinnerMode="vertical"\n                    inputId="vertical" decrementButtonClass="button-secondary" incrementButtonClass="button-secondary"\n                    incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus" [min]="0" [(ngModel)]="min_total"\n                    [minFractionDigits]="2" [maxFractionDigits]="2">\n                  </p-inputNumber>\n                </div>\n\n                <div class="field  col-6 text-center">\n                  <label for="minmax-buttons">Max (R$)</label>\n                  <p-inputNumber mode="decimal" [showButtons]="true" buttonLayout="vertical" spinnerMode="vertical"\n                    inputId="vertical" decrementButtonClass="button-secondary" incrementButtonClass="button-secondary"\n                    incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus" [min]="min_total"\n                    [(ngModel)]="max_total" [minFractionDigits]="2" [maxFractionDigits]="2">\n                  </p-inputNumber>\n                </div>\n              </div>\n              <div>\n                <button pButton type="button" class="button-primary p-button-outlined w-full" label="Limpar"\n                  (click)="clearTotal()"></button>\n              </div>\n            </ng-template>\n          </p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Status\n          <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" field="status"\n            matchMode="equals" display="menu" class="ml-auto">\n            <ng-template pTemplate="filter" let-value let-filter="filterCallback">\n              <p-dropdown [ngModel]="value" [options]="sortStatus" (onChange)="filter($event.value)"\n                placeholder="Status">\n                <ng-template let-option pTemplate="item">\n                  <span class="font-light py-1 px-3 text-blue-500 bg-blue-100 hover:bg-blue-100" style="border-radius: 30px;"\n                    [ngClass]="{\n                      \'CANCELADO\' : \'text-pink-500 bg-pink-100\', \n                      \'INICIADO\' : \'text-yellow-500 bg-yellow-100\', \n                      \'FINALIZADO\' : \'text-green-500 bg-green-100\'\n                    }[option.value]">{{option.label}}</span>\n                </ng-template>\n              </p-dropdown>\n            </ng-template>\n          </p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center">\n        <div class="flex justify-content-between align-items-center">\n          Local\n          <p-columnFilter field="local" matchMode="between" display="menu" [showMatchModes]="false"\n            [showOperator]="false" [showAddButton]="false" class="ml-auto">\n            <ng-template pTemplate="filter" let-value let-filter="filterCallback">\n              <p-dropdown [ngModel]="value" [options]="sortLocais" (onChange)="filter($event.value)"\n                placeholder="Local">\n                <ng-template let-option pTemplate="item">\n                  <div class="mb-2">\n                    <span class="font-light px-2 " style="border-radius: 30px;">{{option.label}}</span>\n                  </div>\n                </ng-template>\n              </p-dropdown>\n            </ng-template>\n          </p-columnFilter>\n        </div>\n      </th>\n\n      <th class="text-center" pSortableColumn="created_at">\n        <div class="flex justify-content-between align-items-center text-center">\n          Data de Cria\xe7\xe3o\n          <p-sortIcon field="created_at"></p-sortIcon>\n          <p-columnFilter type="date" field="created_at" display="menu" class="ml-auto" matchMode="between"\n            display="menu" [showMatchModes]="false" [showOperator]="false" [showAddButton]="false"></p-columnFilter>\n        </div>\n      </th>\n      <th style="width: 8rem"></th>\n    </tr>\n  </ng-template>\n  <ng-template pTemplate="body" let-data>\n    <tr>\n      <td class="text-center">\n        <span class="p-column-title">ID</span>\n        {{data.id}}\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Loja</span>\n        <span class="image-text cursor-pointer">{{data.loja.nome}}</span>\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Cliente</span>\n        <div class="cursor-pointer" (click)="openCliente(data.cliente.id)">\n          <img *ngIf="data.cliente" [src]="data.cliente?.avatar_url || \'assets/imgs/outros/default-user.jpg\'" width="32"\n            height="32" class="mr-1 border-circle border-2 border-primary" style="vertical-align: middle" />\n          <br><br>\n          <span class="image-text">{{data.cliente.nome}}</span>\n        </div>\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Colaborador</span>\n        <div class="cursor-pointer" (click)="openColaborador(data.colaborador.id)">\n          <img *ngIf="data.vendedor" [src]="data.colaborador?.avatar_url || \'assets/imgs/outros/default-user.jpg\'"\n            width="32" height="32" class="mr-1 border-circle border-2 border-primary" style="vertical-align: middle" />\n          <br><br>\n          <span class="image-text">{{data.colaborador.nome}}</span>\n        </div>\n      </td>\n\n      <td class="text-center">\n        {{data.total_devido | currency:\'BRL\':\'R$\'}}\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Status</span>\n        <span class="font-light py-1 px-3 text-blue-500 bg-blue-100" style="border-radius: 30px;" [ngClass]="{\n          \'CANCELADO\' : \'text-pink-500 bg-pink-100\', \n          \'INICIADO\' : \'text-yellow-500 bg-yellow-100\', \n          \'FINALIZADO\' : \'text-green-500 bg-green-100\'\n        }[data.status_servico]">{{data.status_servico}}\n        </span>\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Local</span>\n        <span class="font-light py-1 px-3 text-blue-500 bg-blue-100" style="border-radius: 30px;">{{data.local}}</span>\n      </td>\n\n      <td class="text-center">\n        <span class="p-column-title">Data de cria\xe7\xe3o</span>\n        {{data.created_at | date: \'dd/MM/yyyy\'}}\n      </td>\n      <td class="text-center">\n        <button pButton type="button" class="button-primary p-button-outlined" icon="pi pi-external-link"\n          (click)="detail(data)"></button>\n      </td>\n    </tr>\n  </ng-template>\n\n  <ng-template pTemplate="emptymessage">\n    <tr>\n      <td colspan="12">\n        <div class="surface-ground px-4 py-4 md:px-6 lg:px-8 h-full">\n          <div\n            style="background: radial-gradient(50% 109137.91% at 50% 50%, rgba(233, 203, 30, 0.1) 0%, rgba(254, 253, 244, 0) 100%);"\n            class="text-center">\n            <span class="bg-surface-50 text-yellow-500 font-bold text-2xl inline-block px-3">Aten\xe7\xe3o</span>\n          </div>\n          <div class="mt-6 mb-5 font-bold text-6xl text-900 text-center">Nenhuma presta\xe7\xe3o encontrada</div>\n          <p class="text-700 text-3xl mt-0 mb-6 text-center">Experimente trocar os filtros.</p>\n\n        </div>\n      </td>\n    </tr>\n  </ng-template>\n</p-table>',styles:[""]})],A);var ze=n(91670),Ke=n(83229),ee=n(91746);let Z=class{};Z=(0,i.gn)([(0,d.LVF)({declarations:[M,E,D,I,A,S],imports:[C.ez,g.u5,g.UX,u.Pc,te.uH,ne.FI,ae.Q,ie.kW,le.LU,se.j,oe.hJ,ge.JH,re.O,J.zz,Q.L$,J.zz,X._8,Q.L$,ce.cc,de.q,pe.gz,ue.Iu,me.U$,he.D,ve.S,fe.A,be.nD,X._8,Le.L,r.o,ze.A,Ke.E,ee.J],exports:[M,E,D,I,A,S,ee.J]})],Z);let G=class{};G=(0,i.gn)([(0,d.LVF)({imports:[C.ez,g.u5,u.Pc,f,Z,r.o],declarations:[c]})],G)},91391:(O,y,n)=>{var i,u,d;n.d(y,{CZ:()=>i,Vl:()=>C,r2:()=>g,sK:()=>d}),(u=i||(i={})).PESSOAL="Compromisso Pessoal",u.EVENTO="Evento",u.SERVICO="Servi\xe7o",function(u){u.LOCAL="Local",u.EXTERNO="Externo",u.REMOTO="Remoto"}(d||(d={}));const C=[{label:i.EVENTO,value:i.EVENTO},{label:i.PESSOAL,value:i.PESSOAL},{label:i.SERVICO,value:i.SERVICO}],g=[{label:"Local",value:d.LOCAL},{label:"Externo",value:d.EXTERNO},{label:"Remoto",value:d.REMOTO}]},18063:(O,y,n)=>{n.d(y,{B:()=>h});var i=n(70655),d=n(80529),C=n(98274),g=n(99038),u=n(55583),m=n(40199);let h=class{constructor(c){this.http=c}list(c=new m.k){let s=u.t.getPageOptionsParams(c);return this.http.get(`${g.Hz.baseURL}/despesas`,{responseType:"json",params:s})}create(c){return this.http.post(`${g.Hz.baseURL}/despesas`,c,{responseType:"json"})}update(c,s){return this.http.put(`${g.Hz.baseURL}/despesas/${s}`,c,{responseType:"json"})}};h.ctorParameters=()=>[{type:d.eN}],h=(0,i.gn)([(0,C.GSi)({providedIn:"root"})],h)},32307:(O,y,n)=>{n.d(y,{c:()=>h});var i=n(70655),d=n(80529),C=n(98274),g=n(40199),u=n(55583),m=n(99038);let h=class{constructor(c){this.http=c}list(c,s=new g.k){let f=u.t.getPageOptionsParams(s);return c&&(c.descricao&&(f=f.append("descricao",c.descricao)),c.nome&&(f=f.append("nome",c.nome)),c.searchedTipoOperacao&&(f=f.append("searchedTipoOperacao",c.searchedTipoOperacao))),this.http.get(`${m.Hz.baseURL}/tipo-operacoes-saida`,{responseType:"json",params:f})}findById(c){return this.http.get(`${m.Hz.baseURL}/tipo-operacoes-saida/${c}`,{responseType:"json"})}};h.ctorParameters=()=>[{type:d.eN}],h=(0,i.gn)([(0,C.GSi)({providedIn:"root"})],h)},91475:(O,y,n)=>{n.d(y,{P:()=>x});var i=n(70655),d=n(80529),C=n(98274),g=n(40199),u=n(55583),m=n(99038),h=n(94203);let x=class{constructor(s){this.http=s}createFinalized(s){return this.http.post(`${m.Hz.baseURL}/prestacao/servicos/finalized`,s,{responseType:"json"})}create(s){const{hora_inicio:f,hora_fim:r}=h.G.corrigirTimezone(s.agendamento_servico.data_inicio,s.agendamento_servico.data_fim);return s.agendamento_servico.data_inicio=f,s.agendamento_servico.data_fim=r,this.http.post(`${m.Hz.baseURL}/prestacao/servicos`,s,{responseType:"json"})}updateFinalized(s,f){return this.http.put(`${m.Hz.baseURL}/prestacao/servicos/${s}/finalized`,f,{responseType:"json"})}update(s,f){return this.http.put(`${m.Hz.baseURL}/prestacao/servicos/${s}`,f,{responseType:"json"})}list(s,f=new g.k){let r=u.t.getPageOptionsParams(f);return s&&(s.acrescimo_desconto&&(r=r.append("acrescimo_desconto",s.acrescimo_desconto)),s.cliente_id&&(r=r.append("cliente_id",s.cliente_id)),s.colaborador_id&&(r=r.append("colaborador_id",s.colaborador_id)),s.created_at&&(r=r.append("created_at",s.created_at.toDateString())),s.local&&(r=r.append("local",s.local)),s.loja_id&&(r=r.append("loja_id",s.loja_id)),s.max_total&&(r=r.append("max_total",s.max_total)),s.min_total&&(r=r.append("min_total",s.min_total)),s.pagamento_forma&&(r=r.append("pagamento_forma",s.pagamento_forma)),s.searchedCliente&&(r=r.append("searchedCliente",s.searchedCliente)),s.searchedColaborador&&(r=r.append("searchedColaborador",s.searchedColaborador)),s.searchedLoja&&(r=r.append("searchedLoja",s.searchedLoja)),s.searchedPrestacaoServico&&(r=r.append("searchedPrestacaoServico",s.searchedPrestacaoServico)),s.status_servico&&(r=r.append("status_servico",s.status_servico))),this.http.get(`${m.Hz.baseURL}/prestacao/servicos`,{responseType:"json",params:r})}findById(s){return this.http.get(`${m.Hz.baseURL}/prestacao/servicos/${s}`,{responseType:"json"})}initiateById(s){return this.http.patch(`${m.Hz.baseURL}/prestacao/servicos/${s}/initiate`,{responseType:"json"})}finalizeById(s){return this.http.patch(`${m.Hz.baseURL}/prestacao/servicos/${s}/finalize`,{responseType:"json"})}cancelById(s){return this.http.delete(`${m.Hz.baseURL}/prestacao/servicos/${s}`,{responseType:"json"})}};x.ctorParameters=()=>[{type:d.eN}],x=(0,i.gn)([(0,C.GSi)({providedIn:"root"})],x)},94203:(O,y,n)=>{n.d(y,{G:()=>d});var i=n(91391);class d{static convertCompromissoToEvent(g){const{data_inicio:u,data_fim:m,hora_fim:h,hora_inicio:x,tipo:c}=g,s=new Date(`${u} ${x}`),f=new Date(`${m} ${h}`);let r;switch(c){case i.CZ.EVENTO:r="#2e2e85";break;case i.CZ.SERVICO:r="#2e854b";break;case i.CZ.PESSOAL:r="#856c2e";break;default:r="#852e3d"}return{start:s,end:f,backgroundColor:r}}static corrigirTimezone(g,u){return g.setHours(g.getHours()-3),u.setHours(u.getHours()-3),{hora_fim:u,hora_inicio:g}}}},86679:(O,y,n)=>{n.d(y,{W:()=>m});var i=n(98274),d=n(36895);function C(h,x){if(1&h&&i._UZ(0,"span",3),2&h){const c=i.oxw();i.Q6J("ngClass",c.icon)}}class u{containerClass(){return{"p-tag p-component":!0,"p-tag-info":"info"===this.severity,"p-tag-success":"success"===this.severity,"p-tag-warning":"warning"===this.severity,"p-tag-danger":"danger"===this.severity,"p-tag-rounded":this.rounded}}}u.\u0275fac=function(x){return new(x||u)},u.\u0275cmp=i.Xpm({type:u,selectors:[["p-tag"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",severity:"severity",value:"value",icon:"icon",rounded:"rounded"},ngContentSelectors:["*"],decls:5,vars:6,consts:[[3,"ngClass","ngStyle"],["class","p-tag-icon",3,"ngClass",4,"ngIf"],[1,"p-tag-value"],[1,"p-tag-icon",3,"ngClass"]],template:function(x,c){1&x&&(i.F$t(),i.TgZ(0,"span",0),i.Hsn(1),i.YNc(2,C,1,1,"span",1),i.TgZ(3,"span",2),i._uU(4),i.qZA()()),2&x&&(i.Tol(c.styleClass),i.Q6J("ngClass",c.containerClass())("ngStyle",c.style),i.xp6(2),i.Q6J("ngIf",c.icon),i.xp6(2),i.Oqu(c.value))},dependencies:[d.mk,d.O5,d.PC],styles:[".p-tag{display:inline-flex;align-items:center;justify-content:center}.p-tag-icon,.p-tag-value,.p-tag-icon.pi{line-height:1.5}.p-tag.p-tag-rounded{border-radius:10rem}\n"],encapsulation:2,changeDetection:0});class m{}m.\u0275fac=function(x){return new(x||m)},m.\u0275mod=i.oAB({type:m,declarations:[u],imports:[d.ez],exports:[u]}),m.\u0275inj=i.cJS({imports:[d.ez]})}}]);