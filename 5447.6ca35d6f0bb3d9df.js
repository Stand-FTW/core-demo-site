"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5447],{87726:(y,E,t)=>{t.d(E,{a:()=>C});var r=t(15861),d=t(70655);var u=t(98274),h=t(48058),P=t(39528),O=t(50727),o=t(86587),s=t(74896),a=t(59256),n=t(98739),c=t(59136),x=t(32470);let C=class{constructor(e,i,v,g){this.estoquesService=e,this.modal=i,this.toastService=v,this.router=g,this.loja_label="",this.searchedTransacao="",this.sortLojas=[],this.currentPage=1,this.pageOrder=c.L.DESC,this.currentTake=5,this.min_total=0,this.max_total=0,this.searchedProduto="",this.selectedEstoques=[],this.showOperationDialog=!1,this.operationValue=0,this.showProdutoListDialog=!1,this.currentProdutosPage=1,this.currentProdutoTake=15,this.opcoesMenuItens=[{label:"Op\xe7\xf5es",items:[{label:"Adicionar Produto",icon:"pi pi-plus",command:()=>this.addProduto()}]},{separator:!0},{label:"Baixar",items:[{label:"CSV",icon:"pi pi-file-o",command:()=>this.exportCsv()},{label:"XLSX",icon:"pi pi-file-excel",command:()=>this.exportExcel()},{label:"PDF",icon:"pi pi-file-pdf",command:()=>this.exportPdf()}]}],this.subscriptions=new O.w0}ngOnInit(){this.exportFileName=`Estoque - ${this.loja_label} - ${(new Date).toLocaleDateString()}`,this.cols=[{field:"id",header:"ID"},{field:"nome",header:"Nome"},{field:"descricao",header:"Descri\xe7\xe3o"},{field:"preco_compra",header:"Pre\xe7o de compra"},{field:"preco_venda",header:"Pre\xe7o de venda"},{field:"quantidade",header:"Quantidade"}],this.exportColumns=this.cols.map(e=>({title:e.header,dataKey:e.field})),this.loadEstoques()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadEstoques(e=1,i){const v=this.estoquesService.findProdutosByLoja(this.loja_id,{searchedProduto:this.searchedLoja},{order:this.pageOrder,page:e,take:this.currentTake}).subscribe({next:g=>{this.estoque=g},error:g=>{},complete:()=>{i&&(i.paginator=!0)}});this.subscriptions.add(v)}paginar(e,i){i.paginator=!1;const{first:v,rows:g,sortOrder:f}=e,D=Number(Number(v)/Number(g)+1);this.doFilter(e),this.currentPage=D,this.currentTake=g,this.pageOrder=f&&1==f?c.L.DESC:c.L.ASC,this.loadEstoques(D,i)}doFilter(e){if(!e||!e.filters||!e.filters.id)return;const{id:i,nome:v,descricao:g}=e.filters;this.min_total>this.max_total&&(this.max_total=void 0),i[0].value?this.searchedProduto=i[0].value:this.searchedProduto=void 0}clearTotal(){this.min_total=void 0,this.max_total=void 0,this.loadEstoques(1)}exportPdf(){const e=this.exportFileName,i=this.cols.map(g=>g.header),v=this.convertEstoqueData().map(Object.values);x.P.exportPdf(e,i,v)}exportExcel(){const e=this.exportFileName;x.P.exportExcel(e,this.convertEstoqueData())}exportCsv(){const e=this.exportFileName;x.P.exportCSV(e,this.convertEstoqueData())}listProdutosSemLoja(e=1){const i=this.estoquesService.findProdutosSemLoja(this.loja_id,{order:c.L.ASC,page:e,take:this.currentProdutoTake},{searchedProduto:this.searchedProduto}).subscribe(v=>{this.showProdutoListDialog=!0,this.produtos=v});this.subscriptions.add(i)}searchProduto({value:e}){this.searchedProduto=e,this.listProdutosSemLoja(1)}clearProduto(e){e.value="",this.searchedProduto="",this.listProdutosSemLoja(1)}paginarProdutos(e,i){const{first:v,rows:g}=e,f=Number(Number(v)/Number(g)+1);f!=this.currentProdutosPage&&(this.currentProdutosPage=f,this.listProdutosSemLoja(f))}addProduto(){this.listProdutosSemLoja()}createEstoque(){this.estoquesService.createEstoque({loja_id:this.loja_id,produto_id:this.selectedProdutoId}).subscribe(e=>{this.loadEstoques(),this.showProdutoListDialog=!1,this.toastService.presentToast({detalhe:"Opera\xe7\xe3o bem sucedida!",titulo:"Sucesso!",duracao:n.m4.mediumDuration,gravidade:n.kl.SUCESSO})})}disableUpdateBtn(){return!this.operationValue}disableCreateBtn(){return!this.selectedProdutoId}decrementarEstoque(e){this.showOperationDialog=!0,this.operationTitle="Remover do estoque",this.operationType=s.C.DECREMENTAR,this.selectedProdutoId=e}incrementarEstoque(e){this.showOperationDialog=!0,this.operationTitle="Acrescentar no estoque",this.operationType=s.C.INCREMENTAR,this.selectedProdutoId=e}updateEstoqueProduto(){switch(this.operationType){case s.C.INCREMENTAR:this.estoquesService.entradaEstoque({loja_id:this.loja_id,produto_id:this.selectedProdutoId,quant_entrada:Number(this.operationValue)}).subscribe(e=>{this.onCloseOperationDialog(),this.loadEstoques(),this.toastService.presentToast({detalhe:"Opera\xe7\xe3o bem sucedida!",titulo:"Sucesso!",duracao:n.m4.mediumDuration,gravidade:n.kl.SUCESSO})});break;case s.C.DECREMENTAR:this.estoquesService.saidaEstoque({loja_id:this.loja_id,produto_id:this.selectedProdutoId,quant_saida:Number(this.operationValue)}).subscribe(e=>{this.onCloseOperationDialog(),this.loadEstoques(),this.toastService.presentToast({detalhe:"Opera\xe7\xe3o bem sucedida!",titulo:"Sucesso!",duracao:n.m4.mediumDuration,gravidade:n.kl.SUCESSO})});break;default:this.toastService.presentToast({detalhe:"Tipo de opera\xe7\xe3o inv\xe1lida.",duracao:n.m4.shortDuration,gravidade:n.kl.ATENCAO,titulo:"Inv\xe1lido!"})}}fechar(){var e=this;return(0,r.Z)(function*(){yield e.modal.dismiss()})()}onCloseOperationDialog(){this.showOperationDialog=!1,this.operationTitle="",this.operationType=void 0,this.operationValue=0,this.selectedProdutoId=void 0}onCloseAddProdutoDialog(){this.showProdutoListDialog=!1,this.selectedProdutoId=void 0,this.produtos=void 0}convertEstoqueData(){return this.estoque.data.map(i=>({id:i.produto.id,nome:i.produto.nome,descricao:i.produto.descricao,preco_compra:i.produto.preco_compra,preco_venda:i.produto.preco_venda,quantidade:i.quantidade,imagem_principal_url:i.produto.imagem_principal_url}))}showModal(e,i,v="modal-size-100"){var g=this;return(0,r.Z)(function*(){const f=yield g.modal.create({component:e,backdropDismiss:!1,cssClass:v,componentProps:i});return f.onDidDismiss().then(D=>{const{data:I,role:A}=D}),yield f.present()})()}};C.ctorParameters=()=>[{type:o.e},{type:h.IN},{type:a.D},{type:P.F0}],C.propDecorators={loja_label:[{type:u.IIB}],loja_id:[{type:u.IIB}]},C=(0,d.gn)([(0,u.wA2)({selector:"app-estoque-view-loja",template:'<ion-content appScrollTheme>\n  <div class="surface-card p-4 border-round shadow-2 h-full">\n    <p-table *ngIf="estoque" #dt [(selection)]="selectedEstoque" dataKey="id" [rowHover]="true"\n      [showCurrentPageReport]="true" [filterDelay]="2" [rowsPerPageOptions]="[5,10,25,50,100,250,500,1000]"\n      [globalFilterFields]="[\'nome\',\'descricao.nome\', \'vendedor.nome\', \'status\']"\n      currentPageReportTemplate="Mostrando {first} at\xe9 {last} de {totalRecords} entradas" [lazy]="true"\n      [value]="estoque.data" [paginator]="true" [rows]="estoque.meta.take" [totalRecords]="estoque.meta.itemCount"\n      [pageLinks]="estoque.meta.pageCount" (onLazyLoad)="paginar($event, dt)" responsiveLayout="scroll">\n      <ng-template pTemplate="caption">\n        <div class="grid flex">\n\n          <div class="table-header text-primary col-6">\n            Lista de Produtos\n          </div>\n\n          <div class="col-6 justify-content-end text-right">\n            <button type="button" pButton icon="pi pi-plus" (click)="editMenu.toggle($event)"></button>\n            <p-menu #editMenu appendTo="body" [popup]="true" [model]="opcoesMenuItens"></p-menu>\n          </div>\n\n        </div>\n      </ng-template>\n      <ng-template pTemplate="header">\n        <tr>\n\n          <th class="text-center">\n            <div class="flex justify-content-between align-items-center ">\n              ID\n              <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n                field="id" [pSortableColumnDisabled]="true" class="ml-auto" display="menu"></p-columnFilter>\n            </div>\n          </th>\n\n          <th class="text-center">\n            <div class="flex justify-content-between align-items-center">\n              Nome\n              <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n                field="nome" display="menu" class="ml-auto"></p-columnFilter>\n            </div>\n          </th>\n\n          <th class="text-center">\n            <div class="flex justify-content-between align-items-center">\n              Descri\xe7\xe3o\n              <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n                field="descricao" display="menu" class="ml-auto"></p-columnFilter>\n            </div>\n          </th>\n\n          <th class="text-center">\n            <div class="flex justify-content-between align-items-center">\n              Pre\xe7o de compra\n              <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n                field="preco_compra" display="menu" class="ml-auto"></p-columnFilter>\n            </div>\n          </th>\n\n          <th class="text-center">\n            <div class="flex justify-content-between align-items-center">\n              Pre\xe7o de venda\n              <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n                field="preco_venda" display="menu" class="ml-auto"></p-columnFilter>\n            </div>\n          </th>\n\n          <th class="text-center">\n            <div class="flex justify-content-between align-items-center">\n              Quantidade\n              <p-columnFilter [showAddButton]="false" [showMatchModes]="false" [showOperator]="false" type="text"\n                field="quantidade" display="menu" class="ml-auto"></p-columnFilter>\n            </div>\n          </th>\n\n          <th style="width: 15rem"></th>\n        </tr>\n      </ng-template>\n      <ng-template pTemplate="body" let-data>\n        <tr>\n          <td>\n            <span class="p-column-title">ID</span>\n            <span class="image-text">{{ data.produto.id }}</span>\n          </td>\n\n          <td>\n            <span class="p-column-title">Nome</span>\n            <span class="image-text">{{ data.produto.nome }}</span>\n          </td>\n\n          <td>\n            <span class="p-column-title">Descri\xe7\xe3o</span>\n            <div>\n              <span class="image-text">{{ data.produto.descricao }}</span>\n            </div>\n          </td>\n\n          <td>\n            {{data.produto.preco_compra | currency:\'BRL\':\'R$\'}}\n          </td>\n          <td>\n            {{data.produto.preco_venda | currency:\'BRL\':\'R$\'}}\n          </td>\n          <td>\n            {{data.quantidade}}\n          </td>\n          <td class="text-center">\n            <button pButton type="button" class="p-button-danger" icon="pi pi-minus"\n              (click)="decrementarEstoque(data.produto.id)"></button>\n            <button pButton type="button" class="p-button-success ml-1 mt-2 xl:ml-3 xl:mt-0" icon="pi pi-plus"\n              (click)="incrementarEstoque(data.produto.id)"></button>\n          </td>\n        </tr>\n      </ng-template>\n\n      <ng-template pTemplate="emptymessage">\n        <tr>\n          <td colspan="12">\n            <div class="surface-ground px-4 py-4 md:px-6 lg:px-8 h-full">\n              <div\n                style="background: radial-gradient(50% 109137.91% at 50% 50%, rgba(233, 203, 30, 0.1) 0%, rgba(254, 253, 244, 0) 100%);"\n                class="text-center">\n                <span class="bg-surface-50 text-yellow-500 font-bold text-2xl inline-block px-3">Aten\xe7\xe3o</span>\n              </div>\n              <div class="mt-6 mb-5 font-bold text-6xl text-900 text-center">Nenhum produto encontrado</div>\n              <p class="text-700 text-3xl mt-0 mb-6 text-center">Experimente trocar os filtros.</p>\n\n            </div>\n          </td>\n        </tr>\n      </ng-template>\n    </p-table>\n  </div>\n\n\n  <p-dialog *ngIf="showOperationDialog" [(visible)]="showOperationDialog" [resizable]="false" [draggable]="false"\n    [modal]="true" [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\', height: \'80%\'}"\n    (onHide)="onCloseOperationDialog()">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <div class="text-900 font-medium mb-3 text-xl">{{ operationTitle }}</div>\n      </div>\n    </ng-template>\n    <div class="surface-card border-round shadow-2 p-4">\n      <p class="mt-0 mb-4 p-0 line-height-3">Insira o valor: </p>\n      <p-inputNumber class="flex-auto mr-3" [(ngModel)]="operationValue" [ngModelOptions]="{standalone: true}">\n      </p-inputNumber>\n    </div>\n    <ng-template pTemplate="footer">\n      <button pButton pRipple label="Atualizar" (click)="updateEstoqueProduto()"\n        [disabled]="disableUpdateBtn()"></button>\n    </ng-template>\n  </p-dialog>\n\n  <p-dialog *ngIf="showProdutoListDialog" [(visible)]="showProdutoListDialog" [resizable]="false" [draggable]="false"\n    [modal]="true" [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\', height: \'80%\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <div class="text-900 font-medium mb-3 text-xl">Criando estoque para o produto</div>\n      </div>\n    </ng-template>\n    <div class="surface-card border-round shadow-2 p-4">\n      <p class="mt-0 mb-4 p-0 line-height-3">Selecione um produto: </p>\n\n      <p-dropdown id="produto_id" [options]="produtos.data" [filter]="true" placeholder="Selecione"\n        [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" optionValue="id"\n        optionLabel="nome" filterBy="nome"\n        styleClass="mb-2 md:mb-0 w-full" [(ngModel)]="selectedProdutoId" [ngModelOptions]="{standalone: true}">\n        <ng-template pTemplate="filter" let-options="options">\n          <div class="flex p-3">\n            <div class="p-inputgroup" (click)="$event.stopPropagation()">\n              <input #searchProdutoInput type="text" pInputText placeholder="Procurar"\n                (keyup.enter)="searchProduto(searchProdutoInput)">\n              <button pButton pRipple icon="pi pi-search" (click)="searchProduto(searchProdutoInput)"></button>\n              <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                (click)="clearProduto(searchProdutoInput)"></button>\n            </div>\n          </div>\n        </ng-template>\n        <ng-template pTemplate="loader" let-options="options">\n          <div class="flex align-items-center py-2 px-3" style="height: 38px">\n            <p-skeleton width="50%" height="1rem"></p-skeleton>\n          </div>\n        </ng-template>\n        <ng-template let-produto pTemplate="item">\n          <div>\n            <div>{{ produto.nome}}</div>\n          </div>\n        </ng-template>\n        <ng-template let-produto pTemplate="selectedItem">\n          <div>{{ produto.nome}}</div>\n        </ng-template>\n      </p-dropdown>\n    </div>\n    <div class="flex justify-content-end mt-3">\n      <button pButton pRipple label="Criar" (click)="createEstoque()" [disabled]="disableCreateBtn()"></button>\n    </div>\n  </p-dialog>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],C)},25922:(y,E,t)=>{t.d(E,{y:()=>D});var r=t(70655),d=t(98274),l=t(36895),p=t(24006),u=t(48058),h=t(77604),P=t(9764),O=t(51740),o=t(50613),s=t(35593),a=t(82210),n=t(17913),c=t(28396),x=t(25047),C=t(32137),m=t(21493),e=t(92665),i=t(61989),v=t(21327),g=t(85226),f=t(87726);let D=class{};D=(0,r.gn)([(0,d.LVF)({declarations:[f.a],imports:[l.ez,p.u5,p.UX,u.Pc,h.FI,P.Q,a.kW,c.U$,O.j,n.Iu,i.nD,o.cc,s.hJ,e.O,n.Iu,v.$9,x.L$,m.S,C.D,g.o],exports:[f.a]})],D)},28921:(y,E,t)=>{t.d(E,{R:()=>x});var r=t(70655);var p=t(98274),u=t(39528),h=t(48058),P=t(50727),O=t(10289),o=t(86587),s=t(74896),a=t(59256),n=t(81546),c=t(98739);let x=class{constructor(m,e,i,v,g){this.modal=m,this.router=e,this.estoqueService=i,this.produtoService=v,this.toastMessageService=g,this.isLoaded=!1,this.showOperationDialog=!1,this.operationValue=0,this.wasCreated=!1,this.showLojaListDialog=!1,this.listLojas=[],this.subscriptions=new P.w0}ngOnInit(){this.orderEstoque()}ngOnDestroy(){this.subscriptions.unsubscribe()}liberateEstoqueView(){return!(this.produto&&this.produto.estoques.length<=0)}redirectCarga(){const m={queryParams:{tab:"carregar",option:O.oP.CARGA_ESTOQUE}};this.fechar(),this.router.navigate(["/carga-dados"],m)}decrementarEstoque(m){this.showOperationDialog=!0,this.operationTitle="Remover do estoque",this.operationType=s.C.DECREMENTAR,this.selectedLojaId=m}incrementarEstoque(m){this.showOperationDialog=!0,this.operationTitle="Acrescentar no estoque",this.operationType=s.C.INCREMENTAR,this.selectedLojaId=m}update(){switch(this.operationType){case s.C.INCREMENTAR:this.estoqueService.entradaEstoque({loja_id:this.selectedLojaId,produto_id:this.produto.id,quant_entrada:Number(this.operationValue)}).subscribe(m=>{this.loadProduto()});break;case s.C.DECREMENTAR:this.estoqueService.saidaEstoque({loja_id:this.selectedLojaId,produto_id:this.produto.id,quant_saida:Number(this.operationValue)}).subscribe(m=>{this.loadProduto()});break;default:this.toastMessageService.presentToast({detalhe:"Tipo de opera\xe7\xe3o inv\xe1lida.",duracao:c.m4.shortDuration,gravidade:c.kl.ATENCAO,titulo:"Inv\xe1lido!"})}}loadProduto(){const{id:m}=this.produto;this.produtoService.findById(m).subscribe(e=>{this.produto=e,this.orderEstoque(),this.operationValue=0,this.showOperationDialog=!1,this.showLojaListDialog=!1,this.selectedLojaId=void 0,this.wasCreated=!0,this.toastMessageService.presentToast({detalhe:"Estoque da loja atualizado.",duracao:c.m4.shortDuration,gravidade:c.kl.SUCESSO,titulo:"Sucesso!"})})}listLojasSemProduto(){this.selectedLojaId=void 0,this.estoqueService.listLojasSemProdutoX(this.produto.id).subscribe(m=>{this.showLojaListDialog=!0,this.listLojas=m})}createEstoque(){this.estoqueService.createEstoque({loja_id:this.selectedLojaId,produto_id:this.produto.id}).subscribe(m=>{this.loadProduto()})}disableUpdateBtn(){return!this.operationValue}disableCreateBtn(){return!this.selectedLojaId}fechar(){this.modal.dismiss(this.wasCreated,"estoque")}orderEstoque(){!this.produto.estoques||(this.produto.estoques=this.produto.estoques.sort((m,e)=>m.loja.codigo>e.loja.codigo?1:e.loja.codigo>m.loja.codigo?-1:0))}};x.ctorParameters=()=>[{type:h.IN},{type:u.F0},{type:o.e},{type:n.m},{type:a.D}],x.propDecorators={produto:[{type:p.IIB}]},x=(0,r.gn)([(0,p.wA2)({selector:"app-estoque-view",template:'<ion-content appScrollTheme>\n  <ng-container *ngIf="liberateEstoqueView()">\n\n    <div class="surface-section px-4 py-5 md:px-6 lg:px-8">\n      <div class="flex align-items-start flex-column lg:justify-content-between lg:flex-row">\n        <div>\n          <div class="font-medium text-3xl text-900">{{ produto.nome }}</div>\n          <div class="flex align-items-center text-700 flex-wrap">\n            <div class="mr-5 flex align-items-center mt-3">\n              <i class="pi pi-users mr-2"></i>\n              <span>{{ produto.descricao }}</span>\n            </div>\n          </div>\n          <div class="flex align-items-center text-700 flex-wrap">\n            <div class="mr-5 flex align-items-center mt-3">\n              <i class="pi pi-dollar mr-2"></i>\n              <span>Pre\xe7o de compra: {{ produto.preco_compra | currency:\'BRL\': \'(R$)\' }}</span>\n            </div>\n            <div class="mr-5 flex align-items-center mt-3">\n              <i class="pi pi-dollar mr-2"></i>\n              <span>Pre\xe7o de venda: {{ produto.preco_venda | currency:\'BRL\': \'(R$)\' }}</span>\n            </div>\n          </div>\n        </div>\n        <div class="mt-3 lg:mt-0">\n          <button pButton iconPos="right" pRipple label="Realizar carga de estoques" icon="pi pi-external-link"\n            (click)="redirectCarga()" class="p-button p-button-outlined mb-2"></button>\n          <div class="mt-3 lg:mt-0">\n            <button pButton iconPos="right" pRipple label="Criar estoque em loja n\xe3o presente" icon="pi pi-plus"\n              (click)="listLojasSemProduto()" class="p-button "></button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="surface-ground h-full">\n      <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n      <div class="grid">\n        <div *ngFor="let e of produto.estoques" class="col-12 md:col-6 xl:col-4 p-3">\n          <div class="surface-card shadow-2 border-rounded p-4">\n            <div class="flex border-bottom-1 surface-border pb-4 align-items-center justify-content-center">\n              <div class="flex flex-column text-center">\n                <span class="text-lg text-900 font-medium mb-1">{{ e.loja.codigo }} - {{ e.loja.nome }}</span>\n                <span class="text-600 font-medium mb-2">{{ e.loja.descricao }}</span>\n                <div>\n                  <span>Quantidade\n                    de itens:</span>\n                  <span class="w-full bg-surface-50 text-primary  text-xl text-center"> {{ e.quantidade\n                    }}</span>\n                </div>\n              </div>\n            </div>\n            <div class="flex justify-content-between pt-4">\n              <button pButton pRipple label="Decrementar" icon="pi pi-minus-circle"\n                class="p-button-outlined p-button-danger w-6 mr-2" (click)="decrementarEstoque(e.loja.id)"></button>\n              <button pButton pRipple label="Incrementar" icon="pi pi-plus-circle"\n                class="p-button-outlined p-button-success w-6 ml-2" (click)="incrementarEstoque(e.loja.id)"></button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n\n  <ng-container *ngIf="!liberateEstoqueView()">\n    <div class="surface-section px-4 py-8 md:px-6 lg:px-8 h-full">\n      <div\n        style="background: radial-gradient(50% 109137.91% at 50% 50%, rgba(233, 203, 30, 0.1) 0%, rgba(254, 253, 244, 0) 100%);"\n        class="text-center">\n        <span class="bg-surface-50 text-yellow-500 font-bold text-2xl inline-block px-3">Aten\xe7\xe3o</span>\n      </div>\n      <div class="mt-6 mb-5 font-bold text-6xl text-900 text-center">Sem estoque</div>\n      <p class="text-700 text-3xl mt-0 mb-6 text-center">O produto n\xe3o possui estoque cadastrados em nenhuma loja.</p>\n      <div class="flex mt-3 lg:mt-0 justify-content-center">\n        <button pButton iconPos="right" pRipple label="Criar estoque em loja n\xe3o presente" icon="pi pi-plus"\n          (click)="listLojasSemProduto()" class="p-button-outlined p-button "></button>\n      </div>\n    </div>\n  </ng-container>\n\n  <p-dialog [(visible)]="showOperationDialog" [resizable]="false" [draggable]="false" [modal]="true"\n    [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\', height: \'80%\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <div class="text-900 font-medium mb-3 text-xl">{{ operationTitle }}</div>\n      </div>\n    </ng-template>\n    <div class="surface-card border-round shadow-2 p-4">\n      <p class="mt-0 mb-4 p-0 line-height-3">Insira o valor: </p>\n      <p-inputNumber class="flex-auto mr-3" [(ngModel)]="operationValue" [ngModelOptions]="{standalone: true}">\n      </p-inputNumber>\n    </div>\n    <ng-template pTemplate="footer">\n      <button pButton pRipple label="Atualizar" (click)="update()" [disabled]="disableUpdateBtn()"></button>\n    </ng-template>\n  </p-dialog>\n\n  <p-dialog [(visible)]="showLojaListDialog" [resizable]="false" [draggable]="false" [modal]="true"\n    [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\', height: \'80%\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <div class="text-900 font-medium mb-3 text-xl">Criando estoque para a loja</div>\n      </div>\n    </ng-template>\n    <div class="surface-card border-round shadow-2 p-4">\n      <p class="mt-0 mb-4 p-0 line-height-3">Selecione uma loja: </p>\n      <p-dropdown [options]="listLojas" emptyMessage="Nada dispon\xedvel" placeholder="Selecione a loja" optionValue="id"\n        optionLabel="nome" [(ngModel)]="selectedLojaId" [ngModelOptions]="{standalone: true}" styleClass="mb-2 md:mb-0">\n      </p-dropdown>\n    </div>\n    <div class="flex justify-content-end mt-3">\n      <button pButton pRipple label="Criar" (click)="createEstoque()" [disabled]="disableCreateBtn()"></button>\n    </div>\n  </p-dialog>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],x)},45447:(y,E,t)=>{t.d(E,{O:()=>j});var r=t(70655),d=t(98274),l=t(36895),p=t(24006),u=t(48058),h=t(77604),P=t(9764),O=t(51740),o=t(50613),s=t(35593),a=t(82210),n=t(58783),c=t(92665),x=t(1236),C=t(73425),m=t(23520),e=t(17913),i=t(28396),v=t(25047),g=t(32137),f=t(21493),D=t(63054),I=t(61989),A=t(28921);var N=t(50727),W=t(59256),B=t(59136),F=t(81546);let M=class{constructor(b,T,R){this.modal=b,this.toastMessageService=T,this.produtoService=R,this.selectedProdutosEvent=new d.vpe,this.sortOptions=[],this.searchedNome="",this.currentPage=1,this.selectAll=!1,this.selectedProdutos=[],this.totalRecords=0,this.isLoaded=!1,this.subscriptions=new N.w0}ngOnInit(){this.loadProdutos()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadProdutos(b=1,T){const R=this.produtoService.list({nome:T},{order:B.L.DESC,page:b,take:10}).subscribe(L=>{this.produtos=L;const $=this.produtos.data.map(S=>({produto_id:S.id,quant_entrada:0,descricao:S.descricao,nome:S.nome}));this.produtos.data=$,this.totalRecords=L.meta.itemCount,this.isLoaded=!0});this.subscriptions.add(R)}paginar(b){const{first:T,rows:R}=b,L=Number(Number(T)/Number(R)+1);this.currentPage=L,this.loadProdutos(L)}search(){this.loadProdutos(1,this.searchedNome)}clear(){this.searchedNome="",this.loadProdutos(1,this.searchedNome)}onSelectionChange(b=[]){this.selectAll=b.length===this.totalRecords,this.selectedProdutos=b}onSelectAllChange(b){if(b.checked){this.produtoService.list({},{order:B.L.DESC,page:this.currentPage,take:10}).subscribe(L=>{this.produtos=L,this.selectAll=!0})}else this.selectedProdutos=[],this.selectAll=!1}updateQuantidade({value:b},T){T.quant_entrada=b||0;const R=this.selectedProdutos.findIndex(L=>L.produto_id==T.produto_id);this.selectedProdutos[R]=T}disableInputNumber(b){return!this.selectedProdutos.includes(b)}disableNext(){return this.selectedProdutos.length<1}next(){this.selectedProdutosEvent.emit(this.selectedProdutos)}};M.ctorParameters=()=>[{type:u.IN},{type:W.D},{type:F.m}],M.propDecorators={selectedProdutosEvent:[{type:d.r_U}]},M=(0,r.gn)([(0,d.wA2)({selector:"app-select-products",template:'<div class="grid h-full w-full mx-1 my-1">\n  <p-table *ngIf="isLoaded" [value]="produtos.data" [lazy]="true" [paginator]="true" [rows]="produtos.meta.take"\n    [totalRecords]="produtos.meta.itemCount" [pageLinks]="produtos.meta.pageCount" (onLazyLoad)="paginar($event)"\n    dataKey="produto_id" [tableStyle]="{\'min-width\': \'75rem\'}" [selection]="selectedProdutos"\n    (selectionChange)="onSelectionChange($event)" [selectAll]="selectAll" (selectAllChange)="onSelectAllChange($event)"\n    [loading]="loading" [globalFilterFields]="[\'name\']">\n    <ng-template pTemplate="header">\n      <tr>\n        <th style="width: 4rem"></th>\n        <th>Nome\n        </th>\n        <th>Descri\xe7\xe3o</th>\n        <th>Quantidade</th>\n      </tr>\n      <tr>\n        <th style="width: 4rem">\n          <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\n        </th>\n        <th>\n          <span class="p-input-icon-right mb-2 md:mb-0 ">\n            <i class="pi pi-search cursor-pointer text-primary" (click)="search()"></i>\n            <input type="search" pInputText [(ngModel)]="searchedNome" [ngModelOptions]="{standalone: true}"\n              placeholder="Buscar por nome" (keyup.enter)="search()">\n          </span>\n          <button pButton pRipple type="button" icon="pi pi-times-circle" class="ml-1 p-button-rounded p-button"\n            (click)="clear()"></button>\n        </th>\n        <th></th>\n        <th></th>\n      </tr>\n    </ng-template>\n    <ng-template pTemplate="body" let-p>\n      <tr>\n        <td>\n          <p-tableCheckbox [value]="p"></p-tableCheckbox>\n        </td>\n        <td>{{p.nome}}</td>\n        <td>{{p.descricao}}</td>\n        <td>\n          <p-inputNumber [disabled]="disableInputNumber(p)" (onInput)="updateQuantidade($event, p)">\n          </p-inputNumber>\n        </td>\n      </tr>\n    </ng-template>\n  </p-table>\n  <ion-footer>\n    <ion-toolbar>\n      <ion-button expand="full" (click)="next()" [disabled]="disableNext()">Concluir</ion-button>\n    </ion-toolbar>\n  </ion-footer>\n</div>',styles:[""]})],M);var K=t(85226),U=t(25922);let j=class{};j=(0,r.gn)([(0,d.LVF)({declarations:[A.R,M],imports:[l.ez,p.u5,p.UX,u.Pc,h.FI,P.Q,a.kW,n.LU,i.U$,O.j,e.Iu,I.nD,D.A,o.cc,s.hJ,c.O,x.q,C.gz,m.zz,e.Iu,v.L$,f.S,g.D,K.o,U.y],exports:[A.R,M,U.y]})],j)},74896:(y,E,t)=>{var r,l,d;t.d(E,{C:()=>r,z:()=>d}),(l=r||(r={})).INCREMENTAR="ADD",l.DECREMENTAR="REMOVE",function(l){l.GENERATE="GENERATE",l.NOTHING="NOTHING",l.SPECIFIED="SPECIFIED"}(d||(d={}))},2589:(y,E,t)=>{var r,d;t.d(E,{M:()=>r}),(d=r||(r={})).CARGA_ESTOQUE="assets/imgs/outros/logo-estoque.png",d.CARGA_PRODUTO="assets/imgs/outros/logo-produto.png"},10289:(y,E,t)=>{t.d(E,{Qs:()=>p,oP:()=>d});var d,u,l,r=t(2589);(u=d||(d={})).CARGA_PRODUTOS="Carga de Produtos",u.CARGA_ESTOQUE="Carga de Estoques",function(u){u.CARGA_PRODUTOS="Carga de produtos para criar novos produtos, ou atualizar produtos j\xe1 existentes",u.CARGA_ESTOQUE="Carga de estoques para acrescentar ou decrementar a quantidade de um produto em uma loja"}(l||(l={}));const p=[{nome_carga:d.CARGA_ESTOQUE,descricao_carga:l.CARGA_ESTOQUE,image:r.M.CARGA_ESTOQUE},{nome_carga:d.CARGA_PRODUTOS,descricao_carga:l.CARGA_PRODUTOS,image:r.M.CARGA_PRODUTO}]},86587:(y,E,t)=>{t.d(E,{e:()=>P});var r=t(70655),d=t(80529),l=t(98274),p=t(99038),u=t(40199),h=t(55583);let P=class{constructor(o){this.http=o}listLojasSemProdutoX(o){return this.http.get(`${p.Hz.baseURL}/estoques/produto/${o}`,{responseType:"json"})}findProdutosByLoja(o,s,a=new u.k){let n=h.t.getPageOptionsParams(a);return s&&s.nome&&(n=n.append("nome",s.nome)),s&&s.descricao&&(n=n.append("descricao",s.descricao)),s&&s.searchedProduto&&(n=n.append("searchedProduto",s.searchedProduto)),this.http.get(`${p.Hz.baseURL}/estoques/loja/${o}`,{responseType:"json",params:n})}findProdutosSemLoja(o,s=new u.k,a){let n=h.t.getPageOptionsParams(s);return a&&a.nome&&(n=n.append("nome",a.nome)),a&&a.descricao&&(n=n.append("descricao",a.descricao)),a&&a.searchedProduto&&(n=n.append("searchedProduto",a.searchedProduto)),this.http.get(`${p.Hz.baseURL}/estoques/loja/${o}/sem-produto`,{responseType:"json",params:n})}createEstoque(o){return this.http.post(`${p.Hz.baseURL}/estoques`,o,{responseType:"json"})}entradaEstoque(o){return this.http.put(`${p.Hz.baseURL}/estoques/entrada/`,o,{responseType:"json"})}saidaEstoque(o){return this.http.put(`${p.Hz.baseURL}/estoques/saida/`,o,{responseType:"json"})}};P.ctorParameters=()=>[{type:d.eN}],P=(0,r.gn)([(0,l.GSi)({providedIn:"root"})],P)},81546:(y,E,t)=>{t.d(E,{m:()=>P});var r=t(70655),d=t(80529),l=t(98274),p=t(40199),u=t(55583),h=t(99038);let P=class{constructor(o){this.http=o}list(o,s=new p.k){let a=u.t.getPageOptionsParams(s);return o&&o.nome&&(a=a.append("nome",o.nome)),o&&o.descricao&&(a=a.append("descricao",o.descricao)),o&&o.searchedProduto&&(a=a.append("searchedProduto",o.searchedProduto)),this.http.get(`${h.Hz.baseURL}/produtos`,{responseType:"json",params:a})}findById(o){return this.http.get(`${h.Hz.baseURL}/produtos/${o}`,{responseType:"json"})}create(o){return this.http.post(`${h.Hz.baseURL}/produtos`,o,{responseType:"json"})}update(o,s){return this.http.put(`${h.Hz.baseURL}/produtos/${o}`,s,{responseType:"json"})}createImagemPrincipal(o){const s=new FormData;return s.append("file",o),this.http.post(`${h.Hz.baseURL}/produtos/imagens/principal`,s,{responseType:"json"})}};P.ctorParameters=()=>[{type:d.eN}],P=(0,r.gn)([(0,l.GSi)({providedIn:"root"})],P)},32470:(y,E,t)=>{t.d(E,{P:()=>P});var r=t(94327),l=t(53583),p=t(12983),u=t.n(p),h=t(80574);class P{static exportPdf(o,s,a){const n=new l.default("l","mm","a4");u()(n,{head:[s],body:a,didDrawCell:c=>{}}),n.save(`${o}.pdf`)}static exportExcel(o,s){const n={Sheets:{data:h.P6.json_to_sheet(s)},SheetNames:["data"]},c=h.cW(n,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(c,o)}static exportCSV(o,s){const n={Sheets:{data:h.P6.json_to_sheet(s)},SheetNames:["data"]},c=h.cW(n,{bookType:"csv",type:"array"});this.saveAsCsvFile(c,o)}static saveAsExcelFile(o,s){const c=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});r.saveAs(c,s+".xlsx")}static saveAsCsvFile(o,s){const c=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});r.saveAs(c,s+".csv")}}}}]);