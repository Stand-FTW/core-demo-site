"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9779],{79779:(nt,q,n)=>{n.r(q),n.d(q,{AdministracaoGeralPageModule:()=>st});var p=n(70655),r=n(98274),v=n(36895),o=n(24006),m=n(48058),u=n(39528);let I=class{constructor(){this.currentTab="loja"}ngOnInit(){}changeTab(e){this.currentTab=e.detail.value}};I.ctorParameters=()=>[],I=(0,p.gn)([(0,r.wA2)({selector:"app-administracao-geral",template:'<ion-header [translucent]="true">\n  <ion-toolbar>\n    <ion-buttons slot="start">\n      <ion-menu-button></ion-menu-button>\n    </ion-buttons>\n    <ion-title>ADM. Geral</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content appScrollTheme>\n  \n  <ion-segment class="pt-3 background-segment" [(ngModel)]="currentTab" [ngModelOptions]="{standalone: true}"\n    (ionChange)="changeTab($event)">\n    <ion-segment-button style="margin-left: 5px; max-width: 200px" layout="icon-start" value="loja">\n      <ion-icon style="font-size: 1.2em" name="storefront-outline"></ion-icon>\n      <ion-label text-wrap class="wrap-text" style="font-size: 1.1em">\n        Lojas\n      </ion-label>\n    </ion-segment-button>\n    <ion-segment-button style="max-width: 200px" layout="icon-start" value="despesa">\n      <ion-icon style="font-size: 1.2em" name="cash-outline"></ion-icon>\n      <ion-label style="font-size: 1.1em"> Despesas </ion-label>\n    </ion-segment-button>\n  </ion-segment>\n  <ion-segment class="background-segment" [(ngModel)]="currentTab" [ngModelOptions]="{standalone: true}"\n    (ionChange)="changeTab($event)">\n    <ion-segment-button style="margin-left: 5px; max-width: 200px" layout="icon-start" value="empresa">\n      <ion-icon style="font-size: 1.2em" name="business-outline"></ion-icon>\n      <ion-label text-wrap class="wrap-text" style="font-size: 1.1em">\n        Empresas\n      </ion-label>\n    </ion-segment-button>\n    <ion-segment-button style="max-width: 200px" layout="icon-start" value="contrato">\n      <ion-icon style="font-size: 1.2em" name="documents-outline"></ion-icon>\n      <ion-label style="font-size: 1.1em"> Contratos </ion-label>\n    </ion-segment-button>\n  </ion-segment>\n\n  <div class="mt-3 wall-background h-screen">\n    <ng-container *ngIf="currentTab === \'loja\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-loja-main></app-loja-main>\n      </div>\n    </ng-container>\n    <ng-container *ngIf="currentTab === \'despesa\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-despesa-main></app-despesa-main>\n      </div>\n    </ng-container>\n\n\n    <ng-container *ngIf="currentTab === \'empresa\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-empresa-main></app-empresa-main>\n      </div>\n    </ng-container>\n    <ng-container *ngIf="currentTab === \'contrato\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-contrato-main></app-contrato-main>\n      </div>\n    </ng-container>\n  </div>\n</ion-content>',styles:[""]})],I);const me=[{path:"",component:I}];let Ve=class{};Ve=(0,p.gn)([(0,r.LVF)({imports:[u.Bz.forChild(me)],exports:[u.Bz]})],Ve);var B=n(77604),U=n(9764),b=n(51740),z=n(50613),C=n(35593),O=n(82210),$=n(58783),D=n(92665),ue=n(1236),vt=n(73425),ve=n(23520),ee=n(17913),Ge=n(28396),fe=n(25047),_=n(32137),F=n(21493),V=n(63054),he=n(61989),T=n(21327),j=n(85226);let ge=class{constructor(){}ngOnInit(){}};ge.ctorParameters=()=>[],ge=(0,p.gn)([(0,r.wA2)({selector:"app-cartao-main",template:"<p>\n  Tirar as d\xfavidas com o DIDI a respeito dessa entidade e seus atributos\n</p>\n",styles:[""]})],ge);let be=class{constructor(){}ngOnInit(){}};be.ctorParameters=()=>[],be=(0,p.gn)([(0,r.wA2)({selector:"app-cartao-cadastro",template:"<p>\n  cartao-cadastro works!\n</p>\n",styles:[""]})],be);let xe=class{constructor(){}ngOnInit(){}};xe.ctorParameters=()=>[],xe=(0,p.gn)([(0,r.wA2)({selector:"app-cartao-detail",template:"<p>\n  cartao-detail works!\n</p>\n",styles:[""]})],xe);var f=n(15861);var te=n(41117),x=n(50727),l=n(98739),Qe=n(18063);let se=class{constructor(e,t,s){this.formBuilder=e,this.despesaService=t,this.modal=s,this.isLoaded=!1,this.createdDespesaId="",this.wasCreated=!1,this.subscriptions=new x.w0,this.form=this.formBuilder.group({nome:[,[o.kI.required]],descricao:[,[o.kI.required]]})}ngOnInit(){}ngOnDestroy(){this.subscriptions.unsubscribe()}create(){const e=this.form.get("nome").value,t=this.form.get("descricao").value,s=this.despesaService.create({nome:e,descricao:t}).subscribe(a=>{this.fechar(!0)});this.subscriptions.add(s)}fechar(e=!1){this.modal.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}};se.ctorParameters=()=>[{type:o.QS},{type:Qe.B},{type:m.IN}],se=(0,p.gn)([(0,r.wA2)({selector:"app-despesa-cadastro",template:'<ion-content appScrollTheme>\n  <ng-container >\n    <form  [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <ng-container>\n        <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n          <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n            <div class="text-900 font-medium text-xl mb-3">Criar/Cadastrar</div>\n            <div class="surface-card p-4 shadow-2 border-round p-fluid">\n              <div class="grid formgrid p-fluid">\n                <div class="field mb-4 col-12 md:col-6">\n                  <label for="nome" class="font-medium text-900">Nome</label>\n                  <input id="nome" type="text" pInputText formControlName="nome">\n                  <div class="flex mt-1 justify-content-end">\n                    <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n                  </div>\n                </div>\n                <div class="field mb-4 col-12">\n                  <label for="descricao" class="font-medium text-900">Descri\xe7\xe3o</label>\n                  <textarea class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n                    formControlName="descricao"></textarea>\n                  <div class="flex mt-1 justify-content-end">\n                    <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n                  </div>\n                </div>\n                <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n              </div>\n              <div class="flex justify-content-end">\n                <button pButton pRipple label="Criar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n                  [disabled]="disableCreateBtn()"></button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </ng-container>\n    </form>\n  </ng-container>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],se);let G=class{constructor(e,t,s){this.formBuilder=e,this.despesaService=t,this.modal=s,this.isLoaded=!1,this.createdDespesaId="",this.wasCreated=!1,this.subscriptions=new x.w0}ngOnInit(){const{nome:e,descricao:t}=this.despesa;this.form=this.formBuilder.group({nome:[e,[o.kI.required]],descricao:[t,[o.kI.required]]})}ngOnDestroy(){this.subscriptions.unsubscribe()}update(){const{id:e}=this.despesa,t=this.form.get("nome").value,s=this.form.get("descricao").value,a=this.despesaService.update({nome:t,descricao:s},e).subscribe(i=>{this.fechar(!0)});this.subscriptions.add(a)}fechar(e=!1){this.modal.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableUpdateBtn(){return!this.form.valid}};G.ctorParameters=()=>[{type:o.QS},{type:Qe.B},{type:m.IN}],G.propDecorators={despesa:[{type:r.IIB}]},G=(0,p.gn)([(0,r.wA2)({selector:"app-despesa-detail",template:'<ion-content appScrollTheme>\n  <ng-container >\n    <form  [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <ng-container>\n        <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n          <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n            <div class="text-900 font-medium text-xl mb-3">Atualizar</div>\n            <div class="surface-card p-4 shadow-2 border-round p-fluid">\n              <div class="grid formgrid p-fluid">\n                <div class="field mb-4 col-12 md:col-6">\n                  <label for="nome" class="font-medium text-900">Nome</label>\n                  <input id="nome" type="text" pInputText formControlName="nome">\n                  <div class="flex mt-1 justify-content-end">\n                    <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n                  </div>\n                </div>\n                <div class="field mb-4 col-12">\n                  <label for="descricao" class="font-medium text-900">Descri\xe7\xe3o</label>\n                  <textarea class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n                    formControlName="descricao"></textarea>\n                  <div class="flex mt-1 justify-content-end">\n                    <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n                  </div>\n                </div>\n                <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n              </div>\n              <div class="flex justify-content-end">\n                <button pButton pRipple label="Atualizar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="update()"\n                  [disabled]="disableUpdateBtn()"></button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </ng-container>\n    </form>\n  </ng-container>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],G);var S=n(59256),y=n(59136);let ye=class{constructor(e,t,s){this.despesaService=e,this.modal=t,this.toastService=s,this.currentPage=1,this.isLoaded=!1,this.contentError=new te.S,this.subscriptions=new x.w0}ngOnInit(){this.loadDespesas()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadDespesas(e=1){const t=this.despesaService.list({order:y.L.ASC,page:e,take:5}).subscribe({next:s=>{this.despesas=s,this.isLoaded=!0},error:s=>{this.contentError={code:s.status,hasError:!0}}});this.subscriptions.add(t)}search(){this.loadDespesas(1)}paginar(e){const{first:t,rows:s}=e,a=Number(Number(t)/Number(s)+1);a!=this.currentPage&&(this.currentPage=a,this.loadDespesas(a))}changeFiltro(e){const{value:t}=e;this.loadDespesas()}createNew(){this.showModal(se)}editarDespesa(e){this.showModal(G,{despesa:e})}showModal(e,t){var s=this;return(0,f.Z)(function*(){const a=yield s.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-80",componentProps:t});return a.onDidDismiss().then(i=>{const{data:c}=i;c&&(s.loadDespesas(s.currentPage),s.toastService.presentToast({detalhe:"Opera\xe7\xe3o bem sucedida!",titulo:"Sucesso!",duracao:l.m4.mediumDuration,gravidade:l.kl.SUCESSO}))}),yield a.present()})()}};ye.ctorParameters=()=>[{type:Qe.B},{type:m.IN},{type:S.D}],ye=(0,p.gn)([(0,r.wA2)({selector:"app-despesa-main",template:'<br>\n<div class="card">\n\n  <ng-container *ngIf="isLoaded">\n  <p-dataView emptyMessage="Nada encontrado, experimente escolher outra carga" class="data-container"\n  #dv [lazy]="true" [value]="despesas.data" [paginator]="true" [rows]="despesas.meta.take"\n  [totalRecords]="despesas.meta.itemCount" [pageLinks]="despesas.meta.pageCount" (onLazyLoad)="paginar($event)"\n  filterBy="nome" layout="list">\n  <ng-template pTemplate="header">\n    <div class="flex justify-content-end mb-2">\n      <p-button icon="pi pi-plus" label="Novo" (click)="createNew()">\n      </p-button>\n    </div>\n\n  </ng-template>\n    <ng-template let-despesa pTemplate="listItem">\n      <div *ngIf="isLoaded" #templateGrid class="col-12">\n        <div class="despesa-list-item">\n          <div class="despesa-list-detail">\n            <div class="despesa-name">{{ despesa.nome }}</div>\n            <div class="despesa-description">{{ despesa.descricao }}</div>\n          </div>\n          <div class="despesa-list-action">\n            <p-button icon="pi pi-pencil" label="Editar" (click)="editarDespesa(despesa)">\n            </p-button>\n          </div>\n        </div>\n      </div>\n    </ng-template>\n  </p-dataView>\n  </ng-container>\n\n  <ng-container *ngIf="contentError.hasError">\n    <app-content-error [erroCode]="contentError.code"></app-content-error>\n  </ng-container>\n</div>\n\n\n<p-confirmDialog [style]="{width: \'50vw\'}" [baseZIndex]="10000" rejectButtonStyleClass="p-button-text"></p-confirmDialog>',styles:[":host ::ng-deep .data-container .center {\n  text-align: center;\n}\n:host ::ng-deep .data-container .p-dropdown {\n  width: 14rem;\n  font-weight: normal;\n}\n:host ::ng-deep .data-container .despesa-name {\n  font-size: 1.5rem;\n  font-weight: 700;\n}\n:host ::ng-deep .data-container .despesa-description {\n  margin: 0 0 1rem 0;\n  margin-top: 10px;\n}\n:host ::ng-deep .data-container .despesa-category-icon {\n  vertical-align: middle;\n  margin-right: 0.5rem;\n}\n:host ::ng-deep .data-container .despesa-category {\n  font-weight: 600;\n  vertical-align: middle;\n}\n:host ::ng-deep .data-container .despesa-list-item {\n  display: flex;\n  align-items: center;\n  padding: 1rem;\n  width: 100%;\n}\n:host ::ng-deep .data-container .despesa-list-item img {\n  width: 150px;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n  margin-right: 2rem;\n}\n:host ::ng-deep .data-container .despesa-list-item .despesa-list-detail {\n  margin-left: 10px;\n  flex: 1 1 0;\n}\n:host ::ng-deep .data-container .despesa-list-item .p-rating {\n  margin: 0 0 0.5rem 0;\n}\n:host ::ng-deep .data-container .despesa-list-item .despesa-price {\n  font-size: 1.5rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  align-self: flex-end;\n}\n:host ::ng-deep .data-container .despesa-list-item .despesa-list-action {\n  display: flex;\n  flex-direction: column;\n}\n:host ::ng-deep .data-container .despesa-list-item .p-button {\n  margin-bottom: 0.5rem;\n}\n@media screen and (max-width: 576px) {\n  :host ::ng-deep .despesa-list-item {\n    flex-direction: column;\n    align-items: center;\n  }\n  :host ::ng-deep .despesa-list-item img {\n    width: 75%;\n    margin: 2rem 0;\n  }\n  :host ::ng-deep .despesa-list-item .despesa-list-detail {\n    text-align: center;\n  }\n  :host ::ng-deep .despesa-list-item .despesa-price {\n    align-self: center;\n  }\n  :host ::ng-deep .despesa-list-item .despesa-list-action {\n    display: flex;\n    flex-direction: column;\n  }\n  :host ::ng-deep .despesa-list-item .despesa-list-action {\n    margin-top: 2rem;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n  }\n}"]})],ye);var We=n(2635);var Xe,d,Ze,Se=n(74896),_e=n(57118);(d=Xe||(Xe={})).ATIVO="ATIVO",d.INATIVO="INATIVO",function(d){d.TRIAL="TRIAL",d.HABILITACAO_LOJA="HABILITACAO_LOJA",d.INDIVIDUAL="INDIVIDUAL",d.CORPORATIVA="CORPORATIVA"}(Ze||(Ze={}));var _t=n(80529),it=n(99038),Tt=n(55583),Lt=n(40199);let Ie=class{constructor(e){this.http=e}findById(e){return this.http.get(`${it.Hz.baseURL}/licencas/${e}`,{responseType:"json"})}list(e,t=new Lt.k){let s=Tt.t.getPageOptionsParams(t);return e&&e.data_pagamento&&(s=s.append("data_pagamento",e.data_pagamento.toDateString())),e&&e.licenca_id&&(s=s.append("licenca_id",e.licenca_id)),e&&e.searchedLicenca&&(s=s.append("searchedLicenca",e.searchedLicenca)),e&&e.status_licenca&&(s=s.append("status_licenca",e.status_licenca)),e&&e.tipo_licenca&&(s=s.append("tipo_licenca",e.tipo_licenca)),e&&e.available_only&&(s=s.append("available_only",e.available_only)),this.http.get(`${it.Hz.baseURL}/licencas`,{responseType:"json",params:s})}};Ie.ctorParameters=()=>[{type:_t.eN}],Ie=(0,p.gn)([(0,r.GSi)({providedIn:"root"})],Ie);var Pt=n(54222);let P=class{constructor(e,t,s){this.modal=e,this.toastMessageService=t,this.licencasService=s,this.hasUpdate=!1,this.subscriptions=new x.w0}ngOnInit(){this.toastMessageService.clearToast(),this.licenca||this.loadLicenca()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadLicenca(){const e=this.licencasService.findById(this.licenca_id).subscribe({next:t=>{this.licenca=t}});this.subscriptions.add(e)}openLink(e){Pt.U.externalLinkHandle(e)}fechar(){var e=this;return(0,f.Z)(function*(){yield e.modal.dismiss(e.hasUpdate)})()}};P.ctorParameters=()=>[{type:m.IN},{type:S.D},{type:Ie}],P.propDecorators={licenca:[{type:r.IIB}],licenca_id:[{type:r.IIB}]},P=(0,p.gn)([(0,r.wA2)({selector:"app-licenca-brief",template:'<ion-content appScrollTheme>\n  <div class="surface-card p-4 border-round shadow-2 ">\n    <div class="col-12 h-full">\n      <div class="border-1 border-double border-primary surface-border border-round mt-4" style="min-height: 30rem">\n        <ng-container *ngIf="licenca">\n          <div class="surface-card p-4 shadow-2 border-round">\n            <div class="flex align-items-center justify-content-end ml-auto cursor-pointer"\n              style="position: fixed; top: 15px; right: 15px;" (click)="fechar()">\n              <span\n                class="flex align-items-center justify-content-center bg-pink-100 text-pink-800 border-circle vertical-align-top"\n                style="width: 24px; height: 24px;">\n                <i class="pi pi-times text-sm"></i>\n              </span>\n            </div>\n            <div class="font-medium text-3xl text-900 mb-3">Detalhamento</div>\n            <div class="text-primary mb-5">{{ licenca.id }} - <span>{{ licenca.is_available ? \'DISPON\xcdVEL\':\n                \'INDISPON\xcdVEL\' }}</span></div>\n            <ul class="list-none p-0 m-0 border-top-1 surface-border">\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Observa\xe7\xe3o</div>\n                <div class="text-900 w-full md:w-10">{{ licenca.observacao }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Status</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ licenca.status_licenca }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Tipo</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ licenca.tipo_licenca }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Valor a pagar</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ licenca.valor_pagar | currency:\'BRL\': \'(R$)\'}}\n                </div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Valor pago</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ licenca.valor_pago | currency:\'BRL\': \'(R$)\'}}\n                </div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Comprovante de pagamento</div>\n                <div *ngIf="licenca.comprovante_url" class="text-900 w-full md:w-10 line-height-3 ">\n                  <span class="cursor-pointer hover:text-primary" (click)="openLink(licenca.comprovante_url)">\n                    {{ licenca.comprovante_url }}\n                    <i class="pi pi-external-link text-xs ml-1"></i>\n                  </span>\n                </div>\n                <div *ngIf="!licenca.comprovante_url" class="text-900 w-full md:w-10 line-height-3">N\xe3o informado</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">NF</div>\n                <div *ngIf="licenca.nf_url" class="text-900 w-full md:w-10 line-height-3 ">\n                  <span class="cursor-pointer hover:text-primary" (click)="openLink(licenca.nf_url)">\n                    {{ licenca.nf_url }}\n                    <i class="pi pi-external-link text-xs ml-1"></i>\n                  </span>\n                </div>\n                <div *ngIf="!licenca.nf_url" class="text-900 w-full md:w-10 line-height-3">N\xe3o informado</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Data de pagamento</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ licenca.data_pagamento | date: \'dd/MM/yyyy\' }}\n                </div>\n              </li>\n\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Criado em</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ licenca.created_at | date: \'dd/MM/yyyy -\n                  HH:mm:ss\' : \'-0300\' }}h</div>\n              </li>\n              <li *ngIf="licenca.created_by" class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Criado por</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">ID</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.id }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Tipo de usu\xe1rio</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.tipo_user }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Nome</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.nome }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">CPF</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.cpf ? (licenca.created_by.cpf | cpfMask) : \'N\xe3o informado\'\n                          }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">E-mail</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.email || \'N\xe3o informado\' }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">E-mail (alternativo)</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.email_alternativo || \'N\xe3o informado\' }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Celular</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.tel1 ? (licenca.created_by.tel1 | phoneMask) : \'N\xe3o\n                          h\xe1\' }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Celular (alternativo)</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.tel2 ? (licenca.created_by.tel2 | phoneMask) : \'N\xe3o\n                          h\xe1\' }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Acesso ao sistema</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.status_user }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Situa\xe7\xe3o na corpora\xe7\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.status_pessoa }}\n                        </div>\n                      </div>\n                    </div>\n\n                  </div>\n                </div>\n              </li>\n\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Atualizado em</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ licenca.updated_at | date: \'dd/MM/yyyy -\n                  HH:mm:ss\' : \'-0300\' }}h</div>\n              </li>\n              <li *ngIf="licenca.updated_by" class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Atualizado por</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">ID</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.id }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Tipo de usu\xe1rio</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.tipo_user }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Nome</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.nome }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">CPF</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.cpf ? (licenca.updated_by.cpf | cpfMask) : \'N\xe3o informado\'\n                          }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">E-mail</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.email || \'N\xe3o informado\' }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">E-mail (alternativo)</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.email_alternativo || \'N\xe3o informado\' }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Celular</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.tel1 ? (licenca.updated_by.tel1 | phoneMask) : \'N\xe3o\n                          h\xe1\' }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Celular (alternativo)</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.tel2 ? (licenca.updated_by.tel2 | phoneMask) : \'N\xe3o\n                          h\xe1\' }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Acesso ao sistema</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.status_user }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Situa\xe7\xe3o na corpora\xe7\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.status_pessoa }}\n                        </div>\n                      </div>\n                    </div>\n\n                  </div>\n                </div>\n              </li>\n\n              <li *ngIf="licenca.loja" class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Loja Associada</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Nome</span>\n                        </div>\n                        <div class="text-700">{{ licenca.loja.nome }} ({{ licenca.loja.codigo }})</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Descri\xe7\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ licenca.loja.descricao }}</div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n\n            </ul>\n          </div>\n        </ng-container>\n      </div>\n    </div>\n  </div>\n</ion-content>',styles:[""]})],P);var Q=n(94567),He=n(33930);let ae=class{constructor(e,t,s,a,i,c){this.formBuilder=e,this.lojaService=t,this.licencasService=s,this.modal=a,this.toastService=i,this.modalCadastro=c,this.isLoaded=!1,this.stepIndex=0,this.createdlojaId="",this.wasCreated=!1,this.showQuestionDialog=!1,this.questionTitle="",this.questionDescription="",this.searchedLicenca="",this.showLicencaDialog=!1,this.available_only=!0,this.lojaTipoSelect=Q.r6,this.enderecoMode=He.x.LOJA,this.subscriptions=new x.w0,this.form=this.formBuilder.group({nome:[,[o.kI.required]],descricao:[,[o.kI.required]],codigo:[,[o.kI.required]],estoque_mode:[Se.z.NOTHING,[o.kI.required]],licenca_id:[,[o.kI.required]],tipo_loja:[,[o.kI.required]]})}ionViewWillEnter(){}ngOnInit(){this.steps=[{label:"Informa\xe7\xf5es"},{label:"Produtos"},{label:"Endere\xe7o"}],this.loadLicencas()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadLicencas(e=1){const t=this.licencasService.list({status_licenca:Xe.ATIVO,tipo_licenca:Ze.HABILITACAO_LOJA,available_only:this.available_only},{order:y.L.ASC,page:e,take:5}).subscribe({next:s=>{this.licencas=s,this.isLoaded=!0}});this.subscriptions.add(t)}searchLicenca({value:e}){this.searchedLicenca=e,this.loadLicencas(1)}clearLicenca(e){e.value="",this.searchedLicenca="",this.loadLicencas(1)}paginarLicenca(e){this.loadLicencas()}onLicencaFilter(e){const t=e.filter;this.searchedLicenca=t}blurLicenca(e,t){this.searchedLicenca=void 0,t.filterValue=void 0}detailLicenca(){const e=this.form.get("licenca_id").value;this.selectedLicenca=this.licencas.data.find(t=>t.id==e),this.selectedLicenca?this.showModal(P,{licenca:this.selectedLicenca}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}create(){const e=this.form.get("licenca_id").value;if(!this.licencas.data.find(w=>w.id==e).is_available)return void this.toastService.presentToast({titulo:"Indispon\xedvel!",detalhe:"Esta licen\xe7a j\xe1 se encontra em uso",duracao:l.m4.shortDuration,gravidade:l.kl.ATENCAO});const s=this.form.get("estoque_mode").value;if(s==Se.z.SPECIFIED&&0==this.stepIndex)return void(this.stepIndex=1);const a=this.form.get("nome").value,i=this.form.get("descricao").value,c=this.form.get("codigo").value,h=this.form.get("tipo_loja").value,g=this.lojaService.create({nome:a,descricao:i,codigo:c,estoque_mode:s,tipo_loja:h,licenca_id:e}).subscribe(w=>{this.createdlojaId=w.id,this.wasCreated=!0,this.stepIndex=2});this.subscriptions.add(g)}listenProdutosSelection(e){const t=this.form.get("nome").value,s=this.form.get("descricao").value,a=this.form.get("codigo").value,i=this.form.get("estoque_mode").value,c=this.form.get("tipo_loja").value,h=this.form.get("licenca_id").value,g=e,w=this.lojaService.create({nome:t,descricao:s,codigo:a,estoque_mode:i,produtos:g,tipo_loja:c,licenca_id:h}).subscribe(k=>{this.createdlojaId=k.id,this.wasCreated=!0,this.stepIndex=2});this.subscriptions.add(w)}listenEndereco(e){this.fechar(this.wasCreated)}getGenerate(){return Se.z.GENERATE}getNothing(){return Se.z.NOTHING}getSpecified(){return Se.z.SPECIFIED}detailGenerate(){this.questionTitle="Gera\xe7\xe3o autom\xe1tica",this.questionDescription="Com esta op\xe7\xe3o selecionada, o sistema criar\xe1 estoque ZERADO de todos os produtos existentes, na nova loja",this.showQuestionDialog=!0}detailNothing(){this.questionTitle="N\xe3o criar estoques",this.questionDescription="Com esta op\xe7\xe3o selecionada, o sistema ira criar apenas a loja, sem qualquer estoque",this.showQuestionDialog=!0}detailSpecified(){this.questionTitle="Especficiar produtos",this.questionDescription="Com esta op\xe7\xe3o selecionada, voc\xea selecionar\xe1 na tela seguinte, todos os produtos e a quantidade em estoque que deseja que o sistema crie junto com a cria\xe7\xe3o da loja",this.showQuestionDialog=!0}fechar(e=!1){this.modal.dismiss(this.wasCreated)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,f.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};ae.ctorParameters=()=>[{type:o.QS},{type:_e.W},{type:Ie},{type:m.IN},{type:S.D},{type:m.IN}],ae=(0,p.gn)([(0,r.wA2)({selector:"app-loja-cadastro",template:'<ion-content appScrollTheme>\n  <div class="surface-ground  py-4">\n    <p-steps [activeIndex]="stepIndex" [model]="steps" [readonly]="true"></p-steps>\n  </div>\n\n  <ng-container *ngIf="stepIndex == 0 && licencas">\n    <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-2 md:px-6 lg:px-8">\n        <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid">\n          <div class="grid formgrid p-fluid">\n            <div class="col-12 field ">\n              <label for="licenca_id" class="text-900 font-medium mb-3">Licen\xe7a</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailLicenca()"></div>\n              <p-dropdown id="licenca_id" [options]="licencas.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="licenca_id"\n                 optionLabel="id" filterBy="id"\n                optionValue="id" [showClear]="true">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="field-checkbox mt-1 mb-2">\n                    <p-checkbox [(ngModel)]="available_only" [ngModelOptions]="{standalone: true}" [binary]="true"\n                      inputId="available_only" (onChange)="loadLicencas()"></p-checkbox>\n                    <label for="available_only">{{ available_only ? \'Dispon\xedveis\' : \'Tudo\' }}</label>\n                  </div>\n\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchLicencaInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchLicenca(searchLicencaInput)">\n                      <button pButton pRipple icon="pi pi-search" (click)="searchLicenca(searchLicencaInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearlicenca(searchLicencaInput)"></button>\n                    </div>\n\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-licenca pTemplate="item">\n                  <div>\n                    <div>{{ licenca.id }} - {{ licenca.is_available ? \'DISPON\xcdVEL\': \'INDISPON\xcdVEL\' }}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-licenca pTemplate="selectedItem">\n                  <div>{{ licenca.id }} - {{ licenca.is_available ? \'DISPON\xcdVEL\': \'INDISPON\xcdVEL\' }}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'licenca_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="codigo" class="font-medium text-900">C\xf3digo</label>\n              <p-inputMask id="codigo" formControlName="codigo" mask="999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'codigo\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12">\n              <label for="descricao">Descri\xe7\xe3o</label>\n              <textarea id="descricao" class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n                formControlName="descricao"></textarea>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12">\n              <label for="tipo_loja" class="text-900 font-medium mb-3">Tipo de loja</label>\n              <p-dropdown id="tipo_loja" [options]="lojaTipoSelect" emptyMessage="Nada dispon\xedvel"\n                placeholder="Selecione" formControlName="tipo_loja" styleClass="mb-2 md:mb-0 w-full">\n              </p-dropdown>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n            <div class="field-radiobutton mb-4 col-12 ">\n              <p-radioButton name="estoque_mode" [value]="getNothing()" formControlName="estoque_mode"\n                inputId="nothing">\n              </p-radioButton>\n              <label for="nothing">N\xe3o criar estoques</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailNothing()"></div>\n            </div>\n            <div class="field-radiobutton mb-4 col-12 ">\n              <p-radioButton name="estoque_mode" [value]="getGenerate()" formControlName="estoque_mode"\n                inputId="generate">\n              </p-radioButton>\n              <label for="generate">Criar estoques para todos os produtos cadastrados</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailGenerate()"></div>\n            </div>\n            <div class="field-radiobutton mb-4 col-12 ">\n              <p-radioButton name="estoque_mode" [value]="getSpecified()" formControlName="estoque_mode"\n                inputId="specified"></p-radioButton>\n              <label for="specified">Especificar produtos</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSpecified()"></div>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'estoque_mode\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Pr\xf3ximo" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n              [disabled]="disableCreateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n\n  <ng-container *ngIf="stepIndex == 1">\n    <app-select-products (selectedProdutosEvent)="listenProdutosSelection($event)">\n    </app-select-products>\n  </ng-container>\n\n  <ng-container *ngIf="stepIndex == 2">\n    <app-endereco [idOf]="createdlojaId" [enderecoMode]="enderecoMode" (createdEvent)="listenEndereco($event)">\n    </app-endereco>\n  </ng-container>\n\n  <p-dialog [(visible)]="showQuestionDialog" appendTo="body" [modal]="true"\n    [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <span class="flex align-items-center justify-content-center bg-cyan-100 text-cyan-800 mr-3 border-circle"\n          style="width:32px;height:32px">\n          <i class="pi pi-info text-lg"></i>\n        </span>\n        <span class="font-medium text-2xl text-900">{{ questionTitle }}</span>\n      </div>\n    </ng-template>\n    <p class="line-height-3 p-0 m-0">\n      {{ questionDescription }}.\n    </p>\n    <ng-template pTemplate="footer">\n      <div class=" pt-3">\n        <button pButton pRipple icon="pi pi-check" (click)="showQuestionDialog = false" label="OK"></button>\n      </div>\n    </ng-template>\n  </p-dialog>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],ae);let W=class{constructor(e,t,s,a,i){this.formBuilder=e,this.lojaService=t,this.modal=s,this.toastService=a,this.modalUpdate=i,this.isLoaded=!1,this.wasCreated=!1,this.lojaTipoSelect=Q.r6,this.subscriptions=new x.w0}ionViewWillEnter(){}ngOnInit(){const{nome:e,descricao:t,codigo:s,tipo_loja:a,licenca:i}=this.loja;this.currentLicenca=i,this.form=this.formBuilder.group({nome:[e,[o.kI.required]],descricao:[t,[o.kI.required]],codigo:[s,[o.kI.required]],tipo_loja:[a,[o.kI.required]]})}ngOnDestroy(){this.subscriptions.unsubscribe()}update(){const{id:e}=this.loja,t=this.form.get("nome").value,s=this.form.get("descricao").value,a=this.form.get("codigo").value,i=this.form.get("tipo_loja").value,c=this.lojaService.update({nome:t,descricao:s,codigo:a,tipo_loja:i},e).subscribe(h=>{this.fechar(!0)});this.subscriptions.add(c)}detailLicenca(){this.currentLicenca?this.showModal(P,{licenca:this.currentLicenca}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}fechar(e=!1){this.modal.dismiss(e)}isInputError(e){return!(!this.form.controls[e].dirty||!this.form.controls[e].errors)}getCurrentLicencaLabel(){return this.currentLicenca?`${this.currentLicenca.id} - ${this.currentLicenca.status_licenca}`:"Sem licen\xe7a associada"}disableUpdateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,f.Z)(function*(){const a=yield s.modalUpdate.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};W.ctorParameters=()=>[{type:o.QS},{type:_e.W},{type:m.IN},{type:S.D},{type:m.IN}],W.propDecorators={loja:[{type:r.IIB}]},W=(0,p.gn)([(0,r.wA2)({selector:"app-loja-detail",template:'<ion-content appScrollTheme>\n  <ng-container *ngIf="loja">\n    <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n        <div class="card mb-2">\n          <p-steps [activeIndex]="stepIndex" [model]="steps" [readonly]="true"></p-steps>\n        </div>\n        <div class="text-900 font-medium text-xl mb-1">Atualizar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid">\n          <div class="grid formgrid p-fluid">\n            <div class="col-12 field ">\n              <label for="licenca_id" class="text-900 font-medium mb-3">Licen\xe7a</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailLicenca()"></div>\n              <input id="nome" type="text" pInputText [readonly]="true" [value]="getCurrentLicencaLabel()"\n                [ngModelOptions]="{standalone: true}">\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="codigo" class="font-medium text-900">C\xf3digo</label>\n              <p-inputMask id="codigo" formControlName="codigo" mask="999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'codigo\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12">\n              <label for="descricao">Descri\xe7\xe3o</label>\n              <textarea id="descricao" class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n                formControlName="descricao"></textarea>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12">\n              <label for="tipo_loja" class="text-900 font-medium mb-3">Tipo de loja</label>\n              <p-dropdown id="tipo_loja" [options]="lojaTipoSelect" emptyMessage="Nada dispon\xedvel"\n                placeholder="Selecione" formControlName="tipo_loja" styleClass="mb-2 md:mb-0 w-full">\n              </p-dropdown>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Atualizar" icon="pi pi-send" iconPos="right" class="w-auto"\n              (click)="update()" [disabled]="disableUpdateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],W);var Je=n(10805),rt=n(42759),lt=n(16320),Ut=n(87726);let je=class{constructor(e,t,s,a){this.lojaService=e,this.modal=t,this.toastService=s,this.confirmationService=a,this.sortLojaStatus=Q.OL,this.sortLojaTipo=Q.r6,this.searchedLoja="",this.selectedLojaStatus=Q.eX.OPERANDO,this.selectedLojaTipo=void 0,this.currentPage=1,this.isLoaded=!1,this.editMenuItens=[{label:"Op\xe7\xf5es",items:[{label:"Atualizar",icon:"pi pi-pencil",command:()=>this.detalharSimplificado(this.selectedLoja)},{label:"Status",icon:"pi pi-exclamation-triangle",command:()=>this.detalharStatus(this.selectedLoja)}]},{separator:!0,items:[{label:"Tesouraria",icon:"pi pi-chart-line",command:()=>this.detalharTesouraria(this.selectedLoja)},{label:"Estoque",icon:"pi pi-table",command:()=>this.detalharEstoque(this.selectedLoja)}]}],this.showStatusDialog=!1,this.updateStatusObj={status_loja:void 0},this.enderecoMode=He.x.LOJA,this.contentError=new te.S,this.subscriptions=new x.w0}ngOnInit(){this.loadLojas()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadLojas(e=1){const t=this.lojaService.list({status_loja:this.selectedLojaStatus,tipo_loja:this.selectedLojaTipo,searchedLoja:this.searchedLoja},{order:y.L.ASC,page:e,take:5}).subscribe({next:s=>{this.lojas=s,this.isLoaded=!0},error:s=>{this.contentError={code:s.status,hasError:!0}}});this.subscriptions.add(t)}lojaLabel(e){return`${e.nome} - ${e.codigo}`}search(){this.loadLojas(1)}paginar(e){const{first:t,rows:s}=e,a=Number(Number(t)/Number(s)+1);a!=this.currentPage&&(this.currentPage=a,this.loadLojas(a))}createNew(){this.showModal(ae)}detalharSimplificado(e){this.showModal(W,{loja:e})}detalharStatus(e){const{status_loja:t}=e;this.updateStatusObj={status_loja:t},this.showStatusDialog=!0}detalharTesouraria(e){this.toastService.presentToast({titulo:"Em breve",detalhe:"Esta op\xe7\xe3o ainda n\xe3o est\xe1 pronta",duracao:l.m4.shortDuration,gravidade:l.kl.ATENCAO})}detalharEstoque(e){const t=`[${e.codigo}] ${e.nome}`;this.showModal(Ut.a,{loja_id:e.id,loja_label:t})}editarEndereco(e){e.endereco?this.showModal(lt.F,{currentEndereco:e,enderecoMode:this.enderecoMode}):this.showModal(rt.A,{idOf:e.id,enderecoMode:this.enderecoMode,isModal:!0})}updateStatus(){const{id:e}=this.selectedLoja,{status_loja:t}=this.updateStatusObj;if(t==Q.eX.DELETADA)this.confirmationService.confirm({message:"Esta a\xe7\xe3o n\xe3o poder\xe1 ser desfeita, a loja n\xe3o poder\xe1 mais ser utilizada",header:"Deseja mesmo deletar a loja selecionada?",icon:"pi pi-exclamation-triangle",accept:()=>{const s=this.lojaService.update({status_loja:t},e).subscribe({next:a=>{this.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:l.m4.shortDuration,gravidade:l.kl.SUCESSO}),this.showStatusDialog=!1,this.loadLojas(1)},error:a=>{this.showStatusDialog=!1}});this.subscriptions.add(s)},reject:s=>{this.toastService.clearToast()}});else{const s=this.lojaService.update({status_loja:t},e).subscribe({next:a=>{this.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:l.m4.shortDuration,gravidade:l.kl.SUCESSO}),this.showStatusDialog=!1,this.loadLojas(1)},error:a=>{this.showStatusDialog=!1}});this.subscriptions.add(s)}}getEnderecoLabel(e){return e?`${e.endereco}, n\xb0: ${e.numero} - ${e.complemento} | ${e.estado}-${e.cidade}`:"Sem endere\xe7o cadastrado"}clearAllFilters(e,t,s){this.searchedLoja=void 0,this.selectedLojaStatus=Q.eX.OPERANDO,this.selectedLojaTipo=void 0,t.writeValue(null),s.writeValue(null),this.loadLojas(1)}changeStatusLoja({value:e}){this.selectedLojaStatus=e,this.loadLojas(1)}changeTipoLoja({value:e}){this.selectedLojaTipo=e,this.loadLojas(1)}showModal(e,t){var s=this;return(0,f.Z)(function*(){const a=yield s.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{const{data:c}=i;c&&(s.loadLojas(),s.toastService.presentToast({detalhe:"Opera\xe7\xe3o bem sucedida!",titulo:"Sucesso!",duracao:l.m4.shortDuration,gravidade:l.kl.SUCESSO}))}),yield a.present()})()}};je.ctorParameters=()=>[{type:_e.W},{type:m.IN},{type:S.D},{type:Je.YP}],je=(0,p.gn)([(0,r.wA2)({selector:"app-loja-main",template:'\n<div class="pt-3 card main-view">\n  <ng-container *ngIf="isLoaded">\n    <p-dataView emptyMessage="Nada encontrado, experimente outro filtro" class="data-container" #dv [lazy]="true"\n      [value]="lojas.data" [paginator]="true" [rows]="lojas.meta.take" [totalRecords]="lojas.meta.itemCount"\n      [pageLinks]="lojas.meta.pageCount" (onLazyLoad)="paginar($event)" filterBy="nome" layout="list">\n      <ng-template pTemplate="header">\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_tipo [options]="sortLojaTipo" placeholder="Tipo Loja"\n              (onChange)="changeTipoLoja($event)" (onClear)="clearAllFilters($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_status [options]="sortLojaStatus" placeholder="Status Loja"\n              (onChange)="changeStatusLoja($event)" (onClear)="clearAllFilters($event)" [(ngModel)]="selectedLojaStatus"\n              [ngModelOptions]="{standalone: true}" styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n        </div>\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field col-12 sm:col-6 xl:col-3">\n            <button pButton pRipple class="sm:w-auto w-full p-button-outlined" icon="pi pi-times" label="Limpar filtros"\n              (click)="clearAllFilters($event, dropdown_status, dropdown_tipo)">\n            </button>\n          </div>\n          <div class="field col-12 sm:col-6 xl:col-3 text-right">\n            <button pButton pRipple class="sm:w-auto w-full " icon="pi pi-plus" label="Novo cadastro"\n              (click)="createNew()">\n            </button>\n          </div>\n        </div>\n\n        <div class="flex flex-column md:flex-row md:justify-content-center">\n          <span class="p-inputgroup mb-2 md:mb-0 mt-2 max-w-30rem\t">\n            <input class="w-full" type="search" pInputText [(ngModel)]="searchedLoja"\n              [ngModelOptions]="{standalone: true}" placeholder="Nome, descri\xe7\xe3o ou c\xf3digo" (keyup.enter)="search()">\n            <button type="button" pButton pRipple class="pi pi-search cursor-pointer p-button-outlined"\n              (click)="search()"></button>\n            <button type="button" pButton pRipple class="pi pi-times cursor-pointer p-button-outlined p-button-danger"\n              (click)="searchedLoja = \'\'; search();"></button>\n          </span>\n        </div>\n\n      </ng-template>\n      <ng-template let-loja pTemplate="listItem">\n        <div *ngIf="isLoaded" #templateGrid class="col-12">\n          <div class="data-list-item">\n            <div class="data-list-detail">\n              <div class="data-name">[{{ loja.codigo }}] - {{ loja.nome }}</div>\n              <div class="mt-1">{{ loja.descricao }}</div>\n              <div class="mt-2 ">Situa\xe7\xe3o: {{ loja.status_loja }}</div>\n              <div class="mt-1 ">Tipo: {{ loja.tipo_loja }}</div>\n              <div class="mt-2">Tesouraria atual: {{ loja.valor_tesouraria | currency:\'BRL\': \'(R$)\' }}</div>\n              <div class="mt-1">Entrada financeira: {{ loja.valor_receber | currency:\'BRL\': \'(R$)\' }}</div>\n              <div class="mt-1">Sa\xedda financeira: {{ loja.valor_saida | currency:\'BRL\': \'(R$)\' }}</div>\n              <div class="mt-3">\n                <i class="pi pi-map data-category-icon "></i><span class="data-category">{{\n                  getEnderecoLabel(loja.endereco)\n                  }}</span>\n              </div>\n            </div>\n            <div class="data-list-action">\n              <button type="button" pButton icon="pi pi-cog" label="Op\xe7\xf5es"\n                (click)="selectedLoja = loja; editMenu.toggle($event)"></button>\n              <p-menu #editMenu appendTo="body" [popup]="true" [model]="editMenuItens"></p-menu>\n\n              <button pButton type="button" class="p-button-outlined" icon="pi pi-map" label="Endere\xe7o"\n                (click)="editarEndereco(loja)">\n              </button>\n            </div>\n          </div>\n        </div>\n      </ng-template>\n    </p-dataView>\n  </ng-container>\n\n  <ng-container *ngIf="contentError.hasError">\n    <app-content-error [erroCode]="contentError.code"></app-content-error>\n  </ng-container>\n</div>\n\n\n<p-confirmDialog [style]="{width: \'50vw\'}" [baseZIndex]="10000" rejectButtonStyleClass="p-button-text">\n</p-confirmDialog>\n\n\n<p-dialog *ngIf="showStatusDialog" [(visible)]="showStatusDialog" [resizable]="false" [draggable]="false" [modal]="true"\n  [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\', height: \'80%\'}">\n  <ng-template pTemplate="header">\n    <div class="flex align-items-center">\n      <div class="text-900 font-medium mb-3 text-xl">Alterando status</div>\n    </div>\n  </ng-template>\n\n  <div class="surface-card border-round shadow-2 p-4 mt-2">\n    <p class="mt-0 mb-4 p-0 line-height-3">Situa\xe7\xe3o da loja: </p>\n    <p-dropdown [options]="sortLojaStatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n      [(ngModel)]="updateStatusObj.status_loja" [ngModelOptions]="{standalone: true}" styleClass="mb-2 md:mb-0 w-full">\n    </p-dropdown>\n  </div>\n  <div class="flex justify-content-end mt-3 grid">\n    <div class="surface-border border-top-1 opacity-50 mb-1 col-12"></div>\n    <button class="" pButton pRipple label="Atualizar" (click)="updateStatus()"></button>\n  </div>\n</p-dialog>',styles:[":host ::ng-deep .data-container .center {\n  text-align: center;\n}\n:host ::ng-deep .data-container .p-dropdown {\n  width: 14rem;\n  font-weight: normal;\n}\n:host ::ng-deep .data-container .loterica-name {\n  font-size: 1.5rem;\n  font-weight: 700;\n}\n:host ::ng-deep .data-container .loterica-description {\n  margin: 0 0 1rem 0;\n}\n:host ::ng-deep .data-container .loterica-category-icon {\n  vertical-align: middle;\n  margin-right: 0.5rem;\n}\n:host ::ng-deep .data-container .loterica-category {\n  font-weight: 600;\n  vertical-align: middle;\n}\n:host ::ng-deep .data-container .loterica-list-item {\n  display: flex;\n  align-items: center;\n  padding: 1rem;\n  width: 100%;\n}\n:host ::ng-deep .data-container .loterica-list-item img {\n  width: 150px;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n  margin-right: 2rem;\n}\n:host ::ng-deep .data-container .loterica-list-item .loterica-list-detail {\n  margin-left: 10px;\n  flex: 1 1 0;\n}\n:host ::ng-deep .data-container .loterica-list-item .p-rating {\n  margin: 0 0 0.5rem 0;\n}\n:host ::ng-deep .data-container .loterica-list-item .loterica-price {\n  font-size: 1.5rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  align-self: flex-end;\n}\n:host ::ng-deep .data-container .loterica-list-item .loterica-list-action {\n  display: flex;\n  flex-direction: column;\n}\n:host ::ng-deep .data-container .loterica-list-item .p-button {\n  margin-bottom: 0.5rem;\n}\n@media screen and (max-width: 576px) {\n  :host ::ng-deep .loterica-list-item {\n    flex-direction: column;\n    align-items: center;\n  }\n  :host ::ng-deep .loterica-list-item img {\n    width: 75%;\n    margin: 2rem 0;\n  }\n  :host ::ng-deep .loterica-list-item .loterica-list-detail {\n    text-align: center;\n  }\n  :host ::ng-deep .loterica-list-item .loterica-price {\n    align-self: center;\n  }\n  :host ::ng-deep .loterica-list-item .loterica-list-action {\n    display: flex;\n    flex-direction: column;\n  }\n  :host ::ng-deep .loterica-list-item .loterica-list-action {\n    margin-top: 2rem;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n  }\n}"]})],je);var zt=n(45447),L=n(32506),E=n(91795),N=n(42480);let Ke=class{};Ke=(0,p.gn)([(0,r.LVF)({declarations:[P],imports:[v.ez,m.Pc,C.hJ,E.T,j.o,N.R],exports:[P]})],Ke);var $t=n(25922),ne=n(1997),oe=n(38433),ie=n(79512),M=n(45132),R=n(15108),re=n(68271),qe=n(19901);var Ye,Gt=n(46007);!function(d){d.ATIVO="ATIVO",d.INATIVO="INATIVO",d.DELETADO="DELETADO",d.SUSPENSA="SUSPENSA"}(Ye||(Ye={}));const Qt=Gt.m.convertEnumToSelectItem(Ye);var we=n(55575);var Te=n(95494);let le=class{constructor(e,t,s,a){this.formBuilder=e,this.empresasService=t,this.modalCadastro=s,this.toastService=a,this.wasCreated=!1,this.isCliente=!1,this.maxDate=Te.E.getDiaAnterior(),this.subscriptions=new x.w0}ngOnInit(){this.form=this.formBuilder.group({nome_fantasia:[,[o.kI.required]],razao_social:[,[o.kI.required]],cnpj:[,[o.kI.required]],email_principal:[,[o.kI.required,o.kI.email]],email_alternativo:[,[o.kI.email]],tel1:[,[o.kI.required]],tel2:[,[]]})}ngOnDestroy(){this.subscriptions.unsubscribe()}create(){const e=this.form.get("nome_fantasia").value,t=this.form.get("razao_social").value,s=this.form.get("cnpj").value,a=this.form.get("email_principal").value,i=this.form.get("email_alternativo").value,c=this.form.get("tel1").value,h=this.form.get("tel2").value,g=this.empresasService.create({nome_fantasia:e,cnpj:s,email_principal:a,razao_social:t,tel1:c,tel2:h,email_alternativo:i}).subscribe(w=>{this.wasCreated=!0,this.fechar()});this.subscriptions.add(g)}fechar(){this.modalCadastro.dismiss(this.wasCreated)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,f.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};le.ctorParameters=()=>[{type:o.QS},{type:we.o},{type:m.IN},{type:S.D}],le=(0,p.gn)([(0,r.wA2)({selector:"app-empresa-cadastro",template:'<ion-content appScrollTheme>\n  <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n    <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n      <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n      <div class="surface-card p-4 shadow-2 border-round p-fluid">\n        <div class="grid formgrid p-fluid">\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="nome_fantasia" class="font-medium text-900">Nome Fantasia</label>\n            <input id="nome_fantasia" placeholder="Nome Fantasia" type="text" pInputText\n              formControlName="nome_fantasia">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome_fantasia\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="razao_social" class="font-medium text-900">Raz\xe3o Social</label>\n            <input id="razao_social" placeholder="Raz\xe3o Social" type="text" pInputText formControlName="razao_social">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'razao_social\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="cnpj">CNPJ</label>\n            <p-inputMask placeholder="CNPJ da empresa" formControlName="cnpj" mask="99.999.999/9999-99">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'cnpj\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="email_principal">Email (principal)</label>\n            <input type="text" pInputText placeholder="Email principal" formControlName="email_principal" />\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email_principal\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="email_alternativo">Email (alternativo)</label>\n            <input type="text" pInputText placeholder="Email alternativo" formControlName="email_alternativo" />\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email_alternativo\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel1">Celular Principal</label>\n            <p-inputMask id="tel1" placeholder="Celular da empresa" formControlName="tel1" mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel1\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel2">Celular Alternativo</label>\n            <p-inputMask id="tel2" placeholder="Celular alternativo da empresa" formControlName="tel2"\n              mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel2\')"></p-message>\n            </div>\n          </div>\n\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n        </div>\n        <div class="flex justify-content-end">\n          <button pButton pRipple label="Cadastrar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n            [disabled]="disableCreateBtn()"></button>\n        </div>\n      </div>\n    </div>\n  </form>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],le);var dt=n(34057),Jt=n(37172),Kt=n(54452);let X=class{constructor(e,t,s,a,i){this.formBuilder=e,this.empresasService=t,this.modalCadastro=s,this.toastService=a,this.storage=i,this.wasCreated=!1,this.isCliente=!1,this.maxDate=Te.E.getDiaAnterior(),this.subscriptions=new x.w0}ngOnInit(){const{nome_fantasia:e,razao_social:t,email_alternativo:s,tel1:a,tel2:i}=this.empresa;this.form=this.formBuilder.group({nome_fantasia:[e,[o.kI.required]],razao_social:[t,[o.kI.required]],email_alternativo:[s,[o.kI.email]],tel1:[a,[o.kI.required]],tel2:[i,[]]})}ngOnDestroy(){this.subscriptions.unsubscribe()}create(){const e=this.form.get("nome_fantasia").value,t=this.form.get("razao_social").value,s=this.form.get("email_alternativo").value,a=this.form.get("tel1").value,i=this.form.get("tel2").value,c=this.empresasService.update({nome_fantasia:e,razao_social:t,tel1:a,tel2:i,email_alternativo:s},this.empresa.id).subscribe(h=>{this.wasCreated=!0,this.fechar()});this.subscriptions.add(c)}fechar(){this.modalCadastro.dismiss(this.wasCreated)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}uploadFile(e,t){const{id:s}=this.empresa,{perfil_nome:a}=this.storage.getLocalUser();if(!Jt.R.checkUpdateImagePermission(a))return void this.toastService.presentToast({titulo:"N\xe3o autorizado",detalhe:`Apenas ${dt.u.ADMIN} e ${dt.u.GERENTE} podem atualizar essas informa\xe7\xf5es`,duracao:l.m4.mediumDuration,gravidade:l.kl.ATENCAO});const i=e.files[0],c=this.empresasService.uploadAvatar(i,s).subscribe(h=>{this.empresa=h,this.wasCreated=!0,this.toastService.presentToast({detalhe:"Imagem alterada",duracao:l.m4.shortDuration,gravidade:l.kl.SUCESSO,titulo:"Sucesso!"}),t.clear()});this.subscriptions.add(c)}};X.ctorParameters=()=>[{type:o.QS},{type:we.o},{type:m.IN},{type:S.D},{type:Kt.V}],X.propDecorators={empresa:[{type:r.IIB}]},X=(0,p.gn)([(0,r.wA2)({selector:"app-empresa-detail",template:'<ion-content appScrollTheme>\n  <div class="surface-ground px-4 py-8 md:px-6 lg:px-8 ">\n    <div class="flex flex-column align-items-center flex-or ">\n      <img [src]="empresa?.avatar_url || \'assets/imgs/outros/default-empresa.jpg\'"\n        class="h-10rem w-10rem border-circle border-2 border-primary  " />\n      <p-fileUpload #avatarFile id="avatar" mode="basic" name="avatar" accept="image/*"\n        styleClass="p-button-rounded -mt-4 w-3rem  text-center" chooseIcon="pi pi-pencil" chooseLabel=" "\n        customUpload="true" [auto]="true" (uploadHandler)="uploadFile($event, avatarFile)">\n      </p-fileUpload>\n    </div>\n\n    <div class="text-900 font-medium text-xl mb-1 ">Atualizar</div>\n    <div class="surface-card p-4 shadow-2 border-round p-fluid h-full">\n      <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n        <div class="grid formgrid p-fluid">\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="nome_fantasia" class="font-medium text-900">Nome Fantasia</label>\n            <input id="nome_fantasia" placeholder="Nome Fantasia" type="text" pInputText\n              formControlName="nome_fantasia">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome_fantasia\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="razao_social" class="font-medium text-900">Raz\xe3o Social</label>\n            <input id="razao_social" placeholder="Raz\xe3o Social" type="text" pInputText formControlName="razao_social">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'razao_social\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12">\n            <label for="email_alternativo">Email (alternativo)</label>\n            <input type="text" pInputText placeholder="Email alternativo" formControlName="email_alternativo" />\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email_alternativo\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel1">Celular Principal</label>\n            <p-inputMask id="tel1" placeholder="Celular da empresa" formControlName="tel1" mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel1\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel2">Celular Alternativo</label>\n            <p-inputMask id="tel2" placeholder="Celular alternativo da empresa" formControlName="tel2"\n              mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel2\')"></p-message>\n            </div>\n          </div>\n\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n        </div>\n        <div class="flex justify-content-end">\n          <button pButton pRipple label="Cadastrar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n            [disabled]="disableCreateBtn()"></button>\n        </div>\n      </form>\n    </div>\n  </div>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],X);var es=n(81695),Ce=n(52710),ts=n(34758),ct=n(5491);let Z=class{constructor(e,t,s,a,i,c,h){this.formBuilder=e,this.userService=t,this.modalPet=s,this.modalBrief=a,this.toastService=i,this.confirmationService=c,this.filesService=h,this.searchedAssociado=void 0,this.searchedAssociadoTipo=void 0,this.searchedUser="",this.showUserDialog=!1,this.shouldUpdate=!1,this.showDialog=!1,this.currentPage=1,this.pageOrder=y.L.DESC,this.currentTake=5,this.UserTipoSelect=Ce.om.filter(g=>g.value==Ce.Wo.PRESTADOR||g.value==Ce.Wo.SISTEMA),this.cols=[{field:"id",header:"ID"},{field:"associado.nome",header:"Nome"},{field:"associado.tipo_user",header:"Tipo de usu\xe1rio"}],this.opcoesMenuItens=[{label:"Baixar",items:[{label:"CSV",icon:"pi pi-file-o",command:()=>this.exportCsv()},{label:"XLSX",icon:"pi pi-file-excel",command:()=>this.exportExcel()},{label:"PDF",icon:"pi pi-file-pdf",command:()=>this.exportPdf()}]}],this.subscriptions=new x.w0}ngOnInit(){console.log(this.empresa),this.form=this.formBuilder.group({user:[,[o.kI.required]]}),this.loadAssociados(),this.loadUsers()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadAssociados(e=1,t){const s=this.userService.listUsers({empresa_id:this.empresa.id,searchedUser:this.searchedAssociado,tipo_user:this.searchedAssociadoTipo},{order:this.pageOrder,page:e,take:this.currentTake}).subscribe({next:a=>{this.associados=a},complete:()=>{t&&(t.paginator=!0)}});this.subscriptions.add(s)}loadUsers(e=1,t){const s=this.userService.listUsers({searchedUser:this.searchedUser,tipos_usarios:`${Ce.Wo.SISTEMA}, ${Ce.Wo.PRESTADOR}`},{order:y.L.ASC,page:e,take:10}).subscribe(a=>{this.users=a,t&&t.show()});this.subscriptions.add(s)}paginar(e,t){t.paginator=!1;const{first:s,rows:a,sortOrder:i}=e,c=Number(Number(s)/Number(a)+1);this.doFilter(e),this.currentPage=c,this.currentTake=a,this.pageOrder=i&&1==i?y.L.DESC:y.L.ASC,this.loadAssociados(c,t)}associar(){const e=this.form.get("user").value.id,t=this.userService.associaEmpresa(e,{empresa_id:this.empresa.id,override:!1}).subscribe({next:s=>{this.loadAssociados(),this.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:l.m4.shortDuration,gravidade:l.kl.SUCESSO}),this.form.reset()},error:s=>{if(422==s.status){this.toastService.clearToast();const a=s.error.message[0];this.forceAssociar(a)}}});this.subscriptions.add(t)}forceAssociar(e){const t=this.form.get("user").value.id;this.confirmationService.confirm({message:e,header:"Deseja sobrescrever?",icon:"pi pi-exclamation-triangle",accept:()=>{const s=this.userService.associaEmpresa(t,{empresa_id:this.empresa.id,override:!0}).subscribe(a=>{this.loadAssociados(),this.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:l.m4.shortDuration,gravidade:l.kl.SUCESSO}),this.form.reset()});this.subscriptions.add(s)},reject:s=>{this.toastService.clearToast()}})}desassociar(e){this.confirmationService.confirm({message:`Deseja desassociar "${e.nome}" ?`,header:"Desssocia\xe7\xe3o",icon:"pi pi-exclamation-triangle",accept:()=>{const t=this.userService.desassociaEmpresa(e.id).subscribe(s=>{this.loadAssociados(),this.toastService.presentToast({titulo:"Sucesso!",detalhe:"Desassociado com sucesso.",duracao:l.m4.shortDuration,gravidade:l.kl.SUCESSO}),this.form.reset()});this.subscriptions.add(t)},reject:t=>{this.toastService.clearToast()}})}fechar(){this.modalPet.dismiss(this.shouldUpdate)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}searchUser({value:e}){this.searchedUser=e,this.loadUsers(1)}clearUser(e){e.value="",this.searchedUser="",this.loadUsers(1)}detailUser(e){this.selectedUser=e||this.form.get("user").value,console.log(this.selectedUser),this.selectedUser?this.showModal(es.Q,{user:this.selectedUser}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}doFilter(e){if(!e||!e.filters||!e.filters.tipo)return;const{tipo:t}=e.filters;t[0].value?this.searchedAssociadoTipo=t[0].value:this.searchedAssociadoTipo=void 0}exportPdf(){var e=this;return(0,f.Z)(function*(){const t=`${e.empresa.cnpj}_Associado - ${(new Date).toLocaleDateString()}`,s=e.cols.map(i=>i.header),a=e.convertAssociadoData().map(Object.values);yield e.filesService.exportPdf(t,s,a)})()}exportExcel(){var e=this;return(0,f.Z)(function*(){const t=`${e.empresa.cnpj}_Associado - ${(new Date).toLocaleDateString()}`;yield e.filesService.exportExcel(t,e.convertAssociadoData())})()}exportCsv(){var e=this;return(0,f.Z)(function*(){const t=`${e.empresa.cnpj}_Associado - ${(new Date).toLocaleDateString()}`;yield e.filesService.exportCSV(t,e.convertAssociadoData())})()}convertAssociadoData(){return this.associados.data.map(t=>({id:t.id,nome:t.nome,tipo_user:t.tipo_user}))}showModal(e,t){var s=this;return(0,f.Z)(function*(){const a=yield s.modalBrief.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};Z.ctorParameters=()=>[{type:o.QS},{type:ts.K},{type:m.IN},{type:m.IN},{type:S.D},{type:Je.YP},{type:ct.n}],Z.propDecorators={empresa:[{type:r.IIB}]},Z=(0,p.gn)([(0,r.wA2)({selector:"app-empresa-users-lista",template:'<ion-content class="" appScrollTheme>\n\n  <div *ngIf="empresa" class="surface-ground pt-2 pb-3 h-screen">\n    <div class="surface-section px-4 pt-2 mb-3 ">\n      <div class="text-3xl font-medium text-900 mb-3">Usu\xe1rios associado \xe0 empresa: {{ empresa.nome_fantasia }}</div>\n      <div class="surface-border border-top-1 opacity-50 w-full"></div>\n    </div>\n\n    <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-6 py-3 justify-content-start w-auto sm:w-30rem">\n        <div class="surface-card p-4 shadow-2 border-round p-fluid">\n          <div class="grid formgrid p-fluid">\n            <div *ngIf="users" class="col-12 field ">\n              <label for="users" class="text-900 font-medium mb-3">Associar novo</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailUser()"></div>\n              <p-dropdown id="users" [options]="users.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="user"\n                optionLabel="nome" filterBy="nome, cpf" [showClear]="true" styleClass="w-full">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchUserInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchUser(searchUserInput)" class="w-full">\n                      <button pButton pRipple icon="pi pi-search" (click)="searchUser(searchUserInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearUser(searchUserInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-user pTemplate="item">\n                  <div>\n                    <div>{{ user.nome}} - {{ user.cpf | cpfMask }}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-user pTemplate="selectedItem">\n                  <div>{{ user.nome}} - {{ user.cpf | cpfMask }}</div>\n                </ng-template>\n              </p-dropdown>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Associar" icon="pi pi-send" iconPos="right" class="w-auto"\n              (click)="associar()" [disabled]="disableCreateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n\n    <div class="surface-border border-top-1 opacity-50 w-full"></div>\n\n    <div class="surface-ground  px-6 grid formgrid p-fluid mt-2 mb-8 ">\n      <div *ngIf="associados" class="col-12">\n        <p-table #dt [value]="associados.data" dataKey="id" [rowHover]="true" [showCurrentPageReport]="true"\n          [rowsPerPageOptions]="[5,10,25,50]" [globalFilterFields]="[\'nome\',\'id\', \'tipo\', \'cpf\']" [filterDelay]="2"\n          currentPageReportTemplate="Mostrando {first} at\xe9 {last} de {totalRecords} associados" [lazy]="true"\n          [value]="associados.data" [paginator]="true" [rows]="associados.meta.take"\n          [totalRecords]="associados.meta.itemCount" [pageLinks]="associados.meta.pageCount"\n          (onLazyLoad)="paginar($event, dt)" responsiveLayout="scroll" styleClass="p-datatable-striped">\n          <ng-template pTemplate="caption">\n            <div class="grid flex">\n\n              <div class="table-header text-primary col-6">\n                Usu\xe1rios\n              </div>\n              <div class="col-6 justify-content-end text-right mb-1">\n                \x3c!--\n                <button type="button" pButton pRipple icon="pi pi-file-o" (click)="exportCsv()"\n                  class="p-button-help mr-2" pTooltip="CSV" tooltipPosition="bottom"></button>\n\n                <button type="button" pButton pRipple icon="pi pi-file-excel" (click)="exportExcel()"\n                  class="p-button-success mr-2" pTooltip="XLS" tooltipPosition="bottom"></button>\n\n                <button type="button" pButton pRipple icon="pi pi-file-pdf" (click)="exportPdf()"\n                  class="p-button-danger mr-2" pTooltip="PDF" tooltipPosition="bottom"></button>\n--\x3e\n                <button type="button" pButton icon="pi pi-download" (click)="editMenu.toggle($event)"></button>\n                <p-menu #editMenu appendTo="body" [popup]="true" [model]="opcoesMenuItens"></p-menu>\n              </div>\n\n              <div class="col-12 justify-content-start mt-3 mb-1">\n                <span class="p-inputgroup mb-2 md:mb-0 mt-2 max-w-30rem\t">\n                  <input class="w-full" type="search" pInputText [(ngModel)]="searchedAssociado"\n                    [ngModelOptions]="{standalone: true}" placeholder="CPF, Email ou Nome"\n                    (keyup.enter)="loadAssociados()">\n                  <button type="button" pButton pRipple class="pi pi-search cursor-pointer p-button-outlined"\n                    (click)="loadAssociados()"></button>\n                  <button type="button" pButton pRipple\n                    class="pi pi-times cursor-pointer p-button-outlined p-button-danger"\n                    (click)="searchedAssociado = \'\'; loadAssociados();"></button>\n                </span>\n              </div>\n\n            </div>\n          </ng-template>\n\n          <ng-template pTemplate="header">\n            <tr>\n              <th style="width: 15rem;">\n                <div class="text-center">\n                  <span class="mx-2">ID</span>\n                </div>\n              </th>\n              <th style="min-width: 10rem">\n                <div class="text-center">\n                  <span class="mx-2">Nome</span>\n                </div>\n              </th>\n              <th style="min-width: 10rem">\n                <div class="text-center">\n                  <span class="mx-2">CPF</span>\n                </div>\n              </th>\n              <th style="min-width: 10rem">\n                <div class="text-center">\n                  <span class="mx-2">Tipo</span>\n\n                  <p-columnFilter field="tipo" matchMode="between" display="menu" [showMatchModes]="false"\n                    [showOperator]="false" [showAddButton]="false" class="ml-auto">\n                    <ng-template pTemplate="filter" let-value let-filter="filterCallback">\n                      <p-dropdown [ngModel]="value" [options]="UserTipoSelect" (onChange)="filter($event.value)"\n                        placeholder="Tipo de Usu\xe1rio">\n                        <ng-template let-option pTemplate="item">\n                          <div class="mb-2">\n                            <span class="font-light px-2 " style="border-radius: 30px;">{{option.label}}</span>\n                          </div>\n                        </ng-template>\n                      </p-dropdown>\n                    </ng-template>\n                  </p-columnFilter>\n                </div>\n              </th>\n              <th style="width: 15rem"></th>\n            </tr>\n          </ng-template>\n\n          <ng-template pTemplate="body" let-associado>\n            <tr class="p-selectable-row mb-8">\n              <td class="text-center">\n                <span class="p-column-title">id</span>\n                <span class="image-text"> {{associado.id}} </span>\n              </td>\n              <td class="text-center">\n                <span class="p-column-title">Nome</span>\n                <img [src]="associado.cliente?.avatar_url || \'assets/imgs/outros/default-user.jpg\'" width="32"\n                  height="32" class="mr-1 border-circle border-2 border-primary" style="vertical-align: middle" />\n                <br><br>\n                <span class="image-text"> {{associado.nome}} </span>\n              </td>\n              <td class="text-center">\n                <span class="p-column-title">cpf</span>\n                <span class="image-text"> {{ associado.cpf ? (associado.cpf | cpfMask) : \'N\xe3o informado\' }}</span>\n              </td>\n              <td class="text-center">\n                <span class="p-column-title">tipo</span>\n                <span class="image-text"> {{associado.tipo_user}} </span>\n              </td>\n              <td style="text-align: center">\n                <button pButton type="button" class="p-button-danger p-button-outlined" icon="pi pi-times"\n                  (click)="desassociar(associado)"></button>\n                <button pButton type="button" class="p-button-primary ml-0 mt-2 md:ml-3 lg:mt-0" icon="pi pi-eye"\n                  (click)="detailUser(associado)"></button>\n              </td>\n            </tr>\n          </ng-template>\n\n          <ng-template pTemplate="emptymessage">\n            <tr>\n              <td colspan="8">Nenhum usu\xe1rio associado.</td>\n            </tr>\n          </ng-template>\n        </p-table>\n      </div>\n    </div>\n  </div>\n\n  <p-confirmDialog acceptLabel="Sim" rejectLabel="N\xe3o" [style]="{width: \'50vw\'}" [baseZIndex]="10000"\n    rejectButtonStyleClass="p-button-text"></p-confirmDialog>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],Z);let Ee=class{constructor(e,t,s,a){this.empresassService=e,this.modal=t,this.toastService=s,this.lojaService=a,this.sortEmpresaStatus=Qt,this.isLoaded=!1,this.searchedEmpresa="",this.selectedEmpresaStatus=void 0,this.currentPage=1,this.showStatusDialog=!1,this.editMenuItens=[{label:"Op\xe7\xf5es",items:[{label:"Atualizar",icon:"pi pi-user-edit",command:()=>this.detalharSimplificado(this.selectedEmpresa)},{label:"Status",icon:"pi pi-exclamation-triangle",command:()=>this.detalharStatus(this.selectedEmpresa)}]},{separator:!0,items:[{label:"Lista de Usu\xe1rios",icon:"pi pi-id-card",command:()=>this.detalharUsers(this.selectedEmpresa)}]}],this.updateStatusObj={status_empresa:void 0},this.enderecoMode=He.x.EMPRESA,this.showUserList=!1,this.contentError=new te.S,this.subscriptions=new x.w0}ngOnInit(){this.loadEmpresas()}ngOnDestroy(){this.subscriptions.unsubscribe()}changeStatusUsuario({value:e}){this.selectedEmpresaStatus=e,this.loadEmpresas(1)}clearFilter(){this.loadEmpresas(1)}clearAllFilters(e,t,s){this.searchedEmpresa=void 0,this.selectedEmpresaStatus=void 0,t.writeValue(null),s.writeValue(null),this.loadEmpresas(1)}loadEmpresas(e=1){const t=this.empresassService.list({searchedEmpresa:this.searchedEmpresa,status:this.selectedEmpresaStatus},{order:y.L.DESC,page:e,take:5}).subscribe({next:s=>{this.contentError=new te.S,this.empresas=s,this.isLoaded=!0},error:s=>{this.contentError={code:s.status,hasError:!0}}});this.subscriptions.add(t)}updateStatus(){const{id:e}=this.selectedEmpresa,{status_empresa:t}=this.updateStatusObj,s=this.empresassService.update({status:t},e).subscribe({next:a=>{this.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:l.m4.mediumDuration,gravidade:l.kl.SUCESSO}),this.showStatusDialog=!1,this.loadEmpresas(1)},error:a=>{this.showStatusDialog=!1}});this.subscriptions.add(s)}detalharSimplificado(e){this.showModal(X,{empresa:e})}detalharStatus(e){const{status:t}=e;this.updateStatusObj={status_empresa:t},this.showStatusDialog=!0}detalharUsers(e){this.showModal(Z,{empresa:e})}detalharEndereco(e){e.endereco?this.showModal(lt.F,{currentEndereco:e,enderecoMode:this.enderecoMode}):this.showModal(rt.A,{idOf:e.id,enderecoMode:this.enderecoMode,isModal:!0})}setEmpresaImage(e){return e.avatar_url||"assets/imgs/outros/default-empresa.jpg"}createNew(){this.showModal(le)}search(){this.loadEmpresas(1)}paginar(e){const{first:t,rows:s}=e,a=Number(Number(t)/Number(s)+1);a!=this.currentPage&&(this.currentPage=a,this.loadEmpresas(a))}showModal(e,t){var s=this;return(0,f.Z)(function*(){const a=yield s.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{const{data:c}=i;s.isLoaded=!1,s.loadEmpresas(),!0===c&&s.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:l.m4.mediumDuration,gravidade:l.kl.SUCESSO})}),yield a.present()})()}};Ee.ctorParameters=()=>[{type:we.o},{type:m.IN},{type:S.D},{type:_e.W}],Ee=(0,p.gn)([(0,r.wA2)({selector:"app-empresa-main",template:'<div class="pt-3 card main-view h-full">\n\n  <ng-container *ngIf="isLoaded">\n    <p-dataView emptyMessage="Nada encontrado, experimente escolher outra carga" class="data-container" #dv\n      [lazy]="true" [value]="empresas.data" [paginator]="true" [rows]="empresas.meta.take"\n      [totalRecords]="empresas.meta.itemCount" [pageLinks]="empresas.meta.pageCount" (onLazyLoad)="paginar($event)"\n      filterBy="nome" layout="list">\n      <ng-template pTemplate="header">\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field mb-2 col-12 md:col-6 lg:col-3">\n            <p-dropdown #dropdown_filtro [options]="sortEmpresaStatus" placeholder="Status"\n              (onChange)="changeStatusUsuario($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n        </div>\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field col-12 md:col-4">\n            <button pButton pRipple class=" md:w-auto w-full p-button-outlined" icon="pi pi-times"\n              label="Limpar filtros" (click)="clearAllFilters($event, dropdown_lojas, dropdown_filtro)">\n            </button>\n          </div>\n          <div class="field col-12 md:col-2  text-right">\n            <button pButton pRipple class="md:w-auto w-full " icon="pi pi-plus" label="Novo cadastro"\n              (click)="createNew()">\n            </button>\n          </div>\n        </div>\n\n        <div class="flex flex-column md:flex-row md:justify-content-center">\n          <span class="p-inputgroup mb-2 md:mb-0 mt-2 max-w-30rem\t">\n            <input class="w-full" type="search" pInputText [(ngModel)]="searchedEmpresa"\n              [ngModelOptions]="{standalone: true}" placeholder="CNPJ, Email ou Nome Fantasia/Raz\xe3o Social"\n              (keyup.enter)="search()">\n            <button type="button" pButton pRipple class="pi pi-search cursor-pointer p-button-outlined"\n              (click)="search()"></button>\n            <button type="button" pButton pRipple class="pi pi-times cursor-pointer p-button-outlined p-button-danger"\n              (click)="searchedEmpresa = \'\'; search();"></button>\n          </span>\n        </div>\n\n      </ng-template>\n\n      <ng-template let-empresa pTemplate="listItem">\n        <div *ngIf="isLoaded" #templateGrid class="col-12">\n          <div class="data-list-item">\n            <div class="crop mb-2 md:mb-0 ">\n              <img class="border-circle border-2 border-primary" [src]="setEmpresaImage(empresa)"\n                [alt]="empresa.nome" />\n            </div>\n            <div class="data-list-detail">\n              <div class="data-name">{{ empresa.nome_fantasia }}</div>\n              <div class="data-description mt-2">Raz\xe3o Social: {{ empresa.razao_social }}</div>\n              <div class="data-description mt-1">CPF: {{ empresa.cnpj | cnpjMask }}</div>\n              <div class="data-description mt-1">Situa\xe7\xe3o: {{ empresa.status }}</div>\n\n              <div class="data-description mt-2">E-mail: {{ empresa.email_principal }}</div>\n              <div *ngIf="empresa.email_alternativo" class="data-description mt-1">E-mail (alternativo): {{\n                empresa.email_alternativo }}</div>\n              <div class="data-description mt-1">Celular: {{ empresa.tel1 | phoneMask }}</div>\n              <div *ngIf="empresa.tel2" class="data-description mt-1">Celular (alternativo): {{ empresa.tel2 | phoneMask\n                }}\n              </div>\n\n            </div>\n            <div class="data-list-action">\n              <button type="button" pButton icon="pi pi-cog" label="Op\xe7\xf5es"\n                (click)="selectedEmpresa = empresa; editMenu.toggle($event)"></button>\n              <p-menu #editMenu appendTo="body" [popup]="true" [model]="editMenuItens"></p-menu>\n\n              <button pButton type="button" class="p-button-outlined" icon="pi pi-map" label="Endere\xe7o"\n                (click)="detalharEndereco(empresa)">\n              </button>\n            </div>\n          </div>\n        </div>\n      </ng-template>\n    </p-dataView>\n  </ng-container>\n\n  <ng-container *ngIf="contentError.hasError">\n    <app-content-error [erroCode]="contentError.code"></app-content-error>\n  </ng-container>\n\n\n  <p-dialog *ngIf="showStatusDialog" [(visible)]="showStatusDialog" [resizable]="false" [draggable]="false"\n    [modal]="true" [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\', height: \'80%\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <div class="text-900 font-medium mb-3 text-xl">Alterando status</div>\n      </div>\n    </ng-template>\n    <div class="surface-card border-round shadow-2 p-4">\n      <p class="mt-0 mb-4 p-0 line-height-3">Statys: </p>\n      <p-dropdown [options]="sortEmpresaStatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n        [(ngModel)]="updateStatusObj.status_empresa" [ngModelOptions]="{standalone: true}"\n        styleClass="mb-2 md:mb-0 w-full">\n      </p-dropdown>\n    </div>\n    <div class="flex justify-content-end mt-3 grid">\n      <div class="surface-border border-top-1 opacity-50 mb-1 col-12"></div>\n      <button class="" pButton pRipple label="Atualizar" (click)="updateStatus()"></button>\n    </div>\n  </p-dialog>\n</div>\n',styles:[""]})],Ee);var ss=n(69768);let Oe=class{};Oe=(0,p.gn)([(0,r.LVF)({declarations:[Z],imports:[v.ez,o.u5,o.UX,m.Pc,E.T,M.l,b.j,R.x,O.kW,T.$9,C.hJ,D.O,Ge.U$,_.D,j.o,L.X,N.R,ss.B],exports:[Z]})],Oe);let Le=class{};Le=(0,p.gn)([(0,r.LVF)({declarations:[Ee],imports:[v.ez,o.u5,o.UX,m.Pc,B.FI,ie.QK,b.j,V.A,E.T,M.l,R.x,re.F,T.$9,qe.q,ne.U,z.cc,U.Q,oe.ON,O.kW,$.LU,b.j,F.S,C.hJ,D.O,_.D,We.f,j.o,L.X,N.R,Oe],exports:[Ee]})],Le);var Ne=n(3631),Ae=n(70585),as=n(99983);let Pe=class{};Pe=(0,p.gn)([(0,r.LVF)({declarations:[X],imports:[v.ez,o.u5,o.UX,m.Pc,B.FI,ie.QK,b.j,ve.zz,as.O,ee.Iu,V.A,he.nD,E.T,fe.L$,Ne.WN,M.l,R.x,re.F,T.$9,qe.q,ne.U,z.cc,U.Q,Ae._8,oe.ON,O.kW,ue.q,$.LU,b.j,F.S,C.hJ,D.O,_.D,j.o,L.X,N.R],exports:[X]})],Pe);let Me=class{};Me=(0,p.gn)([(0,r.LVF)({declarations:[le],imports:[v.ez,o.u5,o.UX,m.Pc,B.FI,ie.QK,b.j,ve.zz,ee.Iu,V.A,he.nD,E.T,fe.L$,Ne.WN,M.l,R.x,re.F,T.$9,qe.q,ne.U,z.cc,U.Q,Ae._8,oe.ON,O.kW,ue.q,$.LU,b.j,F.S,C.hJ,D.O,_.D,j.o,L.X,N.R],exports:[le]})],Me);let Re=class{};Re=(0,p.gn)([(0,r.LVF)({declarations:[],imports:[v.ez,Le,Pe,Me,Oe],exports:[Le,Pe,Me,Oe]})],Re);var A=n(31191),ke=n(890),pt=n(94826);let H=class{constructor(e,t,s,a,i){this.formBuilder=e,this.contratosService=t,this.modalCadastro=s,this.toastService=a,this.empresasService=i,this.wasCreated=!1,this.isCliente=!1,this.maxDate=Te.E.getDiaAnterior(),this.currentEmpresasPage=1,this.searchedEmpresa="",this.ContratoStatusSelect=A.XC,this.ContratoTipoSelect=A.t1,this.ContratoRecorrenciaPagamentoSelect=A.uS,this.ContratoCondicaoPagamentoSelect=A.RB,this.subscriptions=new x.w0}ngOnInit(){const{nome:e,descricao:t,observacao:s,codigo_contrato:a,tipo:i,status:c,valor:h,condicao_pagamento:g,recorrencia_pagamento:w,data_inicio:k,data_fim:ce,empresa:pe}=this.contrato;this.form=this.formBuilder.group({nome:[e,[o.kI.required]],descricao:[t,[o.kI.required]],observacao:[s,[]],codigo_contrato:[a,[]],tipo:[i,[o.kI.required]],status:[c,[]],valor:[h,[]],condicao_pagamento:[g,[o.kI.required]],recorrencia_pagamento:[w,[o.kI.required]],data_inicio:[k?new Date(k):void 0,[]],data_fim:[ce?new Date(ce):void 0,[]],empresa_id:[pe?.id,[]]}),this.loadEmpresas()}ngOnDestroy(){this.subscriptions.unsubscribe()}create(){const e=this.form.get("nome").value,t=this.form.get("descricao").value,s=this.form.get("observacao").value,a=this.form.get("codigo_contrato").value;let i=this.form.get("valor").value;i=i?Number(i):void 0;const c=this.form.get("tipo").value,h=this.form.get("status").value,g=this.form.get("condicao_pagamento").value,w=this.form.get("recorrencia_pagamento").value,k=this.form.get("data_inicio").value,ce=this.form.get("data_fim").value,pe=this.form.get("empresa_id").value,at=this.contratosService.update({nome:e,observacao:s,codigo_contrato:a,empresa_id:pe,descricao:t,tipo:c,status:h,valor:i,condicao_pagamento:g,recorrencia_pagamento:w,data_inicio:k,data_fim:ce},this.contrato.id).subscribe(ut=>{this.wasCreated=!0,this.fechar()});this.subscriptions.add(at)}loadEmpresas(e=1){const t=this.empresasService.list({searchedEmpresa:this.searchedEmpresa},{order:y.L.ASC,page:e,take:10}).subscribe(s=>{this.empresas=s});this.subscriptions.add(t)}searchEmpresa({value:e}){this.searchedEmpresa=e,this.loadEmpresas(1)}clearEmpresa(e){e.value="",this.searchedEmpresa="",this.loadEmpresas(1)}paginarEmpresas(e){const{first:t,rows:s}=e,a=Number(Number(t)/Number(s)+1);a!=this.currentEmpresasPage&&(this.currentEmpresasPage=a,this.loadEmpresas(a))}detailEmpresa(){const e=this.form.get("empresa_id").value,t=this.empresas.data.find(s=>s.id=e);t?this.showModal(pt.P,{empresa:t}):this.toastService.presentToast({detalhe:"Selecione uma empresa primeiro",titulo:"N\xe3o informado",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}fechar(){this.modalCadastro.dismiss(this.wasCreated)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,f.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};H.ctorParameters=()=>[{type:o.QS},{type:ke.R},{type:m.IN},{type:S.D},{type:we.o}],H.propDecorators={contrato:[{type:r.IIB}]},H=(0,p.gn)([(0,r.wA2)({selector:"app-contrato-detail",template:'<ion-content appScrollTheme>\n  <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n    <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n      <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n      <div class="surface-card p-4 shadow-2 border-round p-fluid">\n        <div class="grid formgrid p-fluid">\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="nome" class="font-medium text-900">Nome</label>\n            <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="valor" class="font-medium text-900">Valor</label>\n            <p-inputNumber id="valor" formControlName="valor" mode="decimal" [minFractionDigits]="2"\n              [maxFractionDigits]="2"></p-inputNumber>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'valor\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12">\n            <label for="codigo_contrato" class="font-medium text-900">C\xf3digo</label>\n            <input id="codigo_contrato" placeholder="C\xf3digo" type="text" pInputText formControlName="codigo_contrato">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'codigo_contrato\')"></p-message>\n            </div>\n          </div>\n          <div *ngIf="empresas" class="col-12 field ">\n            <label for="empresa_id" class="text-900 font-medium mb-3">Empresa</label>\n            <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailEmpresa()"></div>\n            <p-dropdown id="empresa_id" [options]="empresas.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="empresa_id"\n              optionLabel="razao_social" filterBy="razao_social, cnpj" [showClear]="true" optionValue="id">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchEmpresaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchempresa(searchEmpresaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchEmpresa(searchEmpresaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearEmpresa(searchEmpresaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-empresa pTemplate="item">\n                <div>\n                  <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-empresa pTemplate="selectedItem">\n                <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'empresa_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="field mb-4 col-12 ">\n            <label for="descricao" class="font-medium text-900">Descri\xe7\xe3o</label>\n            <textarea class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n              formControlName="descricao"></textarea>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 ">\n            <label for="observacao" class="font-medium text-900">Observa\xe7\xe3o</label>\n            <textarea class="h-auto" id="observacao" pInputTextarea [autoResize]="true" [rows]="5"\n              formControlName="observacao"></textarea>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'observacao\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tipo">Tipo de Projeto</label>\n            <p-dropdown #dropdown_filtro [options]="ContratoTipoSelect" placeholder="Tipo de Projeto"\n              formControlName="tipo"></p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tipo\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="status">Situa\xe7\xe3o</label>\n            <p-dropdown #dropdown_filtro [options]="ContratoStatusSelect" placeholder="Situa\xe7\xe3o do Projeto"\n              formControlName="status" [showClear]="true"></p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'status\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="condicao_pagamento">Condi\xe7\xe3o de Pagamento</label>\n            <p-dropdown #dropdown_filtro [options]="ContratoCondicaoPagamentoSelect" placeholder="Condi\xe7\xe3o de Pagamento"\n              formControlName="condicao_pagamento"></p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'condicao_pagamento\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="recorrencia_pagamento">Recorr\xeancia de Pagamento</label>\n            <p-dropdown #dropdown_filtro [options]="ContratoRecorrenciaPagamentoSelect"\n              placeholder="Recorr\xeancia de Pagamento" formControlName="recorrencia_pagamento"></p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'recorrencia_pagamento\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="data_inicio" class="font-medium text-900">Data de in\xedcio</label>\n            <p-calendar id="data_inicio" [showIcon]="true" formControlName="data_inicio">\n            </p-calendar>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="data_fim" class="font-medium text-900">Data de fim</label>\n            <p-calendar id="data_fim" [showIcon]="true" formControlName="data_fim">\n            </p-calendar>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n        </div>\n        <div class="flex justify-content-end">\n          <button pButton pRipple label="Atualizar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n            [disabled]="disableCreateBtn()"></button>\n        </div>\n      </div>\n    </div>\n  </form>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],H);let de=class{constructor(e,t,s,a,i){this.formBuilder=e,this.contratosService=t,this.modalCadastro=s,this.toastService=a,this.empresasService=i,this.wasCreated=!1,this.isCliente=!1,this.maxDate=Te.E.getDiaAnterior(),this.currentEmpresasPage=1,this.searchedEmpresa="",this.ContratoStatusSelect=A.XC,this.ContratoTipoSelect=A.t1,this.ContratoRecorrenciaPagamentoSelect=A.uS,this.ContratoCondicaoPagamentoSelect=A.RB,this.subscriptions=new x.w0}ngOnInit(){this.form=this.formBuilder.group({nome:[,[o.kI.required]],descricao:[,[o.kI.required]],observacao:[,[]],codigo_contrato:[,[]],tipo:[,[o.kI.required]],status:[,[]],valor:[,[]],condicao_pagamento:[,[o.kI.required]],recorrencia_pagamento:[,[o.kI.required]],data_inicio:[,[]],data_fim:[,[]],empresa:[,[]]}),this.loadEmpresas()}ngOnDestroy(){this.subscriptions.unsubscribe()}create(){const e=this.form.get("nome").value,t=this.form.get("descricao").value,s=this.form.get("observacao").value,a=this.form.get("codigo_contrato").value,i=this.form.get("valor").value,c=this.form.get("tipo").value,h=this.form.get("status").value,g=this.form.get("condicao_pagamento").value,w=this.form.get("recorrencia_pagamento").value,k=this.form.get("data_inicio").value,ce=this.form.get("data_fim").value,pe=this.form.get("empresa").value,at=pe?pe.id:void 0,ut=this.contratosService.create({nome:e,observacao:s,codigo_contrato:a,empresa_id:at,descricao:t,tipo:c,status:h,valor:i,condicao_pagamento:g,recorrencia_pagamento:w,data_inicio:k,data_fim:ce}).subscribe(gs=>{this.wasCreated=!0,this.fechar()});this.subscriptions.add(ut)}loadEmpresas(e=1){const t=this.empresasService.list({searchedEmpresa:this.searchedEmpresa},{order:y.L.ASC,page:e,take:10}).subscribe(s=>{this.empresas=s});this.subscriptions.add(t)}searchEmpresa({value:e}){this.searchedEmpresa=e,this.loadEmpresas(1)}clearEmpresa(e){e.value="",this.searchedEmpresa="",this.loadEmpresas(1)}paginarEmpresas(e){const{first:t,rows:s}=e,a=Number(Number(t)/Number(s)+1);a!=this.currentEmpresasPage&&(this.currentEmpresasPage=a,this.loadEmpresas(a))}detailEmpresa(){const e=this.form.get("empresa").value;e?this.showModal(pt.P,{empresa:e}):this.toastService.presentToast({detalhe:"Selecione uma empresa primeiro",titulo:"N\xe3o informado",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}fechar(){this.modalCadastro.dismiss(this.wasCreated)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,f.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};de.ctorParameters=()=>[{type:o.QS},{type:ke.R},{type:m.IN},{type:S.D},{type:we.o}],de=(0,p.gn)([(0,r.wA2)({selector:"app-contrato-cadastro",template:'<ion-content appScrollTheme>\n  <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n    <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n      <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n      <div class="surface-card p-4 shadow-2 border-round p-fluid">\n        <div class="grid formgrid p-fluid">\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="nome" class="font-medium text-900">Nome</label>\n            <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="valor" class="font-medium text-900">Valor</label>\n            <p-inputNumber id="valor" formControlName="valor" mode="decimal" [minFractionDigits]="2"\n              [maxFractionDigits]="2"></p-inputNumber>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'valor\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12">\n            <label for="codigo_contrato" class="font-medium text-900">C\xf3digo</label>\n            <input id="codigo_contrato" placeholder="C\xf3digo" type="text" pInputText formControlName="codigo_contrato">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'codigo_contrato\')"></p-message>\n            </div>\n          </div>\n          <div *ngIf="empresas" class="col-12 field ">\n            <label for="empresa_id" class="text-900 font-medium mb-3">Empresa</label>\n            <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailEmpresa()"></div>\n            <p-dropdown id="empresa_id" [options]="empresas.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="empresa"\n              optionLabel="razao_social" filterBy="razao_social, cnpj" [showClear]="true">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchEmpresaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchempresa(searchEmpresaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchEmpresa(searchEmpresaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearEmpresa(searchEmpresaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-empresa pTemplate="item">\n                <div>\n                  <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-empresa pTemplate="selectedItem">\n                <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'empresa\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="field mb-4 col-12 ">\n            <label for="descricao" class="font-medium text-900">Descri\xe7\xe3o</label>\n            <textarea class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n              formControlName="descricao"></textarea>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 ">\n            <label for="observacao" class="font-medium text-900">Observa\xe7\xe3o</label>\n            <textarea class="h-auto" id="observacao" pInputTextarea [autoResize]="true" [rows]="5"\n              formControlName="observacao"></textarea>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'observacao\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tipo">Tipo de Projeto</label>\n            <p-dropdown #dropdown_filtro [options]="ContratoTipoSelect" placeholder="Tipo de Projeto"\n              formControlName="tipo"></p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tipo\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="status">Situa\xe7\xe3o</label>\n            <p-dropdown #dropdown_filtro [options]="ContratoStatusSelect" placeholder="Situa\xe7\xe3o do Projeto"\n              formControlName="status" [showClear]="true"></p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'status\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="condicao_pagamento">Condi\xe7\xe3o de Pagamento</label>\n            <p-dropdown #dropdown_filtro [options]="ContratoCondicaoPagamentoSelect" placeholder="Condi\xe7\xe3o de Pagamento"\n              formControlName="condicao_pagamento"></p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'condicao_pagamento\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="recorrencia_pagamento">Recorr\xeancia de Pagamento</label>\n            <p-dropdown #dropdown_filtro [options]="ContratoRecorrenciaPagamentoSelect"\n              placeholder="Recorr\xeancia de Pagamento" formControlName="recorrencia_pagamento"></p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'recorrencia_pagamento\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="data_inicio" class="font-medium text-900">Data de in\xedcio</label>\n            <p-calendar id="data_inicio" [showIcon]="true" formControlName="data_inicio">\n            </p-calendar>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="data_fim" class="font-medium text-900">Data de fim</label>\n            <p-calendar id="data_fim" [showIcon]="true" formControlName="data_fim">\n            </p-calendar>\n          </div>\n\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n        </div>\n        <div class="flex justify-content-end">\n          <button pButton pRipple label="Cadastrar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n            [disabled]="disableCreateBtn()"></button>\n        </div>\n      </div>\n    </div>\n  </form>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],de);var ms=n(75871),us=n(48090);let J=class{constructor(e,t){this.modal=e,this.toastMessageService=t,this.hasUpdate=!1}ngOnInit(){this.toastMessageService.clearToast()}fechar(){var e=this;return(0,f.Z)(function*(){yield e.modal.dismiss(e.hasUpdate)})()}};J.ctorParameters=()=>[{type:m.IN},{type:S.D}],J.propDecorators={projeto:[{type:r.IIB}]},J=(0,p.gn)([(0,r.wA2)({selector:"app-projeto-brief",template:'<ion-content appScrollTheme>\n  <div class="surface-card p-4 border-round shadow-2">\n    <div class="col-12">\n      <div class="border-1 border-double border-primary surface-border border-round mt-4" style="min-height: 30rem">\n        <ng-container *ngIf="projeto">\n          <div class="surface-card p-4 shadow-2 border-round">\n            <div class="flex align-items-center justify-content-end ml-auto cursor-pointer"\n              style="position: fixed; top: 15px; right: 15px;" (click)="fechar()">\n              <span\n                class="flex align-items-center justify-content-center bg-pink-100 text-pink-800 border-circle vertical-align-top"\n                style="width: 24px; height: 24px;">\n                <i class="pi pi-times text-sm"></i>\n              </span>\n            </div>\n            <div class="font-medium text-3xl text-900 mb-3">Detalhamento do Projeto</div>\n            <div class="text-primary mb-5">{{ projeto.id }}</div>\n            <ul class="list-none p-0 m-0 border-top-1 surface-border">\n              <li *ngIf="projeto" class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-900 w-full">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 ">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Nome</span>\n                        </div>\n                        <div class="text-700">{{ projeto.nome }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 ">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Descri\xe7\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ projeto.descricao }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 ">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Benef\xedcio</span>\n                        </div>\n                        <div class="text-700">{{ projeto.beneficio || \'N\xe3o informado\' }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 ">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Observa\xe7\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ projeto.observacao || \'N\xe3o informado\' }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 ">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Risco</span>\n                        </div>\n                        <div class="text-700">{{ projeto.risco || \'N\xe3o informado\' }}</div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Custo</span>\n                        </div>\n                        <div class="text-700">\n                          {{ projeto.custo_projeto ? (projeto.custo_projeto | currency:\'BRL\': \'(R$)\') :\n                          \'N\xe3o informado\' }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Valor a ser cobrado</span>\n                        </div>\n                        <div class="text-700">\n                          {{ projeto.valor_cobrado ? (projeto.valor_cobrado | currency:\'BRL\': \'(R$)\') :\n                          \'N\xe3o informado\' }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Situa\xe7\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ projeto.status }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Prioridade</span>\n                        </div>\n                        <div class="text-700">{{ projeto.prioridade }}</div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Tipo</span>\n                        </div>\n                        <div class="text-700">{{ projeto.tipo }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Categoria</span>\n                        </div>\n                        <div class="text-700">{{ projeto.categoria }}</div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Data de in\xedcio (previsto)</span>\n                        </div>\n                        <div class="text-700">{{\n                          projeto.data_inicio_previsto ? (projeto.data_inicio_previsto | date: \'dd/MM/yyyy\') :\n                          \'N\xe3o informado\'\n                          }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Data de fim (previsto)</span>\n                        </div>\n                        <div class="text-700">{{\n                          projeto.data_fim_previsto ? (projeto.data_fim_previsto | date: \'dd/MM/yyyy\') :\n                          \'N\xe3o informado\'\n                          }}</div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Data de in\xedcio (real)</span>\n                        </div>\n                        <div class="text-700">\n                          {{\n                          projeto.data_inicio_real ? (projeto.data_inicio_real | date: \'dd/MM/yyyy\') :\n                          \'N\xe3o informado\'\n                          }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Data de fim (real)</span>\n                        </div>\n                        <div class="text-700">\n                          {{\n                          projeto.data_fim_real ? (projeto.data_fim_real | date: \'dd/MM/yyyy\') :\n                          \'N\xe3o informado\'\n                          }}\n                        </div>\n                      </div>\n                    </div>\n\n                  </div>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </ng-container>\n      </div>\n    </div>\n  </div>\n</ion-content>',styles:[""]})],J);let K=class{constructor(e,t,s,a,i,c,h,g){this.formBuilder=e,this.projetoService=t,this.contratosService=s,this.modalPet=a,this.modalBrief=i,this.toastService=c,this.confirmationService=h,this.filesService=g,this.searchedAssociado=void 0,this.searchedAssociadoTipo=void 0,this.searchedProjeto="",this.showProjetoDialog=!1,this.shouldUpdate=!1,this.showDialog=!1,this.currentPage=1,this.pageOrder=y.L.DESC,this.currentTake=5,this.ProjetoTipoSelect=us.UP,this.cols=[{field:"id",header:"ID"},{field:"associado.nome",header:"Nome"},{field:"associado.tipo_Projeto",header:"Tipo de usu\xe1rio"}],this.opcoesMenuItens=[{label:"Baixar",items:[{label:"CSV",icon:"pi pi-file-o",command:()=>this.exportCsv()},{label:"XLSX",icon:"pi pi-file-excel",command:()=>this.exportExcel()},{label:"PDF",icon:"pi pi-file-pdf",command:()=>this.exportPdf()}]}],this.subscriptions=new x.w0}ngOnInit(){this.form=this.formBuilder.group({projeto:[,[o.kI.required]]}),this.loadAssociados(),this.loadProjetos()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadAssociados(e=1){const t=this.contratosService.findById(this.contrato_id).subscribe({next:s=>{this.contrato=s,console.log(this.contrato)}});this.subscriptions.add(t)}loadProjetos(e=1,t){const s=this.projetoService.list({searchedProjeto:this.searchedProjeto},{order:y.L.ASC,page:e,take:10}).subscribe(a=>{this.projetos=a,t&&t.show()});this.subscriptions.add(s)}paginar(e,t){t.paginator=!1;const{first:s,rows:a,sortOrder:i}=e,c=Number(Number(s)/Number(a)+1);this.doFilter(e),this.currentPage=c,this.currentTake=a,this.pageOrder=i&&1==i?y.L.DESC:y.L.ASC,this.loadProjetos(c)}associar(){const e=this.form.get("projeto").value.id,t=this.contrato.projetos.map(a=>a.id);t.push(e);const s=this.contratosService.updateAssociacaoProjetos(this.contrato_id,{projetos:t}).subscribe({next:a=>{this.loadAssociados(),this.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:l.m4.shortDuration,gravidade:l.kl.SUCESSO}),this.form.reset()},error:a=>{}});this.subscriptions.add(s)}desassociar(e){this.confirmationService.confirm({message:`Deseja desassociar "${e.nome}" ?`,header:"Desssocia\xe7\xe3o",icon:"pi pi-exclamation-triangle",accept:()=>{const{projetos:t}=this.contrato,s=t.findIndex(c=>c.id==e.id);t.splice(s,1);const a=t.map(c=>c.id),i=this.contratosService.updateAssociacaoProjetos(this.contrato_id,{projetos:a}).subscribe(c=>{this.loadAssociados(),this.toastService.presentToast({titulo:"Sucesso!",detalhe:"Desassociado com sucesso.",duracao:l.m4.shortDuration,gravidade:l.kl.SUCESSO}),this.form.reset()});this.subscriptions.add(i)},reject:t=>{this.toastService.clearToast()}})}fechar(){this.modalPet.dismiss(this.shouldUpdate)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableAssociarProjetoBtn(){return!this.form.valid}searchProjeto({value:e}){this.searchedProjeto=e,this.loadProjetos(1)}clearProjeto(e){e.value="",this.searchedProjeto="",this.loadProjetos(1)}detailProjeto(e){this.selectedProjeto=e||this.form.get("projeto").value,console.log(this.selectedProjeto),this.selectedProjeto?this.showModal(J,{projeto:this.selectedProjeto}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}doFilter(e){if(!e||!e.filters||!e.filters.tipo)return;const{tipo:t}=e.filters;t[0].value?this.searchedAssociadoTipo=t[0].value:this.searchedAssociadoTipo=void 0}exportPdf(){var e=this;return(0,f.Z)(function*(){const t=`${e.contrato.nome} - ${(new Date).toLocaleDateString()}`,s=e.cols.map(i=>i.header),a=e.convertAssociadoData().map(Object.values);yield e.filesService.exportPdf(t,s,a)})()}exportExcel(){var e=this;return(0,f.Z)(function*(){const t=`${e.contrato.nome} - ${(new Date).toLocaleDateString()}`;yield e.filesService.exportExcel(t,e.convertAssociadoData())})()}exportCsv(){var e=this;return(0,f.Z)(function*(){const t=`${e.contrato.nome} - ${(new Date).toLocaleDateString()}`;yield e.filesService.exportCSV(t,e.convertAssociadoData())})()}convertAssociadoData(){return this.associados.data.map(t=>({id:t.id,nome:t.nome,tipo_projeto:t.tipo}))}showModal(e,t){var s=this;return(0,f.Z)(function*(){const a=yield s.modalBrief.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};K.ctorParameters=()=>[{type:o.QS},{type:ms.T},{type:ke.R},{type:m.IN},{type:m.IN},{type:S.D},{type:Je.YP},{type:ct.n}],K.propDecorators={contrato_id:[{type:r.IIB}]},K=(0,p.gn)([(0,r.wA2)({selector:"app-contrato-projetos-lista",template:'<ion-content appScrollTheme>\n\n  <div *ngIf="contrato" class="surface-ground pt-2 pb-3 h-full">\n    <div class="surface-section px-4 pt-2 mb-3">\n      <div class="text-3xl font-medium text-900 mb-3">Projetos associados ao contrato: {{ contrato.nome }}</div>\n      <div class="surface-border border-top-1 opacity-50 w-full"></div>\n    </div>\n\n    <div class="surface-ground px-6 grid formgrid p-fluid">\n      <div *ngFor="let p of contrato.projetos" class="col-12 md:col-6 xl:col-4 p-3 ">\n        <div class="surface-card shadow-2 border-round p-4 ">\n          <div class="flex border-bottom-1 surface-border pb-4">\n            <div class="flex flex-column align-items-start">\n              <span class="text-2xl text-900 font-medium mb-2">{{ p.nome }}\n                <div class="text-xl text-700 font-medium mb-3">{{ p.descricao | limitCharsPipe }}</div>\n              </span>\n              <div class="text-500 font-medium mb-1">Situa\xe7\xe3o: {{ p.status }}</div>\n              <div class="text-500 font-medium mb-3">Prioridade: {{ p.prioridade }}</div>\n\n              <div class="text-500 font-medium mb-1">Tipo: {{ p.tipo }}</div>\n              <div class="text-500 font-medium mb-1">Categoria: {{ p.categoria }}</div>\n\n              <div class="mt-4"></div>\n            </div>\n          </div>\n          <div class="flex justify-content-between pt-4 ">\n            <button pButton pRipple label="Remover" icon="pi pi-times" class="p-button-outlined p-button-danger  ml-2"\n              (click)="desassociar(p)"></button>\n              <button pButton pRipple label="Detalhar" icon="pi pi-eye" class=" ml-2"\n                (click)="detailProjeto(p)"></button>\n          </div>\n        </div>\n      </div>\n\n      <div *ngIf="projetos" class="surface-ground col-12 md:col-6 xl:col-4 p-3">\n        <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n          <div class="surface-card shadow-2 border-round p-4">\n            <div class="grid flex border-bottom-1 surface-border pb-4">\n              <div class="col-12 field mb-5">\n                <label for="projetos" class="text-900 font-medium mb-3">Associar Projeto</label>\n                <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailProjeto()"></div>\n                <p-dropdown id="projetos" #drop_projeto [options]="projetos.data" [filter]="true"\n                  placeholder="Selecione" [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true"\n                  [virtualScrollOptions]="{ showLoader: true, loading: loading, delay: 250 }" formControlName="projeto"\n                  optionLabel="nome" filterBy="nome">\n                  <ng-template pTemplate="filter" let-options="options">\n                    <div class="flex p-3">\n                      <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                        <input #searchProjeto type="text" pInputText placeholder="Procurar">\n                        <button pButton pRipple icon="pi pi-search" (click)="paginar(searchProjeto)"></button>\n                      </div>\n                    </div>\n                  </ng-template>\n                  <ng-template pTemplate="loader" let-options="options">\n                    <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                      <p-skeleton [width]="options.even ? \'60%\' : \'50%\'" height="1rem"></p-skeleton>\n                    </div>\n                  </ng-template>\n                  <ng-template let-projeto pTemplate="item">\n                    <div>\n                      <div>{{ projeto.nome }}</div>\n                    </div>\n                  </ng-template>\n                  <ng-template let-projeto pTemplate="selectedItem">\n                    <div>\n                      <div>{{ projeto.nome }}</div>\n                    </div>\n                  </ng-template>\n                </p-dropdown>\n                <div class="flex mt-1 justify-content-end">\n                  <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'projeto\')"></p-message>\n                </div>\n              </div>\n            </div>\n            <div class="flex justify-content-between pt-4">\n              <button pButton pRipple label="Associar" icon="pi pi-plus"\n                [disabled]="disableAssociarProjetoBtn()" class="w-6 ml-2" (click)="associar()"></button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n\n  <p-confirmDialog acceptLabel="Sim" rejectLabel="N\xe3o" [style]="{width: \'50vw\'}" [baseZIndex]="10000"\n    rejectButtonStyleClass="p-button-text"></p-confirmDialog>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],K);let De=class{constructor(e,t,s){this.contratosService=e,this.modal=t,this.toastService=s,this.sortContratoStatus=A.XC,this.isLoaded=!1,this.searchedContrato="",this.selectedContratoStatus=void 0,this.currentPage=1,this.showStatusDialog=!1,this.editMenuItens=[{label:"Op\xe7\xf5es",items:[{label:"Atualizar",icon:"pi pi-user-edit",command:()=>this.detalharSimplificado(this.selectedContrato)},{label:"Status",icon:"pi pi-exclamation-triangle",command:()=>this.detalharStatus(this.selectedContrato)}]},{separator:!0,items:[{label:"Lista de Projetos",icon:"pi pi-list",command:()=>this.detalharProjetos(this.selectedContrato)},{label:"Lista de Arquivos",icon:"pi pi-file-edit",command:()=>this.detalharArquivos(this.selectedContrato)}]}],this.updateStatusObj={status_contrato:void 0},this.showUserList=!1,this.contentError=new te.S,this.subscriptions=new x.w0}ngOnInit(){this.loadContratos()}ngOnDestroy(){this.subscriptions.unsubscribe()}changeStatus({value:e}){this.selectedContratoStatus=e,this.loadContratos(1)}clearFilter(){this.loadContratos(1)}clearAllFilters(e,t,s){this.searchedContrato=void 0,this.selectedContratoStatus=void 0,t.writeValue(null),s.writeValue(null),this.loadContratos(1)}loadContratos(e=1){const t=this.contratosService.list({searchedContrato:this.searchedContrato,status:this.selectedContratoStatus},{order:y.L.DESC,page:e,take:5}).subscribe({next:s=>{this.contentError=new te.S,this.contratos=s,this.isLoaded=!0},error:s=>{this.contentError={code:s.status,hasError:!0}}});this.subscriptions.add(t)}updateStatus(){const{id:e}=this.selectedContrato,{status_contrato:t}=this.updateStatusObj,s=this.contratosService.update({status:t},e).subscribe({next:a=>{this.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:l.m4.mediumDuration,gravidade:l.kl.SUCESSO}),this.showStatusDialog=!1,this.loadContratos(1)},error:a=>{this.showStatusDialog=!1}});this.subscriptions.add(s)}detalharSimplificado(e){this.showModal(H,{contrato:e})}detalharStatus(e){const{status:t}=e;this.updateStatusObj={status_contrato:t},this.showStatusDialog=!0}detalharProjetos(e){this.showModal(K,{contrato_id:e.id})}detalharArquivos(e){this.toastService.presentToast({titulo:"Em breve",detalhe:"Essa op\xe7\xe3o estar\xe1 dispon\xedvel em breve",duracao:l.m4.shortDuration,gravidade:l.kl.ATENCAO})}createNew(){this.showModal(de)}search(){this.loadContratos(1)}paginar(e){const{first:t,rows:s}=e,a=Number(Number(t)/Number(s)+1);a!=this.currentPage&&(this.currentPage=a,this.loadContratos(a))}showModal(e,t){var s=this;return(0,f.Z)(function*(){const a=yield s.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{const{data:c}=i;s.isLoaded=!1,s.loadContratos(),!0===c&&s.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:l.m4.mediumDuration,gravidade:l.kl.SUCESSO})}),yield a.present()})()}};De.ctorParameters=()=>[{type:ke.R},{type:m.IN},{type:S.D}],De=(0,p.gn)([(0,r.wA2)({selector:"app-contrato-main",template:'<div class="pt-3 card main-view h-full">\n\n  <ng-container *ngIf="isLoaded">\n    <p-dataView emptyMessage="Nada encontrado, experimente escolher outra carga" class="data-container" #dv\n      [lazy]="true" [value]="contratos.data" [paginator]="true" [rows]="contratos.meta.take"\n      [totalRecords]="contratos.meta.itemCount" [pageLinks]="contratos.meta.pageCount" (onLazyLoad)="paginar($event)"\n      filterBy="nome" layout="list">\n      <ng-template pTemplate="header">\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field mb-2 col-12 md:col-6 lg:col-3">\n            <p-dropdown #dropdown_filtro [options]="sortContratoStatus" placeholder="Status"\n              (onChange)="changeStatus($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n        </div>\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field col-12 md:col-4">\n            <button pButton pRipple class=" md:w-auto w-full p-button-outlined" icon="pi pi-times"\n              label="Limpar filtros" (click)="clearAllFilters($event, dropdown_lojas, dropdown_filtro)">\n            </button>\n          </div>\n          <div class="field col-12 md:col-2  text-right">\n            <button pButton pRipple class="md:w-auto w-full " icon="pi pi-plus" label="Novo cadastro"\n              (click)="createNew()">\n            </button>\n          </div>\n        </div>\n\n        <div class="flex flex-column md:flex-row md:justify-content-center">\n          <span class="p-inputgroup mb-2 md:mb-0 mt-2 max-w-30rem\t">\n            <input class="w-full" type="search" pInputText [(ngModel)]="searchedContrato"\n              [ngModelOptions]="{standalone: true}" placeholder="Nome, c\xf3digo ou ID do Contrato"\n              (keyup.enter)="search()">\n            <button type="button" pButton pRipple class="pi pi-search cursor-pointer p-button-outlined"\n              (click)="search()"></button>\n            <button type="button" pButton pRipple class="pi pi-times cursor-pointer p-button-outlined p-button-danger"\n              (click)="searchedContrato = \'\'; search();"></button>\n          </span>\n        </div>\n\n      </ng-template>\n\n      <ng-template let-contrato pTemplate="listItem">\n        <div *ngIf="isLoaded" #templateGrid class="col-12">\n          <div class="data-list-item">\n            <div class="data-list-detail">\n              <div class="data-name">{{ contrato.id }}</div>\n              <div class="data-description mt-2">Nome: {{ contrato.nome }}</div>\n              <div class="data-description mt-1">Valor: {{ contrato.valor ? (contrato.valor | currency:\'BRL\': \'(R$)\') :\n                \'N\xe3o informado\'\n                }}</div>\n\n              <div class="data-description mt-2">C\xf3digo: {{ contrato.codigo_contrato || \'N\xe3o informado\' }}</div>\n              <div class="data-description mt-1">Situa\xe7\xe3o: {{ contrato.status }}</div>\n              <div class="data-description mt-1">Tipo: {{ contrato.tipo || \'N\xe3o informado\' }}</div>\n\n              <div class="data-description mt-2">Empresa associada: {{ contrato.empresa?.razao_social || \'N\xe3o informado\' }}\n              </div>\n            </div>\n\n            <div class="data-list-action">\n              <button type="button" pButton icon="pi pi-cog" label="Op\xe7\xf5es"\n                (click)="selectedContrato = contrato; editMenu.toggle($event)"></button>\n              <p-menu #editMenu appendTo="body" [popup]="true" [model]="editMenuItens"></p-menu>\n            </div>\n          </div>\n          \n        </div>\n      </ng-template>\n    </p-dataView>\n  </ng-container>\n\n  <ng-container *ngIf="contentError.hasError">\n    <app-content-error [erroCode]="contentError.code"></app-content-error>\n  </ng-container>\n\n\n  <p-dialog *ngIf="showStatusDialog" [(visible)]="showStatusDialog" [resizable]="false" [draggable]="false"\n    [modal]="true" [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\', height: \'80%\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <div class="text-900 font-medium mb-3 text-xl">Alterando status</div>\n      </div>\n    </ng-template>\n    <div class="surface-card border-round shadow-2 p-4">\n      <p class="mt-0 mb-4 p-0 line-height-3">Situa\xe7\xe3o: </p>\n      <p-dropdown [options]="sortContratoStatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n        [(ngModel)]="updateStatusObj.status_contrato" [ngModelOptions]="{standalone: true}"\n        styleClass="mb-2 md:mb-0 w-full">\n      </p-dropdown>\n    </div>\n    <div class="flex justify-content-end mt-3 grid">\n      <div class="surface-border border-top-1 opacity-50 mb-1 col-12"></div>\n      <button class="" pButton pRipple label="Atualizar" (click)="updateStatus()"></button>\n    </div>\n  </p-dialog>\n</div>',styles:[""]})],De);let Be=class{};Be=(0,p.gn)([(0,r.LVF)({declarations:[De],imports:[v.ez,o.u5,o.UX,m.Pc,B.FI,ie.QK,b.j,V.A,E.T,M.l,R.x,re.F,T.$9,ne.U,z.cc,U.Q,oe.ON,O.kW,$.LU,b.j,F.S,C.hJ,D.O,_.D,We.f,j.o,L.X,N.R],exports:[De]})],Be);var mt=n(73814);let Ue=class{};Ue=(0,p.gn)([(0,r.LVF)({declarations:[H],imports:[v.ez,o.u5,o.UX,m.Pc,B.FI,ie.QK,b.j,ve.zz,ee.Iu,V.A,he.nD,E.T,fe.L$,Ne.WN,M.l,R.x,re.F,T.$9,ne.U,z.cc,U.Q,Ae._8,oe.ON,O.kW,ue.q,$.LU,b.j,F.S,C.hJ,D.O,_.D,j.o,L.X,N.R,mt.b],exports:[H]})],Ue);let ze=class{};ze=(0,p.gn)([(0,r.LVF)({declarations:[de],imports:[v.ez,o.u5,o.UX,m.Pc,B.FI,ie.QK,b.j,ve.zz,ee.Iu,V.A,he.nD,E.T,fe.L$,Ne.WN,M.l,R.x,re.F,T.$9,ne.U,z.cc,U.Q,Ae._8,oe.ON,O.kW,ue.q,$.LU,b.j,F.S,C.hJ,D.O,_.D,j.o,L.X,N.R,mt.b],exports:[de]})],ze);var hs=n(58949);let et=class{};et=(0,p.gn)([(0,r.LVF)({declarations:[J],imports:[v.ez,m.Pc,C.hJ,E.T,j.o],exports:[J]})],et);let $e=class{};$e=(0,p.gn)([(0,r.LVF)({declarations:[K],imports:[v.ez,o.u5,o.UX,m.Pc,E.T,M.l,b.j,R.x,O.kW,T.$9,C.hJ,D.O,Ge.U$,_.D,j.o,L.X,N.R,hs.d,et],exports:[K]})],$e);let Fe=class{};Fe=(0,p.gn)([(0,r.LVF)({declarations:[],imports:[v.ez,Be,Ue,ze,$e],exports:[Be,Ue,ze,$e]})],Fe);let tt=class{};tt=(0,p.gn)([(0,r.LVF)({declarations:[ae,W,je,ge,be,xe,ye,G,se],imports:[v.ez,o.u5,o.UX,m.Pc,B.FI,U.Q,O.kW,$.LU,Ge.U$,b.j,ee.Iu,he.nD,V.A,T.$9,_.D,z.cc,C.hJ,D.O,ue.q,vt.gz,ve.zz,ee.Iu,fe.L$,F.S,We.f,j.o,zt.O,L.X,Ke,$t.y,Re,Fe],exports:[ae,W,je,ge,be,xe,ye,G,se,Re,Fe]})],tt);let st=class{};st=(0,p.gn)([(0,r.LVF)({imports:[v.ez,o.u5,m.Pc,Ve,tt,j.o],declarations:[I]})],st)},94567:(nt,q,n)=>{n.d(q,{OL:()=>o,eX:()=>r,r6:()=>m});var r,u,v,p=n(46007);(u=r||(r={})).OPERANDO="OPERANDO",u.FECHADA_TEMPORARIAMENTE="FECHADA_TEMPORARIAMENTE",u.FECHADA_PERMANENTEMENTE="FECHADA_PERMANENTEMENTE",u.DELETADA="DELETADA",function(u){u.LOJA_FISICA="LOJA_FISICA",u.LOJA_DIGITAL="LOJA_DIGITAL",u.FILIAL="FILIAL",u.ARMAZEM="ARMAZEM",u.QUIOSQUE="QUIOSQUE",u.BOUTIQUE="BOUTIQUE",u.POP_UP_STORE="POP_UP_STORE",u.OUTLET="OUTLET",u.SHOWROOM="SHOWROOM",u.CONCEITO_STORE="CONCEITO_STORE",u.DEPARTAMENTO="DEPARTAMENTO",u.OUTRO="OUTRO"}(v||(v={}));const o=p.m.convertEnumToSelectItem(r),m=p.m.convertEnumToSelectItem(v)},18063:(nt,q,n)=>{n.d(q,{B:()=>Y});var p=n(70655),r=n(80529),v=n(98274),o=n(99038),m=n(55583),u=n(40199);let Y=class{constructor(I){this.http=I}list(I=new u.k){let me=m.t.getPageOptionsParams(I);return this.http.get(`${o.Hz.baseURL}/despesas`,{responseType:"json",params:me})}create(I){return this.http.post(`${o.Hz.baseURL}/despesas`,I,{responseType:"json"})}update(I,me){return this.http.put(`${o.Hz.baseURL}/despesas/${me}`,I,{responseType:"json"})}};Y.ctorParameters=()=>[{type:r.eN}],Y=(0,p.gn)([(0,v.GSi)({providedIn:"root"})],Y)}}]);