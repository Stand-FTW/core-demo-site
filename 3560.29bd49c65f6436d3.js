"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3560],{93560:(F,x,t)=>{t.r(x),t.d(x,{AdministracaoGeralPageModule:()=>Y});var r=t(70655),i=t(98274),g=t(36895),o=t(24006),m=t(48058),l=t(39528);let u=class{constructor(){this.currentTab="loja"}ngOnInit(){}changeTab(e){this.currentTab=e.detail.value}};u.ctorParameters=()=>[],u=(0,r.gn)([(0,i.wA2)({selector:"app-administracao-geral",template:'<ion-header [translucent]="true">\n  <ion-toolbar>\n    <ion-buttons slot="start">\n      <ion-menu-button></ion-menu-button>\n    </ion-buttons>\n    <ion-title>ADM. Geral</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content appScrollTheme>\n  <br />\n  <ion-segment class="background-segment" [(ngModel)]="currentTab" [ngModelOptions]="{standalone: true}"\n    (ionChange)="changeTab($event)">\n    <ion-segment-button style="margin-left: 5px; max-width: 200px" layout="icon-start" value="loja">\n      <ion-icon style="font-size: 1.2em" name="business-outline"></ion-icon>\n      <ion-label text-wrap class="wrap-text" style="font-size: 1.1em">\n        Lojas\n      </ion-label>\n    </ion-segment-button>\n    <ion-segment-button style="max-width: 200px" layout="icon-start" value="despesa">\n      <ion-icon style="font-size: 1.2em" name="cash-outline"></ion-icon>\n      <ion-label style="font-size: 1.1em"> Despesas </ion-label>\n    </ion-segment-button>\n  </ion-segment>\n  <br />\n\n  <div class="wall-background h-screen">\n    <ng-container *ngIf="currentTab === \'loja\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-loja-main></app-loja-main>\n      </div>\n    </ng-container>\n    <ng-container *ngIf="currentTab === \'despesa\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-despesa-main></app-despesa-main>\n      </div>\n    </ng-container>\n  </div>\n</ion-content>',styles:[""]})],u);const d=[{path:"",component:u}];let I=class{};I=(0,r.gn)([(0,i.LVF)({imports:[l.Bz.forChild(d)],exports:[l.Bz]})],I);var c=t(77604),D=t(9764),z=t(51740),V=t(50613),ee=t(35593),se=t(82210),ie=t(58783),oe=t(92665),re=t(1236),le=t(73425),de=t(23520),ne=t(17913),ce=t(28396),pe=t(25047),me=t(32137),ue=t(21493),ve=t(63054),fe=t(61989),ge=t(21327),G=t(85226);let T=class{constructor(){}ngOnInit(){}};T.ctorParameters=()=>[],T=(0,r.gn)([(0,i.wA2)({selector:"app-cartao-main",template:"<p>\n  Tirar as d\xfavidas com o DIDI a respeito dessa entidade e seus atributos\n</p>\n",styles:[""]})],T);let A=class{constructor(){}ngOnInit(){}};A.ctorParameters=()=>[],A=(0,r.gn)([(0,i.wA2)({selector:"app-cartao-cadastro",template:"<p>\n  cartao-cadastro works!\n</p>\n",styles:[""]})],A);let M=class{constructor(){}ngOnInit(){}};M.ctorParameters=()=>[],M=(0,r.gn)([(0,i.wA2)({selector:"app-cartao-detail",template:"<p>\n  cartao-detail works!\n</p>\n",styles:[""]})],M);var N=t(15861);var te=t(41117),w=t(50727),f=t(98739),H=t(18063);let C=class{constructor(e,a,n){this.formBuilder=e,this.despesaService=a,this.modal=n,this.isLoaded=!1,this.createdDespesaId="",this.wasCreated=!1,this.subscriptions=new w.w0,this.form=this.formBuilder.group({nome:[,[o.kI.required]],descricao:[,[o.kI.required]]})}ngOnInit(){}ngOnDestroy(){this.subscriptions.unsubscribe()}create(){const e=this.form.get("nome").value,a=this.form.get("descricao").value,n=this.despesaService.create({nome:e,descricao:a}).subscribe(s=>{this.fechar(!0)});this.subscriptions.add(n)}fechar(e=!1){this.modal.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}};C.ctorParameters=()=>[{type:o.QS},{type:H.B},{type:m.IN}],C=(0,r.gn)([(0,i.wA2)({selector:"app-despesa-cadastro",template:'<ion-content appScrollTheme>\n  <ng-container >\n    <form  [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <ng-container>\n        <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n          <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n            <div class="text-900 font-medium text-xl mb-3">Criar/Cadastrar</div>\n            <div class="surface-card p-4 shadow-2 border-round p-fluid">\n              <div class="grid formgrid p-fluid">\n                <div class="field mb-4 col-12 md:col-6">\n                  <label for="nome" class="font-medium text-900">Nome</label>\n                  <input id="nome" type="text" pInputText formControlName="nome">\n                  <div class="flex mt-1 justify-content-end">\n                    <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n                  </div>\n                </div>\n                <div class="field mb-4 col-12">\n                  <label for="descricao" class="font-medium text-900">Descri\xe7\xe3o</label>\n                  <textarea class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n                    formControlName="descricao"></textarea>\n                  <div class="flex mt-1 justify-content-end">\n                    <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n                  </div>\n                </div>\n                <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n              </div>\n              <div class="flex justify-content-end">\n                <button pButton pRipple label="Criar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n                  [disabled]="disableCreateBtn()"></button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </ng-container>\n    </form>\n  </ng-container>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],C);let j=class{constructor(e,a,n){this.formBuilder=e,this.despesaService=a,this.modal=n,this.isLoaded=!1,this.createdDespesaId="",this.wasCreated=!1,this.subscriptions=new w.w0}ngOnInit(){const{nome:e,descricao:a}=this.despesa;this.form=this.formBuilder.group({nome:[e,[o.kI.required]],descricao:[a,[o.kI.required]]})}ngOnDestroy(){this.subscriptions.unsubscribe()}update(){const{id:e}=this.despesa,a=this.form.get("nome").value,n=this.form.get("descricao").value,s=this.despesaService.update({nome:a,descricao:n},e).subscribe(v=>{this.fechar(!0)});this.subscriptions.add(s)}fechar(e=!1){this.modal.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableUpdateBtn(){return!this.form.valid}};j.ctorParameters=()=>[{type:o.QS},{type:H.B},{type:m.IN}],j.propDecorators={despesa:[{type:i.IIB}]},j=(0,r.gn)([(0,i.wA2)({selector:"app-despesa-detail",template:'<ion-content appScrollTheme>\n  <ng-container >\n    <form  [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <ng-container>\n        <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n          <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n            <div class="text-900 font-medium text-xl mb-3">Atualizar</div>\n            <div class="surface-card p-4 shadow-2 border-round p-fluid">\n              <div class="grid formgrid p-fluid">\n                <div class="field mb-4 col-12 md:col-6">\n                  <label for="nome" class="font-medium text-900">Nome</label>\n                  <input id="nome" type="text" pInputText formControlName="nome">\n                  <div class="flex mt-1 justify-content-end">\n                    <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n                  </div>\n                </div>\n                <div class="field mb-4 col-12">\n                  <label for="descricao" class="font-medium text-900">Descri\xe7\xe3o</label>\n                  <textarea class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n                    formControlName="descricao"></textarea>\n                  <div class="flex mt-1 justify-content-end">\n                    <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n                  </div>\n                </div>\n                <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n              </div>\n              <div class="flex justify-content-end">\n                <button pButton pRipple label="Atualizar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="update()"\n                  [disabled]="disableUpdateBtn()"></button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </ng-container>\n    </form>\n  </ng-container>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],j);var P=t(59256),Q=t(59136);let R=class{constructor(e,a,n){this.despesaService=e,this.modal=a,this.toastService=n,this.currentPage=1,this.isLoaded=!1,this.contentError=new te.S,this.subscriptions=new w.w0}ngOnInit(){this.loadDespesas()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadDespesas(e=1){const a=this.despesaService.list({order:Q.L.ASC,page:e,take:5}).subscribe({next:n=>{this.despesas=n,this.isLoaded=!0},error:n=>{this.contentError={code:n.status,hasError:!0}}});this.subscriptions.add(a)}search(){this.loadDespesas(1)}paginar(e){const{first:a,rows:n}=e,s=Number(Number(a)/Number(n)+1);s!=this.currentPage&&(this.currentPage=s,this.loadDespesas(s))}changeFiltro(e){const{value:a}=e;this.loadDespesas()}createNew(){this.showModal(C)}editarDespesa(e){this.showModal(j,{despesa:e})}showModal(e,a){var n=this;return(0,N.Z)(function*(){const s=yield n.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-80",componentProps:a});return s.onDidDismiss().then(v=>{const{data:b}=v;b&&(n.loadDespesas(n.currentPage),n.toastService.presentToast({detalhe:"Opera\xe7\xe3o bem sucedida!",titulo:"Sucesso!",duracao:f.m4.mediumDuration,gravidade:f.kl.SUCESSO}))}),yield s.present()})()}};R.ctorParameters=()=>[{type:H.B},{type:m.IN},{type:P.D}],R=(0,r.gn)([(0,i.wA2)({selector:"app-despesa-main",template:'<br>\n<div class="card">\n\n  <ng-container *ngIf="isLoaded">\n  <p-dataView emptyMessage="Nada encontrado, experimente escolher outra carga" class="data-container"\n  #dv [lazy]="true" [value]="despesas.data" [paginator]="true" [rows]="despesas.meta.take"\n  [totalRecords]="despesas.meta.itemCount" [pageLinks]="despesas.meta.pageCount" (onLazyLoad)="paginar($event)"\n  filterBy="nome" layout="list">\n  <ng-template pTemplate="header">\n    <div class="flex justify-content-end mb-2">\n      <p-button icon="pi pi-plus" label="Novo" (click)="createNew()">\n      </p-button>\n    </div>\n\n  </ng-template>\n    <ng-template let-despesa pTemplate="listItem">\n      <div *ngIf="isLoaded" #templateGrid class="col-12">\n        <div class="despesa-list-item">\n          <div class="despesa-list-detail">\n            <div class="despesa-name">{{ despesa.nome }}</div>\n            <div class="despesa-description">{{ despesa.descricao }}</div>\n          </div>\n          <div class="despesa-list-action">\n            <p-button icon="pi pi-pencil" label="Editar" (click)="editarDespesa(despesa)">\n            </p-button>\n          </div>\n        </div>\n      </div>\n    </ng-template>\n  </p-dataView>\n  </ng-container>\n\n  <ng-container *ngIf="contentError.hasError">\n    <app-content-error [erroCode]="contentError.code"></app-content-error>\n  </ng-container>\n</div>\n\n\n<p-confirmDialog [style]="{width: \'50vw\'}" [baseZIndex]="10000" rejectButtonStyleClass="p-button-text"></p-confirmDialog>',styles:[":host ::ng-deep .data-container .center {\n  text-align: center;\n}\n:host ::ng-deep .data-container .p-dropdown {\n  width: 14rem;\n  font-weight: normal;\n}\n:host ::ng-deep .data-container .despesa-name {\n  font-size: 1.5rem;\n  font-weight: 700;\n}\n:host ::ng-deep .data-container .despesa-description {\n  margin: 0 0 1rem 0;\n  margin-top: 10px;\n}\n:host ::ng-deep .data-container .despesa-category-icon {\n  vertical-align: middle;\n  margin-right: 0.5rem;\n}\n:host ::ng-deep .data-container .despesa-category {\n  font-weight: 600;\n  vertical-align: middle;\n}\n:host ::ng-deep .data-container .despesa-list-item {\n  display: flex;\n  align-items: center;\n  padding: 1rem;\n  width: 100%;\n}\n:host ::ng-deep .data-container .despesa-list-item img {\n  width: 150px;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n  margin-right: 2rem;\n}\n:host ::ng-deep .data-container .despesa-list-item .despesa-list-detail {\n  margin-left: 10px;\n  flex: 1 1 0;\n}\n:host ::ng-deep .data-container .despesa-list-item .p-rating {\n  margin: 0 0 0.5rem 0;\n}\n:host ::ng-deep .data-container .despesa-list-item .despesa-price {\n  font-size: 1.5rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  align-self: flex-end;\n}\n:host ::ng-deep .data-container .despesa-list-item .despesa-list-action {\n  display: flex;\n  flex-direction: column;\n}\n:host ::ng-deep .data-container .despesa-list-item .p-button {\n  margin-bottom: 0.5rem;\n}\n@media screen and (max-width: 576px) {\n  :host ::ng-deep .despesa-list-item {\n    flex-direction: column;\n    align-items: center;\n  }\n  :host ::ng-deep .despesa-list-item img {\n    width: 75%;\n    margin: 2rem 0;\n  }\n  :host ::ng-deep .despesa-list-item .despesa-list-detail {\n    text-align: center;\n  }\n  :host ::ng-deep .despesa-list-item .despesa-price {\n    align-self: center;\n  }\n  :host ::ng-deep .despesa-list-item .despesa-list-action {\n    display: flex;\n    flex-direction: column;\n  }\n  :host ::ng-deep .despesa-list-item .despesa-list-action {\n    margin-top: 2rem;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n  }\n}"]})],R);var De=t(2635);var Z,p,J,_=t(74896),W=t(57118);(p=Z||(Z={})).ATIVO="ATIVO",p.INATIVO="INATIVO",function(p){p.TRIAL="TRIAL",p.HABILITACAO_LOJA="HABILITACAO_LOJA",p.INDIVIDUAL="INDIVIDUAL",p.CORPORATIVA="CORPORATIVA"}(J||(J={}));var Me=t(80529),ae=t(99038),Ne=t(55583),Pe=t(40199);let B=class{constructor(e){this.http=e}findById(e){return this.http.get(`${ae.Hz.baseURL}/licencas/${e}`,{responseType:"json"})}list(e,a=new Pe.k){let n=Ne.t.getPageOptionsParams(a);return e&&e.data_pagamento&&(n=n.append("data_pagamento",e.data_pagamento.toDateString())),e&&e.licenca_id&&(n=n.append("licenca_id",e.licenca_id)),e&&e.searchedLicenca&&(n=n.append("searchedLicenca",e.searchedLicenca)),e&&e.status_licenca&&(n=n.append("status_licenca",e.status_licenca)),e&&e.tipo_licenca&&(n=n.append("tipo_licenca",e.tipo_licenca)),e&&e.available_only&&(n=n.append("available_only",e.available_only)),this.http.get(`${ae.Hz.baseURL}/licencas`,{responseType:"json",params:n})}};B.ctorParameters=()=>[{type:Me.eN}],B=(0,r.gn)([(0,i.GSi)({providedIn:"root"})],B);var Be=t(54222);let y=class{constructor(e,a,n){this.modal=e,this.toastMessageService=a,this.licencasService=n,this.hasUpdate=!1,this.subscriptions=new w.w0}ngOnInit(){this.toastMessageService.clearToast(),this.licenca||this.loadLicenca()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadLicenca(){const e=this.licencasService.findById(this.licenca_id).subscribe({next:a=>{this.licenca=a}});this.subscriptions.add(e)}openLink(e){Be.U.externalLinkHandle(e)}fechar(){var e=this;return(0,N.Z)(function*(){yield e.modal.dismiss(e.hasUpdate)})()}};y.ctorParameters=()=>[{type:m.IN},{type:P.D},{type:B}],y.propDecorators={licenca:[{type:i.IIB}],licenca_id:[{type:i.IIB}]},y=(0,r.gn)([(0,i.wA2)({selector:"app-licenca-brief",template:'<ion-content appScrollTheme>\n  <div class="surface-card p-4 border-round shadow-2 ">\n    <div class="col-12 h-full">\n      <div class="border-1 border-double border-primary surface-border border-round mt-4" style="min-height: 30rem">\n        <ng-container *ngIf="licenca">\n          <div class="surface-card p-4 shadow-2 border-round">\n            <div class="flex align-items-center justify-content-end ml-auto cursor-pointer"\n              style="position: fixed; top: 15px; right: 15px;" (click)="fechar()">\n              <span\n                class="flex align-items-center justify-content-center bg-pink-100 text-pink-800 border-circle vertical-align-top"\n                style="width: 24px; height: 24px;">\n                <i class="pi pi-times text-sm"></i>\n              </span>\n            </div>\n            <div class="font-medium text-3xl text-900 mb-3">Detalhamento</div>\n            <div class="text-primary mb-5">{{ licenca.id }} - <span>{{ licenca.is_available ? \'DISPON\xcdVEL\':\n                \'INDISPON\xcdVEL\' }}</span></div>\n            <ul class="list-none p-0 m-0 border-top-1 surface-border">\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Observa\xe7\xe3o</div>\n                <div class="text-900 w-full md:w-10">{{ licenca.observacao }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Status</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ licenca.status_licenca }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Tipo</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ licenca.tipo_licenca }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Valor a pagar</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ licenca.valor_pagar | currency:\'BRL\': \'(R$)\'}}\n                </div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Valor pago</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ licenca.valor_pago | currency:\'BRL\': \'(R$)\'}}\n                </div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Comprovante de pagamento</div>\n                <div *ngIf="licenca.comprovante_url" class="text-900 w-full md:w-10 line-height-3 ">\n                  <span class="cursor-pointer hover:text-primary" (click)="openLink(licenca.comprovante_url)">\n                    {{ licenca.comprovante_url }}\n                    <i class="pi pi-external-link text-xs ml-1"></i>\n                  </span>\n                </div>\n                <div *ngIf="!licenca.comprovante_url" class="text-900 w-full md:w-10 line-height-3">N\xe3o h\xe1</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">NF</div>\n                <div *ngIf="licenca.nf_url" class="text-900 w-full md:w-10 line-height-3 ">\n                  <span class="cursor-pointer hover:text-primary" (click)="openLink(licenca.nf_url)">\n                    {{ licenca.nf_url }}\n                    <i class="pi pi-external-link text-xs ml-1"></i>\n                  </span>\n                </div>\n                <div *ngIf="!licenca.nf_url" class="text-900 w-full md:w-10 line-height-3">N\xe3o h\xe1</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Data de pagamento</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ licenca.data_pagamento | date: \'dd/MM/yyyy\' }}\n                </div>\n              </li>\n\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Criado em</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ licenca.created_at | date: \'dd/MM/yyyy -\n                  HH:mm:ss\' : \'-0300\' }}h</div>\n              </li>\n              <li *ngIf="licenca.created_by" class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Criado por</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">ID</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.id }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Tipo de usu\xe1rio</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.tipo_user }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Nome</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.nome }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">CPF</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.cpf ? (licenca.created_by.cpf | cpfMask) : \'N\xe3o h\xe1\'\n                          }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">E-mail</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.email || \'N\xe3o h\xe1\' }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">E-mail (alternativo)</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.email_alternativo || \'N\xe3o h\xe1\' }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Celular</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.tel1 ? (licenca.created_by.tel1 | phoneMask) : \'N\xe3o\n                          h\xe1\' }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Celular (alternativo)</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.tel2 ? (licenca.created_by.tel2 | phoneMask) : \'N\xe3o\n                          h\xe1\' }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Acesso ao sistema</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.status_user }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Situa\xe7\xe3o na corpora\xe7\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ licenca.created_by.status_pessoa }}\n                        </div>\n                      </div>\n                    </div>\n\n                  </div>\n                </div>\n              </li>\n\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Atualizado em</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ licenca.updated_at | date: \'dd/MM/yyyy -\n                  HH:mm:ss\' : \'-0300\' }}h</div>\n              </li>\n              <li *ngIf="licenca.updated_by" class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Atualizado por</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">ID</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.id }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Tipo de usu\xe1rio</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.tipo_user }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Nome</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.nome }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">CPF</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.cpf ? (licenca.updated_by.cpf | cpfMask) : \'N\xe3o h\xe1\'\n                          }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">E-mail</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.email || \'N\xe3o h\xe1\' }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">E-mail (alternativo)</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.email_alternativo || \'N\xe3o h\xe1\' }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Celular</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.tel1 ? (licenca.updated_by.tel1 | phoneMask) : \'N\xe3o\n                          h\xe1\' }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Celular (alternativo)</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.tel2 ? (licenca.updated_by.tel2 | phoneMask) : \'N\xe3o\n                          h\xe1\' }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Acesso ao sistema</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.status_user }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Situa\xe7\xe3o na corpora\xe7\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ licenca.updated_by.status_pessoa }}\n                        </div>\n                      </div>\n                    </div>\n\n                  </div>\n                </div>\n              </li>\n\n              <li *ngIf="licenca.loja" class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Loja Associada</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Nome</span>\n                        </div>\n                        <div class="text-700">{{ licenca.loja.nome }} ({{ licenca.loja.codigo }})</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Descri\xe7\xe3o</span>\n                        </div>\n                        <div class="text-700">{{ licenca.loja.descricao }}</div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n\n            </ul>\n          </div>\n        </ng-container>\n      </div>\n    </div>\n  </div>\n</ion-content>',styles:[""]})],y);var S=t(94567);let E=class{constructor(e,a,n,s,v,b){this.formBuilder=e,this.lojaService=a,this.licencasService=n,this.modal=s,this.toastService=v,this.modalCadastro=b,this.isLoaded=!1,this.stepIndex=0,this.createdlojaId="",this.wasCreated=!1,this.showQuestionDialog=!1,this.questionTitle="",this.questionDescription="",this.searchedLicenca="",this.showLicencaDialog=!1,this.available_only=!0,this.lojaTipoSelect=S.r6,this.subscriptions=new w.w0,this.form=this.formBuilder.group({nome:[,[o.kI.required]],descricao:[,[o.kI.required]],codigo:[,[o.kI.required]],estoque_mode:[_.z.NOTHING,[o.kI.required]],licenca_id:[,[o.kI.required]],tipo_loja:[,[o.kI.required]]})}ionViewWillEnter(){}ngOnInit(){this.steps=[{label:"Informa\xe7\xf5es"},{label:"Endere\xe7o"}],this.loadLicencas()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadLicencas(e=1){const a=this.licencasService.list({status_licenca:Z.ATIVO,tipo_licenca:J.HABILITACAO_LOJA,available_only:this.available_only},{order:Q.L.ASC,page:e,take:5}).subscribe({next:n=>{this.licencas=n,this.isLoaded=!0}});this.subscriptions.add(a)}searchLicenca({value:e}){this.searchedLicenca=e,this.loadLicencas(1)}clearLicenca(e){e.value="",this.searchedLicenca="",this.loadLicencas(1)}paginarLicenca(e){this.loadLicencas()}onLicencaFilter(e){const a=e.filter;this.searchedLicenca=a}blurLicenca(e,a){this.searchedLicenca=void 0,a.filterValue=void 0}detailLicenca(){const e=this.form.get("licenca_id").value;this.selectedLicenca=this.licencas.data.find(a=>a.id==e),this.selectedLicenca?this.showModal(y,{licenca:this.selectedLicenca}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:f.m4.shortDuration,gravidade:f.kl.INFORMACAO})}create(){const e=this.form.get("licenca_id").value;if(!this.licencas.data.find(k=>k.id==e).is_available)return void this.toastService.presentToast({titulo:"Indispon\xedvel!",detalhe:"Esta licen\xe7a j\xe1 se encontra em uso",duracao:f.m4.shortDuration,gravidade:f.kl.ATENCAO});const n=this.form.get("estoque_mode").value;if(n==_.z.SPECIFIED&&0==this.stepIndex)return void(this.stepIndex=1);const s=this.form.get("nome").value,v=this.form.get("descricao").value,b=this.form.get("codigo").value,U=this.form.get("tipo_loja").value,q=this.lojaService.create({nome:s,descricao:v,codigo:b,estoque_mode:n,tipo_loja:U,licenca_id:e}).subscribe(k=>{this.createdlojaId=k.id,this.wasCreated=!0,this.stepIndex=2});this.subscriptions.add(q)}listenProdutosSelection(e){const a=this.form.get("nome").value,n=this.form.get("descricao").value,s=this.form.get("codigo").value,v=this.form.get("estoque_mode").value,b=this.form.get("tipo_loja").value,U=this.form.get("licenca_id").value,q=e,k=this.lojaService.create({nome:a,descricao:n,codigo:s,estoque_mode:v,produtos:q,tipo_loja:b,licenca_id:U}).subscribe(Ke=>{this.createdlojaId=Ke.id,this.wasCreated=!0,this.stepIndex=2});this.subscriptions.add(k)}listenEndereco(e){this.fechar(this.wasCreated)}getGenerate(){return _.z.GENERATE}getNothing(){return _.z.NOTHING}getSpecified(){return _.z.SPECIFIED}detailGenerate(){this.questionTitle="Gera\xe7\xe3o autom\xe1tica",this.questionDescription="Com esta op\xe7\xe3o selecionada, o sistema criar\xe1 estoque ZERADO de todos os produtos existentes, na nova loja",this.showQuestionDialog=!0}detailNothing(){this.questionTitle="N\xe3o criar estoques",this.questionDescription="Com esta op\xe7\xe3o selecionada, o sistema ira criar apenas a loja, sem qualquer estoque",this.showQuestionDialog=!0}detailSpecified(){this.questionTitle="Especficiar produtos",this.questionDescription="Com esta op\xe7\xe3o selecionada, voc\xea selecionar\xe1 na tela seguinte, todos os produtos e a quantidade em estoque que deseja que o sistema crie junto com a cria\xe7\xe3o da loja",this.showQuestionDialog=!0}fechar(e=!1){this.modal.dismiss(this.wasCreated)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,a){var n=this;return(0,N.Z)(function*(){const s=yield n.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:a});return s.onDidDismiss().then(v=>{}),yield s.present()})()}};E.ctorParameters=()=>[{type:o.QS},{type:W.W},{type:B},{type:m.IN},{type:P.D},{type:m.IN}],E=(0,r.gn)([(0,i.wA2)({selector:"app-loja-cadastro",template:'<ion-content appScrollTheme>\n\n  <ng-container *ngIf="stepIndex == 0 && licencas">\n    <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n        <div class="card mb-2">\n          <p-steps [activeIndex]="stepIndex" [model]="steps" [readonly]="true"></p-steps>\n        </div>\n        <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid">\n          <div class="grid formgrid p-fluid">\n            <div class="col-12 field ">\n              <label for="licenca_id" class="text-900 font-medium mb-3">Licen\xe7a</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailLicenca()"></div>\n              <p-dropdown id="licenca_id" [options]="licencas.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="licenca_id"\n                 optionLabel="id" filterBy="id"\n                optionValue="id" [showClear]="true">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="field-checkbox mt-1 mb-2">\n                    <p-checkbox [(ngModel)]="available_only" [ngModelOptions]="{standalone: true}" [binary]="true"\n                      inputId="available_only" (onChange)="loadLicencas()"></p-checkbox>\n                    <label for="available_only">{{ available_only ? \'Dispon\xedveis\' : \'Tudo\' }}</label>\n                  </div>\n\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchLicencaInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchLicenca(searchLicencaInput)">\n                      <button pButton pRipple icon="pi pi-search" (click)="searchLicenca(searchLicencaInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearlicenca(searchLicencaInput)"></button>\n                    </div>\n\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-licenca pTemplate="item">\n                  <div>\n                    <div>{{ licenca.id }} - {{ licenca.is_available ? \'DISPON\xcdVEL\': \'INDISPON\xcdVEL\' }}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-licenca pTemplate="selectedItem">\n                  <div>{{ licenca.id }} - {{ licenca.is_available ? \'DISPON\xcdVEL\': \'INDISPON\xcdVEL\' }}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'licenca_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="codigo" class="font-medium text-900">C\xf3digo</label>\n              <p-inputMask id="codigo" formControlName="codigo" mask="999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'codigo\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12">\n              <label for="descricao">Descri\xe7\xe3o</label>\n              <textarea id="descricao" class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n                formControlName="descricao"></textarea>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12">\n              <label for="tipo_loja" class="text-900 font-medium mb-3">Tipo de loja</label>\n              <p-dropdown id="tipo_loja" [options]="lojaTipoSelect" emptyMessage="Nada dispon\xedvel"\n                placeholder="Selecione" formControlName="tipo_loja" styleClass="mb-2 md:mb-0 w-full">\n              </p-dropdown>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n            <div class="field-radiobutton mb-4 col-12 ">\n              <p-radioButton name="estoque_mode" [value]="getNothing()" formControlName="estoque_mode"\n                inputId="nothing">\n              </p-radioButton>\n              <label for="nothing">N\xe3o criar estoques</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailNothing()"></div>\n            </div>\n            <div class="field-radiobutton mb-4 col-12 ">\n              <p-radioButton name="estoque_mode" [value]="getGenerate()" formControlName="estoque_mode"\n                inputId="generate">\n              </p-radioButton>\n              <label for="generate">Criar estoques para todos os produtos cadastrados</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailGenerate()"></div>\n            </div>\n            <div class="field-radiobutton mb-4 col-12 ">\n              <p-radioButton name="estoque_mode" [value]="getSpecified()" formControlName="estoque_mode"\n                inputId="specified"></p-radioButton>\n              <label for="specified">Especificar produtos</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSpecified()"></div>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'estoque_mode\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Pr\xf3ximo" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n              [disabled]="disableCreateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n\n  <ng-container *ngIf="stepIndex == 1">\n    <app-select-products (selectedProdutosEvent)="listenProdutosSelection($event)">\n    </app-select-products>\n  </ng-container>\n\n  <ng-container *ngIf="stepIndex == 2">\n    <app-endereco [idOf]="createdlojaId" [isFuncionario]="false" (createdEvent)="listenEndereco($event)">\n    </app-endereco>\n  </ng-container>\n\n  <p-dialog [(visible)]="showQuestionDialog" appendTo="body" [modal]="true"\n    [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <span class="flex align-items-center justify-content-center bg-cyan-100 text-cyan-800 mr-3 border-circle"\n          style="width:32px;height:32px">\n          <i class="pi pi-info text-lg"></i>\n        </span>\n        <span class="font-medium text-2xl text-900">{{ questionTitle }}</span>\n      </div>\n    </ng-template>\n    <p class="line-height-3 p-0 m-0">\n      {{ questionDescription }}.\n    </p>\n    <ng-template pTemplate="footer">\n      <div class=" pt-3">\n        <button pButton pRipple icon="pi pi-check" (click)="showQuestionDialog = false" label="OK"></button>\n      </div>\n    </ng-template>\n  </p-dialog>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],E);let O=class{constructor(e,a,n,s,v){this.formBuilder=e,this.lojaService=a,this.modal=n,this.toastService=s,this.modalUpdate=v,this.isLoaded=!1,this.wasCreated=!1,this.lojaTipoSelect=S.r6,this.subscriptions=new w.w0}ionViewWillEnter(){}ngOnInit(){const{nome:e,descricao:a,codigo:n,tipo_loja:s,licenca:v}=this.loja;this.currentLicenca=v,this.form=this.formBuilder.group({nome:[e,[o.kI.required]],descricao:[a,[o.kI.required]],codigo:[n,[o.kI.required]],tipo_loja:[s,[o.kI.required]]})}ngOnDestroy(){this.subscriptions.unsubscribe()}update(){const{id:e}=this.loja,a=this.form.get("nome").value,n=this.form.get("descricao").value,s=this.form.get("codigo").value,v=this.form.get("tipo_loja").value,b=this.lojaService.update({nome:a,descricao:n,codigo:s,tipo_loja:v},e).subscribe(U=>{this.fechar(!0)});this.subscriptions.add(b)}detailLicenca(){this.currentLicenca?this.showModal(y,{licenca:this.currentLicenca}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:f.m4.shortDuration,gravidade:f.kl.INFORMACAO})}fechar(e=!1){this.modal.dismiss(e)}isInputError(e){return!(!this.form.controls[e].dirty||!this.form.controls[e].errors)}getCurrentLicencaLabel(){return this.currentLicenca?`${this.currentLicenca.id} - ${this.currentLicenca.status_licenca}`:"Sem licen\xe7a associada"}disableUpdateBtn(){return!this.form.valid}showModal(e,a){var n=this;return(0,N.Z)(function*(){const s=yield n.modalUpdate.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:a});return s.onDidDismiss().then(v=>{}),yield s.present()})()}};O.ctorParameters=()=>[{type:o.QS},{type:W.W},{type:m.IN},{type:P.D},{type:m.IN}],O.propDecorators={loja:[{type:i.IIB}]},O=(0,r.gn)([(0,i.wA2)({selector:"app-loja-detail",template:'<ion-content appScrollTheme>\n  <ng-container *ngIf="loja">\n    <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n        <div class="card mb-2">\n          <p-steps [activeIndex]="stepIndex" [model]="steps" [readonly]="true"></p-steps>\n        </div>\n        <div class="text-900 font-medium text-xl mb-1">Atualizar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid">\n          <div class="grid formgrid p-fluid">\n            <div class="col-12 field ">\n              <label for="licenca_id" class="text-900 font-medium mb-3">Licen\xe7a</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailLicenca()"></div>\n              <input id="nome" type="text" pInputText [readonly]="true" [value]="getCurrentLicencaLabel()"\n                [ngModelOptions]="{standalone: true}">\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="codigo" class="font-medium text-900">C\xf3digo</label>\n              <p-inputMask id="codigo" formControlName="codigo" mask="999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'codigo\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12">\n              <label for="descricao">Descri\xe7\xe3o</label>\n              <textarea id="descricao" class="h-auto" id="descricao" pInputTextarea [autoResize]="true" [rows]="5"\n                formControlName="descricao"></textarea>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'descricao\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12">\n              <label for="tipo_loja" class="text-900 font-medium mb-3">Tipo de loja</label>\n              <p-dropdown id="tipo_loja" [options]="lojaTipoSelect" emptyMessage="Nada dispon\xedvel"\n                placeholder="Selecione" formControlName="tipo_loja" styleClass="mb-2 md:mb-0 w-full">\n              </p-dropdown>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Atualizar" icon="pi pi-send" iconPos="right" class="w-auto"\n              (click)="update()" [disabled]="disableUpdateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],O);var Fe=t(42759),Ve=t(16320),Ge=t(87726);let $=class{constructor(e,a,n){this.lojaService=e,this.modal=a,this.toastService=n,this.sortLojaStatus=S.OL,this.sortLojaTipo=S.r6,this.searchedLoja="",this.selectedLojaStatus=S.eX.OPERANDO,this.selectedLojaTipo=void 0,this.currentPage=1,this.isLoaded=!1,this.editMenuItens=[{label:"Op\xe7\xf5es",items:[{label:"Atualizar",icon:"pi pi-pencil",command:()=>this.detalharSimplificado(this.selectedLoja)},{label:"Status",icon:"pi pi-exclamation-triangle",command:()=>this.detalharStatus(this.selectedLoja)}]},{separator:!0,items:[{label:"Tesouraria",icon:"pi pi-chart-line",command:()=>this.detalharTesouraria(this.selectedLoja)},{label:"Estoque",icon:"pi pi-table",command:()=>this.detalharEstoque(this.selectedLoja)}]}],this.showStatusDialog=!1,this.updateStatusObj={status_loja:void 0},this.contentError=new te.S,this.subscriptions=new w.w0}ngOnInit(){this.loadLojas()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadLojas(e=1){const a=this.lojaService.list({status_loja:this.selectedLojaStatus,tipo_loja:this.selectedLojaTipo,searchedLoja:this.searchedLoja},{order:Q.L.ASC,page:e,take:5}).subscribe({next:n=>{this.lojas=n,this.isLoaded=!0},error:n=>{this.contentError={code:n.status,hasError:!0}}});this.subscriptions.add(a)}lojaLabel(e){return`${e.nome} - ${e.codigo}`}search(){this.loadLojas(1)}paginar(e){const{first:a,rows:n}=e,s=Number(Number(a)/Number(n)+1);s!=this.currentPage&&(this.currentPage=s,this.loadLojas(s))}createNew(){this.showModal(E)}detalharSimplificado(e){this.showModal(O,{loja:e})}detalharStatus(e){const{status_loja:a}=e;this.updateStatusObj={status_loja:a},this.showStatusDialog=!0}detalharTesouraria(e){}detalharEstoque(e){const a=`[${e.codigo}] ${e.nome}`;this.showModal(Ge.a,{loja_id:e.id,loja_label:a})}editarEndereco(e){e.endereco?this.showModal(Ve.F,{currentEndereco:e,isFuncionario:!1}):this.showModal(Fe.A,{idOf:e.id,isFuncionario:!1,isModal:!0})}updateStatus(){const{id:e}=this.selectedLoja,{status_loja:a}=this.updateStatusObj,n=this.lojaService.update({status_loja:a},e).subscribe({next:s=>{this.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:f.m4.mediumDuration,gravidade:f.kl.SUCESSO}),this.showStatusDialog=!1,this.loadLojas(1)},error:s=>{this.showStatusDialog=!1}});this.subscriptions.add(n)}getEnderecoLabel(e){return e?`${e.endereco}, n\xb0: ${e.numero} - ${e.complemento} | ${e.estado}-${e.cidade}`:"Sem endere\xe7o cadastrado"}clearAllFilters(e,a,n){this.searchedLoja=void 0,this.selectedLojaStatus=S.eX.OPERANDO,this.selectedLojaTipo=void 0,a.writeValue(null),n.writeValue(null),this.loadLojas(1)}changeStatusLoja({value:e}){this.selectedLojaStatus=e,this.loadLojas(1)}changeTipoLoja({value:e}){this.selectedLojaTipo=e,this.loadLojas(1)}showModal(e,a){var n=this;return(0,N.Z)(function*(){const s=yield n.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:a});return s.onDidDismiss().then(v=>{const{data:b}=v;b&&(n.loadLojas(),n.toastService.presentToast({detalhe:"Opera\xe7\xe3o bem sucedida!",titulo:"Sucesso!",duracao:f.m4.mediumDuration,gravidade:f.kl.SUCESSO}))}),yield s.present()})()}};$.ctorParameters=()=>[{type:W.W},{type:m.IN},{type:P.D}],$=(0,r.gn)([(0,i.wA2)({selector:"app-loja-main",template:'<br>\n\n<div class="card main-view">\n  <ng-container *ngIf="isLoaded">\n    <p-dataView emptyMessage="Nada encontrado, experimente outro filtro" class="data-container" #dv [lazy]="true"\n      [value]="lojas.data" [paginator]="true" [rows]="lojas.meta.take" [totalRecords]="lojas.meta.itemCount"\n      [pageLinks]="lojas.meta.pageCount" (onLazyLoad)="paginar($event)" filterBy="nome" layout="list">\n      <ng-template pTemplate="header">\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_tipo [options]="sortLojaTipo" placeholder="Tipo Loja"\n              (onChange)="changeTipoLoja($event)" (onClear)="clearAllFilters($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_status [options]="sortLojaStatus" placeholder="Status Loja"\n              (onChange)="changeStatusLoja($event)" (onClear)="clearAllFilters($event)" [(ngModel)]="selectedLojaStatus"\n              [ngModelOptions]="{standalone: true}" styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n        </div>\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field col-12 sm:col-6 xl:col-3">\n            <button pButton pRipple class="sm:w-auto w-full p-button-outlined" icon="pi pi-times" label="Limpar filtros"\n              (click)="clearAllFilters($event, dropdown_status, dropdown_tipo)">\n            </button>\n          </div>\n          <div class="field col-12 sm:col-6 xl:col-3 text-right">\n            <button pButton pRipple class="sm:w-auto w-full " icon="pi pi-user-plus" label="Novo cadastro"\n              (click)="createNew()">\n            </button>\n          </div>\n        </div>\n\n        <div class="flex flex-column md:flex-row md:justify-content-center">\n          <span class="p-inputgroup mb-2 md:mb-0 mt-2 max-w-30rem\t">\n            <input class="w-full" type="search" pInputText [(ngModel)]="searchedLoja"\n              [ngModelOptions]="{standalone: true}" placeholder="Nome, descri\xe7\xe3o ou c\xf3digo" (keyup.enter)="search()">\n            <button type="button" pButton pRipple class="pi pi-search cursor-pointer p-button-outlined"\n              (click)="search()"></button>\n            <button type="button" pButton pRipple class="pi pi-times cursor-pointer p-button-outlined p-button-danger"\n              (click)="searchedLoja = \'\'; search();"></button>\n          </span>\n        </div>\n\n      </ng-template>\n      <ng-template let-loja pTemplate="listItem">\n        <div *ngIf="isLoaded" #templateGrid class="col-12">\n          <div class="data-list-item">\n            <div class="data-list-detail">\n              <div class="data-name">[{{ loja.codigo }}] - {{ loja.nome }}</div>\n              <div class="mt-1">{{ loja.descricao }}</div>\n              <div class="mt-2 ">Situa\xe7\xe3o: {{ loja.status_loja }}</div>\n              <div class="mt-1 ">Tipo: {{ loja.tipo_loja }}</div>\n              <div class="mt-2">Tesouraria atual: {{ loja.valor_tesouraria | currency:\'BRL\': \'(R$)\' }}</div>\n              <div class="mt-1">Entrada financeira: {{ loja.valor_receber | currency:\'BRL\': \'(R$)\' }}</div>\n              <div class="mt-1">Sa\xedda financeira: {{ loja.valor_saida | currency:\'BRL\': \'(R$)\' }}</div>\n              <div class="mt-3">\n                <i class="pi pi-map data-category-icon "></i><span class="data-category">{{\n                  getEnderecoLabel(loja.endereco)\n                  }}</span>\n              </div>\n            </div>\n            <div class="data-list-action">\n              <button type="button" pButton icon="pi pi-cog" label="Op\xe7\xf5es"\n                (click)="selectedLoja = loja; editMenu.toggle($event)"></button>\n              <p-menu #editMenu appendTo="body" [popup]="true" [model]="editMenuItens"></p-menu>\n\n              <button pButton type="button" class="p-button-outlined" icon="pi pi-map" label="Endere\xe7o"\n                (click)="editarEndereco(data)">\n              </button>\n            </div>\n          </div>\n        </div>\n      </ng-template>\n    </p-dataView>\n  </ng-container>\n\n  <ng-container *ngIf="contentError.hasError">\n    <app-content-error [erroCode]="contentError.code"></app-content-error>\n  </ng-container>\n</div>\n\n\n<p-confirmDialog [style]="{width: \'50vw\'}" [baseZIndex]="10000" rejectButtonStyleClass="p-button-text">\n</p-confirmDialog>\n\n\n<p-dialog *ngIf="showStatusDialog" [(visible)]="showStatusDialog" [resizable]="false" [draggable]="false" [modal]="true"\n  [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\', height: \'80%\'}">\n  <ng-template pTemplate="header">\n    <div class="flex align-items-center">\n      <div class="text-900 font-medium mb-3 text-xl">Alterando status</div>\n    </div>\n  </ng-template>\n\n  <div class="surface-card border-round shadow-2 p-4 mt-2">\n    <p class="mt-0 mb-4 p-0 line-height-3">Situa\xe7\xe3o da loja: </p>\n    <p-dropdown [options]="sortLojaStatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n      [(ngModel)]="updateStatusObj.status_loja" [ngModelOptions]="{standalone: true}" styleClass="mb-2 md:mb-0 w-full">\n    </p-dropdown>\n  </div>\n  <div class="flex justify-content-end mt-3 grid">\n    <div class="surface-border border-top-1 opacity-50 mb-1 col-12"></div>\n    <button class="" pButton pRipple label="Atualizar" (click)="updateStatus()"></button>\n  </div>\n</p-dialog>',styles:[":host ::ng-deep .data-container .center {\n  text-align: center;\n}\n:host ::ng-deep .data-container .p-dropdown {\n  width: 14rem;\n  font-weight: normal;\n}\n:host ::ng-deep .data-container .loterica-name {\n  font-size: 1.5rem;\n  font-weight: 700;\n}\n:host ::ng-deep .data-container .loterica-description {\n  margin: 0 0 1rem 0;\n}\n:host ::ng-deep .data-container .loterica-category-icon {\n  vertical-align: middle;\n  margin-right: 0.5rem;\n}\n:host ::ng-deep .data-container .loterica-category {\n  font-weight: 600;\n  vertical-align: middle;\n}\n:host ::ng-deep .data-container .loterica-list-item {\n  display: flex;\n  align-items: center;\n  padding: 1rem;\n  width: 100%;\n}\n:host ::ng-deep .data-container .loterica-list-item img {\n  width: 150px;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n  margin-right: 2rem;\n}\n:host ::ng-deep .data-container .loterica-list-item .loterica-list-detail {\n  margin-left: 10px;\n  flex: 1 1 0;\n}\n:host ::ng-deep .data-container .loterica-list-item .p-rating {\n  margin: 0 0 0.5rem 0;\n}\n:host ::ng-deep .data-container .loterica-list-item .loterica-price {\n  font-size: 1.5rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  align-self: flex-end;\n}\n:host ::ng-deep .data-container .loterica-list-item .loterica-list-action {\n  display: flex;\n  flex-direction: column;\n}\n:host ::ng-deep .data-container .loterica-list-item .p-button {\n  margin-bottom: 0.5rem;\n}\n@media screen and (max-width: 576px) {\n  :host ::ng-deep .loterica-list-item {\n    flex-direction: column;\n    align-items: center;\n  }\n  :host ::ng-deep .loterica-list-item img {\n    width: 75%;\n    margin: 2rem 0;\n  }\n  :host ::ng-deep .loterica-list-item .loterica-list-detail {\n    text-align: center;\n  }\n  :host ::ng-deep .loterica-list-item .loterica-price {\n    align-self: center;\n  }\n  :host ::ng-deep .loterica-list-item .loterica-list-action {\n    display: flex;\n    flex-direction: column;\n  }\n  :host ::ng-deep .loterica-list-item .loterica-list-action {\n    margin-top: 2rem;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n  }\n}"]})],$);var He=t(45447),Qe=t(32506),We=t(91795),Ze=t(42480);let K=class{};K=(0,r.gn)([(0,i.LVF)({declarations:[y],imports:[g.ez,m.Pc,ee.hJ,We.T,G.o,Ze.R],exports:[y]})],K);var Je=t(25922);let X=class{};X=(0,r.gn)([(0,i.LVF)({declarations:[E,O,$,T,A,M,R,j,C],imports:[g.ez,o.u5,o.UX,m.Pc,c.FI,D.Q,se.kW,ie.LU,ce.U$,z.j,ne.Iu,fe.nD,ve.A,ge.$9,V.cc,ee.hJ,oe.O,re.q,le.gz,de.zz,ne.Iu,pe.L$,ue.S,me.D,De.f,G.o,He.O,Qe.X,K,Je.y],exports:[E,O,$,T,A,M,R,j,C]})],X);let Y=class{};Y=(0,r.gn)([(0,i.LVF)({imports:[g.ez,o.u5,m.Pc,I,X,G.o],declarations:[u]})],Y)},94567:(F,x,t)=>{t.d(x,{OL:()=>o,eX:()=>i,r6:()=>m});var i,l,g,r=t(46007);(l=i||(i={})).OPERANDO="OPERANDO",l.FECHADA_TEMPORARIAMENTE="FECHADA_TEMPORARIAMENTE",l.FECHADA_PERMANENTEMENTE="FECHADA_PERMANENTEMENTE",l.DELETADA="DELETADA",function(l){l.LOJA_FISICA="LOJA_FISICA",l.LOJA_DIGITAL="LOJA_DIGITAL",l.FILIAL="FILIAL",l.ARMAZEM="ARMAZEM",l.QUIOSQUE="QUIOSQUE",l.BOUTIQUE="BOUTIQUE",l.POP_UP_STORE="POP_UP_STORE",l.OUTLET="OUTLET",l.SHOWROOM="SHOWROOM",l.CONCEITO_STORE="CONCEITO_STORE",l.DEPARTAMENTO="DEPARTAMENTO",l.OUTRO="OUTRO"}(g||(g={}));const o=r.m.convertEnumToSelectItem(i),m=r.m.convertEnumToSelectItem(g)},42480:(F,x,t)=>{t.d(x,{R:()=>L});var r=t(70655),i=t(98274),g=t(36895);let o=class{transform(d,...I){if("string"==typeof d&&11==d.trim().length){let c=d.replace(/\D/g,"");return c=c.replace(/(\d{3})(\d)/,"$1.$2"),c=c.replace(/(\d{3})(\d)/,"$1.$2"),c=c.replace(/(\d{3})(\d{1,2})$/,"$1-$2"),c}return d}};o=(0,r.gn)([(0,i.E6H)({name:"cpfMask"})],o);let m=class{transform(d,...I){return d}};m=(0,r.gn)([(0,i.E6H)({name:"cepMask"})],m);let l=class{transform(d,...I){if(!d)return"";const c=d.substring(0,2),D=d.substring(2,3),z=d.substring(3,7),V=d.substring(7,11);return d.length<=2?`(${c})`:d.length<=3?`(${c})${D}`:d.length<=7?`(${c})${D} ${z}`:`(${c})${D} ${z}-${V}`}};l=(0,r.gn)([(0,i.E6H)({name:"phoneMask"})],l);let h=class{transform(d,...I){if("string"==typeof d&&14===d.trim().length){let c=d.replace(/\D/g,"");return c=c.replace(/^(\d{2})(\d)/,"$1.$2"),c=c.replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3"),c=c.replace(/\.(\d{3})(\d)/,".$1/$2"),c=c.replace(/(\d{4})(\d)/,"$1-$2"),c}return d}};h=(0,r.gn)([(0,i.E6H)({name:"cnpjMask"})],h);let L=class{};L=(0,r.gn)([(0,i.LVF)({declarations:[o,m,l,h],imports:[g.ez],exports:[o,m,l,h]})],L)},18063:(F,x,t)=>{t.d(x,{B:()=>h});var r=t(70655),i=t(80529),g=t(98274),o=t(99038),m=t(55583),l=t(40199);let h=class{constructor(u){this.http=u}list(u=new l.k){let d=m.t.getPageOptionsParams(u);return this.http.get(`${o.Hz.baseURL}/despesas`,{responseType:"json",params:d})}create(u){return this.http.post(`${o.Hz.baseURL}/despesas`,u,{responseType:"json"})}update(u,d){return this.http.put(`${o.Hz.baseURL}/despesas/${d}`,u,{responseType:"json"})}};h.ctorParameters=()=>[{type:i.eN}],h=(0,r.gn)([(0,g.GSi)({providedIn:"root"})],h)}}]);