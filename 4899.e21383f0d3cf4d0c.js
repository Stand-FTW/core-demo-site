"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4899],{14899:(Me,O,r)=>{r.r(O),r.d(O,{AdministracaoPessoasPageModule:()=>lt});var d=r(70655),n=r(98274),b=r(36895),o=r(24006),p=r(48058),v=r(92216),re=r(39528);let x=class{constructor(){this.currentTab="colaborador"}ngOnInit(){}changeTab(e){this.currentTab=e.detail.value}};x.ctorParameters=()=>[],x=(0,d.gn)([(0,n.wA2)({selector:"app-administracao-pessoas",template:'<ion-header [translucent]="true">\n  <ion-toolbar>\n    <ion-buttons slot="start">\n      <ion-menu-button></ion-menu-button>\n    </ion-buttons>\n    <ion-title>ADM. Pessoas</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content appScrollTheme>\n  <br />\n  <ion-segment class="background-segment" [(ngModel)]="currentTab" [ngModelOptions]="{standalone: true}"\n    (ionChange)="changeTab($event)">\n    <ion-segment-button style="margin-left: 5px; max-width: 200px" layout="icon-start" value="colaborador">\n      <ion-label text-wrap class="wrap-text" style="font-size: 1.1em">\n        Colaboradores\n      </ion-label>\n    </ion-segment-button>\n\n    <ion-segment-button style="margin-left: 5px; max-width: 200px" layout="icon-start" value="prestador">\n      <ion-label text-wrap class="wrap-text" style="font-size: 1.1em">\n        Prestadores\n      </ion-label>\n    </ion-segment-button>\n  </ion-segment>\n\n  <ion-segment class="background-segment" [(ngModel)]="currentTab" [ngModelOptions]="{standalone: true}"\n    (ionChange)="changeTab($event)">\n    <ion-segment-button style="max-width: 230px" layout="icon-start" value="usuarioSistema">\n      <ion-label style="font-size: 1.1em"> Usu\xe1rios de Sistema </ion-label>\n    </ion-segment-button>\n  </ion-segment>\n  <br />\n\n  <div class="wall-background h-screen">\n    <ng-container *ngIf="currentTab === \'colaborador\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-colaborador-main></app-colaborador-main>\n      </div>\n    </ng-container>\n\n    <ng-container *ngIf="currentTab === \'prestador\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-prestador-main></app-prestador-main>\n      </div>\n    </ng-container>\n    <ng-container *ngIf="currentTab === \'usuarioSistema\'">\n      <div style="max-width: 95%; margin: auto">\n        <app-usuario-sistema-main></app-usuario-sistema-main>\n      </div>\n    </ng-container>\n  </div>\n\n</ion-content>',styles:[""]})],x);const _e=[{path:"",component:x}];let y=class{};y=(0,d.gn)([(0,n.LVF)({imports:[re.Bz.forChild(_e)],exports:[re.Bz]})],y);var w=r(77604),E=r(9764),j=r(51740),T=r(35593),z=r(82210),$=r(58783),B=r(63054),D=r(92665),F=r(1997),W=r(38433),V=r(50613),H=r(21493),Q=r(32137),X=r(79512),N=r(91795),G=r(45132),Z=r(15108),K=r(68271),J=r(21327),_=r(85226),Y=r(32506),pe=r(2635),Ke=r(81338),q=r(19901),M=r(42480),Je=r(50952),Ye=r(68350),A=r(15861);var ee=r(67578),Ae=r(80529),S=r(99038),Ue=r(40199),Re=r(55583);let ce=class{constructor(e){this.http=e}findById(e){return this.http.get(`${S.Hz.baseURL}/prestadores/${e}`,{responseType:"json"})}list(e,t=new Ue.k){let s=Re.t.getPageOptionsParams(t);return e&&e.searchedPrestador&&(s=s.append("searchedPrestador",e.searchedPrestador)),e&&e.status_pessoa&&(s=s.append("status_pessoa",e.status_pessoa)),e&&e.status_user&&(s=s.append("status_user",e.status_user)),e&&e.nome&&(s=s.append("nome",e.nome)),e&&e.cpf&&(s=s.append("cpf",e.cpf)),e&&e.email&&(s=s.append("email",e.email)),e&&e.loja_id&&(s=s.append("loja_id",e.loja_id)),this.http.get(`${S.Hz.baseURL}/prestadores`,{responseType:"json",params:s})}create(e){const{tel1:t,tel2:s,email_alternativo:a,cpf:i}=e;return e=ee.f.sanitizeCreate({tel1:t,tel2:s,email_alternativo:a,cpf:i},e),this.http.post(`${S.Hz.baseURL}/prestadores`,e,{responseType:"json"})}update(e,t){const{tel1:s,tel2:a,email_alternativo:i}=e;return e=ee.f.sanitizeCreate({tel1:s,tel2:a,email_alternativo:i,cpf:void 0},e),this.http.put(`${S.Hz.baseURL}/prestadores/${t}`,e,{responseType:"json"})}createEndereco(e,t){return this.http.post(`${S.Hz.baseURL}/prestadores/${t}/endereco`,e,{responseType:"json"})}updateEndereco(e,t){return this.http.post(`${S.Hz.baseURL}/prestadores/${t}/endereco`,e,{responseType:"json"})}updatePassword(e){return this.http.patch(`${S.Hz.baseURL}/users/password`,{senha:e},{responseType:"json"})}uploadAvatar(e,t){const s=new FormData;s.append("file",e);const a=t?`${S.Hz.baseURL}/prestadores/${t}/avatar`:`${S.Hz.baseURL}/prestadores/avatar`;return this.http.patch(a,s)}};ce.ctorParameters=()=>[{type:Ae.eN}],ce=(0,d.gn)([(0,n.GSi)({providedIn:"root"})],ce);let ie=class{constructor(e){this.http=e}findById(e){return this.http.get(`${S.Hz.baseURL}/empresas/${e}`,{responseType:"json"})}list(e,t=new Ue.k){let s=Re.t.getPageOptionsParams(t);return e&&e.email&&(s=s.append("email",e.email)),e&&e.cnpj&&(s=s.append("cnpj",e.cnpj)),e&&e.nome_fantasia&&(s=s.append("nome_fantasia",e.nome_fantasia)),e&&e.razao_social&&(s=s.append("razao_social",e.razao_social)),e&&e.searchedEmpresa&&(s=s.append("searchedEmpresa",e.searchedEmpresa)),e&&e.status&&(s=s.append("status",e.status)),this.http.get(`${S.Hz.baseURL}/empresas`,{responseType:"json",params:s})}};ie.ctorParameters=()=>[{type:Ae.eN}],ie=(0,d.gn)([(0,n.GSi)({providedIn:"root"})],ie);var U=r(50727),te=r(57118),ue=r(37945),me=r(34758),h=r(59136),R=r(59256),se=r(81695),l=r(98739),ae=r(94567),I=r(52710),he=r(95494);let P=class{constructor(e,t,s){this.modal=e,this.toastMessageService=t,this.empresasService=s,this.hasUpdate=!1,this.subscriptions=new U.w0}ngOnInit(){this.toastMessageService.clearToast(),this.empresa||this.loadEmpresa()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadEmpresa(){const e=this.empresasService.findById(this.empresa_id).subscribe({next:t=>{this.empresa=t}});this.subscriptions.add(e)}fechar(){var e=this;return(0,A.Z)(function*(){yield e.modal.dismiss(e.hasUpdate)})()}};P.ctorParameters=()=>[{type:p.IN},{type:R.D},{type:ie}],P.propDecorators={empresa:[{type:n.IIB}],empresa_id:[{type:n.IIB}]},P=(0,d.gn)([(0,n.wA2)({selector:"app-empresa-brief",template:'<ion-content appScrollTheme>\n  <div class="surface-card p-4 border-round shadow-2 ">\n    <div class="col-12 h-full">\n      <div class="border-1 border-double border-primary surface-border border-round mt-4" style="min-height: 30rem">\n        <ng-container *ngIf="empresa">\n          <div class="surface-card p-4 shadow-2 border-round">\n            <div class="flex align-items-center justify-content-end ml-auto cursor-pointer"\n              style="position: fixed; top: 15px; right: 15px;" (click)="fechar()">\n              <span\n                class="flex align-items-center justify-content-center bg-pink-100 text-pink-800 border-circle vertical-align-top"\n                style="width: 24px; height: 24px;">\n                <i class="pi pi-times text-sm"></i>\n              </span>\n            </div>\n            <div class="font-medium text-3xl text-900 mb-3">Detalhamento</div>\n            <div class="text-primary mb-1">{{ empresa.id }}</div>\n            <div class="flex flex-column align-items-center flex-or mb-5">\n              <img [src]="user?.avatar_url || \'assets/imgs/outros/default-empresa.jpg\'"\n                class="h-10rem w-10rem border-circle border-2 border-primary mr-1 xl:mr-0 ml-3" />\n            </div>\n            <ul class="list-none p-0 m-0 border-top-1 surface-border">\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Raz\xe3o Social</div>\n                <div class="text-900 w-full md:w-10">{{ empresa.razao_social }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Nome Fantasia</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ empresa.nome_fantasia }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">CNPJ</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ empresa.cnpj | cnpjMask }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">E-mail (principal)</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ empresa.email_principal }}</div>\n              </li>\n\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">E-mail alternativo</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ empresa.email_alternativo || "N\xe3o h\xe1" }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Celular (principal)</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ empresa.tel1 | phoneMask }}</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap surface-ground">\n                <div class="text-500 w-full md:w-2 font-medium">Celular (alternativo)</div>\n                <div *ngIf="empresa.tel2" class="text-900 w-full md:w-10 line-height-3">{{ empresa.tel2 | phoneMask }}\n                </div>\n                <div *ngIf="!empresa.tel2" class="text-900 w-full md:w-10 line-height-3">N\xe3o h\xe1</div>\n              </li>\n              <li class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Situa\xe7\xe3o</div>\n                <div class="text-900 w-full md:w-10 line-height-3">{{ empresa.status }}</div>\n              </li>\n\n              <li *ngIf="empresa.endereco" class="flex align-items-center py-3 px-2 flex-wrap ">\n                <div class="text-500 w-full md:w-2 font-medium">Endere\xe7o</div>\n                <div class="text-900 w-full md:w-10">\n                  <div class="grid mt-0 mr-0">\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Endere\xe7o</span>\n                        </div>\n                        <div class="text-700">{{ empresa.endereco.endereco }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">CEP</span>\n                        </div>\n                        <div class="text-700">{{ empresa.endereco.cep }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">N\xfamero</span>\n                        </div>\n                        <div class="text-700">{{ empresa.endereco.numero }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Complemento</span>\n                        </div>\n                        <div class="text-700">{{ empresa.endereco.complemento }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Bairro</span>\n                        </div>\n                        <div class="text-700">{{ empresa.endereco.bairro }}</div>\n                      </div>\n                    </div>\n                    <div class="col-12 md:col-6">\n                      <div class="p-3 border-1 surface-border border-round surface-card">\n                        <div class="text-900 mb-2">\n                          <span class="font-medium">Cidade (UF)</span>\n                        </div>\n                        <div class="text-700">{{ empresa.endereco.cidade }} ({{ empresa.endereco.estado }})</div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </ng-container>\n      </div>\n    </div>\n  </div>\n</ion-content>',styles:[""]})],P);let ve=class{constructor(e,t,s,a,i,c,u,m){this.formBuilder=e,this.userService=t,this.prestadoresService=s,this.lojaService=a,this.perfilService=i,this.empresasService=c,this.modalCadastro=u,this.toastService=m,this.currentPerfilTake=15,this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.currentEmpresasPage=1,this.searchedEmpresa="",this.searchedSuperior="",this.showSuperiorDialog=!1,this.stepIndex=0,this.createdUserId="",this.userWasCreated=!1,this.isCliente=!1,this.maxDate=he.E.getDiaAnterior(),this.subscriptions=new U.w0,this.form=this.formBuilder.group({nome:[,[o.kI.required]],cpf:[,[o.kI.required]],email:[,[o.kI.required,o.kI.email]],email_alternativo:[,[o.kI.email]],tel1:[,[o.kI.required]],tel2:[,[]],data_nascimento:[,[o.kI.required]],perfil_id:[,[o.kI.required]],loja_id:[,[o.kI.required]],empresa_id:[,[o.kI.required]],superior:[,[]],user_ativo:[!0,[]]})}ngOnInit(){this.steps=[{label:"Informa\xe7\xf5es"},{label:"Endere\xe7o"}],this.loadLojas(),this.loadPerfis(),this.loadEmpresas(),this.loadSuperiores()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPerfis(e=1){const t=this.perfilService.list({order:h.L.ASC,page:e,take:15},{with_cliente:!1}).subscribe(s=>{this.perfis=s});this.subscriptions.add(t)}lazyLoadPerfis(e){this.currentPerfilTake+=5;const t=this.perfilService.list({order:h.L.ASC,page:1,take:this.currentPerfilTake},{with_cliente:!1}).subscribe(s=>{this.perfis=s,e.show()});this.subscriptions.add(t)}loadLojas(e=1,t){const s=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:ae.eX.OPERANDO},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.lojas=a,t&&t.show()});this.subscriptions.add(s)}searchLoja({value:e}){this.searchedLoja=e,this.loadLojas(1)}clearLoja(e){e.value="",this.searchedLoja="",this.loadLojas(1)}paginarLojas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentLojasPage&&(this.currentLojasPage=i,this.loadLojas(i,t))}loadEmpresas(e=1,t){const s=this.empresasService.list({searchedEmpresa:this.searchedEmpresa},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.empresas=a,t&&t.show()});this.subscriptions.add(s)}searchEmpresa({value:e}){this.searchedEmpresa=e,this.loadEmpresas(1)}clearEmpresa(e){e.value="",this.searchedEmpresa="",this.loadEmpresas(1)}paginarEmpresas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentEmpresasPage&&(this.currentEmpresasPage=i,this.loadEmpresas(i,t))}create(){const e=this.form.get("nome").value,t=this.form.get("email").value,s=this.form.get("cpf").value,a=this.form.get("data_nascimento").value,i=this.form.get("email_alternativo").value,c=this.form.get("tel1").value,u=this.form.get("tel2").value,m=this.form.get("user_ativo").value,{id:f}=this.form.get("perfil_id").value,{id:C}=this.form.get("loja_id").value,L=this.form.get("empresa_id").value?this.form.get("empresa_id").value?.id:void 0,k=this.form.get("superior").value?this.form.get("superior").value?.id:void 0,dt=this.prestadoresService.create({nome:e,email:t,cpf:s,perfil_id:f,loja_id:C,empresa_id:L,nivel_superior_id:k,data_nascimento:a,email_alternativo:i,tel1:c,tel2:u,user_ativo:m}).subscribe(pt=>{this.createdUserId=pt.id,this.userWasCreated=!0,this.stepIndex++});this.subscriptions.add(dt)}loadSuperiores(e=1,t){const s=this.userService.listUsers({searchedUser:this.searchedSuperior,tipos_usarios:`${I.Wo.COLABORADOR}, ${I.Wo.PRESTADOR}`},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.superiores=a,t&&t.show()});this.subscriptions.add(s)}searchSuperior({value:e}){this.searchedSuperior=e,this.loadSuperiores(1)}clearSuperior(e){e.value="",this.searchedSuperior="",this.loadSuperiores(1)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){this.selectedSuperior=this.form.get("superior").value,this.selectedSuperior?this.showModal(se.Q,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}detailEmpresa(){const e=this.form.get("empresa_id").value;e?this.showModal(P,{empresa:e}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem empresa associada",titulo:"N\xe3o h\xe1",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}listenEndereco(e){this.fechar(this.userWasCreated)}fechar(e=!1){this.modalCadastro.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,A.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};ve.ctorParameters=()=>[{type:o.QS},{type:me.K},{type:ce},{type:te.W},{type:ue.F},{type:ie},{type:p.IN},{type:R.D}],ve=(0,d.gn)([(0,n.wA2)({selector:"app-prestador-cadastro",template:'<ion-content appScrollTheme>\n  <ng-container *ngIf="stepIndex == 0">\n    <form *ngIf="lojas && perfis && empresas" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n        <div class="card mb-2">\n          <p-steps [activeIndex]="stepIndex" [model]="steps" [readonly]="true"></p-steps>\n        </div>\n        <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid">\n          <div class="grid formgrid p-fluid">\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">CPF</label>\n              <p-inputMask placeholder="CPF do prestador" formControlName="cpf" mask="999.999.999-99">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'cpf\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">Email (principal)</label>\n              <input type="text" pInputText placeholder="Email principal" formControlName="email" />\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">Email (alternativo)</label>\n              <input type="text" pInputText placeholder="Email alternativo" formControlName="email_alternativo" />\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email_alternativo\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="tel1">Celular Principal</label>\n              <p-inputMask id="tel1" placeholder="Celular do prestador" formControlName="tel1" mask="(99)9 9999-9999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel1\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="tel2">Celular Alternativo</label>\n              <p-inputMask id="tel2" placeholder="Celular alternativo do prestador" formControlName="tel2"\n                mask="(99)9 9999-9999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel2\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="data_nascimento">Data de nascimento</label>\n              <p-calendar formControlName="data_nascimento" placeholder="Data de nascimento do funcion\xe1rio"\n                [maxDate]="maxDate" inputId="data_nascimento"></p-calendar>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'data_nascimento\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-4 col-12">\n              <label for="descricao">Perfil</label>\n              <p-dropdown #dropdown_perfil [options]="perfis.data" placeholder="Selecione o perfil de acesso"\n                formControlName="perfil_id" optionLabel="nome">\n                <ng-template let-perfil pTemplate="item">\n                  <div class="">\n                    <div>{{perfil.nome}}</div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="footer">\n                  <div class="col-12 w-auto">\n                    <button *ngIf="perfis.meta.hasNextPage" pButton pRipple type="button" label="Carregar mais"\n                      (click)="lazyLoadPerfis(dropdown_perfil)" class="p-button-outlined p-button-rounded"></button>\n                  </div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'perfil_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="col-12 field ">\n              <label for="loja_id" class="text-900 font-medium mb-3">Loja</label>\n              <p-dropdown id="loja_id" [options]="lojas.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="loja_id"\n                optionLabel="nome" filterBy="nome,codigo">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchLoja(searchLojaInput)">\n                      <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearLoja(searchLojaInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-loja pTemplate="item">\n                  <div>\n                    <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-loja pTemplate="selectedItem">\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'loja_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n            <div class="col-12 field ">\n              <label for="empresa_id" class="text-900 font-medium mb-3">Empresa</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailEmpresa()"></div>\n              <p-dropdown id="empresa_id" [options]="empresas.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="empresa_id"\n                optionLabel="razao_social" filterBy="razao_social, cnpj">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchEmpresaInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchempresa(searchEmpresaInput)">\n                      <button pButton pRipple icon="pi pi-search" (click)="searchEmpresa(searchEmpresaInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearempresa(searchEmpresaInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-empresa pTemplate="item">\n                  <div>\n                    <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-empresa pTemplate="selectedItem">\n                  <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'empresa_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div *ngIf="superiores" class="col-12 field ">\n              <label for="nivel_superior" class="text-900 font-medium mb-3">N\xedvel Superior</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n              <p-dropdown id="nivel_superior" [options]="superiores.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="superior"\n                optionLabel="nome" filterBy="nome, cpf"\n                [showClear]="true">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchSuperiorInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchSuperior(searchSuperiorInput)">\n                      <button pButton pRipple icon="pi pi-search"\n                        (click)="searchSuperior(searchSuperiorInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearSuperior(searchSuperiorInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-superior pTemplate="item">\n                  <div>\n                    <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-superior pTemplate="selectedItem">\n                  <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'superior\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-2 col-12 ">\n              <div class="mb-3" for="user_ativo">Permitir acesso ao sistema?</div>\n              <p-inputSwitch class="ml-2" id="user_ativo" formControlName="user_ativo"></p-inputSwitch>\n            </div>\n\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Pr\xf3ximo" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n              [disabled]="disableCreateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n\n  <ng-container *ngIf="stepIndex == 1">\n    <app-endereco [idOf]="createdUserId" [isFuncionario]="true" (createdEvent)="listenEndereco($event)"></app-endereco>\n  </ng-container>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],ve);var qe=r(42759),et=r(16320),tt=r(1043),st=r(45088),fe=r(41117),at=r(2870);var ge=r(34057),it=r(89535);let oe=class{constructor(e,t,s,a,i,c,u,m,f){this.formBuilder=e,this.userService=t,this.prestadoresService=s,this.lojaService=a,this.perfilService=i,this.empresaService=c,this.modalCadastro=u,this.toastService=m,this.storage=f,this.isModal=!0,this.updatedEvent=new n.vpe,this.currentPerfilTake=15,this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.currentEmpresasPage=1,this.searchedEmpresa="",this.searchedSuperior="",this.showSuperiorDialog=!1,this.createdUserId="",this.userWasCreated=!1,this.isCliente=!1,this.maxDate=he.E.getDiaAnterior(),this.subscriptions=new U.w0}ngOnInit(){const{nome:e,loja:t,perfil:s,empresa:a,nivel_superior:i,tel1:c,tel2:u,email_alternativo:m,data_nascimento:f}=this.user,C=t?.id||void 0,L=a?.id||void 0,k=i?.id||void 0;this.form=this.formBuilder.group({nome:[e,[o.kI.required]],email_alternativo:[m,[o.kI.email]],tel1:[c,[o.kI.required]],tel2:[u,[]],data_nascimento:[new Date(f),[o.kI.required]],perfil_id:[s.id,[o.kI.required]],loja_id:[C,[o.kI.required]],empresa_id:[L,[]],superior:[k,[]]}),this.loadLojas(),this.loadPerfis(),this.loadEmpresas(),this.loadSuperiores()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPerfis(e=1){const t=this.perfilService.list({order:h.L.ASC,page:e,take:15},{with_cliente:!1}).subscribe(s=>{this.perfis=s});this.subscriptions.add(t)}lazyLoadPerfis(e){this.currentPerfilTake+=5;const t=this.perfilService.list({order:h.L.ASC,page:1,take:this.currentPerfilTake},{with_cliente:!1}).subscribe(s=>{this.perfis=s,e.show()});this.subscriptions.add(t)}loadLojas(e=1,t){const s=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:ae.eX.OPERANDO},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.lojas=a,t&&t.show()});this.subscriptions.add(s)}searchLoja({value:e}){this.searchedLoja=e,this.loadLojas(1)}clearLoja(e){e.value="",this.searchedLoja="",this.loadLojas(1)}paginarLojas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentLojasPage&&(this.currentLojasPage=i,this.loadLojas(i,t))}loadEmpresas(e=1,t){const s=this.empresaService.list({searchedEmpresa:this.searchedEmpresa},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.empresas=a});this.subscriptions.add(s)}searchEmpresa({value:e}){this.searchedEmpresa=e,this.loadEmpresas(1)}clearEmpresa(e){e.value="",this.searchedEmpresa="",this.loadEmpresas(1)}paginarEmpresas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentEmpresasPage&&(this.currentEmpresasPage=i,this.loadEmpresas(i,t))}update(){const{id:e}=this.user,t=this.form.get("nome").value,s=this.form.get("data_nascimento").value,a=this.form.get("email_alternativo").value,i=this.form.get("tel1").value,c=this.form.get("tel2").value,u=this.form.get("perfil_id").value,m=this.form.get("loja_id").value,f=this.form.get("empresa_id").value||void 0,C=this.form.get("superior").value?this.form.get("superior").value:void 0,L=this.prestadoresService.update({nome:t,perfil_id:u,loja_id:m,empresa_id:f,nivel_superior_id:C,data_nascimento:s,email_alternativo:a,tel1:i,tel2:c},e).subscribe(k=>{this.createdUserId=k.id,this.userWasCreated=!0,this.fechar(this.userWasCreated)});this.subscriptions.add(L)}uploadFile(e,t){const{id:s,tipo_user:a}=this.user,{id:i,perfil_nome:c}=this.storage.getLocalUser();if(s!=i&&!ee.f.checkUpdateImagePermission(c))return void this.toastService.presentToast({titulo:"N\xe3o autorizado",detalhe:`Apenas ${ge.u.ADMIN} e ${ge.u.GERENTE} podem atualizar essas informa\xe7\xf5es`,duracao:l.m4.mediumDuration,gravidade:l.kl.ATENCAO});const u=e.files[0],m=this.userService.newUploadAvatar(a,u,s).subscribe(f=>{this.user=f,this.createdUserId=f.id,this.userWasCreated=!0,this.toastService.presentToast({detalhe:"Foto alterada",duracao:l.m4.shortDuration,gravidade:l.kl.SUCESSO,titulo:"Sucesso!"}),this.updatedEvent.emit(this.user),t.clear()});this.subscriptions.add(m)}loadSuperiores(e=1,t){const s=this.userService.listUsers({searchedUser:this.searchedSuperior,tipos_usarios:`${I.Wo.COLABORADOR}, ${I.Wo.PRESTADOR}`},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.superiores=a,t&&t.show()});this.subscriptions.add(s)}searchSuperior({value:e}){this.searchedSuperior=e,this.loadSuperiores(1)}clearSuperior(e){e.value="",this.searchedSuperior="",this.loadSuperiores(1)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){const e=this.form.get("superior").value;this.selectedSuperior=this.superiores.data.find(t=>t.id==e),this.selectedSuperior?this.showModal(se.Q,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}detailEmpresa(){const e=this.form.get("empresa_id").value;this.selectedEmpresa=this.empresas.data.find(t=>t.id==e),this.selectedEmpresa?this.showModal(P,{empresa:this.selectedEmpresa}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem empresa associada",titulo:"N\xe3o h\xe1",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}listenEndereco(e){this.fechar(this.userWasCreated)}fechar(e=!1){this.modalCadastro.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,A.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};oe.ctorParameters=()=>[{type:o.QS},{type:me.K},{type:ce},{type:te.W},{type:ue.F},{type:ie},{type:p.IN},{type:R.D},{type:it.V}],oe.propDecorators={user:[{type:n.IIB}],isModal:[{type:n.IIB}],updatedEvent:[{type:n.r_U}]},oe=(0,d.gn)([(0,n.wA2)({selector:"app-prestador-detail",template:'<ion-content appScrollTheme>\n\n  <form *ngIf="lojas && perfis && empresas" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n    <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n      <div class="flex flex-column align-items-center flex-or ">\n        <img [src]="user?.avatar_url || \'assets/imgs/outros/default-user.jpg\'"\n          class="h-10rem w-10rem border-circle border-2 border-primary mr-1 xl:mr-0 ml-3 " />\n        <p-fileUpload #avatarFile id="avatar" mode="basic" name="avatar" accept="image/*"\n          styleClass="p-button-rounded -mt-4 w-3rem  text-center" chooseIcon="pi pi-pencil" chooseLabel=" "\n          customUpload="true" [auto]="true" (uploadHandler)="uploadFile($event, avatarFile)">\n        </p-fileUpload>\n      </div>\n\n      <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n      <div class="surface-card p-4 shadow-2 border-round p-fluid">\n        <div class="grid formgrid p-fluid">\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="nome" class="font-medium text-900">Nome</label>\n            <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="descricao">Email (alternativo)</label>\n            <input type="text" pInputText placeholder="Email alternativo" formControlName="email_alternativo" />\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email_alternativo\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel1">Celular Principal</label>\n            <p-inputMask id="tel1" placeholder="Celular do prestador" formControlName="tel1" mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel1\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel2">Celular Alternativo</label>\n            <p-inputMask id="tel2" placeholder="Celular alternativo do prestador" formControlName="tel2"\n              mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel2\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="data_nascimento">Data de nascimento</label>\n            <p-calendar formControlName="data_nascimento" placeholder="Data de nascimento do prestador"\n              [maxDate]="maxDate" inputId="data_nascimento" [maxDate]="maxDate"></p-calendar>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'data_nascimento\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="field mb-4 col-12">\n            <label for="descricao">Perfil</label>\n            <p-dropdown #dropdown_perfil [options]="perfis.data" placeholder="Selecione o perfil de acesso"\n              formControlName="perfil_id" optionLabel="nome" optionValue="id">\n              <ng-template let-perfil pTemplate="item">\n                <div class="">\n                  <div>{{perfil.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="footer">\n                <div class="col-12 w-auto">\n                  <button *ngIf="perfis.meta.hasNextPage" pButton pRipple type="button" label="Carregar mais"\n                    (click)="lazyLoadPerfis(dropdown_perfil)" class="p-button-outlined p-button-rounded"></button>\n                </div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'perfil_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="col-12 field ">\n            <label for="loja_id" class="text-900 font-medium mb-3">Loja</label>\n            <p-dropdown id="loja_id" [options]="lojas.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="loja_id"\n              optionLabel="nome" filterBy="nome,codigo"\n              optionValue="id">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchLoja(searchLojaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearLoja(searchLojaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="item">\n                <div>\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="selectedItem">\n                <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'loja_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n          <div class="col-12 field ">\n            <label for="empresa_id" class="text-900 font-medium mb-3">Empresa</label>\n            <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailEmpresa()"></div>\n            <p-dropdown id="empresa_id" [options]="empresas.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="empresa_id"\n              optionLabel="razao_social" \n              filterBy="razao_social, cnpj" optionValue="id">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchEmpresaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchempresa(searchEmpresaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchEmpresa(searchEmpresaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearempresa(searchEmpresaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-empresa pTemplate="item">\n                <div>\n                  <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-empresa pTemplate="selectedItem">\n                <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'empresa_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div *ngIf="superiores" class="col-12 field ">\n            <label for="nivel_superior" class="text-900 font-medium mb-3">N\xedvel Superior</label>\n            <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n            <p-dropdown id="nivel_superior" [options]="superiores.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="superior"\n              optionLabel="nome" filterBy="nome, cpf"\n              optionValue="id" [showClear]="true" optionValue="id">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchSuperiorInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchSuperior(searchSuperiorInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchSuperior(searchSuperiorInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearSuperior(searchSuperiorInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-superior pTemplate="item">\n                <div>\n                  <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                </div>\n              </ng-template>\n              <ng-template let-superior pTemplate="selectedItem">\n                <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'superior\')"></p-message>\n            </div>\n          </div>\n\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n        </div>\n        <div class="flex justify-content-end">\n          <button pButton pRipple label="Atualizar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="update()"\n            [disabled]="disableCreateBtn()"></button>\n        </div>\n      </div>\n    </div>\n  </form>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],oe);let Oe=class{constructor(e,t,s,a){this.prestadoresService=e,this.modal=t,this.toastService=s,this.lojaService=a,this.sortUsertatus=I.Mm,this.sortPessoaStatus=I.hx,this.sortLojas=[],this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.searchedNome="",this.selectedPessoaStatus=void 0,this.selectedUsuarioStatus=void 0,this.currentPage=1,this.showStatusDialog=!1,this.editMenuItens=[{label:"Op\xe7\xf5es",items:[{label:"Atualizar",icon:"pi pi-user-edit",command:()=>this.detalharSimplificado(this.selectedUser)},{label:"Status",icon:"pi pi-exclamation-triangle",command:()=>this.detalharStatus(this.selectedUser)},{label:"Autoriza\xe7\xf5es",icon:"pi pi-verified",command:()=>this.detalharAuthorization(this.selectedUser)}]},{separator:!0,items:[{label:"Perfil",icon:"pi pi-id-card",command:()=>this.detalharPerfil(this.selectedUser)}]}],this.updateStatusObj={status_user:void 0,status_pessoa:void 0},this.contentError=new fe.S,this.subscriptions=new U.w0}ngOnInit(){this.loadLoja(),this.loadPrestadores()}ngOnDestroy(){this.subscriptions.unsubscribe()}changeStatusUsuario({value:e}){this.selectedUsuarioStatus=e,this.loadPrestadores(1)}changeStatusPessoa({value:e}){this.selectedPessoaStatus=e,this.loadPrestadores(1)}changeLoja({value:e}){this.selectedLoja=e,this.loadPrestadores(1)}clearFilter(){this.loadPrestadores(1)}clearAllFilters(e,t,s){this.searchedNome=void 0,this.selectedLoja=void 0,this.selectedPessoaStatus=void 0,this.selectedUsuarioStatus=void 0,t.writeValue(null),s.writeValue(null),this.loadPrestadores(1)}loadLoja(){const e=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:ae.eX.OPERANDO}).subscribe(t=>{this.lojas=t});this.subscriptions.add(e)}searchLoja({value:e}){this.searchedLoja=e,this.loadLoja()}clearLoja(e){e.value="",this.searchedLoja="",this.loadLoja()}loadPrestadores(e=1){const t=this.prestadoresService.list({searchedPrestador:this.searchedNome,loja_id:this.selectedLoja,status_pessoa:this.selectedPessoaStatus,status_user:this.selectedUsuarioStatus},{order:h.L.DESC,page:e,take:5}).subscribe({next:s=>{this.contentError=new fe.S,this.users=s,this.isLoaded=!0},error:s=>{this.contentError={code:s.status,hasError:!0}}});this.subscriptions.add(t)}updateStatus(){const{id:e}=this.selectedUser,{status_pessoa:t,status_user:s}=this.updateStatusObj,a=this.prestadoresService.update({status_pessoa:t,status_user:s},e).subscribe({next:i=>{this.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:l.m4.mediumDuration,gravidade:l.kl.SUCESSO}),this.showStatusDialog=!1,this.loadPrestadores(1)},error:i=>{this.showStatusDialog=!1}});this.subscriptions.add(a)}detalharSimplificado(e){this.showModal(oe,{user:e})}detalharPerfil(e){this.showModal(st.E,{user:e})}detalharAuthorization(e){this.showModal(tt.T,{user:e})}detalharStatus(e){const{status_pessoa:t,status_user:s}=e;this.updateStatusObj={status_pessoa:t,status_user:s},this.showStatusDialog=!0}detalharEndereco(e){e.endereco?this.showModal(et.F,{currentEndereco:e,isFuncionario:!0}):this.showModal(qe.A,{idOf:e.id,isFuncionario:!0,isModal:!0})}setUserImage(e){return e.avatar_url||"assets/imgs/outros/default-user.jpg"}createNewUser(){this.showModal(ve)}search(){this.loadPrestadores(1)}paginar(e){const{first:t,rows:s}=e,a=Number(Number(t)/Number(s)+1);a!=this.currentPage&&(this.currentPage=a,this.loadPrestadores(a))}detailSuperior(e){e?this.showModal(se.Q,{user_id:e.id}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem superior alocado",titulo:"N\xe3o h\xe1",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}detailLoja(e){e?this.showModal(at.t,{loja:e}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem loja alocada",titulo:"N\xe3o h\xe1",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}detailEmpresa(e){e?this.showModal(P,{empresa:e}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem empresa associada",titulo:"N\xe3o h\xe1",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}showModal(e,t){var s=this;return(0,A.Z)(function*(){const a=yield s.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{const{data:c}=i;s.isLoaded=!1,s.loadPrestadores(),!0===c&&s.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:l.m4.mediumDuration,gravidade:l.kl.SUCESSO})}),yield a.present()})()}};Oe.ctorParameters=()=>[{type:ce},{type:p.IN},{type:R.D},{type:te.W}],Oe=(0,d.gn)([(0,n.wA2)({selector:"app-prestador-main",template:'<div class="card main-view h-full">\n\n  <ng-container *ngIf="isLoaded">\n    <p-dataView emptyMessage="Nada encontrado, experimente trocar os filtros" class="data-container" #dv [lazy]="true"\n      [value]="users.data" [paginator]="true" [rows]="users.meta.take" [totalRecords]="users.meta.itemCount"\n      [pageLinks]="users.meta.pageCount" (onLazyLoad)="paginar($event)" filterBy="nome" layout="list">\n      <ng-template pTemplate="header">\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field  col-12 sm:col-6 xl:col-3">\n            <p-dropdown *ngIf="lojas" #dropdown_lojas id="loja_id" [options]="lojas.data" [filter]="true"\n              placeholder="Selecione" [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" optionValue="id"\n              optionLabel="nome" filterBy="nome,codigo"\n              (onClear)="clearFilter($event)" (onChange)="changeLoja($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchLoja(searchLojaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearLoja(searchLojaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="item">\n                <div>\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="selectedItem">\n                <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n              </ng-template>\n            </p-dropdown>\n          </div>\n\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_filtro [options]="sortUsertatus" placeholder="Status Usu\xe1rio"\n              (onChange)="changeStatusUsuario($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_filtro [options]="sortPessoaStatus" placeholder="Status Pessoa"\n              (onChange)="changeStatusPessoa($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n        </div>\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field col-12 sm:col-6 xl:col-3">\n            <button pButton pRipple class="sm:w-auto w-full p-button-outlined" icon="pi pi-times" label="Limpar filtros"\n              (click)="clearAllFilters($event, dropdown_lojas, dropdown_filtro)">\n            </button>\n          </div>\n          <div class="field col-12 sm:col-6 xl:col-3 text-right">\n            <button pButton pRipple class="sm:w-auto w-full " icon="pi pi-user-plus" label="Novo cadastro"\n              (click)="createNewUser()">\n            </button>\n          </div>\n        </div>\n\n        <div class="flex flex-column md:flex-row md:justify-content-center">\n          <span class="p-inputgroup mb-2 md:mb-0 mt-2 max-w-30rem\t">\n            <input class="w-full" type="search" pInputText [(ngModel)]="searchedNome"\n              [ngModelOptions]="{standalone: true}" placeholder="CPF, Email ou Nome" (keyup.enter)="search()">\n            <button type="button" pButton pRipple class="pi pi-search cursor-pointer p-button-outlined"\n              (click)="search()"></button>\n            <button type="button" pButton pRipple class="pi pi-times cursor-pointer p-button-outlined p-button-danger"\n              (click)="searchedNome = \'\'; search();"></button>\n          </span>\n        </div>\n\n      </ng-template>\n\n      <ng-template let-user pTemplate="listItem">\n        <div *ngIf="isLoaded" #templateGrid class="col-12">\n          <div class="data-list-item">\n            <div class="crop mb-2 md:mb-0 ">\n              <img class="border-circle border-2 border-primary" [src]="setUserImage(user)" [alt]="user.name" />\n            </div>\n            <div class="data-list-detail">\n              <div class="data-name">{{ user.nome }}</div>\n              <div class="data-description mt-2">CPF: {{ user.cpf | cpfMask }}</div>\n              <div class="data-description mt-1">Situa\xe7\xe3o: {{ user.status_pessoa }}</div>\n              <div class="data-description mt-1">Acesso: {{ user.status_user }}</div>\n\n              <div class="data-description mt-2">E-mail: {{ user.email }}</div>\n              <div *ngIf="user.email_alternativo" class="data-description mt-1">E-mail (alternativo): {{\n                user.email_alternativo }}</div>\n              <div class="data-description mt-1">Celular: {{ user.tel1 | phoneMask }}</div>\n              <div *ngIf="user.tel2" class="data-description mt-1">Celular (alternativo): {{ user.tel2 | phoneMask }}</div>\n\n              <div class="data-description mt-2 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailLoja(user.loja)">\n                  Loja:\n                  {{ user.loja?.nome || \'N\xe3o h\xe1\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n              <div class="data-description mt-1 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailSuperior(user.nivel_superior)">\n                  Superior: {{ user.nivel_superior?.nome || \'N\xe3o h\xe1\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n              <div class="data-description mt-1 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailEmpresa(user.empresa)">\n                  Empresa: {{ user.empresa?.razao_social || \'N\xe3o h\xe1\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n\n              <div class="mt-3">\n                <i class="pi pi-sitemap data-category-icon "></i>\n                <span class="data-category">Acesso: {{user.perfil?.nome || "Sem\n                  Perfil"}}</span>\n              </div>\n            </div>\n            <div class="data-list-action">\n              <button type="button" pButton icon="pi pi-cog" label="Op\xe7\xf5es"\n                (click)="selectedUser = user; editMenu.toggle($event)"></button>\n              <p-menu #editMenu appendTo="body" [popup]="true" [model]="editMenuItens"></p-menu>\n\n              <button pButton type="button" class="p-button-outlined" icon="pi pi-map" label="Endere\xe7o"\n                (click)="detalharEndereco(user)">\n              </button>\n            </div>\n          </div>\n        </div>\n      </ng-template>\n    </p-dataView>\n  </ng-container>\n\n  <ng-container *ngIf="contentError.hasError">\n    <app-content-error [erroCode]="contentError.code"></app-content-error>\n  </ng-container>\n\n\n  <p-dialog *ngIf="showStatusDialog" [(visible)]="showStatusDialog" [resizable]="false" [draggable]="false"\n    [modal]="true" [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\', height: \'80%\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <div class="text-900 font-medium mb-3 text-xl">Alterando status</div>\n      </div>\n    </ng-template>\n    <div class="surface-card border-round shadow-2 p-4">\n      <p class="mt-0 mb-4 p-0 line-height-3">Acesso ao sistema: </p>\n      <p-dropdown [options]="sortUsertatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n        [(ngModel)]="updateStatusObj.status_user" [ngModelOptions]="{standalone: true}"\n        styleClass="mb-2 md:mb-0 w-full">\n      </p-dropdown>\n    </div>\n\n    <div class="surface-card border-round shadow-2 p-4 mt-2">\n      <p class="mt-0 mb-4 p-0 line-height-3">Situa\xe7\xe3o na corpora\xe7\xe3o: </p>\n      <p-dropdown [options]="sortPessoaStatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n        [(ngModel)]="updateStatusObj.status_pessoa" [ngModelOptions]="{standalone: true}"\n        styleClass="mb-2 md:mb-0 w-full">\n      </p-dropdown>\n    </div>\n    <div class="flex justify-content-end mt-3 grid">\n      <div class="surface-border border-top-1 opacity-50 mb-1 col-12"></div>\n      <button class="" pButton pRipple label="Atualizar" (click)="updateStatus()"></button>\n    </div>\n  </p-dialog>\n</div>',styles:[""]})],Oe);let ze=class{};ze=(0,d.gn)([(0,n.LVF)({declarations:[Oe],imports:[b.ez,o.u5,o.UX,p.Pc,w.FI,X.QK,j.j,B.A,N.T,G.l,Z.x,K.F,J.$9,q.q,F.U,V.cc,E.Q,W.ON,z.kW,$.LU,j.j,H.S,T.hJ,D.O,Q.D,pe.f,_.o,Ke.a,Y.X,M.R,Ye.U,Je.S],exports:[Oe]})],ze);var be=r(1236),Se=r(23520),xe=r(17913),ye=r(61989),je=r(25047),Ie=r(3631),Ce=r(70585),rt=r(99983);let $e=class{};$e=(0,d.gn)([(0,n.LVF)({declarations:[oe],imports:[b.ez,o.u5,o.UX,p.Pc,w.FI,X.QK,j.j,Se.zz,xe.Iu,rt.O,B.A,ye.nD,N.T,je.L$,Ie.WN,G.l,Z.x,K.F,J.$9,q.q,F.U,V.cc,E.Q,Ce._8,W.ON,z.kW,be.q,$.LU,j.j,H.S,T.hJ,D.O,Q.D,_.o,Y.X,M.R],exports:[oe]})],$e);let Be=class{};Be=(0,d.gn)([(0,n.LVF)({declarations:[ve],imports:[b.ez,o.u5,o.UX,p.Pc,w.FI,X.QK,j.j,Se.zz,xe.Iu,B.A,ye.nD,N.T,je.L$,Ie.WN,G.l,Z.x,K.F,J.$9,q.q,F.U,V.cc,E.Q,Ce._8,W.ON,z.kW,be.q,$.LU,j.j,H.S,T.hJ,D.O,Q.D,_.o,Y.X,pe.f,M.R],exports:[ve]})],Be);let De=class{};De=(0,d.gn)([(0,n.LVF)({declarations:[],imports:[b.ez,ze,$e,Be],exports:[ze,$e,Be]})],De);let Le=class{constructor(e){this.http=e}findById(e){return this.http.get(`${S.Hz.baseURL}/users-sistema/${e}`,{responseType:"json"})}list(e,t=new Ue.k){let s=Re.t.getPageOptionsParams(t);return e&&e.searchedUsuarioSistema&&(s=s.append("searchedUsuarioSistema",e.searchedUsuarioSistema)),e&&e.status_pessoa&&(s=s.append("status_pessoa",e.status_pessoa)),e&&e.status_user&&(s=s.append("status_user",e.status_user)),e&&e.nome&&(s=s.append("nome",e.nome)),e&&e.cpf&&(s=s.append("cpf",e.cpf)),e&&e.email&&(s=s.append("email",e.email)),e&&e.loja_id&&(s=s.append("loja_id",e.loja_id)),this.http.get(`${S.Hz.baseURL}/users-sistema`,{responseType:"json",params:s})}create(e){const{tel1:t,tel2:s,email_alternativo:a}=e;return e=ee.f.sanitizeCreate({tel1:t,tel2:s,email_alternativo:a,cpf:void 0},e),this.http.post(`${S.Hz.baseURL}/users-sistema`,e,{responseType:"json"})}update(e,t){const{tel1:s,tel2:a,email_alternativo:i}=e;return e=ee.f.sanitizeCreate({tel1:s,tel2:a,email_alternativo:i,cpf:void 0},e),this.http.put(`${S.Hz.baseURL}/users-sistema/${t}`,e,{responseType:"json"})}createEndereco(e,t){return this.http.post(`${S.Hz.baseURL}/users-sistema/${t}/endereco`,e,{responseType:"json"})}updateEndereco(e,t){return this.http.post(`${S.Hz.baseURL}/users-sistema/${t}/endereco`,e,{responseType:"json"})}updatePassword(e){return this.http.patch(`${S.Hz.baseURL}/users/password`,{senha:e},{responseType:"json"})}uploadAvatar(e,t){const s=new FormData;s.append("file",e);const a=t?`${S.Hz.baseURL}/users-sistema/${t}/avatar`:`${S.Hz.baseURL}/users-sistema/avatar`;return this.http.patch(a,s)}};Le.ctorParameters=()=>[{type:Ae.eN}],Le=(0,d.gn)([(0,n.GSi)({providedIn:"root"})],Le);let we=class{constructor(e,t,s,a,i,c,u,m){this.formBuilder=e,this.userService=t,this.usuariosSistemaService=s,this.lojaService=a,this.perfilService=i,this.empresasService=c,this.modalCadastro=u,this.toastService=m,this.currentPerfilTake=15,this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.currentEmpresasPage=1,this.searchedEmpresa="",this.searchedSuperior="",this.showSuperiorDialog=!1,this.stepIndex=0,this.createdUserId="",this.userWasCreated=!1,this.isCliente=!1,this.maxDate=he.E.getDiaAnterior(),this.subscriptions=new U.w0,this.form=this.formBuilder.group({nome:[,[o.kI.required]],email:[,[o.kI.required,o.kI.email]],email_alternativo:[,[o.kI.email]],tel1:[,[o.kI.required]],tel2:[,[]],perfil_id:[,[o.kI.required]],loja_id:[,[o.kI.required]],empresa_id:[,[o.kI.required]],superior:[,[]],user_ativo:[!0,[]]})}ngOnInit(){this.steps=[{label:"Informa\xe7\xf5es"},{label:"Endere\xe7o"}],this.loadLojas(),this.loadPerfis(),this.loadEmpresas(),this.loadSuperiores()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPerfis(e=1){const t=this.perfilService.list({order:h.L.ASC,page:e,take:15},{with_cliente:!1}).subscribe(s=>{this.perfis=s});this.subscriptions.add(t)}lazyLoadPerfis(e){this.currentPerfilTake+=5;const t=this.perfilService.list({order:h.L.ASC,page:1,take:this.currentPerfilTake},{with_cliente:!1}).subscribe(s=>{this.perfis=s,e.show()});this.subscriptions.add(t)}loadLojas(e=1,t){const s=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:ae.eX.OPERANDO},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.lojas=a,t&&t.show()});this.subscriptions.add(s)}searchLoja({value:e}){this.searchedLoja=e,this.loadLojas(1)}clearLoja(e){e.value="",this.searchedLoja="",this.loadLojas(1)}paginarLojas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentLojasPage&&(this.currentLojasPage=i,this.loadLojas(i,t))}loadEmpresas(e=1,t){const s=this.empresasService.list({searchedEmpresa:this.searchedEmpresa},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.empresas=a,t&&t.show()});this.subscriptions.add(s)}searchEmpresa({value:e}){this.searchedEmpresa=e,this.loadEmpresas(1)}clearEmpresa(e){e.value="",this.searchedEmpresa="",this.loadEmpresas(1)}paginarEmpresas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentEmpresasPage&&(this.currentEmpresasPage=i,this.loadEmpresas(i,t))}create(){const e=this.form.get("nome").value,t=this.form.get("email").value,s=this.form.get("email_alternativo").value,a=this.form.get("tel1").value,i=this.form.get("tel2").value,c=this.form.get("user_ativo").value,{id:u}=this.form.get("perfil_id").value,{id:m}=this.form.get("loja_id").value,f=this.form.get("empresa_id").value?this.form.get("empresa_id").value?.id:void 0,C=this.form.get("superior").value?this.form.get("superior").value?.id:void 0,L=this.usuariosSistemaService.create({nome:e,email:t,perfil_id:u,loja_id:m,empresa_id:f,nivel_superior_id:C,email_alternativo:s,tel1:a,tel2:i,user_ativo:c}).subscribe(k=>{this.createdUserId=k.id,this.userWasCreated=!0,this.stepIndex++});this.subscriptions.add(L)}loadSuperiores(e=1,t){const s=this.userService.listUsers({searchedUser:this.searchedSuperior,tipos_usarios:`${I.Wo.COLABORADOR}, ${I.Wo.PRESTADOR}`},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.superiores=a,t&&t.show()});this.subscriptions.add(s)}searchSuperior({value:e}){this.searchedSuperior=e,this.loadSuperiores(1)}clearSuperior(e){e.value="",this.searchedSuperior="",this.loadSuperiores(1)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){this.selectedSuperior=this.form.get("superior").value,this.selectedSuperior?this.showModal(se.Q,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}detailEmpresa(){const e=this.form.get("empresa_id").value;e?this.showModal(P,{empresa:e}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem empresa associada",titulo:"N\xe3o h\xe1",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}listenEndereco(e){this.fechar(this.userWasCreated)}fechar(e=!1){this.modalCadastro.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,A.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};we.ctorParameters=()=>[{type:o.QS},{type:me.K},{type:Le},{type:te.W},{type:ue.F},{type:ie},{type:p.IN},{type:R.D}],we=(0,d.gn)([(0,n.wA2)({selector:"app-usuario-sistema-cadastro",template:'<ion-content appScrollTheme>\n  <ng-container *ngIf="stepIndex == 0">\n    <form *ngIf="lojas && perfis && empresas" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n        <div class="card mb-2">\n          <p-steps [activeIndex]="stepIndex" [model]="steps" [readonly]="true"></p-steps>\n        </div>\n        <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid">\n          <div class="grid formgrid p-fluid">\n\n            <div class="field mb-4 col-12 ">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">Email (principal)</label>\n              <input type="text" pInputText placeholder="Email principal" formControlName="email" />\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">Email (alternativo)</label>\n              <input type="text" pInputText placeholder="Email alternativo" formControlName="email_alternativo" />\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email_alternativo\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="tel1">Celular Principal</label>\n              <p-inputMask id="tel1" placeholder="Celular do usu\xe1rio de sistema" formControlName="tel1" mask="(99)9 9999-9999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel1\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="tel2">Celular Alternativo</label>\n              <p-inputMask id="tel2" placeholder="Celular alternativo do usu\xe1rio de sistema" formControlName="tel2"\n                mask="(99)9 9999-9999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel2\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-4 col-12">\n              <label for="descricao">Perfil</label>\n              <p-dropdown #dropdown_perfil [options]="perfis.data" placeholder="Selecione o perfil de acesso"\n                formControlName="perfil_id" optionLabel="nome">\n                <ng-template let-perfil pTemplate="item">\n                  <div class="">\n                    <div>{{perfil.nome}}</div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="footer">\n                  <div class="col-12 w-auto">\n                    <button *ngIf="perfis.meta.hasNextPage" pButton pRipple type="button" label="Carregar mais"\n                      (click)="lazyLoadPerfis(dropdown_perfil)" class="p-button-outlined p-button-rounded"></button>\n                  </div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'perfil_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="col-12 field ">\n              <label for="loja_id" class="text-900 font-medium mb-3">Loja</label>\n              <p-dropdown id="loja_id" [options]="lojas.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="loja_id"\n                optionLabel="nome" filterBy="nome,codigo">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchLoja(searchLojaInput)">\n                      <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearLoja(searchLojaInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-loja pTemplate="item">\n                  <div>\n                    <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-loja pTemplate="selectedItem">\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'loja_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n            <div class="col-12 field ">\n              <label for="empresa_id" class="text-900 font-medium mb-3">Empresa</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailEmpresa()"></div>\n              <p-dropdown id="empresa_id" [options]="empresas.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="empresa_id"\n                optionLabel="razao_social" filterBy="razao_social, cnpj">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchEmpresaInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchempresa(searchEmpresaInput)">\n                      <button pButton pRipple icon="pi pi-search" (click)="searchEmpresa(searchEmpresaInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearempresa(searchEmpresaInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-empresa pTemplate="item">\n                  <div>\n                    <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-empresa pTemplate="selectedItem">\n                  <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'empresa_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div *ngIf="superiores" class="col-12 field ">\n              <label for="nivel_superior" class="text-900 font-medium mb-3">N\xedvel Superior</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n              <p-dropdown id="nivel_superior" [options]="superiores.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="superior"\n                optionLabel="nome" filterBy="nome, cpf"\n                [showClear]="true">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchSuperiorInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchSuperior(searchSuperiorInput)">\n                      <button pButton pRipple icon="pi pi-search"\n                        (click)="searchSuperior(searchSuperiorInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearSuperior(searchSuperiorInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-superior pTemplate="item">\n                  <div>\n                    <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-superior pTemplate="selectedItem">\n                  <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'superior\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-2 col-12 ">\n              <div class="mb-3" for="user_ativo">Permitir acesso ao sistema?</div>\n              <p-inputSwitch class="ml-2" id="user_ativo" formControlName="user_ativo"></p-inputSwitch>\n            </div>\n\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Pr\xf3ximo" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n              [disabled]="disableCreateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n\n  <ng-container *ngIf="stepIndex == 1">\n    <app-endereco [idOf]="createdUserId" [isFuncionario]="true" (createdEvent)="listenEndereco($event)"></app-endereco>\n  </ng-container>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],we);let Fe=class{};Fe=(0,d.gn)([(0,n.LVF)({declarations:[we],imports:[b.ez,o.u5,o.UX,p.Pc,w.FI,X.QK,j.j,Se.zz,xe.Iu,B.A,ye.nD,N.T,je.L$,Ie.WN,G.l,Z.x,K.F,J.$9,q.q,F.U,V.cc,E.Q,Ce._8,W.ON,z.kW,be.q,$.LU,j.j,H.S,T.hJ,D.O,Q.D,_.o,Y.X,pe.f,M.R],exports:[we]})],Fe);let ne=class{constructor(e,t,s,a,i,c,u,m,f){this.formBuilder=e,this.userService=t,this.usuariosSistemaService=s,this.lojaService=a,this.perfilService=i,this.empresaService=c,this.modalCadastro=u,this.toastService=m,this.storage=f,this.isModal=!0,this.updatedEvent=new n.vpe,this.currentPerfilTake=15,this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.currentEmpresasPage=1,this.searchedEmpresa="",this.searchedSuperior="",this.showSuperiorDialog=!1,this.createdUserId="",this.userWasCreated=!1,this.isCliente=!1,this.maxDate=he.E.getDiaAnterior(),this.subscriptions=new U.w0}ngOnInit(){const{nome:e,loja:t,perfil:s,empresa:a,nivel_superior:i,tel1:c,tel2:u,email_alternativo:m}=this.user,f=t?.id||void 0,C=a?.id||void 0,L=i?.id||void 0;this.form=this.formBuilder.group({nome:[e,[o.kI.required]],email_alternativo:[m,[o.kI.email]],tel1:[c,[o.kI.required]],tel2:[u,[]],perfil_id:[s.id,[o.kI.required]],loja_id:[f,[o.kI.required]],empresa_id:[C,[]],superior:[L,[]]}),this.loadLojas(),this.loadPerfis(),this.loadEmpresas(),this.loadSuperiores()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPerfis(e=1){const t=this.perfilService.list({order:h.L.ASC,page:e,take:15},{with_cliente:!1}).subscribe(s=>{this.perfis=s});this.subscriptions.add(t)}lazyLoadPerfis(e){this.currentPerfilTake+=5;const t=this.perfilService.list({order:h.L.ASC,page:1,take:this.currentPerfilTake},{with_cliente:!1}).subscribe(s=>{this.perfis=s,e.show()});this.subscriptions.add(t)}loadLojas(e=1,t){const s=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:ae.eX.OPERANDO},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.lojas=a,t&&t.show()});this.subscriptions.add(s)}searchLoja({value:e}){this.searchedLoja=e,this.loadLojas(1)}clearLoja(e){e.value="",this.searchedLoja="",this.loadLojas(1)}paginarLojas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentLojasPage&&(this.currentLojasPage=i,this.loadLojas(i,t))}loadEmpresas(e=1,t){const s=this.empresaService.list({searchedEmpresa:this.searchedEmpresa},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.empresas=a});this.subscriptions.add(s)}searchEmpresa({value:e}){this.searchedEmpresa=e,this.loadEmpresas(1)}clearEmpresa(e){e.value="",this.searchedEmpresa="",this.loadEmpresas(1)}paginarEmpresas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentEmpresasPage&&(this.currentEmpresasPage=i,this.loadEmpresas(i,t))}update(){const{id:e}=this.user,t=this.form.get("nome").value,s=this.form.get("email_alternativo").value,a=this.form.get("tel1").value,i=this.form.get("tel2").value,c=this.form.get("perfil_id").value,u=this.form.get("loja_id").value,m=this.form.get("empresa_id").value||void 0,f=this.form.get("superior").value?this.form.get("superior").value:void 0,C=this.usuariosSistemaService.update({nome:t,perfil_id:c,loja_id:u,empresa_id:m,nivel_superior_id:f,email_alternativo:s,tel1:a,tel2:i},e).subscribe(L=>{this.createdUserId=L.id,this.userWasCreated=!0,this.fechar(this.userWasCreated)});this.subscriptions.add(C)}uploadFile(e,t){const{id:s,tipo_user:a}=this.user,{id:i,perfil_nome:c}=this.storage.getLocalUser();if(s!=i&&!ee.f.checkUpdateImagePermission(c))return void this.toastService.presentToast({titulo:"N\xe3o autorizado",detalhe:`Apenas ${ge.u.ADMIN} e ${ge.u.GERENTE} podem atualizar essas informa\xe7\xf5es`,duracao:l.m4.mediumDuration,gravidade:l.kl.ATENCAO});const u=e.files[0],m=this.userService.newUploadAvatar(a,u,s).subscribe(f=>{this.user=f,this.createdUserId=f.id,this.userWasCreated=!0,this.toastService.presentToast({detalhe:"Foto alterada",duracao:l.m4.shortDuration,gravidade:l.kl.SUCESSO,titulo:"Sucesso!"}),this.updatedEvent.emit(this.user),t.clear()});this.subscriptions.add(m)}loadSuperiores(e=1,t){const s=this.userService.listUsers({searchedUser:this.searchedSuperior,tipos_usarios:`${I.Wo.COLABORADOR}, ${I.Wo.PRESTADOR}`},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.superiores=a,t&&t.show()});this.subscriptions.add(s)}searchSuperior({value:e}){this.searchedSuperior=e,this.loadSuperiores(1)}clearSuperior(e){e.value="",this.searchedSuperior="",this.loadSuperiores(1)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){const e=this.form.get("superior").value;this.selectedSuperior=this.superiores.data.find(t=>t.id==e),this.selectedSuperior?this.showModal(se.Q,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}detailEmpresa(){const e=this.form.get("empresa_id").value;this.selectedEmpresa=this.empresas.data.find(t=>t.id==e),this.selectedEmpresa?this.showModal(P,{empresa:this.selectedEmpresa}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem empresa associada",titulo:"N\xe3o h\xe1",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}listenEndereco(e){this.fechar(this.userWasCreated)}fechar(e=!1){this.modalCadastro.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,A.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};ne.ctorParameters=()=>[{type:o.QS},{type:me.K},{type:Le},{type:te.W},{type:ue.F},{type:ie},{type:p.IN},{type:R.D},{type:it.V}],ne.propDecorators={user:[{type:n.IIB}],isModal:[{type:n.IIB}],updatedEvent:[{type:n.r_U}]},ne=(0,d.gn)([(0,n.wA2)({selector:"app-usuario-sistema-detail",template:'<ion-content appScrollTheme>\n\n  <form *ngIf="lojas && perfis && empresas" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n    <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n      <div class="flex flex-column align-items-center flex-or ">\n        <img [src]="user?.avatar_url || \'assets/imgs/outros/default-user.jpg\'"\n          class="h-10rem w-10rem border-circle border-2 border-primary mr-1 xl:mr-0 ml-3 " />\n        <p-fileUpload #avatarFile id="avatar" mode="basic" name="avatar" accept="image/*"\n          styleClass="p-button-rounded -mt-4 w-3rem  text-center" chooseIcon="pi pi-pencil" chooseLabel=" "\n          customUpload="true" [auto]="true" (uploadHandler)="uploadFile($event, avatarFile)">\n        </p-fileUpload>\n      </div>\n\n      <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n      <div class="surface-card p-4 shadow-2 border-round p-fluid">\n        <div class="grid formgrid p-fluid">\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="nome" class="font-medium text-900">Nome</label>\n            <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="descricao">Email (alternativo)</label>\n            <input type="text" pInputText placeholder="Email alternativo" formControlName="email_alternativo" />\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email_alternativo\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel1">Celular Principal</label>\n            <p-inputMask id="tel1" placeholder="Celular do prestador" formControlName="tel1" mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel1\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel2">Celular Alternativo</label>\n            <p-inputMask id="tel2" placeholder="Celular alternativo do prestador" formControlName="tel2"\n              mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel2\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="field mb-4 col-12">\n            <label for="descricao">Perfil</label>\n            <p-dropdown #dropdown_perfil [options]="perfis.data" placeholder="Selecione o perfil de acesso"\n              formControlName="perfil_id" optionLabel="nome" optionValue="id">\n              <ng-template let-perfil pTemplate="item">\n                <div class="">\n                  <div>{{perfil.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="footer">\n                <div class="col-12 w-auto">\n                  <button *ngIf="perfis.meta.hasNextPage" pButton pRipple type="button" label="Carregar mais"\n                    (click)="lazyLoadPerfis(dropdown_perfil)" class="p-button-outlined p-button-rounded"></button>\n                </div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'perfil_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="col-12 field ">\n            <label for="loja_id" class="text-900 font-medium mb-3">Loja</label>\n            <p-dropdown id="loja_id" [options]="lojas.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="loja_id"\n              optionLabel="nome" filterBy="nome,codigo" optionValue="id">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchLoja(searchLojaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearLoja(searchLojaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="item">\n                <div>\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="selectedItem">\n                <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'loja_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n          <div class="col-12 field ">\n            <label for="empresa_id" class="text-900 font-medium mb-3">Empresa</label>\n            <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailEmpresa()"></div>\n            <p-dropdown id="empresa_id" [options]="empresas.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="empresa_id"\n              optionLabel="razao_social" filterBy="razao_social, cnpj" optionValue="id">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchEmpresaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchempresa(searchEmpresaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchEmpresa(searchEmpresaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearempresa(searchEmpresaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-empresa pTemplate="item">\n                <div>\n                  <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-empresa pTemplate="selectedItem">\n                <div>{{ empresa.razao_social}} - {{ empresa.cnpj | cnpjMask}}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'empresa_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div *ngIf="superiores" class="col-12 field ">\n            <label for="nivel_superior" class="text-900 font-medium mb-3">N\xedvel Superior</label>\n            <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n            <p-dropdown id="nivel_superior" [options]="superiores.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="superior"\n              optionLabel="nome" filterBy="nome, cpf" optionValue="id" [showClear]="true" optionValue="id">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchSuperiorInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchSuperior(searchSuperiorInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchSuperior(searchSuperiorInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearSuperior(searchSuperiorInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-superior pTemplate="item">\n                <div>\n                  <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                </div>\n              </ng-template>\n              <ng-template let-superior pTemplate="selectedItem">\n                <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'superior\')"></p-message>\n            </div>\n          </div>\n\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n        </div>\n        <div class="flex justify-content-end">\n          <button pButton pRipple label="Atualizar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="update()"\n            [disabled]="disableCreateBtn()"></button>\n        </div>\n      </div>\n    </div>\n  </form>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],ne);let We=class{};We=(0,d.gn)([(0,n.LVF)({declarations:[ne],imports:[b.ez,o.u5,o.UX,p.Pc,w.FI,X.QK,j.j,Se.zz,xe.Iu,rt.O,B.A,ye.nD,N.T,je.L$,Ie.WN,G.l,Z.x,K.F,J.$9,q.q,F.U,V.cc,E.Q,Ce._8,W.ON,z.kW,be.q,$.LU,j.j,H.S,T.hJ,D.O,Q.D,_.o,Y.X,M.R],exports:[ne]})],We);let Te=class{constructor(e,t,s,a){this.usuariosSistemaService=e,this.modal=t,this.toastService=s,this.lojaService=a,this.sortUsertatus=I.Mm,this.sortPessoaStatus=I.hx,this.sortLojas=[],this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.searchedNome="",this.selectedPessoaStatus=void 0,this.selectedUsuarioStatus=void 0,this.currentPage=1,this.showStatusDialog=!1,this.editMenuItens=[{label:"Op\xe7\xf5es",items:[{label:"Atualizar",icon:"pi pi-user-edit",command:()=>this.detalharSimplificado(this.selectedUser)},{label:"Status",icon:"pi pi-exclamation-triangle",command:()=>this.detalharStatus(this.selectedUser)},{label:"Autoriza\xe7\xf5es",icon:"pi pi-verified",command:()=>this.detalharAuthorization(this.selectedUser)}]},{separator:!0,items:[{label:"Perfil",icon:"pi pi-id-card",command:()=>this.detalharPerfil(this.selectedUser)}]}],this.updateStatusObj={status_user:void 0,status_pessoa:void 0},this.contentError=new fe.S,this.subscriptions=new U.w0}ngOnInit(){this.loadLoja(),this.loadUsuarioSistema()}ngOnDestroy(){this.subscriptions.unsubscribe()}changeStatusUsuario({value:e}){this.selectedUsuarioStatus=e,this.loadUsuarioSistema(1)}changeStatusPessoa({value:e}){this.selectedPessoaStatus=e,this.loadUsuarioSistema(1)}changeLoja({value:e}){this.selectedLoja=e,this.loadUsuarioSistema(1)}clearFilter(){this.loadUsuarioSistema(1)}clearAllFilters(e,t,s){this.searchedNome=void 0,this.selectedLoja=void 0,this.selectedPessoaStatus=void 0,this.selectedUsuarioStatus=void 0,t.writeValue(null),s.writeValue(null),this.loadUsuarioSistema(1)}loadLoja(){const e=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:ae.eX.OPERANDO}).subscribe(t=>{this.lojas=t});this.subscriptions.add(e)}searchLoja({value:e}){this.searchedLoja=e,this.loadLoja()}clearLoja(e){e.value="",this.searchedLoja="",this.loadLoja()}loadUsuarioSistema(e=1){const t=this.usuariosSistemaService.list({searchedUsuarioSistema:this.searchedNome,loja_id:this.selectedLoja,status_pessoa:this.selectedPessoaStatus,status_user:this.selectedUsuarioStatus},{order:h.L.DESC,page:e,take:5}).subscribe({next:s=>{this.contentError=new fe.S,this.users=s,this.isLoaded=!0},error:s=>{this.contentError={code:s.status,hasError:!0}}});this.subscriptions.add(t)}updateStatus(){const{id:e}=this.selectedUser,{status_pessoa:t,status_user:s}=this.updateStatusObj,a=this.usuariosSistemaService.update({status_pessoa:t,status_user:s},e).subscribe({next:i=>{this.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:l.m4.mediumDuration,gravidade:l.kl.SUCESSO}),this.showStatusDialog=!1,this.loadUsuarioSistema(1)},error:i=>{this.showStatusDialog=!1}});this.subscriptions.add(a)}detalharSimplificado(e){this.showModal(ne,{user:e})}detalharPerfil(e){this.showModal(st.E,{user:e})}detalharAuthorization(e){this.showModal(tt.T,{user:e})}detalharStatus(e){const{status_pessoa:t,status_user:s}=e;this.updateStatusObj={status_pessoa:t,status_user:s},this.showStatusDialog=!0}detalharEndereco(e){e.endereco?this.showModal(et.F,{currentEndereco:e,isFuncionario:!0}):this.showModal(qe.A,{idOf:e.id,isFuncionario:!0,isModal:!0})}setUserImage(e){return e.avatar_url||"assets/imgs/outros/default-user.jpg"}createNewUser(){this.showModal(we)}search(){this.loadUsuarioSistema(1)}paginar(e){const{first:t,rows:s}=e,a=Number(Number(t)/Number(s)+1);a!=this.currentPage&&(this.currentPage=a,this.loadUsuarioSistema(a))}detailSuperior(e){e?this.showModal(se.Q,{user_id:e.id}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem superior alocado",titulo:"N\xe3o h\xe1",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}detailLoja(e){e?this.showModal(at.t,{loja:e}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem loja alocada",titulo:"N\xe3o h\xe1",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}detailEmpresa(e){e?this.showModal(P,{empresa:e}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem empresa associada",titulo:"N\xe3o h\xe1",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}showModal(e,t){var s=this;return(0,A.Z)(function*(){const a=yield s.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{const{data:c}=i;s.isLoaded=!1,s.loadUsuarioSistema(),!0===c&&s.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:l.m4.mediumDuration,gravidade:l.kl.SUCESSO})}),yield a.present()})()}};Te.ctorParameters=()=>[{type:Le},{type:p.IN},{type:R.D},{type:te.W}],Te=(0,d.gn)([(0,n.wA2)({selector:"app-usuario-sistema-main",template:'<div class="card main-view h-full">\n\n  <ng-container *ngIf="isLoaded">\n    <p-dataView emptyMessage="Nada encontrado, experimente trocar os filtros" class="data-container" #dv [lazy]="true"\n      [value]="users.data" [paginator]="true" [rows]="users.meta.take" [totalRecords]="users.meta.itemCount"\n      [pageLinks]="users.meta.pageCount" (onLazyLoad)="paginar($event)" filterBy="nome" layout="list">\n      <ng-template pTemplate="header">\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field  col-12 sm:col-6 xl:col-3">\n            <p-dropdown *ngIf="lojas" #dropdown_lojas id="loja_id" [options]="lojas.data" [filter]="true"\n              placeholder="Selecione" [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" optionValue="id"\n              optionLabel="nome" filterBy="nome,codigo"\n              (onClear)="clearFilter($event)" (onChange)="changeLoja($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchLoja(searchLojaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearLoja(searchLojaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="item">\n                <div>\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="selectedItem">\n                <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n              </ng-template>\n            </p-dropdown>\n          </div>\n\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_filtro [options]="sortUsertatus" placeholder="Status Usu\xe1rio"\n              (onChange)="changeStatusUsuario($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_filtro [options]="sortPessoaStatus" placeholder="Status Pessoa"\n              (onChange)="changeStatusPessoa($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n        </div>\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field col-12 sm:col-6 xl:col-3">\n            <button pButton pRipple class="sm:w-auto w-full p-button-outlined" icon="pi pi-times" label="Limpar filtros"\n              (click)="clearAllFilters($event, dropdown_lojas, dropdown_filtro)">\n            </button>\n          </div>\n          <div class="field col-12 sm:col-6 xl:col-3 text-right">\n            <button pButton pRipple class="sm:w-auto w-full " icon="pi pi-user-plus" label="Novo cadastro"\n              (click)="createNewUser()">\n            </button>\n          </div>\n        </div>\n\n        <div class="flex flex-column md:flex-row md:justify-content-center">\n          <span class="p-inputgroup mb-2 md:mb-0 mt-2 max-w-30rem\t">\n            <input class="w-full" type="search" pInputText [(ngModel)]="searchedNome"\n              [ngModelOptions]="{standalone: true}" placeholder="Email ou Nome" (keyup.enter)="search()">\n            <button type="button" pButton pRipple class="pi pi-search cursor-pointer p-button-outlined"\n              (click)="search()"></button>\n            <button type="button" pButton pRipple class="pi pi-times cursor-pointer p-button-outlined p-button-danger"\n              (click)="searchedNome = \'\'; search();"></button>\n          </span>\n        </div>\n\n      </ng-template>\n\n      <ng-template let-user pTemplate="listItem">\n        <div *ngIf="isLoaded" #templateGrid class="col-12">\n          <div class="data-list-item">\n            <div class="crop mb-2 md:mb-0 ">\n              <img class="border-circle border-2 border-primary" [src]="setUserImage(user)" [alt]="user.name" />\n            </div>\n            <div class="data-list-detail">\n              <div class="data-name">{{ user.nome }}</div>\n              <div class="data-description mt-1">Situa\xe7\xe3o: {{ user.status_pessoa }}</div>\n              <div class="data-description mt-1">Acesso: {{ user.status_user }}</div>\n\n              <div class="data-description mt-2">E-mail: {{ user.email }}</div>\n              <div *ngIf="user.email_alternativo" class="data-description mt-1">E-mail (alternativo): {{\n                user.email_alternativo }}</div>\n              <div class="data-description mt-1">Celular: {{ user.tel1 | phoneMask }}</div>\n              <div *ngIf="user.tel2" class="data-description mt-1">Celular (alternativo): {{ user.tel2 | phoneMask }}</div>\n\n              <div class="data-description mt-2 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailLoja(user.loja)">\n                  Loja:\n                  {{ user.loja?.nome || \'N\xe3o h\xe1\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n              <div class="data-description mt-1 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailSuperior(user.nivel_superior)">\n                  Superior: {{ user.nivel_superior?.nome || \'N\xe3o h\xe1\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n              <div class="data-description mt-1 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailEmpresa(user.empresa)">\n                  Empresa: {{ user.empresa?.razao_social || \'N\xe3o h\xe1\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n\n              <div class="mt-3">\n                <i class="pi pi-sitemap data-category-icon "></i>\n                <span class="data-category">Acesso: {{user.perfil?.nome || "Sem\n                  Perfil"}}</span>\n              </div>\n            </div>\n            <div class="data-list-action">\n              <button type="button" pButton icon="pi pi-cog" label="Op\xe7\xf5es"\n                (click)="selectedUser = user; editMenu.toggle($event)"></button>\n              <p-menu #editMenu appendTo="body" [popup]="true" [model]="editMenuItens"></p-menu>\n\n              <button pButton type="button" class="p-button-outlined" icon="pi pi-map" label="Endere\xe7o"\n                (click)="detalharEndereco(user)">\n              </button>\n            </div>\n          </div>\n        </div>\n      </ng-template>\n    </p-dataView>\n  </ng-container>\n\n  <ng-container *ngIf="contentError.hasError">\n    <app-content-error [erroCode]="contentError.code"></app-content-error>\n  </ng-container>\n\n\n  <p-dialog *ngIf="showStatusDialog" [(visible)]="showStatusDialog" [resizable]="false" [draggable]="false"\n    [modal]="true" [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\', height: \'80%\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <div class="text-900 font-medium mb-3 text-xl">Alterando status</div>\n      </div>\n    </ng-template>\n    <div class="surface-card border-round shadow-2 p-4">\n      <p class="mt-0 mb-4 p-0 line-height-3">Acesso ao sistema: </p>\n      <p-dropdown [options]="sortUsertatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n        [(ngModel)]="updateStatusObj.status_user" [ngModelOptions]="{standalone: true}"\n        styleClass="mb-2 md:mb-0 w-full">\n      </p-dropdown>\n    </div>\n\n    <div class="surface-card border-round shadow-2 p-4 mt-2">\n      <p class="mt-0 mb-4 p-0 line-height-3">Situa\xe7\xe3o na corpora\xe7\xe3o: </p>\n      <p-dropdown [options]="sortPessoaStatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n        [(ngModel)]="updateStatusObj.status_pessoa" [ngModelOptions]="{standalone: true}"\n        styleClass="mb-2 md:mb-0 w-full">\n      </p-dropdown>\n    </div>\n    <div class="flex justify-content-end mt-3 grid">\n      <div class="surface-border border-top-1 opacity-50 mb-1 col-12"></div>\n      <button class="" pButton pRipple label="Atualizar" (click)="updateStatus()"></button>\n    </div>\n  </p-dialog>\n</div>',styles:[""]})],Te);let Ve=class{};Ve=(0,d.gn)([(0,n.LVF)({declarations:[Te],imports:[b.ez,o.u5,o.UX,p.Pc,w.FI,X.QK,j.j,B.A,N.T,G.l,Z.x,K.F,J.$9,q.q,F.U,V.cc,E.Q,W.ON,z.kW,$.LU,j.j,H.S,T.hJ,D.O,Q.D,pe.f,_.o,Ke.a,Y.X,M.R,Ye.U,Je.S],exports:[Te]})],Ve);let He=class{};He=(0,d.gn)([(0,n.LVF)({declarations:[],imports:[b.ez,Fe,We,Ve],exports:[Fe,We,Ve]})],He);var ct=r(36640);let ke=class{constructor(e){this.http=e}findById(e){return this.http.get(`${S.Hz.baseURL}/colaboradores/${e}`,{responseType:"json"})}list(e,t=new Ue.k){let s=Re.t.getPageOptionsParams(t);return e&&e.searchedColaborador&&(s=s.append("searchedColaborador",e.searchedColaborador)),e&&e.status_pessoa&&(s=s.append("status_pessoa",e.status_pessoa)),e&&e.status_user&&(s=s.append("status_user",e.status_user)),e&&e.nome&&(s=s.append("nome",e.nome)),e&&e.cpf&&(s=s.append("cpf",e.cpf)),e&&e.email&&(s=s.append("email",e.email)),e&&e.loja_id&&(s=s.append("loja_id",e.loja_id)),this.http.get(`${S.Hz.baseURL}/colaboradores`,{responseType:"json",params:s})}create(e){const{tel1:t,tel2:s,email_alternativo:a,cpf:i}=e;return e=ee.f.sanitizeCreate({tel1:t,tel2:s,email_alternativo:a,cpf:i},e),this.http.post(`${S.Hz.baseURL}/colaboradores`,e,{responseType:"json"})}update(e,t){const{tel1:s,tel2:a,email_alternativo:i}=e;return e=ee.f.sanitizeCreate({tel1:s,tel2:a,email_alternativo:i,cpf:void 0},e),this.http.put(`${S.Hz.baseURL}/colaboradores/${t}`,e,{responseType:"json"})}createEndereco(e,t){return this.http.post(`${S.Hz.baseURL}/colaboradores/${t}/endereco`,e,{responseType:"json"})}updateEndereco(e,t){return this.http.post(`${S.Hz.baseURL}/colaboradores/${t}/endereco`,e,{responseType:"json"})}updatePassword(e){return this.http.patch(`${S.Hz.baseURL}/users/password`,{senha:e},{responseType:"json"})}uploadAvatar(e,t){const s=new FormData;s.append("file",e);const a=t?`${S.Hz.baseURL}/colaboradores/${t}/avatar`:`${S.Hz.baseURL}/colaboradores/avatar`;return this.http.patch(a,s)}};ke.ctorParameters=()=>[{type:Ae.eN}],ke=(0,d.gn)([(0,n.GSi)({providedIn:"root"})],ke);let Ee=class{constructor(e,t,s,a,i,c,u,m){this.formBuilder=e,this.userService=t,this.colaboradoresService=s,this.lojaService=a,this.perfilService=i,this.cargoService=c,this.modalCadastro=u,this.toastService=m,this.currentPerfilTake=15,this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.currentCargosPage=1,this.searchedCargo="",this.searchedSuperior="",this.showSuperiorDialog=!1,this.stepIndex=0,this.createdUserId="",this.userWasCreated=!1,this.isCliente=!1,this.maxDate=he.E.getDiaAnterior(),this.subscriptions=new U.w0,this.form=this.formBuilder.group({nome:[,[o.kI.required]],cpf:[,[o.kI.required]],email:[,[o.kI.required,o.kI.email]],email_alternativo:[,[o.kI.email]],tel1:[,[o.kI.required]],tel2:[,[]],data_nascimento:[,[o.kI.required]],perfil_id:[,[o.kI.required]],loja_id:[,[o.kI.required]],cargo_id:[,[]],superior:[,[]],user_ativo:[!0,[]]})}ngOnInit(){this.steps=[{label:"Informa\xe7\xf5es"},{label:"Endere\xe7o"}],this.loadLojas(),this.loadPerfis(),this.loadCargos(),this.loadSuperiores()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPerfis(e=1){const t=this.perfilService.list({order:h.L.ASC,page:e,take:15},{with_cliente:!1}).subscribe(s=>{this.perfis=s});this.subscriptions.add(t)}lazyLoadPerfis(e){this.currentPerfilTake+=5;const t=this.perfilService.list({order:h.L.ASC,page:1,take:this.currentPerfilTake},{with_cliente:!1}).subscribe(s=>{this.perfis=s,e.show()});this.subscriptions.add(t)}loadLojas(e=1,t){const s=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:ae.eX.OPERANDO},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.lojas=a,t&&t.show()});this.subscriptions.add(s)}searchLoja({value:e}){this.searchedLoja=e,this.loadLojas(1)}clearLoja(e){e.value="",this.searchedLoja="",this.loadLojas(1)}paginarLojas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentLojasPage&&(this.currentLojasPage=i,this.loadLojas(i,t))}loadCargos(e=1,t){const s=this.cargoService.list({searchedCargo:this.searchedCargo},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.cargos=a,t&&t.show()});this.subscriptions.add(s)}searchCargo({value:e}){this.searchedCargo=e,this.loadCargos(1)}clearCargo(e){e.value="",this.searchedCargo="",this.loadCargos(1)}paginarCargos(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentCargosPage&&(this.currentCargosPage=i,this.loadCargos(i,t))}create(){const e=this.form.get("nome").value,t=this.form.get("email").value,s=this.form.get("cpf").value,a=this.form.get("data_nascimento").value,i=this.form.get("email_alternativo").value,c=this.form.get("tel1").value,u=this.form.get("tel2").value,m=this.form.get("user_ativo").value,{id:f}=this.form.get("perfil_id").value,{id:C}=this.form.get("loja_id").value,L=this.form.get("cargo_id").value?this.form.get("cargo_id").value?.id:void 0,k=this.form.get("superior").value?this.form.get("superior").value?.id:void 0,dt=this.colaboradoresService.create({nome:e,email:t,cpf:s,perfil_id:f,loja_id:C,cargo_id:L,nivel_superior_id:k,data_nascimento:a,email_alternativo:i,tel1:c,tel2:u,user_ativo:m}).subscribe(pt=>{this.createdUserId=pt.id,this.userWasCreated=!0,this.stepIndex++});this.subscriptions.add(dt)}loadSuperiores(e=1,t){const s=this.userService.listUsers({searchedUser:this.searchedSuperior,tipos_usarios:`${I.Wo.COLABORADOR}, ${I.Wo.PRESTADOR}`},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.superiores=a,t&&t.show()});this.subscriptions.add(s)}searchSuperior({value:e}){this.searchedSuperior=e,this.loadSuperiores(1)}clearSuperior(e){e.value="",this.searchedSuperior="",this.loadSuperiores(1)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){this.selectedSuperior=this.form.get("superior").value,this.selectedSuperior?this.showModal(se.Q,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}listenEndereco(e){this.fechar(this.userWasCreated)}fechar(e=!1){this.modalCadastro.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,A.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};Ee.ctorParameters=()=>[{type:o.QS},{type:me.K},{type:ke},{type:te.W},{type:ue.F},{type:ct.u},{type:p.IN},{type:R.D}],Ee=(0,d.gn)([(0,n.wA2)({selector:"app-colaborador-cadastro",template:'<ion-content appScrollTheme>\n  <ng-container *ngIf="stepIndex == 0">\n    <form *ngIf="lojas && perfis && cargos" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n      <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n        <div class="card mb-2">\n          <p-steps [activeIndex]="stepIndex" [model]="steps" [readonly]="true"></p-steps>\n        </div>\n        <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n        <div class="surface-card p-4 shadow-2 border-round p-fluid">\n          <div class="grid formgrid p-fluid">\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="nome" class="font-medium text-900">Nome</label>\n              <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">CPF</label>\n              <p-inputMask placeholder="CPF do funcion\xe1rio" formControlName="cpf" mask="999.999.999-99">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'cpf\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">Email (principal)</label>\n              <input type="text" pInputText placeholder="Email principal" formControlName="email" />\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="descricao">Email (alternativo)</label>\n              <input type="text" pInputText placeholder="Email alternativo" formControlName="email_alternativo" />\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email_alternativo\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="tel2">Celular Principal</label>\n              <p-inputMask id="tel1" placeholder="Celular do colaborador" formControlName="tel1" mask="(99)9 9999-9999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel1\')"></p-message>\n              </div>\n            </div>\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="tel2">Celular Alternativo</label>\n              <p-inputMask id="tel2" placeholder="Celular alternativo do colaborador" formControlName="tel2"\n                mask="(99)9 9999-9999">\n              </p-inputMask>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel2\')"></p-message>\n              </div>\n            </div>\n\n            <div class="field mb-4 col-12 md:col-6">\n              <label for="data_nascimento">Data de nascimento</label>\n              <p-calendar formControlName="data_nascimento" placeholder="Data de nascimento do colaborador"\n                [maxDate]="maxDate" inputId="data_nascimento"></p-calendar>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'data_nascimento\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-4 col-12">\n              <label for="descricao">Perfil</label>\n              <p-dropdown #dropdown_perfil [options]="perfis.data" placeholder="Selecione o perfil de acesso"\n                formControlName="perfil_id" optionLabel="nome">\n                <ng-template let-perfil pTemplate="item">\n                  <div class="">\n                    <div>{{perfil.nome}}</div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="footer">\n                  <div class="col-12 w-auto">\n                    <button *ngIf="perfis.meta.hasNextPage" pButton pRipple type="button" label="Carregar mais"\n                      (click)="lazyLoadPerfis(dropdown_perfil)" class="p-button-outlined p-button-rounded"></button>\n                  </div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'perfil_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="col-12 field ">\n              <label for="loja_id" class="text-900 font-medium mb-3">Loja</label>\n              <p-dropdown id="loja_id" [options]="lojas.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="loja_id"\n                optionLabel="nome" filterBy="nome,codigo">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchLoja(searchLojaInput)">\n                      <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearLoja(searchLojaInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-loja pTemplate="item">\n                  <div>\n                    <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-loja pTemplate="selectedItem">\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'loja_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n            <div class="col-12 field ">\n              <label for="cargo_id" class="text-900 font-medium mb-3">Cargo</label>\n              <p-dropdown id="cargo_id" [options]="cargos.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="cargo_id"\n                optionLabel="nome" filterBy="nome"\n                [showClear]="true">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchCargoInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchCargo(searchCargoInput)">\n                      <button pButton pRipple icon="pi pi-search" (click)="searchCargo(searchCargoInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearCargo(searchCargoInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-cargo pTemplate="item">\n                  <div>\n                    <div>{{ cargo.nome}}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-cargo pTemplate="selectedItem">\n                  <div>{{ cargo.nome}}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'cargo_id\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div *ngIf="superiores" class="col-12 field ">\n              <label for="nivel_superior" class="text-900 font-medium mb-3">N\xedvel Superior</label>\n              <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n              <p-dropdown id="nivel_superior" [options]="superiores.data" [filter]="true" placeholder="Selecione"\n                [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="superior"\n                 optionLabel="nome" filterBy="nome, cpf"\n                [showClear]="true">\n                <ng-template pTemplate="filter" let-options="options">\n                  <div class="flex p-3">\n                    <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                      <input #searchSuperiorInput type="text" pInputText placeholder="Procurar"\n                        (keyup.enter)="searchSuperior(searchSuperiorInput)">\n                      <button pButton pRipple icon="pi pi-search"\n                        (click)="searchSuperior(searchSuperiorInput)"></button>\n                      <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                        (click)="clearSuperior(searchSuperiorInput)"></button>\n                    </div>\n                  </div>\n                </ng-template>\n                <ng-template pTemplate="loader" let-options="options">\n                  <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                    <p-skeleton width="50%" height="1rem"></p-skeleton>\n                  </div>\n                </ng-template>\n                <ng-template let-superior pTemplate="item">\n                  <div>\n                    <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                  </div>\n                </ng-template>\n                <ng-template let-superior pTemplate="selectedItem">\n                  <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                </ng-template>\n              </p-dropdown>\n              <div class="flex mt-1 justify-content-end">\n                <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'superior\')"></p-message>\n              </div>\n            </div>\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n            <div class="field mb-2 col-12 ">\n              <div class="mb-3" for="user_ativo">Permitir acesso ao sistema?</div>\n              <p-inputSwitch class="ml-2" id="user_ativo" formControlName="user_ativo"></p-inputSwitch>\n            </div>\n\n            <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n          </div>\n          <div class="flex justify-content-end">\n            <button pButton pRipple label="Pr\xf3ximo" icon="pi pi-send" iconPos="right" class="w-auto" (click)="create()"\n              [disabled]="disableCreateBtn()"></button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n\n  <ng-container *ngIf="stepIndex == 1">\n    <app-endereco [idOf]="createdUserId" [isFuncionario]="true" (createdEvent)="listenEndereco($event)"></app-endereco>\n  </ng-container>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],Ee);let le=class{constructor(e,t,s,a,i,c,u,m,f){this.formBuilder=e,this.userService=t,this.colaboradoresService=s,this.lojaService=a,this.perfilService=i,this.cargoService=c,this.modalCadastro=u,this.toastService=m,this.storage=f,this.isModal=!0,this.updatedEvent=new n.vpe,this.currentPerfilTake=15,this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.currentCargosPage=1,this.searchedCargo="",this.searchedSuperior="",this.showSuperiorDialog=!1,this.createdUserId="",this.userWasCreated=!1,this.isCliente=!1,this.maxDate=he.E.getDiaAnterior(),this.subscriptions=new U.w0}ngOnInit(){const{nome:e,loja:t,perfil:s,cargo:a,nivel_superior:i,tel1:c,tel2:u,email_alternativo:m,data_nascimento:f}=this.user,C=t?.id||void 0,L=a?.id||void 0,k=i?.id||void 0;this.form=this.formBuilder.group({nome:[e,[o.kI.required]],email_alternativo:[m,[o.kI.email]],tel1:[c,[o.kI.required]],tel2:[u,[]],data_nascimento:[new Date(f),[o.kI.required]],perfil_id:[s.id,[o.kI.required]],loja_id:[C,[o.kI.required]],cargo_id:[L,[]],superior:[k,[]]}),this.loadLojas(),this.loadPerfis(),this.loadCargos(),this.loadSuperiores()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadPerfis(e=1){const t=this.perfilService.list({order:h.L.ASC,page:e,take:15},{with_cliente:!1}).subscribe(s=>{this.perfis=s});this.subscriptions.add(t)}lazyLoadPerfis(e){this.currentPerfilTake+=5;const t=this.perfilService.list({order:h.L.ASC,page:1,take:this.currentPerfilTake},{with_cliente:!1}).subscribe(s=>{this.perfis=s,e.show()});this.subscriptions.add(t)}loadLojas(e=1,t){const s=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:ae.eX.OPERANDO},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.lojas=a,t&&t.show()});this.subscriptions.add(s)}searchLoja({value:e}){this.searchedLoja=e,this.loadLojas(1)}clearLoja(e){e.value="",this.searchedLoja="",this.loadLojas(1)}paginarLojas(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentLojasPage&&(this.currentLojasPage=i,this.loadLojas(i,t))}loadCargos(e=1,t){const s=this.cargoService.list({searchedCargo:this.searchedCargo},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.cargos=a,t&&t.show()});this.subscriptions.add(s)}searchCargo({value:e}){this.searchedCargo=e,this.loadCargos(1)}clearCargo(e){e.value="",this.searchedCargo="",this.loadCargos(1)}paginarCargos(e,t){const{first:s,rows:a}=e,i=Number(Number(s)/Number(a)+1);i!=this.currentCargosPage&&(this.currentCargosPage=i,this.loadCargos(i,t))}update(){const{id:e}=this.user,t=this.form.get("nome").value,s=this.form.get("data_nascimento").value,a=this.form.get("email_alternativo").value,i=this.form.get("tel1").value,c=this.form.get("tel2").value,u=this.form.get("perfil_id").value,m=this.form.get("loja_id").value,f=this.form.get("cargo_id").value||void 0,C=this.form.get("superior").value?this.form.get("superior").value:void 0,L=this.colaboradoresService.update({nome:t,perfil_id:u,loja_id:m,cargo_id:f,nivel_superior_id:C,data_nascimento:s,email_alternativo:a,tel1:i,tel2:c},e).subscribe(k=>{this.createdUserId=k.id,this.userWasCreated=!0,this.fechar(this.userWasCreated)});this.subscriptions.add(L)}uploadFile(e,t){const{id:s,tipo_user:a}=this.user,{id:i,perfil_nome:c}=this.storage.getLocalUser();if(s!=i&&!ee.f.checkUpdateImagePermission(c))return void this.toastService.presentToast({titulo:"N\xe3o autorizado",detalhe:`Apenas ${ge.u.ADMIN} e ${ge.u.GERENTE} podem atualizar essas informa\xe7\xf5es`,duracao:l.m4.mediumDuration,gravidade:l.kl.ATENCAO});const u=e.files[0],m=this.userService.newUploadAvatar(a,u,s).subscribe(f=>{this.user=f,this.createdUserId=f.id,this.userWasCreated=!0,this.toastService.presentToast({detalhe:"Foto alterada",duracao:l.m4.shortDuration,gravidade:l.kl.SUCESSO,titulo:"Sucesso!"}),this.updatedEvent.emit(this.user),t.clear()});this.subscriptions.add(m)}loadSuperiores(e=1,t){const s=this.userService.listUsers({searchedUser:this.searchedSuperior,tipos_usarios:`${I.Wo.COLABORADOR}, ${I.Wo.PRESTADOR}`},{order:h.L.ASC,page:e,take:10}).subscribe(a=>{this.superiores=a,t&&t.show()});this.subscriptions.add(s)}searchSuperior({value:e}){this.searchedSuperior=e,this.loadSuperiores(1)}clearSuperior(e){e.value="",this.searchedSuperior="",this.loadSuperiores(1)}paginarSuperior(e){this.loadSuperiores()}onSuperiorFilter(e){const t=e.filter;this.searchedSuperior=t}blurSuperior(e,t){this.searchedSuperior=void 0,t.filterValue=void 0}detailSuperior(){const e=this.form.get("superior").value;this.selectedSuperior=this.superiores.data.find(t=>t.id==e),this.selectedSuperior?this.showModal(se.Q,{user:this.selectedSuperior}):this.toastService.presentToast({detalhe:"Selecione uma op\xe7\xe3o primeiro",titulo:"Sele\xe7\xe3o necess\xe1ria",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}listenEndereco(e){this.fechar(this.userWasCreated)}fechar(e=!1){this.modalCadastro.dismiss(e)}isInputError(e){return!(this.form.controls[e].untouched||!this.form.controls[e].errors)}disableCreateBtn(){return!this.form.valid}showModal(e,t){var s=this;return(0,A.Z)(function*(){const a=yield s.modalCadastro.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{}),yield a.present()})()}};le.ctorParameters=()=>[{type:o.QS},{type:me.K},{type:ke},{type:te.W},{type:ue.F},{type:ct.u},{type:p.IN},{type:R.D},{type:it.V}],le.propDecorators={user:[{type:n.IIB}],isModal:[{type:n.IIB}],updatedEvent:[{type:n.r_U}]},le=(0,d.gn)([(0,n.wA2)({selector:"app-colaborador-detail",template:'<ion-content appScrollTheme>\n\n  <form *ngIf="lojas && perfis && cargos" [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n    <div class="surface-ground px-4 py-8 md:px-6 lg:px-8">\n      <div class="flex flex-column align-items-center flex-or ">\n        <img [src]="user?.avatar_url || \'assets/imgs/outros/default-user.jpg\'"\n          class="h-10rem w-10rem border-circle border-2 border-primary  " />\n        <p-fileUpload #avatarFile id="avatar" mode="basic" name="avatar" accept="image/*"\n          styleClass="p-button-rounded -mt-4 w-3rem  text-center" chooseIcon="pi pi-pencil" chooseLabel=" "\n          customUpload="true" [auto]="true" (uploadHandler)="uploadFile($event, avatarFile)">\n        </p-fileUpload>\n      </div>\n\n      <div class="text-900 font-medium text-xl mb-1">Criar/Cadastrar</div>\n      <div class="surface-card p-4 shadow-2 border-round p-fluid">\n        <div class="grid formgrid p-fluid">\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="nome" class="font-medium text-900">Nome</label>\n            <input id="nome" placeholder="Nome" type="text" pInputText formControlName="nome">\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'nome\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="descricao">Email (alternativo)</label>\n            <input type="text" pInputText placeholder="Email alternativo" formControlName="email_alternativo" />\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'email_alternativo\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel2">Celular Principal</label>\n            <p-inputMask id="tel1" placeholder="Celular do colaborador" formControlName="tel1" mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel1\')"></p-message>\n            </div>\n          </div>\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="tel2">Celular Alternativo</label>\n            <p-inputMask id="tel2" placeholder="Celular alternativo do colaborador" formControlName="tel2"\n              mask="(99)9 9999-9999">\n            </p-inputMask>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'tel2\')"></p-message>\n            </div>\n          </div>\n\n          <div class="field mb-4 col-12 md:col-6">\n            <label for="data_nascimento">Data de nascimento</label>\n            <p-calendar formControlName="data_nascimento" placeholder="Data de nascimento do colaborador"\n              [maxDate]="maxDate" inputId="data_nascimento" [maxDate]="maxDate"></p-calendar>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'data_nascimento\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="field mb-4 col-12">\n            <label for="descricao">Perfil</label>\n            <p-dropdown #dropdown_perfil [options]="perfis.data" placeholder="Selecione o perfil de acesso"\n              formControlName="perfil_id" optionLabel="nome" optionValue="id">\n              <ng-template let-perfil pTemplate="item">\n                <div class="">\n                  <div>{{perfil.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="footer">\n                <div class="col-12 w-auto">\n                  <button *ngIf="perfis.meta.hasNextPage" pButton pRipple type="button" label="Carregar mais"\n                    (click)="lazyLoadPerfis(dropdown_perfil)" class="p-button-outlined p-button-rounded"></button>\n                </div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'perfil_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div class="col-12 field ">\n            <label for="loja_id" class="text-900 font-medium mb-3">Loja</label>\n            <p-dropdown id="loja_id" [options]="lojas.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="loja_id"\n              optionLabel="nome" filterBy="nome,codigo"\n              optionValue="id">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchLoja(searchLojaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearLoja(searchLojaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="item">\n                <div>\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="selectedItem">\n                <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'loja_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n\n          <div class="col-12 field ">\n            <label for="cargo_id" class="text-900 font-medium mb-3">Cargo</label>\n            <p-dropdown id="cargo_id" [options]="cargos.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="cargo_id"\n              optionLabel="nome" filterBy="nome"\n              optionValue="id" [showClear]="true">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchCargoInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchCargo(searchCargoInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchCargo(searchCargoInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearCargo(searchCargoInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-cargo pTemplate="item">\n                <div>\n                  <div>{{ cargo.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-cargo pTemplate="selectedItem">\n                <div>{{ cargo.nome}}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'cargo_id\')"></p-message>\n            </div>\n          </div>\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n\n          <div *ngIf="superiores" class="col-12 field ">\n            <label for="nivel_superior" class="text-900 font-medium mb-3">N\xedvel Superior</label>\n            <div class="ml-3 cursor-pointer pi pi-question-circle" (click)="detailSuperior()"></div>\n            <p-dropdown id="nivel_superior" [options]="superiores.data" [filter]="true" placeholder="Selecione"\n              [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" formControlName="superior"\n              optionLabel="nome" filterBy="nome, cpf"\n              optionValue="id" [showClear]="true">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchSuperiorInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchSuperior(searchSuperiorInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchSuperior(searchSuperiorInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearSuperior(searchSuperiorInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-superior pTemplate="item">\n                <div>\n                  <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n                </div>\n              </ng-template>\n              <ng-template let-superior pTemplate="selectedItem">\n                <div>{{ superior.nome}} - {{ superior.cpf | cpfMask }}</div>\n              </ng-template>\n            </p-dropdown>\n            <div class="flex mt-1 justify-content-end">\n              <p-message severity="error" text="Obrigat\xf3rio" *ngIf="isInputError(\'superior\')"></p-message>\n            </div>\n          </div>\n\n          <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>\n        </div>\n        <div class="flex justify-content-end">\n          <button pButton pRipple label="Atualizar" icon="pi pi-send" iconPos="right" class="w-auto" (click)="update()"\n            [disabled]="disableCreateBtn()"></button>\n        </div>\n      </div>\n    </div>\n  </form>\n\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button expand="full" color="danger" (click)="fechar()">Fechar</ion-button>\n  </ion-toolbar>\n</ion-footer>',styles:[""]})],le);let Ne=class{constructor(e,t,s,a){this.colaboradoresService=e,this.modal=t,this.toastService=s,this.lojaService=a,this.sortUsertatus=I.Mm,this.sortPessoaStatus=I.hx,this.sortLojas=[],this.currentLojasPage=1,this.searchedLoja="",this.isLoaded=!1,this.searchedNome="",this.selectedPessoaStatus=void 0,this.selectedUsuarioStatus=void 0,this.currentPage=1,this.showStatusDialog=!1,this.editMenuItens=[{label:"Op\xe7\xf5es",items:[{label:"Atualizar",icon:"pi pi-user-edit",command:()=>this.detalharSimplificado(this.selectedUser)},{label:"Status",icon:"pi pi-exclamation-triangle",command:()=>this.detalharStatus(this.selectedUser)},{label:"Autoriza\xe7\xf5es",icon:"pi pi-verified",command:()=>this.detalharAuthorization(this.selectedUser)}]},{separator:!0,items:[{label:"Perfil",icon:"pi pi-id-card",command:()=>this.detalharPerfil(this.selectedUser)}]}],this.updateStatusObj={status_user:void 0,status_pessoa:void 0},this.contentError=new fe.S,this.subscriptions=new U.w0}ngOnInit(){this.loadLoja(),this.loadColaboradores()}ngOnDestroy(){this.subscriptions.unsubscribe()}changeStatusUsuario({value:e}){this.selectedUsuarioStatus=e,this.loadColaboradores(1)}changeStatusPessoa({value:e}){this.selectedPessoaStatus=e,this.loadColaboradores(1)}changeLoja({value:e}){this.selectedLoja=e,this.loadColaboradores(1)}clearFilter(){this.loadColaboradores(1)}clearAllFilters(e,t,s){this.searchedNome=void 0,this.selectedLoja=void 0,this.selectedPessoaStatus=void 0,this.selectedUsuarioStatus=void 0,t.writeValue(null),s.writeValue(null),this.loadColaboradores(1)}loadLoja(){const e=this.lojaService.list({searchedLoja:this.searchedLoja,status_loja:ae.eX.OPERANDO}).subscribe(t=>{this.lojas=t});this.subscriptions.add(e)}searchLoja({value:e}){this.searchedLoja=e,this.loadLoja()}clearLoja(e){e.value="",this.searchedLoja="",this.loadLoja()}loadColaboradores(e=1){const t=this.colaboradoresService.list({searchedColaborador:this.searchedNome,loja_id:this.selectedLoja,status_pessoa:this.selectedPessoaStatus,status_user:this.selectedUsuarioStatus},{order:h.L.DESC,page:e,take:5}).subscribe({next:s=>{this.contentError=new fe.S,this.users=s,this.isLoaded=!0},error:s=>{this.contentError={code:s.status,hasError:!0}}});this.subscriptions.add(t)}updateStatus(){const{id:e}=this.selectedUser,{status_pessoa:t,status_user:s}=this.updateStatusObj,a=this.colaboradoresService.update({status_pessoa:t,status_user:s},e).subscribe({next:i=>{this.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:l.m4.mediumDuration,gravidade:l.kl.SUCESSO}),this.showStatusDialog=!1,this.loadColaboradores(1)},error:i=>{this.showStatusDialog=!1}});this.subscriptions.add(a)}detalharSimplificado(e){this.showModal(le,{user:e})}detalharPerfil(e){this.showModal(st.E,{user:e})}detalharAuthorization(e){this.showModal(tt.T,{user:e})}detalharStatus(e){const{status_pessoa:t,status_user:s}=e;this.updateStatusObj={status_pessoa:t,status_user:s},this.showStatusDialog=!0}detalharEndereco(e){e.endereco?this.showModal(et.F,{currentEndereco:e,isFuncionario:!0}):this.showModal(qe.A,{idOf:e.id,isFuncionario:!0,isModal:!0})}setUserImage(e){return e.avatar_url||"assets/imgs/outros/default-user.jpg"}createNewUser(){this.showModal(Ee)}search(){this.loadColaboradores(1)}paginar(e){const{first:t,rows:s}=e,a=Number(Number(t)/Number(s)+1);a!=this.currentPage&&(this.currentPage=a,this.loadColaboradores(a))}detailSuperior(e){e?this.showModal(se.Q,{user_id:e.id}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem superior alocado",titulo:"N\xe3o h\xe1",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}detailLoja(e){e?this.showModal(at.t,{loja:e}):this.toastService.presentToast({detalhe:"Usu\xe1rio sem loja alocada",titulo:"N\xe3o h\xe1",duracao:l.m4.shortDuration,gravidade:l.kl.INFORMACAO})}showModal(e,t){var s=this;return(0,A.Z)(function*(){const a=yield s.modal.create({component:e,backdropDismiss:!1,cssClass:"modal-size-100",componentProps:t});return a.onDidDismiss().then(i=>{const{data:c}=i;s.isLoaded=!1,s.loadColaboradores(),!0===c&&s.toastService.presentToast({titulo:"Sucesso",detalhe:"Opera\xe7\xe3o bem sucedida!",duracao:l.m4.mediumDuration,gravidade:l.kl.SUCESSO})}),yield a.present()})()}};Ne.ctorParameters=()=>[{type:ke},{type:p.IN},{type:R.D},{type:te.W}],Ne=(0,d.gn)([(0,n.wA2)({selector:"app-colaborador-main",template:'<div class="card main-view h-full">\n\n  <ng-container *ngIf="isLoaded">\n    <p-dataView emptyMessage="Nada encontrado, experimente escolher outra carga" class="data-container" #dv\n      [lazy]="true" [value]="users.data" [paginator]="true" [rows]="users.meta.take"\n      [totalRecords]="users.meta.itemCount" [pageLinks]="users.meta.pageCount" (onLazyLoad)="paginar($event)"\n      filterBy="nome" layout="list">\n      <ng-template pTemplate="header">\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field  col-12 sm:col-6 xl:col-3">\n            <p-dropdown *ngIf="lojas" #dropdown_lojas id="loja_id" [options]="lojas.data" [filter]="true"\n              placeholder="Selecione" [virtualScroll]="true" [virtualScrollItemSize]="38" [lazy]="true" optionValue="id"\n              optionLabel="nome" filterBy="nome,codigo"\n              (onClear)="clearFilter($event)" (onChange)="changeLoja($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full">\n              <ng-template pTemplate="filter" let-options="options">\n                <div class="flex p-3">\n                  <div class="p-inputgroup" (click)="$event.stopPropagation()">\n                    <input #searchLojaInput type="text" pInputText placeholder="Procurar"\n                      (keyup.enter)="searchLoja(searchLojaInput)">\n                    <button pButton pRipple icon="pi pi-search" (click)="searchLoja(searchLojaInput)"></button>\n                    <button class="p-button-outlined" pButton pRipple icon="pi pi-times"\n                      (click)="clearLoja(searchLojaInput)"></button>\n                  </div>\n                </div>\n              </ng-template>\n              <ng-template pTemplate="loader" let-options="options">\n                <div class="flex align-items-center py-2 px-3" style="height: 38px">\n                  <p-skeleton width="50%" height="1rem"></p-skeleton>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="item">\n                <div>\n                  <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n                </div>\n              </ng-template>\n              <ng-template let-loja pTemplate="selectedItem">\n                <div>[{{ loja.codigo }}] {{ loja.nome}}</div>\n              </ng-template>\n            </p-dropdown>\n          </div>\n\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_filtro [options]="sortUsertatus" placeholder="Status Usu\xe1rio"\n              (onChange)="changeStatusUsuario($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n\n          <div class="field mb-2 col-12 sm:col-6 xl:col-3">\n            <p-dropdown #dropdown_filtro [options]="sortPessoaStatus" placeholder="Status Pessoa"\n              (onChange)="changeStatusPessoa($event)" (onClear)="clearFilter($event)" [showClear]="true"\n              styleClass="mb-2 md:mb-0 w-full"></p-dropdown>\n          </div>\n        </div>\n\n        <div class="flex grid formgrid p-fluid justify-content-between mb-2">\n          <div class="field col-12 sm:col-6 xl:col-3">\n            <button pButton pRipple class="sm:w-auto w-full p-button-outlined" icon="pi pi-times" label="Limpar filtros"\n              (click)="clearAllFilters($event, dropdown_lojas, dropdown_filtro)">\n            </button>\n          </div>\n          <div class="field col-12 sm:col-6 xl:col-3 text-right">\n            <button pButton pRipple class="sm:w-auto w-full " icon="pi pi-user-plus" label="Novo cadastro"\n              (click)="createNewUser()">\n            </button>\n          </div>\n        </div>\n\n        <div class="flex flex-column md:flex-row md:justify-content-center">\n          <span class="p-inputgroup mb-2 md:mb-0 mt-2 max-w-30rem\t">\n            <input class="w-full" type="search" pInputText [(ngModel)]="searchedNome"\n              [ngModelOptions]="{standalone: true}" placeholder="CPF, Email ou Nome" (keyup.enter)="search()">\n            <button type="button" pButton pRipple class="pi pi-search cursor-pointer p-button-outlined"\n              (click)="search()"></button>\n            <button type="button" pButton pRipple class="pi pi-times cursor-pointer p-button-outlined p-button-danger"\n              (click)="searchedNome = \'\'; search();"></button>\n          </span>\n        </div>\n\n      </ng-template>\n\n      <ng-template let-user pTemplate="listItem">\n        <div *ngIf="isLoaded" #templateGrid class="col-12">\n          <div class="data-list-item">\n            <div class="crop mb-2 md:mb-0 ">\n              <img class="border-circle border-2 border-primary" [src]="setUserImage(user)" [alt]="user.name" />\n            </div>\n            <div class="data-list-detail">\n              <div class="data-name">{{ user.nome }} ({{ user.cargo?.nome || \'Sem cargo definido\' }})</div>\n              <div class="data-description mt-2">CPF: {{ user.cpf | cpfMask }}</div>\n              <div class="data-description mt-1">Situa\xe7\xe3o: {{ user.status_pessoa }}</div>\n              <div class="data-description mt-1">Acesso: {{ user.status_user }}</div>\n\n              <div class="data-description mt-2">E-mail: {{ user.email }}</div>\n              <div *ngIf="user.email_alternativo" class="data-description mt-1">E-mail (alternativo): {{\n                user.email_alternativo }}</div>\n              <div class="data-description mt-1">Celular: {{ user.tel1 | phoneMask }}</div>\n              <div *ngIf="user.tel2" class="data-description mt-1">Celular (alternativo): {{ user.tel2 | phoneMask }}\n              </div>\n\n              <div class="data-description mt-2 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailLoja(user.loja)">\n                  Loja:\n                  {{ user.loja?.nome || \'N\xe3o h\xe1\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n              <div class="data-description mt-1 ">\n                <span class="cursor-pointer hover:text-primary" (click)="detailSuperior(user.nivel_superior)">\n                  Superior: {{ user.nivel_superior?.nome || \'N\xe3o h\xe1\' }}\n                  <i class="pi pi-external-link text-xs ml-1"></i>\n                </span>\n              </div>\n\n              <div class="mt-3">\n                <i class="pi pi-sitemap data-category-icon "></i>\n                <span class="data-category">Acesso: {{user.perfil?.nome || "Sem\n                  Perfil"}}</span>\n              </div>\n            </div>\n            <div class="data-list-action">\n              <button type="button" pButton icon="pi pi-cog" label="Op\xe7\xf5es"\n                (click)="selectedUser = user; editMenu.toggle($event)"></button>\n              <p-menu #editMenu appendTo="body" [popup]="true" [model]="editMenuItens"></p-menu>\n\n              <button pButton type="button" class="p-button-outlined" icon="pi pi-map" label="Endere\xe7o"\n                (click)="detalharEndereco(user)">\n              </button>\n            </div>\n          </div>\n        </div>\n      </ng-template>\n    </p-dataView>\n  </ng-container>\n\n  <ng-container *ngIf="contentError.hasError">\n    <app-content-error [erroCode]="contentError.code"></app-content-error>\n  </ng-container>\n\n\n  <p-dialog *ngIf="showStatusDialog" [(visible)]="showStatusDialog" [resizable]="false" [draggable]="false"\n    [modal]="true" [breakpoints]="{\'960px\': \'75vw\', \'640px\': \'100vw\'}" [style]="{width: \'40vw\', height: \'80%\'}">\n    <ng-template pTemplate="header">\n      <div class="flex align-items-center">\n        <div class="text-900 font-medium mb-3 text-xl">Alterando status</div>\n      </div>\n    </ng-template>\n    <div class="surface-card border-round shadow-2 p-4">\n      <p class="mt-0 mb-4 p-0 line-height-3">Acesso ao sistema: </p>\n      <p-dropdown [options]="sortUsertatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n        [(ngModel)]="updateStatusObj.status_user" [ngModelOptions]="{standalone: true}"\n        styleClass="mb-2 md:mb-0 w-full">\n      </p-dropdown>\n    </div>\n\n    <div class="surface-card border-round shadow-2 p-4 mt-2">\n      <p class="mt-0 mb-4 p-0 line-height-3">Situa\xe7\xe3o na corpora\xe7\xe3o: </p>\n      <p-dropdown [options]="sortPessoaStatus" emptyMessage="Nada dispon\xedvel" placeholder="Selecione"\n        [(ngModel)]="updateStatusObj.status_pessoa" [ngModelOptions]="{standalone: true}"\n        styleClass="mb-2 md:mb-0 w-full">\n      </p-dropdown>\n    </div>\n    <div class="flex justify-content-end mt-3 grid">\n      <div class="surface-border border-top-1 opacity-50 mb-1 col-12"></div>\n      <button class="" pButton pRipple label="Atualizar" (click)="updateStatus()"></button>\n    </div>\n  </p-dialog>\n</div>',styles:[""]})],Ne);let ot=class{};ot=(0,d.gn)([(0,n.LVF)({declarations:[P],imports:[b.ez,p.Pc,T.hJ,N.T,_.o,M.R],exports:[P]})],ot);let Qe=class{};Qe=(0,d.gn)([(0,n.LVF)({declarations:[Ne],imports:[b.ez,o.u5,o.UX,p.Pc,w.FI,X.QK,j.j,B.A,N.T,G.l,Z.x,K.F,J.$9,q.q,F.U,V.cc,E.Q,W.ON,z.kW,$.LU,j.j,H.S,T.hJ,D.O,Q.D,pe.f,_.o,Ke.a,Y.X,M.R,Ye.U,Je.S,ot],exports:[Ne]})],Qe);let Xe=class{};Xe=(0,d.gn)([(0,n.LVF)({declarations:[Ee],imports:[b.ez,o.u5,o.UX,p.Pc,w.FI,X.QK,j.j,Se.zz,xe.Iu,B.A,ye.nD,N.T,je.L$,Ie.WN,G.l,Z.x,K.F,J.$9,q.q,F.U,V.cc,E.Q,Ce._8,W.ON,z.kW,be.q,$.LU,j.j,H.S,T.hJ,D.O,Q.D,_.o,Y.X,pe.f,M.R],exports:[Ee]})],Xe);let Ge=class{};Ge=(0,d.gn)([(0,n.LVF)({declarations:[le],imports:[b.ez,o.u5,o.UX,p.Pc,w.FI,X.QK,j.j,Se.zz,xe.Iu,B.A,rt.O,ye.nD,N.T,je.L$,Ie.WN,G.l,Z.x,K.F,J.$9,q.q,F.U,V.cc,E.Q,Ce._8,W.ON,z.kW,be.q,$.LU,j.j,H.S,T.hJ,D.O,Q.D,_.o,Y.X,M.R],exports:[le]})],Ge);let Ze=class{};Ze=(0,d.gn)([(0,n.LVF)({declarations:[],imports:[b.ez,Qe,Xe,Ge],exports:[Qe,Xe,Ge]})],Ze);let nt=class{};nt=(0,d.gn)([(0,n.LVF)({declarations:[],imports:[b.ez,De,He,Ze],exports:[De,He,Ze]})],nt);let lt=class{};lt=(0,d.gn)([(0,n.LVF)({imports:[b.ez,o.u5,p.Pc,v.uH,_.o,nt,y],declarations:[x]})],lt)},94567:(Me,O,r)=>{r.d(O,{OL:()=>o,eX:()=>n,r6:()=>p});var n,v,b,d=r(46007);(v=n||(n={})).OPERANDO="OPERANDO",v.FECHADA_TEMPORARIAMENTE="FECHADA_TEMPORARIAMENTE",v.FECHADA_PERMANENTEMENTE="FECHADA_PERMANENTEMENTE",v.DELETADA="DELETADA",function(v){v.LOJA_FISICA="LOJA_FISICA",v.LOJA_DIGITAL="LOJA_DIGITAL",v.FILIAL="FILIAL",v.ARMAZEM="ARMAZEM",v.QUIOSQUE="QUIOSQUE",v.BOUTIQUE="BOUTIQUE",v.POP_UP_STORE="POP_UP_STORE",v.OUTLET="OUTLET",v.SHOWROOM="SHOWROOM",v.CONCEITO_STORE="CONCEITO_STORE",v.DEPARTAMENTO="DEPARTAMENTO",v.OUTRO="OUTRO"}(b||(b={}));const o=d.m.convertEnumToSelectItem(n),p=d.m.convertEnumToSelectItem(b)},42480:(Me,O,r)=>{r.d(O,{R:()=>Pe});var d=r(70655),n=r(98274),b=r(36895);let o=class{transform(x,..._e){if("string"==typeof x&&11==x.trim().length){let y=x.replace(/\D/g,"");return y=y.replace(/(\d{3})(\d)/,"$1.$2"),y=y.replace(/(\d{3})(\d)/,"$1.$2"),y=y.replace(/(\d{3})(\d{1,2})$/,"$1-$2"),y}return x}};o=(0,d.gn)([(0,n.E6H)({name:"cpfMask"})],o);let p=class{transform(x,..._e){return x}};p=(0,d.gn)([(0,n.E6H)({name:"cepMask"})],p);let v=class{transform(x,..._e){if(!x)return"";const y=x.substring(0,2),w=x.substring(2,3),E=x.substring(3,7),j=x.substring(7,11);return x.length<=2?`(${y})`:x.length<=3?`(${y})${w}`:x.length<=7?`(${y})${w} ${E}`:`(${y})${w} ${E}-${j}`}};v=(0,d.gn)([(0,n.E6H)({name:"phoneMask"})],v);let re=class{transform(x,..._e){if("string"==typeof x&&14===x.trim().length){let y=x.replace(/\D/g,"");return y=y.replace(/^(\d{2})(\d)/,"$1.$2"),y=y.replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3"),y=y.replace(/\.(\d{3})(\d)/,".$1/$2"),y=y.replace(/(\d{4})(\d)/,"$1-$2"),y}return x}};re=(0,d.gn)([(0,n.E6H)({name:"cnpjMask"})],re);let Pe=class{};Pe=(0,d.gn)([(0,n.LVF)({declarations:[o,p,v,re],imports:[b.ez],exports:[o,p,v,re]})],Pe)},67578:(Me,O,r)=>{r.d(O,{f:()=>b});var d=r(34057),n=r(35326);class b{static sanitizeCreate(p,v){return v.tel1=n.r.ClearSpecialCharacters(p.tel1),v.tel2=n.r.ClearSpecialCharacters(p.tel2),(!p.tel1||0==p.tel1?.length)&&(v.tel1=void 0),(!p.tel2||0==p.tel2?.length)&&(v.tel2=void 0),(!p.cpf||""==p.cpf)&&(v.cpf=void 0),(!p.email_alternativo||""==p.email_alternativo)&&(v.email_alternativo=void 0),v}static checkUpdateImagePermission(p){return p==d.u.GERENTE||p==d.u.ADMIN}}},35326:(Me,O,r)=>{r.d(O,{r:()=>d});class d{static checkIfEmail(b){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/gi.test(b)}static ClearSpecialCharacters(b){return!b||b.trim().length<=0?"":b.replace(/[^a-zA-Z0-9]/g,"").trim()}}}}]);